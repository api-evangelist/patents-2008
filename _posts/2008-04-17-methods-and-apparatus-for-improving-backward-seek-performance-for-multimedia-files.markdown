---

title: Methods and apparatus for improving backward seek performance for multimedia files
abstract: A multimedia player application is adapted to process multimedia data of one or more multimedia files (e.g. MPEG-4 files) to produce multimedia output data at an audio/video output device. A file allocation table (FAT) system is adapted to manage storage of these multimedia files. An interface process is adapted to maintain a current address pointer for a current position in a multimedia file being played, a backward seek address pointer for a preceding position in the multimedia file between the current position and the beginning of the multimedia file, and an index table address pointer for an index table of the multimedia file. The current and backward seek address pointers are regularly updated while the multimedia file is being played, and the backward seek address pointer is updated as a function of the current address pointer. Advantageously, backward seek times for backward seeks in the multimedia file are reduced.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08090718&OS=08090718&RS=08090718
owner: Research In Motion Limited
number: 08090718
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20080417
---
The present disclosure relates generally to methods and apparatus for improving backward seek performance for multimedia files and more particularly to improving the backward seek performance for combined audio and video files e.g. MPEG 4 or MP4 files which are managed by a file allocation table FAT system.

Some multimedia files such as Moving Pictures Experts Group MPEG 4 or MP4 files contain compressed data of different types e.g. combined audio and video data which are stored in an interleaved or otherwise scattered non consecutive fashion. A file allocation table FAT system employing a single link table which is especially suitable when conservation of memory is important e.g. memory in a small portable electronic device may be utilized to manage and access data in such multimedia file.

Poor i.e. slow performance has been observed for a backwards seek of data during play of such multimedia file as a search from the beginning of the multimedia file must be performed in order to get the correction position. This performance worsens as the file size and the current position of play increases.

In accordance with the present disclosure a multimedia player application is adapted to process multimedia data of one or more multimedia files to produce multimedia output data at an audio video output device. Each multimedia file is fragmented into a plurality of non contiguous data blocks in memory. A file allocation table system is adapted to manage storage of these multimedia and maintain a file allocation table with address entries for listing the sequential order of the data blocks of the multimedia files. An interface process is adapted to maintain a current address pointer which corresponds to a current position in the multimedia file being played by the multimedia player application and also maintain a backward seek address pointer which corresponds to a preceding position in the multimedia file between the current position and the beginning of the multimedia file. For each one of a plurality of multimedia data requests for multimedia data from the multimedia player application the interface process is further adapted to receive a multimedia data request for multimedia data which includes a requested offset value to the requested multimedia data in the multimedia file if the requested offset value corresponds to a position in the multimedia file that follows the current position submit to the file system a corresponding data request for the requested multimedia data which includes the current address pointer and an offset value and receive the requested multimedia data from the file system in response if the requested offset value corresponds to a position in the multimedia file that precedes the current position submit to the file system a corresponding data request for the requested multimedia data which includes the backward seek address pointer and an offset value and receive the requested multimedia data from the file system in response and submit the requested multimedia data to the multimedia player module in response to the multimedia data request. The current and backward seek address pointers are regularly updated while the multimedia file is being played and the backward seek address pointer is updated as a function of the current address pointer. Advantageously backward seek times for backward seeks in the multimedia file are reduced.

To illustrate an exemplary environment within which the present techniques may be utilized is a block diagram of a communication system which includes a mobile communication device which communicates through a wireless communication network . In the embodiment of wireless communication network is configured in accordance with Global Systems for Mobile GSM and General Packet Radio Service GPRS technologies however any suitable type of network communication protocols may be utilized. For example the network may be based on code division multiple access CDMA or other suitable technologies. As another example the network may be based on an Integrated Dispatch Enhanced Network iDEN which is a high capacity digital trunked radio system providing integrated voice and data services. On the other hand mobile communication device may alternatively be a portable electronic device which does not provide any wireless communication capabilities through any wireless network e.g. an audio video A V player a PDA etc. .

Mobile communication device may include a visual display a keyboard and perhaps one or more auxiliary user interfaces UI each of which are coupled to a controller . Controller is also coupled to RF transceiver circuitry and an antenna . Typically controller is embodied as a central processing unit CPU which runs operating system software in a memory component not shown . Controller will normally control overall operation of mobile communication device whereas signal processing operations associated with communication functions are typically performed in RF transceiver circuitry . Controller interfaces with device display to display received information stored information user inputs and the like. Keyboard which may be a telephone type keypad or full alphanumeric keyboard is normally provided for entering data for storage in mobile communication device information for transmission to wireless communication network a telephone number to place a telephone call commands to be executed on mobile communication device and possibly other or different user inputs. Finally controller may embody all or part of the functionality of a multimedia system as described later in relation to where keyboard and or display which may be a touch screen display are utilized for user interface processing.

Mobile communication device sends communication signals to and receives communication signals from wireless communication network over a wireless link via antenna . RF transceiver circuitry performs functions similar to those of base station and base station controller including for example modulation demodulation and possibly encoding decoding and encryption decryption. It is also contemplated that RF transceiver circuitry may perform certain functions in addition to those performed by base station controller . It will be apparent to those skilled in art that RF transceiver circuitry will be adapted to particular wireless communication network or networks in which mobile communication device is intended to operate.

Being small e.g. handheld in size and portable in nature mobile communication device includes a battery interface for receiving one or more rechargeable batteries . Battery provides electrical power to electrical circuitry in mobile communication device and battery interface provides for a mechanical and electrical connection for battery . Battery interface is coupled to a regulator which regulates power to the device. When mobile communication device is fully operational an RF transmitter of RF transceiver circuitry is typically keyed or turned on only when it is sending to network and is otherwise turned off to conserve resources. Similarly an RF receiver of RF transceiver circuitry is typically periodically turned off to conserve power until it is needed to receive signals or information if at all during designated time periods.

Mobile communication device operates using a Subscriber Identity Module SIM which is connected to or inserted in mobile communication device at a SIM interface . SIM is used to identify a user or subscriber of mobile communication device and to personalize the device among other things. Without SIM the mobile terminal is not fully operational for communication through wireless communication network . By inserting SIM into mobile communication device a user can have access to any and all of his her subscribed services. SIM generally includes a processor and memory for storing information. Since SIM is coupled to SIM interface it is coupled to controller through communication lines . In order to identify the subscriber SIM contains some user parameters such as an International Mobile Subscriber Identity IMSI . An advantage of using SIM is that users are not necessarily bound by any single physical mobile communication device. SIM may store additional user information for the mobile communication device as well including datebook or calendar information and recent call information. Preferably mobile communication device includes an alternative or additional memory card and memory card interface e.g. for a Secure Digital or SD card which may store one or more multimedia files of a multimedia system as will be described later in relation to .

Mobile communication device may be embodied as and or referred to as a single unit such as a data communication device a cellular telephone a multiple function communication device with data and voice communication capabilities a personal digital assistant PDA an audio video A V player or a computer incorporating an internal modem. Alternatively mobile communication device may be a multiple module unit comprising a plurality of separate components including but in no way limited to a computer or other device connected to a wireless modem. In particular for example in the block diagram of RF transceiver circuitry and antenna may be implemented as a radio modem unit that may be inserted into a port on a laptop computer. In this case the laptop computer would include display keyboard one or more auxiliary UIs and controller embodied as the computer s CPU. It is also contemplated that a computer or other equipment not normally capable of wireless communication may be adapted to connect to and effectively assume control of RF transceiver circuitry and antenna of a single unit device such as one of those described above. Such a mobile communication device may have a more particular implementation as described later in relation to mobile station of .

Mobile communication device communicates in and through wireless communication network . In the embodiment of wireless communication network is configured in accordance with GSM and GPRS technologies. Wireless communication network includes a base station controller BSC with an associated tower station a Mobile Switching Center MSC a Home Location Register HLR a Serving General Packet Radio Service GPRS Support Node SGSN and a Gateway GPRS Support Node GGSN . MSC is coupled to BSC and to a landline network such as a Public Switched Telephone Network PSTN . SGSN is coupled to BSC and to GGSN which is in turn coupled to a public or private data network such as the Internet . HLR is coupled to MSC SGSN and GGSN .

Station is a transceiver station and station and BSC are together referred to herein as the transceiver equipment. This fixed transceiver equipment provides wireless communication network coverage for a particular coverage area commonly referred to as a cell . The transceiver equipment transmits communication signals to and receives communication signals from mobile devices within its cell via station . The transceiver equipment normally performs such functions as modulation and possibly encoding and or encryption of signals to be transmitted to the mobile communication device in accordance with particular usually predetermined communication protocols and parameters under control of its controller. The transceiver equipment similarly demodulates and possibly decodes and decrypts if necessary any communication signals received from mobile communication device within its cell. Communication protocols and parameters may vary between different networks. For example one network may employ a different modulation scheme and operate at different frequencies than other networks.

For all mobile devices registered with a network operator permanent data such as mobile communication device user s profile as well as temporary data such as the mobile device s current location are stored in HLR . In case of a voice call to mobile communication device HLR is queried to determine the current location of mobile communication device . A Visitor Location Register VLR of MSC is responsible for a group of location areas and stores the data of those mobile communication devices that are currently in its area of responsibility. This includes parts of the permanent mobile device data that have been transmitted from HLR to the VLR for faster access. However the VLR of MSC may also assign and store local data such as temporary identifications. Optionally the VLR of MSC can be enhanced for more efficient co ordination of GPRS and non GPRS services and functionality e.g. paging for circuit switched calls which can be performed more efficiently via SGSN and combined GPRS and non GPRS location updates .

Serving GPRS Support Node SGSN is at the same hierarchical level as MSC and keeps track of the individual locations of mobile communication devices. SGSN also performs security functions and access control. Gateway GPRS Support Node GGSN provides interworking with external packet switched networks and is connected with SGSNs such as SGSN via an IP based GPRS backbone network. SGSN performs authentication and cipher setting procedures based on the same algorithms keys and criteria as in existing GSM. In conventional operation cell selection may be performed autonomously by mobile communication device or by the fixed transceiver equipment instructing mobile communication device to select a particular cell. Mobile communication device informs wireless communication network when it reselects another cell or group of cells known as a routing area.

In order to access GPRS services mobile communication device first makes its presence known to wireless communication network by performing what is known as a GPRS attach . This operation establishes a logical link between mobile communication device and SGSN and makes mobile communication device available to receive for example pages via SGSN notifications of incoming data or SMS messages over GPRS. In order to send and receive GPRS data mobile communication device assists in activating the packet data address that it wants to use. This operation makes mobile communication device known to GGSN interworking with external data networks can thereafter commence. User data may be transferred transparently between mobile communication device and the external data networks using for example encapsulation and tunneling. Data packets are equipped with GPRS specific protocol information and transferred between mobile communication device and GGSN .

Note that mobile communication device may receive one or more multimedia files via wireless communication network in a file format or as multimedia data in a streaming format as requested.

Mobile station will normally incorporate a communication subsystem which includes a receiver a transmitter and associated components such as one or more preferably embedded or internal antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . Communication subsystem is analogous to RF transceiver circuitry and antenna shown in . As will be apparent to those skilled in field of communications particular design of communication subsystem depends on the communication network in which mobile station is intended to operate.

Mobile station may send and receive communication signals over the network after required network registration or activation procedures have been completed. Signals received by antenna through the network are input to receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection and like and in example shown in analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by DSP . These DSP processed signals are input to transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission over communication network via antenna . DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in receiver and transmitter may be adaptively controlled through automatic gain control algorithms implemented in DSP .

Network access is associated with a subscriber or user of mobile station and therefore mobile station requires a Subscriber Identity Module or SIM card to be inserted in a SIM interface in order to operate in the network. SIM includes those features described in relation to . Mobile station is a battery powered device so it also includes a battery interface for receiving one or more rechargeable batteries . Such a batter provides electrical power to most if not all electrical circuitry in mobile station and battery interface provides for a mechanical and electrical connection for it. The battery interface is coupled to a regulator not shown which provides a regulated voltage V to all of the circuitry.

Mobile station includes a microprocessor which is one implementation of controller of which controls overall operation of mobile station . Communication functions including at least data and voice communications are performed through communication subsystem . Microprocessor also interacts with additional device subsystems such as a display a flash memory a random access memory RAM auxiliary input output I O subsystems a serial port a keyboard a speaker a microphone a short range communications subsystem and any other device subsystems generally designated at . Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions. Notably some subsystems such as keyboard and display for example may be used for both communication related functions such as entering a text message for transmission over a communication network and device resident functions such as a calculator or task list. Operating system software used by microprocessor is preferably stored in a persistent store such as flash memory which may alternatively be a read only memory ROM or similar storage element not shown . Flash memory may also store one or more multimedia files. Those skilled in the art will appreciate that the operating system specific device applications or parts thereof may be temporarily loaded into a volatile store such as RAM .

Microprocessor in addition to its operating system functions preferably enables execution of software applications on mobile station . A predetermined set of applications which control basic device operations including at least data and voice communication applications will normally be installed on mobile station during its manufacture. This also includes the software for executing the multimedia processing techniques of the present disclosure. More particularly microprocessor may embody all or part of the functionality of a multimedia system as described later in relation to where the keyboard and or display which may be a touch screen display are utilized for user interface processing.

A preferred application which is loaded onto mobile station may be a personal information manager PIM application having the ability to organize and manage data items relating to e mail messages and voicemail messages as well as calendar data. Naturally one or more memory stores are available on mobile station and SIM to facilitate storage of PIM data items and other information. The PIM application preferably has the ability to send and receive data items via the wireless communication network. PIM data items may be seamlessly integrated synchronized and updated via the wireless communication network with the mobile station user s corresponding data items stored and or associated with a host computer system thereby creating a mirrored host computer on mobile station with respect to such items. This is especially advantageous where the host computer system is the mobile station user s office computer system. Additional applications may also be loaded onto mobile station through network an auxiliary I O subsystem serial port short range communications subsystem or any other suitable subsystem and installed by a user in RAM or preferably a non volatile store not shown for execution by microprocessor .

In a data communication mode a received signal such as a text message e.g. a short message service or SMS message an e mail message or web page download will be processed by communication subsystem and input to microprocessor . Microprocessor will preferably further process the signal for output to display or alternatively to auxiliary I O device . A user of mobile station may also compose data items such as e mail messages for example using keyboard in conjunction with display and possibly auxiliary I O device . Keyboard is preferably a complete alphanumeric keyboard and or telephone type keypad. These composed items may be transmitted over a communication network through communication subsystem . For voice communications the overall operation of mobile station is substantially similar except that the received signals would be output to speaker and signals for transmission would be generated by microphone . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on mobile station . Although voice or audio signal output is preferably accomplished primarily through speaker display may also be used to provide an indication of the identity of a calling party duration of a voice call or other voice call related information as some examples.

Serial port in is normally implemented in a personal digital assistant PDA type communication device for which synchronization with a user s desktop computer is a desirable albeit optional component. Serial port enables a user to set preferences through an external device or software application and extends the capabilities of mobile station by providing for information or software downloads to mobile station other than through a wireless communication network. The alternate download path may for example be used to load an encryption key onto mobile station through a direct and thus reliable and trusted connection to thereby provide secure device communication.

Short range communications subsystem of is an additional optional component which provides for communication between mobile station and different systems or devices which need not necessarily be similar devices. For example subsystem may include an infrared device and associated circuits and components or a Bluetooth communication module to provide for communication with similarly enabled systems and devices. Bluetooth is a registered trademark of Bluetooth SIG Inc.

As shown in the plurality of keys of keypad include a plurality of telephone digit keys 0 1 2 3 4 5 6 7 8 9 and as well as control keys including a SEND key having a telephone handset icon inscribed thereon and an END key having a telephone handset hang up icon inscribed thereon . SEND and END keys and are mechanical switches of the mobile station which are detectable at switch inputs of the mobile station as are the others. In general SEND key is used by the user for initiating a telephone call from mobile station through the wireless communication network and END key is used by the user for terminating the telephone call. SEND and END keys and are carried and exposed on a front side of housing . Note that SEND and END keys and as well as any other keys may alternatively be visual objects which are displayed in visual display and detectable to the touch if visual display is a touch screen display or other similar input device.

Mobile station of also includes an object viewing selection mechanism for use with visual display . When mobile station includes a multimedia system e.g. the object viewing selection mechanism as well as other additional or alternative keys buttons or objects may utilized to provide user input requests to the multimedia player module. In the present embodiment the object viewing selection mechanism of mobile station is a scroll wheel . Scroll wheel is positioned on a right hand side of housing . Scroll wheel generally includes a circular disc which is rotatable about a fixed axis of housing and may be rotated by the user s index finger or thumb. See the directions indicated by a rotation arrow of scrollwheel shown in . When the information or message is being partially displayed an upwards rotation of scrollwheel causes an upwards scrolling such that visual display presents viewing of an upper portion of the information or message. Similarly a downwards rotation of scrollwheel causes a downwards scrolling such that visual display presents viewing of a lower portion of the information or message. In this embodiment scrollwheel is mounted along a fixed linear axis such that the user can depress scrollwheel inwards toward housing e.g. with the user s index finger or thumb for selection of information. See the directions indicated by an arrow of scrollwheel shown in . Such lateral movement inwards toward the housing is detectable by the processor of the mobile station as a switch input actuation or depression of the scrollwheel key . Although scrollwheel of has been shown and described as one mechanism for use in viewing and selecting visually displayed objects or information any suitable viewing selection mechanism may be utilized for the present user interface techniques to be described such as UP and DOWN keys a mouse trackball and cursor mechanism or a touch screen display mechanism.

Each multimedia file has compressed data of different types e.g. combined audio and video data which are stored in the memory in an interleaved or otherwise scattered non consecutive fashion. Each multimedia file may be said to be fragmented into a plurality of non contiguous data blocks in the memory. In this embodiment each multimedia file is formatted in accordance with an MPEG 4 format or greater future compatible version format. The memory which stores multimedia file may be any suitable memory such as flash memory e.g. flash memory of and or may be part of a removable memory card such as a Secure Digital SD memory card of the mobile communication device. Multimedia data from multimedia file may be temporarily stored in a temporary memory such as a random access memory e.g. RAM of prior to processing. Note that the term multimedia data is meant as any data contained within multimedia file whether video audio or index table or other information.

MPEG 4 is a collection of methods defining compression of audio and visual AV digital data. It was introduced in late and designated a standard for a group of audio and video coding formats and related technology agreed upon by the ISO IEC Moving Picture Experts Group MPEG under the formal standard ISO IEC 14496. Uses of MPEG 4 include compression of AV data for web streaming media and CD distribution voice telephone videophone and broadcast television applications. MPEG 4 actually consists of several standards referred to as parts including Parts 1 through 23 for example. Profiles are also defined within the individual parts and an implementation of any particular part is ordinarily not or not necessarily an implementation of an entire part.

File system module manages the storage and access to data in multimedia file . File system module has a file allocation table with address entries for listing a sequential order of the data blocks of the multimedia file . The file allocation table of file system module may be a single link or single chain table as opposed to a double link or double chain table which would require more memory space. File system module may be or be based upon a file allocation table FAT system originally developed by Microsoft Corporation of Redmond Wash. U.S.A. In one embodiment file system module may be or be compatible with FAT16 which supports cluster or grouping counts in a 16 bit field.

Multimedia player module is adapted to play the multimedia file as well as facilitate the control over such playing in response to user input requests via a user interface. The user input requests may be received via a graphical user interface GUI provided on a visual display e.g. visual display of . The user input requests may correspond to standard media processing functions which include play fast forward or seek forward rewind or seek backward pause and stop as examples. Multimedia player module typically includes a multimedia file parser an analyzer and a decoder decompressor . In response to any given user input request multimedia player module is adapted to submit a multimedia data request for data in multimedia file which corresponds to the request. In response to the submitted multimedia data request multimedia player module receives compressed data e.g. compressed video or audio data from multimedia file and decompresses and otherwise processes such data for producing the appropriate video or audio signals. When multimedia file is being played this processing is regular repetitive and continuous.

In the present embodiment multimedia player module is a component e.g. a standard off the shelf type component which provides the multimedia data requests in accordance with a predetermined standard protocol or format. The multimedia data request of this predetermined standard protocol or format utilizes a requested position e.g. a requested offset from the beginning of multimedia file and a requested length e.g. a requested number of bytes . In one example multimedia player module is or includes a Qtv decoder made available by Qualcomm Incorporated of San Diego Calif. U.S.A. Qtv is a trademark of Qualcomm Incorporated.

Interface module is adapted to interface between multimedia player module and file system module . Interface processing with use of interface module is appropriate since multimedia player module is not readily compatible to interface with file system module . Multimedia player module is adapted to utilize the predetermined standard protocol or format for the multimedia data request e.g. a requested offset from the beginning of multimedia file and a requested number of bytes whereas file system module may also utilize its own predetermined standard protocol or format for data processing. For processing efficiency and enhanced performance interface module is adapted to utilize multiple address pointers and techniques as described in relation to and .

In each video data block of multimedia file is denoted with V followed by number and each audio data block of multimedia file is denoted with a A followed by a number. An index table of multimedia file is denoted as I . As shown in its original format i.e. far left in multimedia file has its compressed video and audio data in data blocks provided in the following order V A V V A V V A V A V V A V and I in the order depicted. On the other hand as shown as stored and managed by file system module of middle of the data blocks of multimedia file are rearranged and provided in an alternative order V V V A V A V V I V V A A A and V.

File allocation table i.e. far right in is a single link table which is utilized to manage and access data in multimedia file for file system module . File allocation table has a singly linked list of address entries for listing the proper sequential order of the data blocks of the multimedia file as indicated by the arrows which point to the data blocks of multimedia file . The file system module is adapted to find requested multimedia data in response to a data request by examining each address in the file allocation table starting from an address pointer provided as part of or prior to the request until the requested multimedia data is reached. Without use of any special techniques when a backward seek of data is requested during play of multimedia file a search from the beginning of the multimedia file needs to be performed through file allocation table in order to get the correction position this takes a long time and the performance worsens as the file size and the current position of play increases.

The current address pointer Iis set to correspond to the current position of play in multimedia file and is utilized primarily for requests via the file system module for typical play where possible or practical . On the other hand backward seek address pointer Iis set to correspond to a backward seek position i.e. as expected or anticipated relative the current position of play in multimedia file and is utilized primarily for requests via the file system module for backward seek where possible or practical . Index table address pointer Iis set to correspond to the position of the index table expected or anticipated or actual and is utilized primarily for requests via the file system module for accessing the index table of multimedia file . If none of the address pointers I I or Iare appropriate for use for accessing data the file start address pointer Iwhich corresponds to the beginning of multimedia file is utilized.

Preferably a file handle duplication API Application Programming Interface from the file system module is utilized for the creation and updating of the address pointers. Whenever the current address pointer Iis updated from a current multimedia request e.g. from a multimedia request for continuing the playing of video audio its corresponding backward seek address pointer Iis updated as a function of the updated current address pointer I. On the other hand file start address pointer Iand index table address pointer Iremain fixed and constant after initialization for steady state processing.

In one embodiment the index table address pointer Iis initialized or set at a predetermined fixed percentage P of the file length L of multimedia file . This is an estimated expected or anticipated location where the index table location will be. The predetermined percentage may be for example 99 of the file length but any suitable range is possible e.g. a range of 95 99 . Thus the file length L of multimedia file is obtained by the interface module and a calculation of I P L is performed for setting the index table address pointer I. In another embodiment the index table address pointer Iis initialized or set based on a location of the index table identified from header information in multimedia file . In particular upon initialization and loading the interface module identifies an stsz box from multimedia file and reads header information from the stsz box for obtaining the location of the index table and setting the index table address pointer I. The index table address pointer Ithen remains fixed and constant after initialization for steady state processing associated with multimedia file .

Each depiction in B and C illustrates the file length L of the multimedia file as well as the current updated position of each address pointer I Iand Irelative to the file length at different points in time during play of multimedia file . reveals the pointers being further along than the pointers in and reveals the pointers being further along than the pointers in .

Beginning at a start block of the interface module receives a multimedia data request for multimedia data which includes a requested offset value to the requested multimedia data in the multimedia file step of . The interface module identifies from the request whether the request is for video audio or the index table data step of . If the request is for video data a processing branch to step is performed. If the request is for audio data a processing branch to step is performed. Finally if the request is for index table data a processing branch to step is performed. Processing in relation to occurs continually for each one of a plurality of consecutive multimedia data requests.

In step video processing branch it is tested whether the requested offset value corresponds to a position in the multimedia file that follows i.e. is greater than the current position. If so a corresponding data request for the requested multimedia video data is submitted to the file system module which includes the current address pointer for video and an offset value step of . The requested multimedia video data from the file system module is received in response step of . The backward seek pointer address for video is then updated as a function of the updated current address pointer for video. On the other hand if the requested offset value corresponds to a position in the multimedia file that precedes the current position as tested in step a backward seek is being requested and the method proceeds to step .

In step it is tested whether the requested offset value corresponds to a position that follows i.e. is greater than the backward seek position corresponding to the backward seek address pointer for video. If true in step a corresponding data request for the requested multimedia video data is submitted to the file system module which includes the backward seek address pointer for video and an offset value step of . The requested multimedia video data from the file system module is received in response step of . If not true in step however a corresponding data request for the requested multimedia video data is submitted to the file system module which includes a file start address pointer and an offset value step of . The requested multimedia video data from the file system module is received in response step of . The current pointer address for video is then updated per the backward seek request for video and the backward seek pointer address for video is updated as a function of this updated current address pointer for video. After step the requested multimedia video data is submitted to the multimedia player module in response to the initial request.

In step audio processing branch it is tested whether the requested offset value corresponds to a position in the multimedia file that follows i.e. is greater than the current position. If so a corresponding data request for the requested multimedia audio data is submitted to the file system module which includes the current address pointer for audio and an offset value step of . The requested multimedia audio data from the file system module is received in response step of . The backward seek pointer address for video is then updated as a function of the updated current address pointer for video. On the other hand if the requested offset value corresponds to a position in the multimedia file that precedes the current position as tested in step a backward seek is being requested and the method proceeds to step .

In step it is tested whether the requested offset value corresponds to a position that follows i.e. is greater than the backward seek position corresponding to the backward seek address pointer for audio. If true in step a corresponding data request for the requested multimedia audio data is submitted to the file system module which includes the backward seek address pointer for audio and an offset value step of . The requested multimedia audio data from the file system module is received in response step of . If not true in step however a corresponding data request for the requested multimedia audio data is submitted to the file system module which includes the file start address pointer and an offset value step of . The requested multimedia audio data from the file system module is received in response step of . The current pointer address for audio is then updated per the backward seek request for audio and the backward seek pointer address for audio is updated as a function of this updated current address pointer for audio. After step the requested multimedia audio data is submitted to the multimedia player module in response to the initial request.

In step index table processing branch a data request for the index table data is submitted to the file system module which includes the index table pointer. The requested index table data from the file system module is received in response step of . The current and backward seek pointer addresses are updated as needed. After step the requested index table data is submitted to the multimedia player module in response to the initial request.

As described above each backward seek address pointer is updated as a function of its corresponding updated current address pointer. In general the intent is to utilize some means to best predict or guess where the anticipated or expected backward seek position might start. The backward seek address pointer may be updated to maintain a fixed length or distance from the current address pointer or as a percentage of the current address pointer e.g. 90 or between a range of 50 95 or any suitable range as examples. Preferably the backward seek address pointer is updated based on the following relation where Iis the backward seek address pointer Iis the current address pointer and K is a constant value. Most preferably the backward seek address pointer is updated based on the following relation where Iis the backward seek address pointer Iis the current address pointer and the golden ratio or 1 5 2 . The golden ratio sometimes referred to as the golden proportion value in mathematics may be rounded to 0.618 or even 0.62 or 0.6 if deemed appropriate for example.

In a further more detailed embodiment the address pointers are updated as follows. For the case where the requested position R is greater than the position corresponding to the current address index I or

Thus methods and apparatus for improving backward seek performance for multimedia files have been described. In one illustrative embodiment a multimedia player application is adapted to process multimedia data of one or more multimedia files to produce multimedia output data at an audio video output device. Each multimedia file is fragmented into a plurality of non contiguous data blocks in memory. A file allocation table system is adapted to manage storage of these multimedia and maintain a file allocation table with address entries for listing the sequential order of the data blocks of the multimedia files. An interface process is adapted to maintain a current address pointer which corresponds to a current position in the multimedia file being played by the multimedia player application and also maintain a backward seek address pointer which corresponds to a preceding position in the multimedia file between the current position and the beginning of the multimedia file. For each one of a plurality of multimedia data requests for multimedia data from the multimedia player application the interface process is further adapted to receive a multimedia data request for multimedia data which includes a requested offset value to the requested multimedia data in the multimedia file if the requested offset value corresponds to a position in the multimedia file that follows the current position submit to the file system a corresponding data request for the requested multimedia data which includes the current address pointer and an offset value and receiving the requested multimedia data from the file system in response if the requested offset value corresponds to a position in the multimedia file that precedes the current position submit to the file system a corresponding data request for the requested multimedia data which includes the backward seek address pointer and an offset value and receiving the requested multimedia data from the file system in response and submit the requested multimedia data to the multimedia player module in response to the multimedia data request. Advantageously backward seek times for backward seeks in the multimedia files are reduced.

The above described embodiments of the present disclosure are intended to be examples only. Those of skill in the art may effect alterations modifications and variations to the particular embodiments without departing from the scope of the application. The invention described herein in the recited claims intends to cover and embrace all suitable changes in technology.

