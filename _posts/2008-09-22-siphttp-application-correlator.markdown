---

title: SIP-HTTP application correlator
abstract: Systems and methods according to the present invention facilitate communications between devices which utilize different signaling protocols. A gateway can analyze incoming messages, in a first protocol such as SIP, to identify an application instance to which the messages should be routed. The messages can then be converted into another protocol and forwarded to the identified application.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08831032&OS=08831032&RS=08831032
owner: Telefonaktiebolaget L M Ericsson (Publ)
number: 08831032
owner_city: Stockholm
owner_country: SE
publication_date: 20080922
---
This application is related to and claims priority from U.S. Provisional Patent Application Ser. No. 61 033 872 filed on Mar. 5 2008 entitled SIP HTTP Application Correlator and U.S. Provisional Patent Application Ser. No. 61 040 219 filed on Mar. 28 2008 entitled Notification Framework for Third Party Notifications the disclosures of both of which are incorporated here by reference.

As the level of technology increases the options for communications have become more varied. For example in the last 30 years in the telecommunications industry personal communications have evolved from a home having a single rotary dial telephone to a home having multiple telephone cable and or fiber optic lines that accommodate both voice and data. Additionally cellular phones and Wi Fi have added a mobile element to communications. Similarly in the entertainment industry 30 years ago there was only one format for television and this format was transmitted over the air and received via antennas located at homes. This has evolved into both different standards of picture quality such as standard definition TV SDTV enhanced definition TV EDTV and high definition TV HDTV and more systems for delivery of these different television display formats such as cable and satellite. Additionally services have grown to become overlapping between these two industries. As these systems continue to evolve in both industries the service offerings will continue to merge and new services can be expected to be available for a consumer. Also these services will be based on the technical capability to process and output more information for example as seen in the improvements in the picture quality of programs viewed on televisions and therefore it is expected that service delivery requirements will continue to rely on more bandwidth being available throughout the network including the last mile to the end user.

Another related technology that impacts both the communications and entertainment industries is the Internet. One protocol that has been used with the Internet since the early 1990s is the Hyper Text Transfer Protocol HTTP . This protocol is a transaction based protocol which was initially designed primarily for accessing Hyper Text Markup Language HTML pages and was not necessarily designed to handle the physical structures of the Internet and associated communication streams which have evolved to handle an increased flow of data. For example servers have more memory than ever before communications links exist that have a higher bandwidth than in the past processors are faster and more capable and protocols exist to take advantage of these elements. As consumers usage of the Internet expands service companies have turned to the Internet and other Internet Protocol IP networks as a mechanism for providing traditional services. Evolutions to the HTTP e.g. HTTP 1.1 have improved its capabilities in this regard and various hardware vendors are familiar with integrating HTTP with their equipment. Newer services now exist which take advantage of previous improvements including for example IP television IPTV referring to systems or services that deliver television programs over a network using IP data packets video on demand VOD voice over IP VoIP and other web related services received singly or bundled together.

To accommodate the new and different ways in which IP networks are being used to provide various services new network architectures are being developed and standardized. IP Multimedia Subsystem IMS is an architectural framework utilized for delivering IP multimedia services to an end user. The IMS architecture has evolved into a service independent topology which uses IP protocols e.g. Session Initiation Protocol SIP signaling which operates in a peer to peer fashion to provide a convergence mechanism for disparate systems. In part this is accomplished via the provision of a horizontal control layer which isolates the access network from the service layer. Among other things IMS architectures may provide a useful platform for the rollout of IPTV systems and services.

Accordingly exemplary embodiments described below address the need for network entities and methods which facilitate communications between devices which utilize different signaling protocols.

Systems and methods according to the present invention address this need and others by providing techniques which facilitate communications between devices which utilize different protocols.

According to exemplary embodiments a method for dynamically correlating application information between an Internet Protocol IP Multimedia Subsystem IMS network and a non IMS node includes receiving at a gateway a first message using a first signaling protocol from the IMS network reading information from the first message correlating the information with previously stored information to determine which one of a plurality of applications running on the non IMS node is associated with the first message and transmitting a second message towards the non IMS node using a second signaling protocol which is different from the first signaling protocol wherein the second message includes information associated with the one of a plurality of applications running on the non IMS node which is associated with the first message

According to another exemplary embodiment a gateway device includes a communication interface for transmitting and receiving messages wherein a first received message using a first signaling protocol includes information associated with an application a memory for storing information which includes application identifications IDs Uniform Resource Locators URLs default information and IMS Communication Service Identifiers ICSIs and a processor for correlating the first received message using the first signaling protocol with the stored information to determine a desired application to generate a second message using a second signaling protocol different from the first signaling protocol wherein the second message using a second signaling protocol includes information associated with the application that allows the non IMS node to identify the desired application from amongst a plurality of applications executing on the non IMS node.

The following detailed description of the exemplary embodiments refers to the accompanying drawings. The same reference numbers in different drawings identify the same or similar elements. Also the following detailed description does not limit the invention. Instead the scope of the invention is defined by the appended claims.

Hyper Text Transfer Protocol HTTP and Session Initiation Protocol SIP are protocols which can be used in support of the delivery of services over a network or networks. In some cases hardware vendors e.g. manufacturers of Internet Protocol television IPTV terminal functions ITFs and the like may use HTTP in their products whereas service providers which use the Internet Protocol Multimedia Subsystem IMS network architecture for delivery of services e.g. IPTV may use Session Initiation Protocol SIP in their products. HTTP is a transaction based protocol whereas SIP is a session based protocol which allows communications between devices which have SIP endpoints. While systems which use HTTP are capable of receiving some IMS associated services e.g. using HTTP signaling for transporting IPTV signaling these systems are typically not capable of utilizing certain protocols that are used on newer architectures such as SIP which is utilized on the afore mentioned IMS network architecture. Devices using SIP signaling and devices which use HTTP signaling will need an interface for example an IMS gateway for transferring information from one protocol to the other for further transportation. This concept can be seen at a high level with respect to the exemplary components shown in .

According to exemplary embodiments as shown in ITF can be running multiple applications e.g. browser based application browser based application and native based application as well as multiple instances of the same application e.g. browser based application instance and browser based application instance . Brower based applications can operate in a distributed application environment DAE and include for example such applications as presence and chat messaging. Native based applications can operate in ITF embedded applications such as registration and profile management. However these application examples associated here with both the browser based and native based are purely illustrative and it will be understood by those skilled in the art that nothing restricts an application from being developed as either browser based or native based. Also as shown in IMS gateway receives SIP messages which include information that possibly pertains to one of the applications running in ITF . IMS gateway forwards this information as notifications to the ITF where the notifications arrive at the desired applications as described below.

Exemplary IMS gateway will now be described with respect to . The IMS gateway matches incoming SIP messages from the IMS network with applications running on ITF . IMS gateway includes a notification router which is responsible for ensuring that incoming SIP messages which are destined for the ITF are dispatched to the proper application in the ITF . In support of this function the notification router includes an authorization session management function an IMS gateway IG ITF server and a register according to this exemplary embodiment. The authorization session management function is used for authorization and session management with the IMS network both for itself and for ITF including its associated applications. The IG ITF server transmits messages to the ITF . The register includes information related to applications supported in the ITF SIP session information uniform resource locator URL information and other identifying information e.g. information pre configured by the operator network which is used to uniquely identify an application running on ITF for correct matching of the incoming SIP messages with their respective ITF applications. Both the authorization session management function and the IG ITF server communicate with the register when determining the SIP message ITF application relationship for message forwarding. Additionally these functions can be used in populating the register with information as needed. The IMS gateway according to this exemplary embodiment is a stateful device which maintains knowledge of applications that are running in ITF and associated SIP dialog information as needed. Also the IMS gateway maintains such states in its memory not shown in but shown in described below as long as ITF is powered on. Applications both from an ITF and an IMS gateway point of view will be described in more detail below.

According to exemplary embodiments multiple applications can be operating at once on ITF . As described above these applications can be segregated into two general categories e.g. the DAE based applications and ITF embedded applications of applications which execute service logic in the ITF . From the IMS gateway perspective as it interfaces with IMS network using SIP these applications are interfaced with SIP communications in three different ways according to this exemplary embodiment depending upon for example the existence of or need for a SIP dialog and state information.

The first way to interface applications with SIP communications according to these exemplary embodiments is associated with applications which require a SIP dialog e.g. presence and session setup. A SIP dialog occurs when two entities with SIP endpoints e.g. IMS gateway and an IMS node engage in communications using SIP. Other applications do not require a SIP dialog they are primarily a stand alone transaction type of application instant messaging or registration where there is no need for a SIP dialog. An incoming SIP message to the IMS gateway can be viewed as one of three types of messages e.g. a new message a message for an existing SIP dialog or a message response to a request initiated from an application in ITF for event handling purposes according to an exemplary embodiment. A new message can for example be a SIP MESSAGE for which there is no existing SIP dialog. An existing message can for example be a SIP NOTIFY that belongs to an existing SIP dialog. A message response can for example be a SIP 200 OK to a request initiated by the IMS gateway e.g. a service request message originated by the ITF and correctly modified forwarded by the IMS gateway . These three differently handled notification events will be described in more detail below.

According to exemplary embodiments IMS gateway communicates with ITF for delivering different types of notifications based upon the type of notification event to the appropriate applications as shown in . Initially the IMS gateway receives an incoming SIP message . The notification router determines which type of event has been received. The notification router then creates and sends either an in session notification or a third party notification to ITF . In session notifications are typically used when there is an ongoing communication between an active application on ITF and the IMS gateway . Third party notifications are typically used for new messages that will start a communication with a non active application in ITF . If the notification is an in session notification then the notification is forwarded to the appropriate DAE application e.g. DAE App or DAE App that is currently running in the browser section of the ITF . If the notification is a third party notification then the notification is forwarded to the third party notification handler which acts similarly to a router function in the ITF .

The third party notification handler then determines if the received notification needs to go to a DAE browser based application or an ITF embedded application . If the notification is to go to a DAE browser based application a uniform resource locator URL is sent that the browser can access for the DAE browser based application . If the received notification is to go to an ITF embedded application the notification is sent through an application programming interface API to the desired ITF embedded application for use. Additionally while not shown in messages such as initial service requests can originate from the ITF and be sent to the IMS gateway for transmission to the IMS network .

As described above ITF can transmit requests from active applications to IMS gateway using HTTP signaling. According to exemplary embodiments to facilitate correct tracking of applications particularly for coordination of SIP messages received at the IMS gateway a unique application identification ID per application is inserted into the HTTP request message from the ITF to the IMS gateway . These requests can be generated for both DAE applications and ITF embedded applications running on ITF . For DAE applications and ITF embedded applications European Computer Manufacturers Association ECMA script can be used for inserting the unique application ID into a header or header extension of an HTTP request message. These application IDs may or may not be standardized but should be unique to facilitate appropriate routing of messages. One method for ensuring uniqueness includes having the application ID represented by a service uniform resource name URN with certain properties which describe uniqueness. For more information regarding URNs the interested reader is directed to RFC 2141 dated May 1997. Additionally a new field could be added to the HTTP request message for carrying this unique application ID as indicated above.

According to exemplary embodiments once the HTTP request from the ITF is received by the IMS gateway the unique application ID is maintained in the IMS gateway along with the corresponding SIP dialog and the stored state where applicable. Additionally upon the receipt of the HTTP request and the creation of the SIP dialog the IMS gateway maintains the dynamic information related to the type of notification to be used e.g. third party notification or in session notification for the SIP dialog for ongoing event reporting.

As described above the IMS gateway stores information regarding applications running on ITF and SIP dialog information. According to exemplary embodiments identifying information is stored in register such that the information from incoming SIP messages can be forwarded to the correct application running on ITF . Exemplary tables and are shown in and respectively for storing identifying information in register . The exemplary application identification table in register can for example be used by the IMS gateway for handling third party notifications. More specifically in this example application identification table is pre configured typically by the service provider SP remotely with application IDs for the DAE applications provided by the service provider and the URL to be used for their respective DAE application. The ITF embedded applications which do not need to use a URL register with the IMS gateway during start up over the home network interface IMS gateway interface HNI IGI not shown . The ITF deployment includes a display capability and user interaction capabilities.

For each application an IMS communication service identifier ICSI can be defined which is used by the IMS gateway according to this exemplary embodiment to assist in matching incoming SIP messages to applications and to check outgoing SIP messages for compliance with IMS requirements. In some cases multiple instances of the same application may be operating on ITF simultaneously. In support of this exemplary traffic table stores information allowing IMS gateway to distinguish different instances of an application. Using at various times these different pieces of identifying information stored on tables and the IMS gateway can identify which notifications or messages should be routed toward which applications or application instances in ITF . Exemplary application identification table and traffic table are described in more detail below. Also while application identification table and traffic table are shown as two separate tables they could be stored in a single table or alternatively the information could be further distributed while still being bound over more than two tables.

As shown in application identification table maintains a binding as shown by reading across a row between application ID URLs used in third party notification for a DAE application and ICSIs as needed. Additionally a default DAE application which uses a default URL is shown which can be used when incoming SIP messages do not include an ICSI or an application ID as shown by the entry undefined in application identification table . The application identification table provides information for the notification router to used when handling events where the incoming SIP message includes the ICSI the application ID both the ICSI and the application ID and neither the ICSI nor the application ID. This information along with other information is used by the IMS gateway to handle events.

According to exemplary embodiments as shown in traffic table maintains a binding between a SIP dialog or application identifying information in specific SIP headers of incoming SIP messages and an application instance. Each binding is represented in table as shown by each Entry where Entryl could represent a SIP dialog or application identifying information bound to a first instance of an application Entry could represent a second instance of the same application or a first instance of a different application and Entry could represent a third instance of the same application or a first instance of a different application currently operating on ITF . Once an Entry is selected for handling any incoming SIP message the Entry should contain enough state information to allow the IMS gateway to uniquely identify the TCP to be used for incoming traffic destined for the associated application instance. Additionally using a value associated with the TCP transmission including a hash of a TCP value in this manner also allows the IMS gateway to know when the application instance has ended e.g. the TCP connection ends in an appropriate manner and to enable error recovery if multiple TCP links for different instances of the same application end inappropriately e.g. multiple TCP links shut down roughly at the same time. Also according to exemplary embodiments additional state information can be stored in each Entry as desired by the traffic table .

According to exemplary embodiments different traffic scenarios can generate the need for an Entry to be created and stored in traffic table . In a first scenario traffic e.g. messages and or signaling originates from an application on the ITF and is sent to IMS gateway which requires a SIP dialog to be maintained. The IMS gateway forwards a request to the IMS network to establish a session and a SIP dialog is created and maintained. An Entry is then created and stored in traffic table that binds the application instance with the SIP dialog and stores any other desired state information e.g. TCP information.

According to exemplary embodiments in a second traffic scenario traffic originates from an application on the ITF is sent to IMS gateway and does not require a SIP dialog to be created and maintained. In this scenario an Entry does not need to be made in traffic table . Instead depending upon the originating application on ITF either a SIP state is created and stored in memory in IMS gateway if for example the originating application is a registration application or the like or no state is maintained after the successful completion of the interaction with the IMS network if for example the originating application is an instant messaging application a stand alone transaction application or the like .

According to another exemplary embodiment in a third traffic scenario a SIP message is received by the IMS gateway from the IMS network for which there is no entry in the traffic table. In this scenario the IMS gateway uses the application identification table to identify an appropriate application and forwards the request to the appropriate application on ITF as is explained in more detail below. Depending upon the application identified an Entry can be made in traffic table . For example if the identified application requires that a SIP dialog be maintained then an Entry is created following the receipt of a successful response by the IMS gateway from the ITF . In another example if the identified application does not require that a SIP dialog be maintained than an Entry is not created and stored in traffic table . Instead the transaction is completed and the IMS gateway remains stateful until such time as the entire transaction is successfully completed. In yet another example if the identified application does not require a SIP dialog but would like to remain active for incoming messages it can indicate so by maintaining its TCP connection and then an Entry is created and maintained in traffic table .

Thus according to exemplary embodiments an IMS gateway handles different incoming SIP messages from the IMS network which require a notification to be sent to the ITF in different ways depending upon information available to the IMS gateway . In a first exemplary embodiment the IMS gateway determines if there is a previously existing SIP dialog associated with an incoming SIP message by consulting traffic table . If there is a previously existing SIP dialog associated with the incoming SIP message then an in session notification is sent by the IMS gateway over the TCP link to the appropriate application instance. The notification sent includes the payload portion or an encapsulated version of the received SIP message including pertinent SIP headers.

The second way to interface applications with SIP communications is associated with applications which do not require a SIP dialog but have a state maintained in the IMS gateway e.g. registration. In another exemplary embodiment the IMS gateway receives a SIP message from IMS network for which there is no preexisting SIP dialog. However in this case there is state information stored in traffic table that allows IMS gateway to identify the intended application instance and send the notification to the correct application instance in ITF over the appropriate TCP link using in session notification for that purpose. The notification sent includes the payload portion or an encapsulated version of the received SIP message including pertinent SIP headers.

This third way to interface applications with SIP communications from the perspective of the IMS gateway is associated with applications that do not require a SIP dialog and do not require a state e.g. messaging and caller identification. In another exemplary embodiment the IMS gateway receives a SIP message from IMS network for which there is no corresponding SIP dialog and no currently maintained state information exists in traffic table e.g. the case for new incoming SIP messages from the IMS network . In this case identifying an application ID requires consulting table and also depends on the contents of the incoming message typically the contents in the Accept Contact SIP header. According to exemplary embodiments the Accept Contact field in the SIP header can include information which would allow the IMS gateway to match up the SIP message with an application running on ITF . For example the Accept Contact field in a SIP header could include a URL an application ID or an ICSI. For more information regarding the Accept Contact field in SIP messages the interested reader is directed to RFC 3841 dated 2004. Using this information the IMS gateway then links the SIP message to an application on the ITF and forwards the notification using third party notification for that purpose. The notification sent includes in addition to information selected from the matched entry in table the payload portion or an encapsulated version of the received SIP message including pertinent SIP headers.

According to yet another exemplary embodiment the IMS gateway receives a SIP message from IMS network which explicitly includes only an ICSI then the IMS gateway assumes and uses a default application ID. The application identification table is typically populated with a default application ID for use with any ICSI as needed. For example as shown in rows and in ICSI and ICSI are bound to a default application ID. Using this default application ID the IMS gateway forwards the received notification to the default application ID on ITF . Additionally in the case where the incoming SIP message from the IMS network does not include either an ICSI or an application ID then a default URL is used.

According to another exemplary embodiment the IMS gateway receives a SIP message from IMS network which explicitly includes both an ICSI and an application ID then the router function is able to link the received notification to an application operating on ITF by consulting application identification table . In this case the IMS gateway then sends a message e.g. third party notification to the ITF which includes the notification information for forwarding to the identified application. The notification sent includes in addition to information selected from the matched entry in table the payload portion or an encapsulated version of the received SIP message including pertinent SIP headers.

After the IMS gateway receives a SIP message and determines whether it is an in session notification or a third party notification the IMS gateway transmits the notification appropriately. For example if the SIP message is an in session notification as typically determined by state information the IMS gateway sends the notification information using HTTP signaling or other signaling schemes to the appropriate application running in the ITF . If the notification is determined to be a third party notification the notification information is transmitted to the third party notification handler in ITF which sends it to the correct application e.g. an ITF embedded application or a DAE browser application . The third party notification handler makes this determination based on information received in the third party notification message . Initially the third party notification handler looks for an application ID in the third party notification message . If an application ID is present and is not recognized by the third party notification handler then the included URL is used to fetch a network application DAE to handle the request. In the case where the third party notification handler recognizes the application ID then it considers the desired application to be an ITF embedded application and forwards the notification accordingly using an appropriate API.

According to other exemplary embodiments requests can be generated from ITF which result in outgoing traffic being transmitted from the IMS gateway to the IMS network . Various methods can be used to uniquely identify the originating application such that subsequently received incoming SIP messages can be matched with the desired application. For example if a DAE application or an ITF embedded application originates a message it can embed the application ID in a new HTTP header which will then be extracted by the IMS gateway . Alternatively the DAE application and the ITF embedded application can include an ICSI in a new HTTP extension header which can then be used together with additional information in SIP headers by the IMS gateway in conjunction with application identification table to locate the application ID.

Exemplary signaling diagrams will now be described with respect to which are based upon the above described exemplary systems and methods. shows an exemplary signaling diagram for receiving a SIP message to start a messaging application for which there is no messaging application currently active on ITF . Initially a SIP MESSAGE which includes the information appid MESSAGING in the accept contact header is transmitted from the P2P Communication Enabler to the CSCF which forwards the SIP MESSAGE to the authentication session management function within IMS gateway . The IMS gateway consults traffic table and sees no entry matching the incoming SIP message. The IMS gateway then consults application identification table and locates the application ID based on the received Accept Contact header information e.g. appid MESSAGING and the information in table as needed. Authentication session management function then transmits a message to invoke third party notification to the IG ITF server . The IG ITF server then sends a message to invoke third party notification including an application ID appid and a URL obtained from the application identification table to the ITF .

In this example the third party notification handler in ITF does not recognize the received appid and instead the ITF uses the received URL to fetch the application as shown in message . When the network server received the HTTP Get URL message a 200 OK message which includes a generic DAE application handler with ECMA script is sent back to the ITF as shown in message . At about the same time the IG ITF server sends an operation result back to the authentication session management function . Based upon the operation result the authentication session management function transmits a 202 ACCEPTED message to the CSCF which then transmits a 202 ACCEPTED message to the P2P communication enabler . If the messaging application desires to remain active it maintains the TCP connection. The IMS gateway then creates an entry in traffic table and maintains additional SIP and application related state information. This allows the messaging application to be later invoked using in session notification as opposed to using third party notification in this case if an incoming SIP message is destined for that application.

According to exemplary embodiments shows an exemplary signaling diagram for receiving a SIP message regarding a messaging application when a messaging DAE is currently active and running in the ITF and has a permanent TCP connection with the IG ITF server . Initially a SIP MESSAGE which includes the information appid MESSAGING in the Accept Contact header is transmitted from the P2P Communication Enabler to the CSCF which forwards the SIP MESSAGE to the authentication session management function within IMS gateway . The IMS gateway consults traffic table and locates an entry in the traffic table that can handle the incoming SIP message based on the Accept Contact header in the SIP MESSAGE . Additionally based on its stateful ability the IMS gateway realizes that a DAE message application is currently running on ITF and as such in session notification should be used. Authentication session management function then transmits a message to invoke in session notification to the IG ITF server . The IG ITF server then sends a message for invoking in session notification to ITF which can use extensible markup language XML . An operation result message is then sent from the IG ITF server to the authentication session management function . The authentication session management function then transmits a 202 Accepted message to the CSCF which then transmits a 202 Accepted message to the P2P communication enabler .

According to exemplary embodiments shows exemplary signaling when the ITF is running a presence application. Initially a user starts a presence application which has been previously fetched and which establishes a TCP connection with the IG ITF server for presence notifications. This results in an entry created in traffic table which the IMS gateway can use to match incoming SIP presence notification messages related to the same dialog which further allows the IMS gateway to use in session notification for transferring incoming presence notification messages to the presence application in ITF . Upon receiving a SIP NOTIFY message which includes presence information from the P2P communication enabler via the CSCF the IMS gateway matches the message with the appropriate SIP dialog in traffic table and selects the appropriate application instance. Additionally the IMS gateway understands that it should use in session notification in this case. Authentication session management function then transmits a message to invoke in session notification to the IG ITF server . The IG ITF server then sends a message to ITF for invoking in session notification including the incoming NOTIFY which can be in XML. An operation result message is then sent from the IG ITF server to the authentication session management function . The authentication session management function then transmits a 200 OK message to the CSCF which then transmits a 200 OK message to the P2P communication enabler .

According to exemplary embodiments shows exemplary signaling for a case of messaging using an ITF embedded application. Initially P2P communication enabler transmits a SIP MESSAGE which includes ICSI MESSAGING in the accept contact header to CSCF which forwards SIP MESSAGE to the authentication session management function in the IMS gateway . The IMS gateway takes information in the Accept Contact consults traffic table and sees no entry matching the incoming SIP message. The IMS gateway then consults application identification table and matches the received ICSI to an ICSI stored in table which is bound to an application ID e.g. found in the same row of table . The authentication session management function transmits a message to the IG ITF server with information for the ITF to invoke third party notification. The IG ITF server then transmits a message to invoke third party notification which includes an application ID to the ITF . The third party notification handler in ITF receives message and recognizes the application ID and ITF then launches the embedded messaging application e.g. an ITF embedded application for messaging is launched instead of a DAE browser based application for messaging. An operation result message is then sent from the IG ITF server to the authentication session management function . The authentication session management function then transmits a 202 Accepted message to the CSCF which then transmits a 202 Accepted message to the P2P communication enabler . The ITF embedded application may choose to remain active and maintain the TCP connection in which case the IMS gateway creates an entry in traffic table allowing subsequent incoming messages destined for that application to be delivered using in session notification.

According to exemplary embodiments shows exemplary signaling for receiving a SIP message regarding a messaging application when an active embedded message application is currently running in the ITF which has a TCP connection with the IG ITF server . Initially a SIP MESSAGE which includes the information ICSI MESSAGING in the Accept Contact header is transmitted from the P2P Communication Enabler to the CSCF which forwards the SIP MESSAGE to the authentication session management function within IMS gateway . The IMS gateway then consults traffic table and locates an entry that can handle the incoming messages based on the information in the Accept Contact header in the SIP MESSAGE . Based on its stateful ability the IMS gateway realizes that in session notification should be used. Authentication session management function then transmits a message to invoke in session notification to the IG ITF server . The IG ITF server then sends a message to the ITF to invoke in session notification including information which can be in XML. An operation result message is then sent from the IG ITF server to the authentication session management function . The authentication session management function then transmits a 202 Accepted message to the CSCF which then transmits a 202 Accepted message to the P2P communication enabler .

According to exemplary embodiments shows exemplary signaling for receiving a SIP message which does not include an application ID or an ICSI at IMS gateway . Initially P2P communication enabler transmits a SIP PUBLISH message to CSCF which forwards the SIP PUBLISH message to the authentication session management function in IMS gateway . The IMS gateway notices that the received SIP PUBLISH message lacks both an application ID and an ICSI in the Accept Contact header hence it does not consult traffic table and rather consults application identification table and picks the application from table which has the default URL. The authentication session management function transmits a message to invoke third party notification to the IG ITF server . The IG ITF server then sends a message to invoke third party notification which includes the default URL obtained from table . The ITF receives message and the third party notification handler does not see an application ID and instead uses the supplied URL to fetch a DAE application to handle this request as shown in the HTTP Get URL message which is sent to network server . Network server responds to ITF with a 200 OK message which includes a DAE default application handler which typically includes some extensible hyper text markup language XHTML and Ecma script instructions . An operation result message is then sent from the IG ITF server to the authentication session management function . The authentication session management function then transmits a 200 OK message to the CSCF which then transmits a 200 OK message to the P2P communication enabler .

According to exemplary embodiments using the above described systems and methods the IMS gateway can have the ability to perform error recovery for various errors such as the loss of multiple TCP links with ITF . In this case where multiple application instances are currently active in ITF each application instance will have a different TCP link up for communication with IMS gateway . These TCP links will be up as long as the application instance is up and running. When a TCP link goes down the IMS gateway detects the loss of the TCP link and waits e.g. for approximately 40 60 seconds based on a configurable timer for the application instance to re establish a new link to allow the IMS gateway to update the proper Entry and in the traffic table .

According to exemplary embodiments if the timer associated with re establishment of the TCP link expires the IMS gateway assumes that the application instance has ended and proceeds to terminate the corresponding network side communications and remove that Entry or from the traffic table . If the application instance has not ended it will typically send to its peer as part of the TCP link re establishment what is equivalent to a SIP UPDATE which does not change any SIP state information but rather allows the IMS gateway to handle error recovery in the case of multiple link failures. In this case of multiple link failures for multiple instances of the same application the IMS gateway can use information in a SIP UPDATE message in conjunction with state information stored in traffic table to uniquely identify the intended application instance and enable successful error recovery.

The exemplary embodiments described above provide for messages and protocols involving person to person communications. An exemplary communications node which can perform the functions of an IMS gateway will now be described with respect to . Communications node can contain a processor or multiple processor cores a memory one or more secondary storage devices and an interface unit to facilitate communications between communications node and other networks and devices. Memory and or secondary storage devices can be used to store both state information as well as tables and . Logic and protocols can be also contained within communications node to be used with processor for determining notification type as well as all other exemplary functions described above performed by IMS gateway .

Utilizing the above described exemplary systems according to exemplary embodiments a method for facilitating communications between devices which utilize different protocols is shown in the flow chart of . Initially a method for correlating application information between an Internet Multimedia Subsystem IMS network and a non IMS node includes receiving at a gateway a first message using a first signaling protocol at a gateway from an IMS network in step reading information from the first message in step correlating the information with previously stored information to determine which one of a plurality of applications running on the non IMS node is associated with the first message in step and transmitting a second message towards the non IMS node using a second signaling protocol which is different from the first signaling protocol wherein the second message includes information associated with the one of a plurality of applications running on the non IMS node which is associated with the first message in step .

As will be appreciated by those skilled in the art methods such as that illustrated in can be implemented completely or partially in software. Thus systems and methods for processing data according to exemplary embodiments of the present invention can be performed by one or more processors executing sequences of instructions contained in a memory device. Such instructions may be read into the memory device from other computer readable mediums such as secondary data storage device s which may be fixed removable or remote network storage media. Execution of the sequences of instructions contained in the memory device causes the processor to operate for example as described above. In alternative embodiments hard wired circuitry may be used in place of or in combination with software instructions to implement exemplary embodiments.

The above described exemplary embodiments are intended to be illustrative in all respects rather than restrictive of the present invention. All such variations and modifications are considered to be within the scope and spirit of the present invention as defined by the following claims. For example multiple ITFs may be in communication with IMS gateway in a single household and in this case the IMS gateway is still able to uniquely identify applications on any ITF that is in communications with it by for example storing additional information in tables and which reference the ITF an application is running on. Additionally the exemplary services described above are purely illustrative and other IMS services can be supported through the above described systems and methods. No element act or instruction used in the description of the present application should be construed as critical or essential to the invention unless explicitly described as such. Also as used herein the article a is intended to include one or more items.

