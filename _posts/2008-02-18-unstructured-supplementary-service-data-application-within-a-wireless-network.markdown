---

title: Unstructured supplementary service data application within a wireless network
abstract: A method is provided for handling a call communication session via a communication address associated with a private network using Unstructured Supplementary Service Data (USSD) protocol. USSD messages are used between the wireless private network subscriber and a wireless network to provide the subscriber with information about the caller, and routing options of the call. The subscriber can also inform the wireless network using USSD messages how to proceed with the call. USSD messages such as but not limited to, transferring the call to another subscriber with canned messages, transferring the call to a subscriber's voice mail, establishing a conference call, swapping to other call, creating new call, consulting with other person, transferring to specific predefined person, hold, consulting with other person via canned message, etc. Another method is exchanging the device status information using USSD messages.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08532630&OS=08532630&RS=08532630
owner: VascoDe Technologies Ltd.
number: 08532630
owner_city: Tel Aviv
owner_country: IL
publication_date: 20080218
---
This application is a continuation in part of U.S. patent application Ser. No. 11 791 176 filed May 21 2007 now pending which is the national stage of International application IL 05 01246 filed Nov. 23 2005 which claims foreign priority to Israel application IL 165362 filed Nov. 24 2004 and further claims the benefit of U.S. provisional patent application 60 890 546 filed 19 Feb. 2007 all of which is hereby incorporated by reference for all they contain.

The invention generally relates to wireless exchanges and more specifically to wireless telephone exchanges using Unstructured Supplementary Service Data USSD as a data communication channel.

Many telephone networks have a large number of telephones which are hardwired into the network and which have private access to the network from fixed locations. This requires providing access to the network by using dedicated circuits such as business telephones through a PBX and the like.

With the ever growing demand for mobility one problem associated with such type of operation is how to provide mobile persons with convenient and inexpensive access to telephone networks. These persons generally have a choice between locating a private access business or home telephone or a public access payphone which can be inconvenient and using cellular telephone service which provides a solution to the mobility problem but can be expensive.

Other problems which may be associated with mobile persons who frequently access wireline telephone networks exist such as the need for rerouting calls received at the addressee s fixed location while he she is away from that location. Another typical problem that arises in certain organizations is calls that are made to communicate with a function in the organization rather than a specific person i.e. a customer service person marketing person sales person etc. If a person originating the call dials the number given to them and the addressee is away then either the caller will give up and call another organization or the caller may choose to leave a message. If the caller chooses to leave a message there is no way of telling when this message will be heard and acted upon. One method of wireless contact between a plurality of user stations is described in U.S. Pat. No. 4 672 658. While the system shown therein may achieve the goal of operating a wireless PBX it is subject to the drawback that it requires complex and relatively expensive user stations and may not be smoothly integrated into a system for access to telephone networks.

U.S. Pat. No. 6 405 033 discloses a system for routing a call using a communications network where the system includes mobile units a network switching center and service centers to provide a variety of traditional and enhanced services to the mobile units. When a user of a mobile unit issues a request for services to be provided from a service center the network switching center receives the request and in response accesses a profile table to select an appropriate service center to establish a communication session with the mobile unit. The selected service center may then provide enhanced services to the mobile unit in order to satisfy the service request.

U.S. Pat. No. 6 771 953 describes provisioning of a wireless Centrex like hereinafter referred to for convenience as Centrex service that offers the benefits of wireless voice and data services to subscribers having a need to move within a number of localities such as within a business campus. By the method described in this publication a wireless telephone subscriber can use a standard cellular telephone as a wireless extension of his desktop phone while being in the proximity of a miniature radio base station capable of communicating with the cellular telephone. Under these conditions the subscriber can use the same cellular telephone that provides service in the public network in the wireless Centrex environment.

U.S. application publication 20030193990 discloses a system for accessing a telephone system in which a set of user stations is matched with a set of base stations for connection to a telephone network. Each base station may be coupled directly or indirectly to the telephone network and is capable of initiating or receiving calls on the telephone network. Each user station may comprise a spread spectrum transmitter or receiver and may be capable of dynamic connection to selected base stations. A number of base stations are coupled to a private exchange telephone system for coupling user stations to calls outside the telephone network. User stations may make and break connections with base stations as the user station moves between service regions or is otherwise more advantageously serviced by other base stations. Base stations may be coupled to each other by means of a private exchange telephone system or other small business telephone system such as a PBX Centrex or key type system so as to couple user stations to calls outside the telephone network.

Calls sent to wireless subscribers lack important information about the callers calls and tasks related to a call. When a call is received by a subscriber the subscriber usually needs to converse with the caller before the caller can be forwarded to another destination. During the call if information about the caller was displayed in the device the display will be lost. Also calls forwarded to another party may lose the information about the caller in the new destination device. When conference calls are to be established the called party may have information about the original caller only after a voice path is created. Inventive aspects disclosed herein will allow parties of incoming calls such as operators secretaries employees conference call establishment to obtain information about the caller call tasks related to call or other information before and during voice path establishment. Other inventive aspects will also automatically provide the status of device availability to another device.

Each of these patents and application is hereby incorporated by reference as if fully set forth herein.

According to a first embodiment a method for routing a request via a public cellular network to establish a communication session via a communication address associated with a private network and for establishing the communication session which method includes establishing a pre defined list of telephone numbers belonging to the private network associating each of the telephone numbers with at least one communication address defining at least one management rule for handling requests for establishing communication sessions with at least one of the communication addresses receiving a request to establish a communication session wherein at least one telephone number selected out of the pre defined list of telephone numbers is associated with the request routing the request towards a communication address associated with the at least one telephone number and wherein the routing is carried out in accordance with the at least one management rule and establishing a communication session between the originator of the arriving request for communication session and a user of the communication address via at least one center of the public cellular network.

The term communication address as will be used in certain exemplary embodiments herein is used to denote a member of the group consisting of a wireline telephone number a cellular telephone number an e mail address a URI Uniform Resource Identifier a website address and any combination thereof. Preferably if a communication address is a cellular telephone number associated with a certain mobile station at least one other communication address e.g. another cellular telephone number will also be associated with that mobile station so that if a request is received to establish a call with either of the two cellular telephone numbers it will be transferred to that single mobile station.

By yet another embodiment of the invention substantially all telephone numbers included in the pre defined list of telephone numbers are cellular numbers.

According to yet another aspect of the invention there is provided a cellular network communication device operative to allow establishing of a communication session with a user of a communication address belonging to a private network. The cellular network communication device includes an apparatus for establishing a pre defined list of telephone numbers belonging to the private network associating each of the telephone numbers with at least one communication address defining at least one management rule for handling requests for establishing communication sessions directed to at least one of the communication addresses receiving a request to establish a communication session that specifies at least one telephone number which belongs to the pre defined list of telephone numbers and establishing a communication session between the request s originator and a user associated with a communication address associated with the at least one telephone number and wherein the communication session is established in accordance with that at least one management rule.

According to an embodiment of this aspect of the invention the cellular network communication device further includes a user buffer operative to store at least one prioritized communication address associated with the user s telephone number an apparatus operative to prevent in response to a user s request to prevent incoming communication sessions establishing communication sessions with that user through any of the communication addresses associated with the user s telephone number and a controller operative to determine if a request for communication session arrives to that at least one prioritized communication address and if in the affirmative override the apparatus operative to prevent the establishing the communication sessions and allow establishing that communication session.

By yet another embodiment of the invention the cellular network communication device further includes an apparatus for providing an indication at the communication address relating to the telephone number specified in the request before such a communication session is routed towards the at least one center of the public cellular network.

According to still another embodiment of the invention the cellular network communication device further includes an apparatus for associating a message with the communication session being established for display at the communication address where such message can be a USSD type of message or a real time data message transmitted via a data communication channel and the like. Preferably the message includes the number called and or identification of the address of the device initiating the communication session.

By yet another embodiment of the invention the cellular network communication device further includes an apparatus for initiating a transmittal of audio signals and or video signals while the communication session with the mobile station is being established or being kept on hold. Preferably the audio signals and or video signals are selected in response to identifying the type of the device initiating the call.

According to another embodiment of the invention the cellular network communication device is adapted to receive at least one member of the group consisting of data signals voice signal facsimile signals video signals and any combination thereof.

This disclosure describes the best mode or modes of practicing the invention as presently contemplated. It is important to note that these embodiments are only examples to advise one of ordinary skill in the art of the many advantageous uses of the innovative teachings herein. In general statements made in the specification of the present application do not necessarily limit any of the various claimed inventions. Moreover some statements may apply to some inventive features but not to others. In general unless otherwise indicated singular elements may be in plural and vice versa with no loss of generality. In the various views of the drawings like reference characters designate like or similar parts.

Certain embodiments disclosed herein enable wireless operators to provide their customers with a hosted PBX like solution in which PBX like extensions are in fact wireless devices e.g. even their current wireless devices . Customers may order any amount of extensions they require so that they instantly expand their private network to include the additional extensions required wireless devices . Thus certain embodiments disclosed herein provide customers with a flexible solution simple and easy to use enterprise web management interface and a fully distributed mobile extension.

According to an embodiment of the disclosed invention mobile stations and network devices exchange messages for call control and information exchange using messages in accordance with the Unstructured Supplementary Service Data USSD protocol. Typically a device may send a specific call control request over the network as a USSD request to another device which returns a response as a USSD response. For example this response may contain a list of possible call control selections options or actions that the device may take. The response may be resent by the responding device. Devices may also receive information via USSD notifications from other devices on the network.

By one embodiment of the invention all the telephone numbers associated with the private network the enterprise telephone numbers are cellular numbers which are typically handled and managed by the public cellular network as a private network. However by another embodiment of the invention one or more of the enterprise numbers are wireline numbers which are automatically forwarded to their pre defined corresponding cellular numbers so that the caller calls a wireline telephone number and his call is first diverted to the cellular network and then processed in accordance with the principles of the invention as disclosed herein.

According to an embodiment of the invention a method p includes providing an indication to the mobile station which allows the user of that mobile station to identify the telephone number to which the call was addressed before re routing the call. This embodiment is particularly useful when more than one telephone number is associated with a single mobile station enabling the user to identify the number to which the call was destined e.g. if the user of the mobile station belongs to a group of say sales people or support people or belongs to a secondary group for example when the person receives a call that had not been answered by another mobile station that was supposed to receive that arriving call . Another example is when a person also uses his her own mobile telephone as the mobile station so that the indication will provide the possibility to differentiate between calls that were made to their work number i.e. those that were re routed and private calls made to their private mobile telephone.

In addition or in the alternative for at least one of the telephone numbers included in the pre defined list there is more than one corresponding address included in the public cellular network addresses list so that a call can be transferred in accordance with a pre defined routing scheme to more than one address. Accordingly the various Direct Inward Dialing DID and groups are managed within the private network and based on the logic rings the telephone the called number is sent to the user via USSD or via a real time data message transmitted via a data communication channel or via SMS short message service generated from the HLR home location register when no USSD exists or any other methods known in the art per se . Once the user views the message they may see the regular calling message together with the caller s ANI e.g. by pressing any or a certain key of the mobile station. When the end user places a call it will have a default ANI. However he will be able to select a different ANI based on the DID called numbers that the end user may receive. One way of carrying out this embodiment is by selecting the option of trigger on originate where all IN signaling is routed to the WX node which analyzes the number and based on information associated with the number for example included in its respective tables will initiate dialing the default number. In addition or in the alternative if the caller dialed a pre defined sign or certain code it will be interpreted as a request to dial the call as if it has been dialed from another line e.g. a personal line . The WX node will replace the default ANI with the other line s ANI or any other ANI associated with the other line and will update the caller s number in the MSC CDR table for billing purposes replacing the default number with the new originator .

The term Automatic Number Identification ANI as will be used herein should be understood to encompass all means and methods known in the art for the identification of the caller as the case may be such as ANI callerID MSISDN etc. Alternatively an Unstructured Supplementary Service Data USSD message or DTMF string will indicate to the communication device of the invention to which ANI should that call be associated with.

By yet another embodiment of the invention for an arriving call a routing scheme is provided to one of a plurality of addresses out of the list of public cellular network addresses that correspond to one telephone number and the scheme provides for the selection of a number in accordance with at least one criterion selected from a group consisting of time of the day day of the week and national holidays.

In accordance with still another embodiment of the invention the method includes preventing the re routing step in response to a request initiated by the mobile station s user. Preferably this preventing step further includes pre defining a priority list comprising at least one telephone number so that when a call arrives from other numbers which are not included in this priority list it will not be routed to that mobile station.

By yet another embodiment the method provided further comprises a step of associating a message with the call being rerouted for display at the mobile station. Preferably the message is transmitted to the mobile station by using USSD.

The message may comprise identification of the address of the device initiating the call such as the automatic number identification ANI of the device initiating the call.

In another exemplary USSD message a subscriber receives a USSD message with the call control status i.e. in call idle etc. of another subscriber call control status. This data is sent independently or as part of any of the relevant call control interaction messages i.e. if a subscriber is in call and current USSD message is the in call message the WX will send a new in call USSD message which will include the state change of other subscriber and the in call call control interactions options can be same interactions or new list of options . The other subscriber call control updates can be received at all times or can be restricted to certain times such as time of the day state of in call subscriber.

In another exemplary USSD message a subscriber receives a USSD message with details of all calls waiting in a queue the subscriber s own or any other subscriber queue . Each time there is a change in the queue a new USSD message is sent to the subscriber. A subscriber receives the above message only if a defined threshold of a number of calls in the queue has been reached.

In another exemplary USSD message a subscriber receives a USSD message with a list of numbers or names of employees. The subscriber then selects from the list a destination target in which the subscriber can barge in to the call or silently monitor the selected destination.

In another exemplary USSD message a subscriber receives a USSD message with the name of the caller and or their title in the company for example Joe Cohen VP Marketing Acme Ltd. is calling. The name of the caller can be stored in a WX database or any integrated database.

In addition or in the alternative the method includes diverting a call received at the mobile terminal to another station associated with the private network which can be another mobile terminal a PC a wireline telephone etc.

Preferably this diversion of the call is made in response to a request initiated by the mobile station user e.g. by using a pre defined key associated with that mobile station. Still preferably a message may be associated with the diverted call and may be generated in response to a pre define code sent from the mobile station. The message may be either a visual message such as USSD message etc. a voice message or some other alerting method depending on the type of device to which the call has been diverted. Thus while the end user gets an indication of the arriving call e.g. ringing he she can select to divert the call to a third party e.g. a secretary and select a notification which will be presented at the secretary s station e.g. please take a message I am busy will call them later get rid of them etc. 

Local option The transfer can be requested by the mobile station and executed by a switch associated with the private network. In which case notifications will be stored locally but there will be a need to synchronize them with the cellular network operation.

Network option the mobile station sends a message to the communication device of the invention the wireless Centrex and that device takes control of the transfer request manages the process while instructions such as re routing schemes etc. are stored at the network s center and are assigned by the wireless Centrex e.g. to the transfer destination.

The message would be sent to the receiving client via USSD. The data sent in such a message is typically data regarding the call information such as ANI DNIS called number by number but can be by done by name too if the system of the invention can match it with its own database in order to enable the receiving phone to generate the right message. Optionally the receiving party may view the message and then select from a list of several options the preferred way of handling the call e.g. divert the call to a secretary send to voice mailbox transfer to someone else such as the boss etc. 

Another option is to send a voice prompt as the message which will be played to the receiving party canned voice message such as please set a meeting with caller take care of this etc. . The receiver may then request to listen again to the message answer the caller etc. In this case there is a need for an IVR or Intelligent Peripheral infrastructure to allow playing the messages.

By still another embodiment of the invention the private network comprises a WLAN network. If in such a case the incoming call is a voice call then the method includes selecting a path of rerouting the call to the mobile station either along the WLAN network or along the public cellular network in accordance with at least pre defined criterion such as the quality of the call being rerouted. Consequently the wireless Centrex users will be able to leverage the WLAN infrastructure of their company and when the user is in another location the voice call can be routed via the WLAN Voice over WLAN VoWLAN this may enable companies to have better local reception and enable the wireless operator to use their mobile network more efficiently which in return allows leveraging the data network while saving money on expansion of the base stations . In addition by this embodiment the mobile operator may have one billing plan for local calls originated from home WLAN and a different billing plan for calls initiated from out of the home LAN.

Typically the voice call is automatically connected to a WLAN and routed along that network. When the local signal is better or there is any other pre defined rule governing such a scenario e.g. all local calls will be routed over WLAN whenever in range or VoWLAN enabled only on their own company premise because in other locations the quality of the infrastructure is unknown use VoWLAN if external voice quality is less than a pre defined threshold etc. 

In accordance with another embodiment of the invention the method provided allows merging of IP Telephony features WLAN capabilities and or Wi Max capabilities under the cellular flow architecture umbrella in a way that the IP based subscribers may be provided with any of the WX cellular services and features. The WX will allow merging between the IP world and the features associated therewith and the cellular network and WX features preferably in a way that ensures that the IP WX subscriber will be provided with the same capabilities as a regular cellular subscriber.

In accordance with another embodiment of the invention the method further includes providing a pre defined auto reply to a calling party in response to a call received at the mobile station. Such pre defined auto reply can be an e mail an SMS a voice message and the like. Therefore the end user may define his line to send such an auto reply to the calling party providing the latter by using TTS or wav type of file with any details desired such as I am out of my office will return on will have limited access to my voice mailbox etc. Preferably the type of the pre defined auto reply is selected based on the type of the device originating the incoming call e.g. wireless and wireline . For a wireless party originating the call the message can be in a form of SMS while for a wireline the message may be in the form of an e mail or a voice announcement.

In addition the method of the present invention may further include transmitting from the public cellular network center audio signals and or video signals while the call with the mobile station is being established or the call is being kept on hold. Preferably the audio signals and or video signals are selected in response to identifying the type of the device initiating the call. In addition these audio or video signals may be selected from among a plurality of audio or video clips where the selection is based on one or more selection criteria such as the number called caller ANI time of the day group number called physical location of called subscriber presence of called subscriber International Mobile Equipment Identity IMEI and the like.

Furthermore it is possible for the company s administrator to associate the whole company with the same music video that will be played whenever a call is in queue or on hold depending of course on the caller s device. If no indication is provided as to the capabilities supported by the caller s device some default audio clips such as music branded messages or announcements etc. may be played.

By this embodiment video sessions may be established with the callers provided of course the system identifies them as having the equipment required for establishing such a session enable a company to promote its own business by sending pictures video to the callers for them to view e.g. marketing data video of a product .

According to still another embodiment of the invention if a request for establishing a communication session has not been answered within a pre defined period of time by a user associated with the telephone number specified in that request the request will be re routed towards a new communication address e.g. voice mail address web site another telephone number etc. in accordance with a pre defined management rule.

In accordance with yet another embodiment of the invention the method provided may further includes forwarding a call to an answering service associated with the public cellular network center and have the message that will be left thereat by the caller if not in office or in case of overflow . The message will be forwarded to the mobile station either automatically or in response to the mobile station request to pull the messages received. Preferably the mobile station is selected by the answering service center from among a plurality of mobile stations in accordance with a list of addresses provided to the provider of that answering service.

According to yet another embodiment a replacing station may be provided which is operative to receive arriving calls instead of the mobile station to which the call was destined. Such replacement may be in response to a request sent by the mobile station to the public cellular network center. Preferably the replacing station is selected from a routing list stored at the public cellular network center.

This embodiment enables the user to change to various pre defined presence scenarios. The presence scenarios and routing instruction are stored in the cellular network center and preferably each presence scenario will be associated with suitable operative instructions for example in meeting scenario will be translated by the network so that all arriving calls should be forwarded to the secretary s station. Once the mobile station user changes the scenario a message is sent to wireless Centrex which will handle incoming calls based on the predefined routing rules.

According to yet another embodiment selected subscribers may get an indication as to the whereabouts of other group members e.g. a secretary may get an indication as whether the boss is present support manager can view all support employees presence while support employees will be prevented from viewing each other or their boss presence.

In accordance with still another embodiment of the invention incoming calls to a WX subscriber can be routed based on the subscriber s location e.g. create different routing tables while the subscriber is in the office at home or out of office where the routing may be effected automatically based on the location of the subscriber.

By yet another embodiment of the invention the method provided further includes providing the mobile station with a voice prompt indicating that an arriving call is being transferred.

In addition or in the alternative the enterprise management administrator may configure and define routing rules for all the company s employees. For example the administrator may enable selected people to control and define selected groups e.g. a secretary may thus define their boss s call routing scheme a sales manager can control the respective sales group etc. Furthermore the administrator may be provided with the ability to carry out selected functionalities such as add delete freeze employee line define groups configure routing schemes per line line can be a group company main line or employee s direct line configure a conference call for another hour etc.

By still another aspect of the present invention a cellular telephone device includes a Bluetooth unit adapted to allow communication between the cellular telephone and a computer device located nearby so that when a call arrives at the cellular telephone device it will be automatically or upon pressing a pre defined key whether prior to the arrival of the call or after the cellular telephone has started to ring sending call control data to that computer device allowing the handling of the call through the use of the computer device e.g. a soft phone.

In accordance with yet another embodiment a transfer message is sent from the cellular network center to trigger an arriving call being placed on hold.

Turning to which presents a schematic diagram of a Call Control Manager based on a wireless Centrex device WX example platform constructed in accordance with the principles of the present invention. The WX platform demonstrated includes the following main layers 

Turning to which illustrates a wireless network operative in accordance with certain embodiments of the present invention. The network comprises as normally all wireless networks do base station controller BSC mobile switching center MSC HLR BTS and the operator s management system as well as a plurality of mobile stations. The mobile stations include but are not limited to cellular phones such as cellular phones and personal digital assistants smart phones and wireless network devices such as . In addition the network described herein further certain a Call Control Manager wireless Centrex device WX constructed in accordance one or more of the embodiments of the present invention.

For the sake of this example we assume that all cellular phones designated in this with numeral belong to users that are associated with company A which is a subscriber of the WX service while cellular telephone belongs to a user that does not belong to company A organization.

The wireless network according to this is in communication with IP network through UMA network controller . IP network is associated with a number of access points AP wherein each of these access points acts as a gateway connecting a corresponding wireless local area network WLAN with the IP network . As will be appreciated by those skilled in the art will understand that other arrangements may be used e.g. a PSTN network instead of the IP network with corresponding COs instead of the APs etc. .

Considering a first case where subscriber which is not part of organization A calls company A sales group number. The request to establish this call reaches wireless network is processed and the address associated with that request is identified as one that belongs to wireless Centrex service. Following this identification the request is routed to a wireless Centrex for further handling. At wireless Centrex there is a pre defined list of telephone numbers the wireless Centrex identifies this as a call for company A and then identifies by applying the list of telephone numbers of sales persons associated with that sales group number subscribers and . Wireless Centrex receives the input of the number requested and determines that the call should be established with either one of subscribers and . The WX communicates with HLR and or MSC which will determine through which of the BTSs associated with wireless network should this call be routed. BTS is selected based on the presence of subscriber while subscriber will be reached via UMA network controller through IP network and AP . All four subscribers shown in this example receive the request to establish a call e.g. telephone ringing and once the first of this group accepts the call the other three mobile station will stop ringing.

In another example where a request for establishing a call with company A s subscriber is initiated by a caller from WLAN . The request is processed through IP network and conveyed to wireless network . The request is processed and the address associated with that request is identified as one that belongs to company A. Following this identification the request is routed to wireless Centrex for further handling. Let us assume now for the sake of this example that the request was placed for the number associated with the sales department. At wireless Centrex there is a pre defined list of telephone numbers of sales persons associated with the sales department number preferably arranged by priorities. Wireless Centrex receives the input of the number requested and determine that the call should be established with the first number of the list associated with the number dialed. The WX communicates with HLR and or MSC which will determine through which of the BTS s associated with wireless network should this call be routed wherein BTS is selected based on the presence of subscriber to whom the call is now being routed in a cell covered by BTS . The subscriber receives the request to establish a call they will preferably also receive prior to establishing the call an indication of the original number that was dialed by subscriber of WLAN with or without an indication of the WLAN subscriber s identity and thereafter subscriber accepts the call.

By this example a request is initiated to establish a communication session e.g. a telephone call with a certain subscriber of a mobile network that is also a subscriber of the wireless Centrex system step . The request may either be initiated by a user belonging to that mobile network or from any external network i.e. PSTN . Similarly the request may be in the form of an e mail sent to the user s e mail address for presenting it on their mobile device.

The request enters the mobile network step via a Gateway Mobile Switching Center GMSC for example a call from the PSTN with a mobile dialed number will be routed to the GMSC and received at a MSC GMSC of the mobile network.

The MSC GMSC then interrogates the HLR step in order to get the called subscriber service profile. According to the HLR s Terminate IN Key the IN signaling of the call is routed toward a wireless Centrex node WX of the present invention. Alternatively the IN signaling of the call will be routed toward the WX according to the dialed number e.g. all numbers between 1001 and 1100 should be routed to the WX step .

The wireless Centrex then receives details about the call initiator i.e. ANI called number if the subscriber is attached to the network or the last VLR update .

The subscriber of this example has several lines associated with his one device different addresses all of which are managed by the WX node. The subscriber has one lead e.g. default number and a list of additional numbers addresses is associated at the WX node with that subscriber. When a call is received on any of the subscriber s lines the following process is initiated.

At the WX the number dialed is matched against the pre defined list and the appropriate lead number for the subscriber is determined and based on the information available e.g. the lead number routing tables rules and other information returns to the MSC with routing instructions for that call step . In some cases in which the mobile network has limited IN capabilities or additional resources are needed the WX may request to route the call to the WX Service Node which will physically control and route the call.

A USSD message is then sent to the subscriber s lead number at his mobile device preferably with information regarding the called number and ANI of the caller step .

The subscriber receives the information embedded in the USSD message while his telephone is ringing step .

The subscriber presses any key and the USSD message may be erased step . The Subscriber views the regular incoming call screen and can accept or reject the call step .

As an alternative the subscriber may receive in step the USSD message before the telephone is ringing. Then the subscriber may select an action from a known list. The USSD will transfer the selection to WX node which will route the call based on subscriber selection and other parameters that are stored at the management of the WX. The MSC will route the call based on the instructions it received from the WX while the latter will continue to manage the call and receive updates regarding the call status e.g. once the call is disconnected the MSC will send the information to the WX via signaling step . Based on the call information the WX routing tables and rules and other parameters the WX will decide if and when to make changes in respect of this call.

In addition to status information data information and control information can also be communicated between devices. Data information can be USSD messages sent from a device to a group of devices with information such as meeting information routing location maps and so on. Control information can be USSD messages to a device instructing the device on how to present data sent to the device such as text layout volume from the sending device and so on.

Specifically shows an information message sent by the WX node to the attendant device step . The USSD message is generated either automatically or manually each time the availability of the supervisor device changes. A status change in supervisor device may occur when a call is disconnected a call originates out of range do not disturb mode and the likes. A status change may also occur automatically based on time of day day of the week day of the year predefined holidays and others. The USSD message can include additional options consisting of but not limited to options such as call control interaction calling number and so on. The information message is received at the attendant device step and the status from the message is displayed on or by the attendant s device . If the USSD message indicates that the supervisor device is busy step calls messages or other communications are not transferred to the respective device step from the attendant device otherwise calls messages or other communications are transferred to the supervisor device step from the attendant device . A partial blocks of calls messages or other communication can be requested. A partial block will block all requests to supervisor except for a few requests allowed to be transferred by the attendant. Those allowed are on a list displayed on the attendant screen. A virtual or physical indication or a text at the attendant device can be displayed indicating the supervisor s device status. During this exemplary message flow the supervisor s device status may change while the attendant responding to a call. New USSD message is re sent to the attendant while the attendant is in call notifying the attendant of the modified state this USSD message can include additional options consisting of but not limited to options such as call control interaction options of the attendant current state calling number and so on.

A caller originates a call to a WX subscriber . The mobile operator s MSC receives the call and because the destination is a WX subscriber the MSC passes call details to WX node . The WX node receives the information regarding the new call and looks up the data related to the called number and identifies the WX subscriber .

The WX node then alert the WX subscriber with an incoming call message step . WX node sends a USSD message to WX subscriber with the call control options of the ringing state. The options can be the same to all WX subscribers or can be customized per WX subscriber the options may be further different if WX subscriber is idle and a new call is ringing or in a similar case were the subscriber is in call and receives a new call call waiting . The WX subscriber has the option of changing the exact USSD message received at each state of the call such as the listed options of the message. The WX subscriber can define for example via a web interface if and how to receive call control messages while the ring tone is received. In one embodiment of the disclosed invention the WX subscriber will have to manually accept the USSD session and then receive the USSD message however embodiments that automatically accept the USSD sessions are specifically included in the scope of the disclosed invention.

Call control manager sends the USSD messages to the WX subscriber and interacts with the WX node . WX node interacts with the call control manager providing the call control manager with the information of which WX subscriber to set up the USSD session with and what USSD message to send to the WX subscriber . Call control manager also receives information from WX subscriber such as WX subscriber from session ID x sent an answer. The USSD forwards the message to the WX node . The WX node maintains call control parameters such as timers and messages associated with USSD interface protocol and WX subscriber . It should be noted that the WX subscriber can request information from WX node during any state of the call by initiating USSD messages in accordance with the principles of the disclosed invention.

Once the request to the WX node is sent the WX subscriber can wait for the WX node to provide the caller information and response options before proceeding with the call step .

Once the USSD message is received by the WX subscriber step the WX subscriber step sends a USSD message back to the WX node indicating to the WX node that the WX subscriber either accepts or rejects the call with routing response data. Rejecting or accepting a call by the subscriber can in some cases requires the WX subscriber to select the send button or end button on the device . In many cases these options are managed directly by the MSC without USSD message sent by the WX subscriber to the WX node . The WX subscriber can also send messages to the WX node by sending a predefined string of digits to the WX node . The string of digits may be created by but is not limited to a depression of a physical button or a button displayed on a touch screen. The buttons may be depressed in sequence or in parallel. In other embodiments of the disclosed invention voice activation or motion detection activation may be used and are integral part of the disclosed invention.

If the WX subscriber accepts the call the WX node sends a message to the MSC to connect the incoming call with the WX subscriber . The MSC connects the call step . The WX node also sends USSD message step to the WX subscriber providing updated call control options for the state of the connected call. During the call the WX subscriber may lose the current response options display on his device. When a device indicates that it wants the current state interaction information WX node receives request step from WX subscriber and sends a USSD message providing caller information with the current response options which will be displayed on the device .

The WX subscriber sends a USSD message to further provide options on how to handle the call. In a non limiting example these may be but not limited to a request to transfer the call to attendant or transfer the call with a canned message to instruct the party how to handle the call. Such instructions may include but are not limited to setting a meeting with the caller providing help to the caller taking a message from the caller overriding a disallow incoming calls from a particular caller or establishing a conference call with another WX subscriber with or without canned messages and so on.

Once the WX subscriber is in the process of a call and receives the USSD updated call control options message the WX subscriber can select for example the routing option displayed on the screen or just converse with the caller step . The WX node proceeds with the call in accordance with the principles disclosed with respect of . If the WX subscriber rejects the call step the WX subscriber can either ignore the call or forward the call step . As described above the WX subscriber sends USSD message to further provide options on how to handle the rejected call. The WX node proceeds with the call in accordance with the principles disclosed with respect of .

During a call multiple USSD messages can be sent between the WX node and WX subscriber to provide the ability to the WX subscriber to choose the handling of calls with the option provided. Every WX subscriber has a call option database. Call option database may be unique for a given WX subscriber for a company for any type of group or a system generic database.

The USSD message sent by the WX subscriber can indicate disconnect call step . Upon receiving the USSD message from the WX subscriber the WX node informs the MSC to disconnect the call step . The USSD message may also instruct the WX node to start a new call after the disconnect.

The USSD message sent by the WX subscriber can indicate the call to be forwarded to the WX subscriber own voicemail box step . The WX node then sends a message to the MSC to connect the originating caller to the WX subscriber voicemail box step .

The USSD message sent by the WX subscriber can indicate the call to be transferred to another WX subscriber within the same company step . The call is transferred to the new WX subscriber with an optional USSD message step . The USSD message may contain information about the caller with a request from the WX subscriber sender to the new WX subscriber such as set up a meeting help the caller and more. The call is processed as a new call connecting the original caller to the new WX subscriber . The WX node proceeds with the call in accordance with the principles disclosed with respect of .

The USSD message sent by the WX subscriber can request the call to be transferred from the current WX subscriber to an attendant step . At the same time WX node sends a USSD message with the selected canned message which is then sent to the attendant s phone set a meeting and the device status of the sending device . As a result of the transfer WX subscriber is disconnected from the call and the USSD session ends. The call is transferred to the attendant. Attendant step receives the call and receives the USSD message related to the call. The call is processed as a new call connecting the original caller to the attendant. The WX node proceeds with the call in accordance with the principles disclosed with respect of .

The USSD message sent by the WX subscriber can request to establish a conference with another party step . The WX node instructs the MSC to establish the conference with the new party step . The WX node can also send USSD messages to the new party with information about the caller with optional information from the WX subscriber in accordance with the principles disclosed with respect of .

As shown in the flowchart a request to establish a communication to a WX subscriber is requested . Once the request arrives at the MSC the MSC sends a message to the WX node . The WX NODE receives the request and sends a USSD message to the WX subscriber . The message includes the caller number calling number dialed number and call control options list. Call control options list contains but not limited to options such as connect call transfer call rejects call and so on. Options sent to the WX subscriber are determined by database assigned to each WX subscriber and selected by the WX Node based on progress status of the call. The options in the database can be different for each WX subscriber . The WX subscriber selects an option from the list and sends a USSD message to the WX Node . In this exemplary call the WX subscriber selected option is to establish the call with the caller. Once the WX Node receives the message the WX Node sends a message to the MSC to connect the call between the caller and the WX subscriber . The MSC establishes the call and sends a message to the WX Node indicating the call is connected. The WX Node also sends another USSD message to the WX subscriber with a new call control options list. The option list can be one of but not limited to transfer call conference call transfer call to consultation hold consult with transfer to voice mail transfer with canned message to send canned message send interaction canned message. In this exemplary call the WX subscriber selects the option to transfer the call to a subscriber named Jane with a canned message. Once the WX Node receives the request message from the WX subscriber the WX Node sends a new USSD message back to the WX subscriber with a canned information option list. Canned messages provide the WX subscriber with further control options for the handling of the call. Through the canned messages the WX subscriber directs information to the party how to proceed with a request. Information such as but not limited to set a meeting help the caller get a message and so on. Multiple USSD canned messages can be communicated between the WX Node and the WX subscriber during a call. In this exemplary call the WX subscriber selects the option set a meeting and sends the USSD response message to the WX Node . The WX Node sends a message to the MSC to transfer the call to a third party. The transfer can be implemented via Intelligent Network IN protocol or via sending a USSD message to MSC with the short codes for call transfer while spoofing the WX subscriber ID. For example WX node sends a string defined for transfer 4 4 third party number Jane the MSC translates it as coming from the WX subscriber . In this exemplary call WX subscriber Jane is connected to the caller. The WX Node also sends a USSD message to the WX subscriber Jane with call control options list. The list details include but are not limited to the caller the transfer party and the request from the transfer party to set up a meeting with the caller. The WX Node can also send a USSD message options list message to a non wireless device phone. For example if Jane has a VoIP SIP phone the WX Node converts message to SIP and sends the USSD message data as part of the display attributes of the SIP so the SIP phone can display the message. The message includes the following details but not limited to the caller the transfer party and the request from the transfer party to set up a meeting with the caller. WX subscriber Jane converses with the caller sets up a meeting and disconnects the call .

As shown in flowchart MSC receives new call request for WX subscriber subscriber is in call and may have several calls in queue. MSC sends a message to the WX Node . The WX Node receives the request and determines that a number of calls in a queue has reached a threshold. The WX Node sends a USSD message to WX subscriber and WX subscriber indicating a new list and reaching the list threshold. The message is received by both WX subscribers and . The message consists of the calls in queue caller number calling number and call control options list. In our exemplary call Subscriber selects one of the calls in queue and responds with the selection to WX node . The WX node sends a message to the MSC to connect the selected call with the WX subscriber . The WX Node proceeds with the call in accordance with the principles disclosed with respect of .

As shown in flowchart subscriber requests to receive call control options from the WX Node . The request can be sent via a request to establish a new USSD session or via an established session. The request can be a predefined string sent to WX Node requesting current call control options list. The WX Node receives the request and sends a USSD message to the WX subscriber . The message consists of call control interaction options which consists but not limited to options such as barge in silent monitor and so on. The WX subscriber selects an option from the list and sent a USSD message to the WX Node . In this exemplary call the WX subscriber selects option barge in . Once the WX Node receives the message the WX Node sends a message with a list of potential calls which WX subscriber can barge into. Options sent to the WX subscriber are determined by database assigned to each WX subscriber and selected by the WX Node based on progress status of the call. The options in the database can be different for each WX subscriber . The WX subscriber selects a call from the list and sends a USSD message to the WX Node . The WX Node sends a message to the MSC to barge in subscriber to the selected call. The MSC connects WX subscriber to the selected call and sends a message to the WX Node indicating the call is connected.

As shown in flowchart MSC receives new call for WX subscriber . MSC sends a message to the WX Node . The WX Node receives the request and identifies the caller . Caller is stated in the WX database as a caller which permits sending to other WX subscribers additional information data. The permission to send additional information data and the type of data to be sent can be authorized by but not limited to the WX subscriber or the company s WX subscriber administrator. Additional information data options sent include but are not limited to are such as Joe Cohen VP Sales East Coast Jane Lipkin 052 123 4567 customer support and so on.

In this case caller requested to send Joe Cohen VP Sales East Coast . WX Node sends USSD message to subscriber with the additional data as part of this message additional options can be sent including but not limited to options such as call control interaction called number and so on.

In addition to the above certain other features may be added as part of a wireless Centrex solution for example 

Furthermore when a new user is added to the organization the company address book can be automatically updated and the company public address book OTA sent to the new user.

In an embodiment of the present invention some or all of the method components are implemented as a computer executable code. Such a computer executable code contains a plurality of computer instructions that when performed in a predefined order result with the execution of the tasks disclosed herein. Such computer executable code may be available as source code or in object code and may be further comprised as part of for example a portable memory device or downloaded from the Internet or embodied on a program storage unit or computer readable medium. The principles of the present invention may be implemented as a combination of hardware and software and because some of the constituent system components and methods depicted in the accompanying drawings may be implemented in software the actual connections between the system components or the process function blocks may differ depending upon the manner in which the present invention is programmed.

The computer executable code may be uploaded to and executed by a machine comprising any suitable architecture. Preferably the machine is implemented on a computer platform having hardware such as one or more central processing units CPU a random access memory RAM and input output interfaces. The computer platform may also include an operating system and microinstruction code. The various processes and functions described herein may be either part of the microinstruction code or part of the application program or any combination thereof which may be executed by a CPU whether or not such computer or processor is explicitly shown. In addition various other peripheral units may be connected to the computer platform such as an additional data storage unit and a printing unit.

The functions of the various elements shown in the figures may be provided through the use of dedicated hardware as well as hardware capable of executing appropriate software. When provided by a processor the functions may be provided by a single dedicated processor by a single shared processor or by a plurality of individual processors some of which may be shared. Explicit use of the term processor or controller should not be construed to refer exclusively to hardware capable of executing software and may implicitly include without limitation digital signal processor hardware ROM RAM and non volatile storage. Other hardware conventional and or custom may also be included. Similarly any switches shown in the figures are conceptual only.

All examples and conditional language recited herein are intended for pedagogical purposes to aid the reader in understanding the principles of the invention and the concepts contributed by the inventor to furthering the art and are to be construed as being without limitation to such specifically recited examples and conditions. Moreover all statements herein reciting principles aspects and embodiments of the invention as well as specific examples thereof are intended to encompass both structural and functional equivalents thereof. Additionally it is intended that such equivalents include both currently known equivalents as well as equivalents developed in the future i.e. any elements developed that perform the same function regardless of structure.

It will be appreciated that although various aspects of the invention have been described with respect to specific embodiments alternatives and modifications will be apparent from the present disclosure which are within the spirit and scope of the present invention as set forth in the following claims. For example enterprise management can be done by web management or by any other method such as using wireless device using voice call etc. as long as the enterprise is provided with the ability to control and define how the routing of its employees mobile devices will be implemented i.e. set rules create company wide features and parameters . It should be further noted that the teachings shown herein are also applicable when a user device initiates a communication with either a call center and or another user device or devices. The inventions disclosed herein may be implemented using hardware software firmware or any combination thereof without departing from the spirit of the disclosed inventions.

