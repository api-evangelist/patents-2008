---

title: Systems and methods for detecting intermittent, weak and missing jets with an inline linear array sensor
abstract: Systems and methods are provided for detecting intermittent, weak or missing jets of a printer. The detection is implemented using a test pattern. Detected failed jets may be confirmed using a verification target. A printhead containing nozzles corresponding to detected failed jets may be wiped or purged.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07896460&OS=07896460&RS=07896460
owner: Xerox Corporation
number: 07896460
owner_city: Norwalk
owner_country: US
publication_date: 20080814
---
This is a Division of application Ser. No. 10 999 014 filed Nov. 30 2004 now U.S. Pat. No. 7 427 118. The disclosure of the prior application is hereby incorporated by reference herein in its entirety.

Some printers such as direct marking office printers have a plurality of nozzles. Each nozzle fires drops of ink during passes of printing operations.

To produce printed image of good quality the nozzles need to fire jets with adequate ink drop sizes with adequate strength and without omission.

When a printhead nozzle fires drops of an insufficient drop size then the print density will be less than the neighboring jets and a streak will occur in the image. When a printhead nozzle does not consistently fire drops then the missing drops of ink will also lead to smaller print density in the pixel columns that jet writes and thus streaks. When a printhead nozzle loses its ability to fire drops of ink then there will be no ink written in the pixel columns addressed by that jet and thus streaks. When intermittent weak or missing jets occur it is desirable that such intermittent weak and missing IWM jets be detected and subsequent correction be made.

Systems and methods are provided for detecting intermittent weak and missing jets with an inline linear array sensor.

In various embodiments of systems and method a method for detecting intermittent weak or missing jets comprises obtaining a test pattern having a plurality of dashes produced by a row of nozzles obtaining a response profile based on sensor responses in a cross section of the test pattern obtaining a metric for the response profile and obtaining a difference between the metric and a reference.

These and other features and details are described in or are apparent from the following detailed description.

As shown in the image is printed by the printer nozzles over a plurality of passes . In each pass the nozzles print a section of the image in the process direction . The width of the section may be one pixel.

During a pass the printhead not shown moves in the cross process direction for one pixel. Accordingly on the next pass of the media under the printhead a different pixel column will be written to. This process continues as the printhead continuously moves in the cross process direction and the image is built by the sections produced in the passes .

As shown in the image is printed with failed jets. In particular the left portion and the right portion of the image are printed with normal nozzles while the center portion of the image is printed with a nozzle having a failure.

The cause of the failure is that the nozzle produces drops of ink with a smaller mass than the rest of the nozzles on the printhead. Thus as shown in although the center portion of the image is printed uniformly the ink coverage is not as dense because of the smaller ink drops.

In addition because the drops have a smaller mass they travel more slowly from the printhead to the medium than the drops of regular size. Thus it took longer for the failed drops to cross the gap between the printhead and the medium on which the image is printed. Consequently the center portion of the image is translated in the process direction relative to the left portion and the right portion of the image . In particular as shown in the center portion of the image is shifted down relative to the left portion and right portion of the image . As a result as shown in the lead edge of the image is not a straight horizontal line but is shifted down in the middle portion where the weak nozzle prints.

However does not indicate weak jets or jets with smaller drop mass. As shown in the center portion of the image is not shifted or translated in the process direction . The lead edge of the solid pattern is a straight line in the cross process direction.

The failed jets may be detected and identified. In various exemplary embodiments the failed jets may be detected at different points during a customer print job. For example the failed jets maybe detected at the end of a job at the end of a day after a given number of prints or on customer demand.

In various exemplary embodiments the failure is detected using a test pattern. The dimensions of the test pattern may vary. The test pattern may be built up in multiple passes depending on different requirements such as the time available for detection the techniques used in cleaning the test pattern or a customer request. In various exemplary embodiments a test pattern having only simple dashes produced during a single pass is used. In various exemplary embodiments consideration is given whether the width of the linear array detector detector is greater than the process width and whether all the nozzles can be printed and imaged by the linear array detector in a single pass.

As shown in the test pattern includes an array of dashes . The dashes are far enough apart in the cross process direction so they can be distinguished by the linear array sensor. The dashes are long enough in the process direction so that 2 or more scans of the linear array detector occur while the dash passes under the linear array detector.

As shown in the dashes each extend in the process direction . Each row of dashes is arranged in the cross process direction . The dashes in a row are spaced or separated from each other with a substantially equal distance in the cross process direction . Each dash is of substantially the same thickness and length.

In the test pattern shown in the nozzles of the printhead are spaced too closely to be distinguished if every nozzle prints dashes in a single row. Thus as shown in the odd nozzles print dashes in one row and the even nozzles print dashes in another row. In particular the dashes printed by odd nozzles are in rows counting from the top and the dashes printed by the even nozzles are in rows .

In for each printhead dashes are printed by the cyan magenta yellow and black nozzles. In particular the dashes in rows and are printed by the cyan nozzles the dashes in rows and are printed by the magenta nozzles the dashes in rows and are printed by the yellow nozzles and the dashes in rows and are printed by the black nozzles. For each color strip the dash is repeated 3times. For example as shown in a dash from the odd cyan nozzles are printed 3 times in rows and . The more the dash is repeated the higher precision with which measurements can be made.

When the process width the dimension in the cross process direction is greater than the ink on drum detector width only a subset of the nozzles can be monitored each time. The printheads may be moved so that all nozzles to be monitored are within the field of view of the ink on drum detector. In various exemplary embodiments a control scheme is set up that monitors a different subset of the nozzles during each measurement iteration. In various other exemplary embodiments the printheads are repositioned during the course of a single measurement. In such other exemplary embodiments all nozzles print dashes but the dashes are printed on different sections of the drum in the process direction.

A test pattern may be produced at the nominal imaging speed as the normal printing mode for direct marking printers. In some cases the velocity of the imaging media is such that an image taken with the linear array sensor will be compressed in the process direction compared to the cross process direction.

When the test pattern is imaged at full drum velocity for a high speed printer the dashes will need to be very long so that they can still be resolved after the compression in the cross process direction. Such a length requirement may exceed the area available for imaging on the drum or may increase the amount of ink that is required for making measurements.

In various embodiments the drum is slowed down when imaging a test pattern. Such a slow down reduces the required ink amount. However the speed need not be very slow. The minimal speed is constrained by the ability to maintain a uniform drum rotation motion quality. The maximum speed is constrained by the maximum length of the dashes that can be accommodated and ink usage.

In various exemplary embodiments the linear array inline sensor is operated in diffuse mode or in specular mode. In diffuse mode the detectors are oriented normal to the surface being imaged and the illuminators are at some angle. The contrast arises from the difference in geometry between the ink and the substrate. The contrast also arises due to a difference between the reflectance of the substrate and the reflectance of the ink. In specular mode the contrast arises because of the difference in the amount of light scattered when imaging the substrate and when imaging ink on the substrate.

In various exemplary embodiments linear array inline sensors having separate red blue and green illuminators are used. In such exemplary embodiments largest signals are obtained by using complementary color to image the ink as shown in .

In a digital test pattern similar to the test pattern shown in is depicted on the left hand side. However the dashes in have a width that is larger than their length. On the right hand side of red illumination green illumination and blue illumination are depicted. The process direction in runs in the vertical direction. There are 12 repeats of each dash for each color of ink. Dash group the first 12rows at the top of the test pattern are written with cyan ink. Dash group the next 12 rows are written with magenta ink. Dash group the following 12 rows are written with yellow ink. Dash group the last 12 rows are written with black ink.

As shown in when the red illuminator is used as a complementary color for cyan ink there is a large contrast between the cyan ink and the drum substrate. Similarly as shown in the green illuminator gives the largest contrast with magenta ink and the blue illuminator gives the largest contrast with yellow ink. For black ink an illuminator of any color produces large contrast.

In various exemplary embodiments each dash in the test pattern corresponds to one nozzle. The nozzle to which a dash corresponds to can be determined by counting the columns of dashes starting from one side of the image.

The presence of ink on the drum can either decrease or increase the response of sensors depending on the relative contrast between the ink and the drum and the relative texture between the ink and the drum. For the ease of discussion it is assumed that the presence of ink decreases sensor response. However it should be appreciated that the discussion below also applies when the presence of ink increases sensor response.

In various exemplary embodiments a projection of the imaged test pattern in the process direction of sensor response is used to detect failed nozzles in a printed image. As shown in the cross section of the sensor response is a collection of profiles through the dashes in the test pattern . A profile may include sensor response along the cross process direction at a particular location in the process direction . In various exemplary embodiments the cross section is a collection of profiles through all the dashes in a test pattern . In various exemplary embodiments the cross section is a collection of profiles through part of the dashes in a test pattern .

In a response profile of the cross section of sensor response sensor response maxima occur at locations corresponding to positions where dashes do not exist such as at the gaps between dashes . On the other hand sensor response minima occur in the response profile at positions corresponding to locations where dashes are printed. The positions of the minima are used to obtain the locations of the corresponding dashes. In various exemplary embodiments the positions of the minima are also used to obtain information of the nozzles which produced the dashes.

In various exemplary embodiments the centers of the dashes may be determined based on the cross section of sensor response using the minima in the response profile. The determination may be achieved by any existing or later developed techniques. In various exemplary embodiments the center of a dash line is determined based on an interpolation of the response data near the dash minimum a mid point of the interpolated left and right dash edge position where a reflection threshold is exceeded a non linear least squares fit to some average functional form of the dash or a multi dimension vector under Radar theory.

In the cross section may extend in the process direction . Thus a vertical strip of the image is sensed from the test pattern in the vertical direction. As discussed above because of the presence of the dashes this cross section provides a generally Gaussian response profile having low response at positions corresponding to the centers of the dashes and having high responses at locations corresponding to gaps between the dashes. In various exemplary embodiments the centers of the dashes are identified by identifying the minima in the response profile. In various exemplary embodiments procedures are implemented for determining centers of the dashes even when the cross section is noisy due to noise from substrate structure and defective dashes.

In a cross section of the sensed image may be used to obtain a response profile. Different cross sections may be applied along the cross process direction at different positions along the process direction . As discussed above the presence of the dashes reduces response strength. Thus each response profile is generally a Gaussian curve.

In various exemplary embodiments a plurality of metrics are extracted for each nozzle using the sensed image or sensed test pattern. The metrics may include the position of the drop in the cross process direction such as the centers of the dashes in the cross process direction x the position of the drop in the process direction such as the centers of the dashes in the process direction y and a metric related to the size of the drop such as a minimal reflectance at the center of the drop r .

In the solid line response profile represents a cross section of the image in where there is no failed jets. Thus the solid line response profile substantially conforms to a series of Gaussian curves with substantially the same amplitude. The five minimal reflectance r i where i 1 2 3 4 and 5 have substantially the same magnitude.

On the other hand the dashed line response profile represents a cross section of the image in where the dashes in the middle column are shifted down in the process direction see due to failed jets of reduced ink drop size. Thus because a dash that should have occupied a position in a test pattern may have been shifted out of the field of view of the linear array sensor the reflectance from this position may be higher than expected. Accordingly a cross section that runs through a row of dashes in may contain higher reflectance at a position near the middle column .

In particular as shown in the minimal response r corresponding to the dashes of the middle column in is significantly greater than the minimal reflectance r r r and r corresponding to the dashes in the neighboring columns in . Also the minimal response r is significantly greater than the minimal reflectance r corresponding to the dashes in the middle column in . As discussed above this is due to the shift of dashes in the middle column of in the process direction . Due to this shift on average the decrease of reflectance due to the presence of the dashes is reduced. Accordingly the sensed reflectance is elevated. In various exemplary embodiments this response elevation is used to detect weak jets with reduced ink drop size. Accordingly the nozzle that produces the elevated response is flagged as a potential failed nozzle.

Referring back to a cross section may also run along the process direction . In particular as shown in the cross section runs through the dashes along the process direction . The response profiles obtained from different cross sections may be used to determine the position of the drop in the process direction such as the centers of the dashes in the process direction y .

In the thin lines correspond to dashes printed with nozzles having no failed jets. The thick line corresponds to the dashes that are produced with failed jets and are shifted behind in the process direction . In various exemplary embodiments the difference between the thick line and the thin line is used to detect failed jets. In particular the difference between the positions of the minimal reflectance of the thin lines and the positions of the minimal reflectance of the thick line is used to determine the centers of the dashes in the process direction Y .

In various exemplary embodiments a number of signal processing techniques are used to extract the amount of the shift in the process direction from the response profiles shown in . In various exemplary embodiments the phase of the periodic response profiles is determined as a metric to detecting failed jets. The phase is proportional to the distance the dashes have been shifted in the process direction. In various exemplary embodiments this phase is used to determine the position of the drop in the process direction y .

In various exemplary embodiments a number of signal processing techniques are used to extract the amplitude of the response profiles shown in . The amplitude of the response profiles comprises an alternative metrics to the minimum reflectance. For a normally functioning jet with a low minimum reflectance the amplitude of the response profile will be large. For a poorly functioning jet with a higher minimum reflectance the amplitude of the response profile will be small. Similarly in various exemplary embodiments a number of signal processing techniques are used to extract the amplitude of the response profiles shown in .

In various exemplary embodiments a threshold is established as a criteria for flagging a failed jet. The threshold allows for certain noise level in determining the process direction position of each jet but is large enough to ensure that noise in the measurement of the process direction position is below this threshold. In various exemplary embodiments the cutoff is chosen between two to three times the standard deviation of the noise in the measurement of a jets offset in the process direction.

In various exemplary embodiments multiple criteria are established for identifying failed jets. For example when either of the position of the drop in the cross process direction the position of the drop in the process direction and the metric related to the size of the drop changes too much away from their expected values a failed jet will be flagged.

In various exemplary embodiments the position and magnitude of the drop is compared not to the mean position and magnitude of drops across the printhead but instead to historical values of that drops position and magnitude before a potential failure. For example even for a normal functioning printhead there may still be some jet to jet variation in the position of the drop in the process direction. In various exemplary embodiments a table may be built up of expected values for the position in the process direction position in the cross process position and drop magnitude for each nozzle. The table becomes more precise over time as more measurements are averaged together. Each subsequent measurement of position in the process direction position in the cross process direction and drop magnitude can be compared to the previously obtained values in the table. When a large variation from the expected value occurs a failed jet is flagged.

The detected failed jets may be used for correction and adjustment. In various exemplary embodiment the failed jets are detected when manufacturing the printheads. In various other exemplary embodiments the failed jets are detected dynamically during printer operation.

In various exemplary embodiments a flagged jet is verified in a verification step before the nozzle that produces the jet is purged. In various exemplary embodiments the necessity of the verification step depends on the threshold chosen for flagging a jet as a failed jet. If the threshold is chosen too low and no verification step is used then measurement noise on a normally operating nozzle may cause a purge. In various exemplary embodiments a customers request is also taken into consideration when deciding whether a flagged jet needs to be verified before the associated nozzle is purged.

Next in step S a test pattern or a target is printed. In various exemplary embodiments the test pattern may be an array of dashes. Then in step S the drum is slowed down. In various exemplary embodiments the drum is slowed down to avoid having extremely long dashes in the test pattern which keeps the ink usage down to a minimum.

Next in step S the image of the test pattern is captured by a sensor. In various exemplary embodiments the sensor is a linear array sensor. Then in step S the detected image is analyzed and metrics are extracted. The metrics include the cross process position the process position and the magnitude of a drop ejected from each nozzle in the field of view of the linear array sensor. Thereafter process of the method continues to step S.

In step S it is determined whether for any nozzle an extracted metric exceeds a threshold that indicates an intermittent weak or missing jet. If it is determined at step S that no metric exceeds a threshold process of the method jumps to step S where the monitor process ends and printing may be resumed.

On the other hand if it is determined in step S that a metric exceeds a threshold of an intermittent weak or missing jet process of the method continues to steps S S for confirmation.

In particular in step S a verification target or a confirmation pattern is printed. In various exemplary embodiments the confirmation pattern is identical to the test pattern but printed on a different area of the drum. Such a confirmation pattern printed on a different area of the drum improves the accuracy of the failed jet detection in the monitor process because the effect of some isolated point defect on the drum may be prevented from giving any false positive signal. In various other exemplary embodiments the confirmation pattern may be a part of the test pattern that includes the suspected failed jets and a few jets adjacent to the suspected failed jets. Such a reduced size of the confirmation pattern in relation to the test pattern prevents doubling the amount of ink required each time for confirming failed jets.

Next in step S the drum is slowed down. Then in S the image of the confirmation pattern is captured by the sensor. Afterwards in step S metrics are extracted from the captured confirmation pattern. Process of the method then continues to step S.

In step S it is determined whether the failed jets the intermittent weak or missing jets detected in steps S S are confirmed. If the failed jets are not confirmed at step S process of the method proceeds to step S where operation of the method ends and printing is resumed.

On the other hand if the failed jets are confirmed at step S process of the method proceeds to step S where the failed jets are wiped and or purged. Operation then proceeds to step S.

In step S a determination is made whether to perform more detection. If it is determined in step S to perform more detection operation of the method returns to step S to perform more detection such as to detect whether the purge of the failed jets is effective or to detect other failed jets. On the other hand if it is determined in Step S that more detection is unnecessary operation of the method continues from step S where operation of the method ends and printing is resumed.

In various exemplary embodiments steps S S in may be omitted. In such exemplary embodiments the printhead is wiped and or purged once it is determined in S that a metric exceeds a threshold of an intermittent weak or missing jet.

In various exemplary embodiments the system is implemented on a programmable general purpose computer. However the system can also be implemented on a special purpose computer a programmed microprocessor or microcontroller and peripheral integrated circuit elements an ASIC or other integrated circuits a digital signal processor DSP a hard wired electronic or logic circuit such as a discrete element circuit a programmable logic device such as a PLD PLA FPGA or PAL or the like. In general any device capable of implementing a finite state machine that is in turn capable of implementing the flowchart shown in can be used to implement the system .

The input output interface interacts with the outside of the system . In various exemplary embodiments the input output interface may receive input from the outside such as the input via one or more links . The input output interface may output data to output via one or more links .

The memory may also store any data and or program necessary for implementing the functions of the system . The memory can be implemented using any appropriate combination of alterable volatile or non volatile memory or non alterable or fixed memory. The alterable memory whether volatile or non volatile can be implemented using any one or more of static or dynamic RAM a floppy disk and a disk drive a writable or rewritable optical disk and disk drive a hard drive flash memory or the like. Similarly the non alterable or fixed memory can be implemented using any one or more of ROM PROM EPROM EEPROM an optical ROM disk such as a CD ROM or a DVD ROM disk and disk drive or the like.

In the exemplary embodiment of the system shown in the data receiving circuit routine or application under control of the controller receives data from the input via the one or more links and the input output interface . The data may be signal detected by a sensor from printed test pattern or printed confirmation pattern.

The metrics extracting circuit routine or application under control of the controller extracts metrics from the received data. The failure detecting circuit routine or application under control of the controller determines whether a metric is greater than a threshold by comparing the difference between the metric with a reference. A failed jet is detected when the metric is greater than the threshold.

The failure confirming circuit routine or application under control of the controller requests confirmation data if a failed jet is determined by the failure detecting circuit routine or application . Consequently under control of the controller the data receiving circuit routine or application receives confirmation data from a confirmation pattern. The metrics extracting circuit routine or application extracts metrics from the confirmation data. The failure detecting circuit routine or application detects failed jets from the metrics obtained from the confirmation pattern.

The failure confirming circuit routine or application under control of the controller determines whether the failed jets are confirmed. The failure confirming circuit routine or application after failed jets are confirmed sends signal to output via input output interface and the one or more links for wiping and or purging the printhead containing the nozzles associated with the detected failed jets.

The controller may also instructs the data receiving circuit routine or application the metrics extracting circuit routine or application and the failure detecting circuit routine or application to perform more detection after the purging.

The data receiving circuit routine or application the metrics extracting circuit routine or application the failure detecting circuit routine or application and the failure confirming circuit routine or application may receive data from or send data to the memory . In particular the threshold or thresholds may be stored in memory and may be updated as needed.

The method illustrated in may be implemented in a computer program product that can be executed on a computer. The computer program product may be a computer readable recording medium on which a control program is recorded or it may be a transmittable carrier wave in which the control program is embodied as a data signal.

While various details have been described these details should be viewed as illustrative and not limiting. Various modifications substitutes improvements or the like may be implemented within the spirit and scope of the foregoing disclosure.

