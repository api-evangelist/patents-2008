---

title: Establishing secure data transmission using unsecured E-mail
abstract: In one embodiment, a host entity may create a trusted connection with a guest entity. The host entity may encrypt a trusted connection invitation for an external guest entity using a proof of possession of a trusted token for the external guest entity. The host entity may transmit the encrypted trusted connection invitation to the external guest entity. A guest entity may decrypt the trusted token, and then use the proof of possession to decrypt the trusted connection invitation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08156550&OS=08156550&RS=08156550
owner: Microsoft Corporation
number: 08156550
owner_city: Redmond
owner_country: US
publication_date: 20080620
---
A first user from a first organization may want to exchange electronic data with a second user from a second organization. The first user may export administrative data such as calendars appointments contacts and other data for business issues. The first user may use a variety of protocols to share the administrative data. The first user may use a variety of methods to share such data securely. The first user may ask the second user for a material proof such as a password digital key or other authentication method before allowing access to the data on the subscriber side and to enforce authentication and authorization on the sharer side.

E mail or electronic mail may refer to a store and forward method of composing sending receiving and storing messages over electronic communication systems. The term e mail as a noun or verb may apply to several different types of systems including the internet e mail system based on the simple mail transfer protocol SMTP X.400 systems and intranet systems allowing users within an organization to e mail each other. Intranets may use internet protocols or X.400 protocols for internal e mail service. Messages may be exchanged between hosts using SMTP with software programs called mail transport agents MTAs . Users may download their messages from servers with standard protocols such as Internet Message Access Protocol IMAP or with a proprietary protocol.

E mail may not always be secure. Messages using SMTP a text based protocol may traverse the Internet going through any number of servers routers and domains. Along any of these routes the message may be intercepted and modified. Even if the message is not modified an undesirable person may be able to view the message s contents making e mail unsuitable for confidential business or personal information.

Entities that depend on secure e mail may operate private e mail servers that do not transmit e mail addressed to recipients within the organization over the Internet. Instead these e mail servers may transmit e mail over a secure corporate network using either a local area network LAN or a virtual private network VPN in combination with LANs to create a secure channel to connect remote offices of the same organization. However members of these organizations may want to send e mail to or share data with a member of another organization.

This Summary is provided to introduce a selection of concepts in a simplified form that is further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

Embodiments discussed below relate to a host entity creating a trusted connection with a guest entity. The host entity may encrypt a trusted connection invitation for an external guest entity using a proof of possession of a trusted token for the external guest entity. The host entity may transmit the encrypted trusted connection invitation to the external guest entity. A guest entity may decrypt the trusted token and use the proof of possession to decrypt the trusted connection invitation.

Embodiments are discussed in detail below. While specific implementations are discussed it should be understood that this is done for illustration purposes only. A person skilled in the relevant art will recognize that other components and configurations may be used without parting from the spirit and scope of the subject matter of this disclosure.

A host entity from a host organization may create a trusted connection with a guest entity allowing the guest entity from a guest organization to access administrative services and data available on the host entity. The trusted connection may be created using a secured e mail transmission. The host entity and the guest entity may both belong to a trust federation to facilitate a secure e mail transmission between entities from each of the two systems. The host entity may encrypt a trusted connection invitation for an external guest entity using a proof of possession from a trusted token for the external guest entity received from the trust federation. The host entity may transmit the encrypted trusted connection invitation to the external guest entity. A guest entity may decrypt the trusted token and use the proof of possession to decrypt the trusted connection invitation. The guest entity may use the information contained in the trusted connection invitation as a digital key to create a trusted connection with the host entity.

To create a trusted connection between two organizations the two organizations may belong to a trust federation. illustrates in a block diagram an e mailing system using a trust federation. The trust federation may be administered by a secure token service STS representing one or a cluster of servers. Two or more organizations may belong to the trust federation. Each organization may belong to one or more trust federations as long as one of those trust federations may have as a member both the source organization of the secure e mail transmission and the target organization. STS may be accessible by each of the organizations via the internet or other unsecured network. Each organization may provide identity information to STS such as a certificate public keys shared secrets and other secure identifiers. An administrator may provide the secure identifiers to the STS by mail in person or by another secure method.

The source organization may have its own secure internal network or source intranet connecting each device used by the organization such as a local area network LAN . Source intranet may have a source e mail server providing e mail services to all source client devices in source intranet . Source e mail server may refer to a cluster of servers. A source client device may send a secure e mail to another source client device in source intranet via source e mail server . A source client device may also send an e mail to a member of a target organization external to the source organization via source e mail server . The target organization may have its own secure internal network or target intranet connecting each device used by the organization. Target intranet may have a target e mail server providing e mail services to all target client devices in target intranet . Target e mail server may refer to a cluster of servers. Source e mail server may send e mails to target e mail server via the internet .

To securely send an e mail source e mail server may receive a new e mail message from a source client device . Source e mail server may identify the domain or host of the message recipient by inspecting the message header for simple mail transfer protocol SMTP or properties for messaging application programming interface MAPI . Source e mail server may send a request to STS that identifies source e mail server as a part of the source organization using the organization s identity information and requests a token for securely communicating with target e mail server .

STS may verify the identity of source e mail server by comparing the received identity information with the previously provided identity information. If the information matches then STS may send the requested token for securely sending e mail to the target e mail server . Source e mail server may encrypt the e mail message using the received token and may send the encrypted e mail message to target e mail server . Target e mail server may receive the e mail message and may decrypt the message using the target organization s identity information. If the message is successfully decrypted then target e mail server may deliver the e mail message to the inbox of the target client device for retrieval by the recipient.

Processing device may include at least one conventional processor or microprocessor that interprets and executes instructions. Memory may be a random access memory RAM or another type of dynamic storage device that stores information and instructions for execution by processing device . Memory may also store temporary variables or other intermediate information used during execution of instructions by processing device . ROM may include a conventional ROM device or another type of static storage device that stores static information and instructions for processing device . Storage device may include any type of media such as for example magnetic or optical recording media and its corresponding drive.

Input device may include one or more conventional mechanisms that permit a user to input information to computing device such as a keyboard etc. Output device may include one or more conventional mechanisms that output information to the user including a display a printer or other output devices. Communication interface may include any transceiver like mechanism or network connection that enables processing device to communicate with other devices or networks. Communication interface may be a wireless wired or optical interface.

Computing device may perform such functions in response to processing device executing sequences or sets of instructions contained in a computer readable medium such as for example memory a magnetic disk an optical disk or other medium. Such instructions may be read into memory from another computer readable medium such as storage device or from a separate device via communication interface .

One or more source client devices acting as a host entity computing platform may be used to establish a trusted connection with one or more target client devices acting as a guest entity computing platform in target intranet . The host entity may use an e mail program to send an electronic invitation for a user external to the source intranet to enter into a trusted connection with the host entity. The electronic invitation may contain data regarding the relationship such as the person s identity and how to access any available services. As the electronic invitation is being sent beyond borders of the source intranet the user may secure the invitation data using the trust federation so that the person receiving the data may be guaranteed that the invitation has not been spoofed or otherwise compromised.

Host entity may have a client access server module CAS and an office services management module OSM . A user may use OSM interface to interact with CAS module and OSM module . CAS module may support web interactions by host entity using an embedded web services module EWS . EWS module may facilitate interactions between host entity and STS . CAS module may be present in a source client device acting as a host entity or may be separately in a source e mail server . OSM module may have an outbox module for delivering e mail to a network such as the internet and one or more internal service and data ISD folders . ISD folders may be folders for various services provided by OSM module such as e mail storage calendars address book task lists and other administrative office functionalities.

OSM interface may detect guest entity who the user desires to have access to ISD functions. EWS module may request a trusted token from STS for guest entity . EWS module may add a SMTP address for guest entity or other guest entity identifier and a relationship identifier ID identifying the relationship between guest entity and host entity to an access control list ACL for ISD folder . EWS module may encrypt the relationship ID and other subscription information using a proof of possession POP associated with the trusted token. OSM interface may add a sharing payload to an invitation message and submit the invitation message to the outbox module for delivery. Outbox module may deliver the invitation message through normal channels.

Guest entity may have a CAS module and an OSM module . A user may use an OSM interface to interact with CAS module and OSM module . CAS module may be present in a target client device acting as a guest entity or may be separately in a target e mail server . CAS module may support web interactions by guest entity using EWS module . EWS module may facilitate interactions between guest entity and STS as well as other web presences. OSM module may have an inbox module for delivering e mail from the network. OSM module may contain external service and data ESD folders for storing data from ISD folders in host entity and a subscription SUB folder for storing subscription data for accessing host entity .

OSM interface may detect an invitation message from an external sender in the inbox module . OSM interface may create ESD folder in the OSM module to store ISD folder data. OSM interface may call EWS module to process the sharing payload of the invitation message. EWS module may decrypt the trusted token in the sharing payload and create SUB folder in OSM module .

EWS module may use a private key provided by STS to decrypt trusted token . A decrypted trusted token may have a sender address a target network a source network an action being performed with the message a token type and a POP .

EWS module may use POP to decrypt encrypted subscription data . Decrypted subscription data may have an access site address that guest entity may use to access ISD folder on host entity a folder ID to identify the folder to access on host entity a recipient address and a relationship ID that represents the relationship between guest entity and host entity .

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms for implementing the claims.

Although the above description may contain specific details they should not be construed as limiting the claims in any way. Other configurations of the described embodiments are part of the scope of the disclosure. For example the principles of the disclosure may be applied to each individual user where each user may individually deploy such a system. This enables each user to utilize the benefits of the disclosure even if any one of a large number of possible applications do not use functionality described herein. Multiple instances of electronic devices each may process the content in various possible ways. Implementations are not necessarily in one system used by all end users. Accordingly the appended claims and their legal equivalents should only define the invention rather than any specific examples given.

