---

title: Histogram-modeling based algorithm for contrast enhancement
abstract: A histogram modeling based technique for image contrast enhancement. In some implementations, a histogram of an image is created and then transformed. Using the physics of sound or heat propagation, the technique may develop a spreaded histogram model that may be transformed. A nonlinear mapping may be created to remap an image for contrast enhancement. The technique may be performed without threshold tuning and may be implemented on a variety of display hardware.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08457399&OS=08457399&RS=08457399
owner: QUALCOMM Incorporated
number: 08457399
owner_city: San Diego
owner_country: US
publication_date: 20080708
---
The present Application for Patent claims priority to Provisional Application No. 61 021 831 entitled A Histogram Modeling Based Algorithm for Contrast Enhancement filed Jan. 17 2008 and assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The process of contrast enhancement typically involves remapping the gray scale or intensity level of an image so that the image occupies all levels of available dynamic range. Until recently contrast enhancement has been achieved by histogram equalization where all available gray levels of a display have equal probability to be occupied by the pixels of an image. Histogram equalization however often over stretches the distribution of pixels so that the resulting image has an artificial quality.

Another solution is contrast limited histogram equalization CLHE where exceptional peaks of a histogram are clipped to avoid their dominance in the equalized histogram. CLHE has several variations that consider the different sensitivities of visual perception at low middle and high levels. For example CLHE can be done separately at different intensity regions if proper adjustments are made to ensure smooth transitions at the boundary of different regions. Setting the clipping thresholds so that the resulting image has the desired enhancement is difficult in CLHE as there are multiple thresholds. Human factors and biases play a role in the process which makes it very subjective. Although algorithms have been proposed to estimate the thresholds automatically they are not fully resolved. Consequently CLHE is not a complete solution to the problem of contrast enhancement.

A histogram modeling based technique for image contrast enhancement is described with reference to several implementations. In some implementations a histogram of an image is created and then transformed. Using the physics of sound or heat propagation the technique may develop a spreaded histogram model. Using the model a nonlinear mapping may be created to remap an image for contrast enhancement. The technique may be performed without threshold tuning and may be implemented on a variety of display hardware.

In some implementations a method for contrast enhancing an image may include determining a histogram of the image applying a transform to the histogram to create an transformed histogram determining estimated parameters of a spreaded histogram model associated with the transformed histogram applying an inverse transform to the spreaded histogram model to create a spreaded histogram and remapping the image using the spreaded histogram.

In some implementations an apparatus for contrast enhancing an image may include a histogram engine that determines a histogram of the image a transform engine that determines a transform of the histogram to create a transformed histogram and a parameter estimation engine that determines a spreaded histogram model associated with the transformed histogram. An inverse transform may be applied to the spreaded histogram model to create a spreaded histogram. The image may be remapped using the spreaded histogram.

The foregoing is a summary and thus contains by necessity simplifications generalizations and omissions of detail. Those skilled in the art will appreciate that the summary is illustrative only and is not intended to be in any way limiting.

According to implementations of the present disclosure contrast enhancement may be accomplished using an algorithm based on histogram modeling and spreading. Spreading is based on the physics of sound or heat propagation and may be used to determined parameters that do not need threshold tuning to perform the enhancement. depicts an example operational environment that may be used to practice aspects of the present disclosure. is a block diagram of an exemplary general computing device for processing images. The device may include a transform component a histogram computation component an estimation component a processor component and a communications component . The processor provides the computing platform to perform the processes of the other components.

The transform component transforms histogram from one domain to another domain such as the frequency domain in the case of DCT discrete cosine transform or FFT fast Fourier Transform of spatial data The transform component may also perform inverse transformation such as the IDCT inverse discrete cosine transform or IFFT inverse fast Fourier Transform . The transformations can be computed on a float point or integer basis.

The histogram computation component determines a histogram of an image. The histogram of an image is a graph showing the number of pixels in an image at each different intensity value found in that image. For an 8 bit grayscale image there are 256 different possible intensities therefore its histogram will graphically display 256 numbers showing the distribution of pixels amongst those grayscale values. Histograms can also be taken of color images as either individual histograms of red green and blue channels or luminance and chrominance channels of other 3 D color space where each histogram represents the pixel count distribution of each channel.

The estimation component may determine estimated parameters of a spreaded histogram model. The spreading is representative of properties of a physical process and is used to remap the intensity levels in the histogram over substantially of the available dynamic range. The estimation component may also estimate parameters of Eigen functions of partial differential equations that are exponentially decaying sinusoids used to model the physical process.

The communications component contains logic used to receive data to be encoded from an external source . The external source could be for example external memory the Internet a live video and or audio feed and receiving the data can include wired and or wireless communications. The communications component also contains logic to transmit Tx encoded data over a network . The network can be part of a wired system such as telephone cable and fiber optic or a wireless system. In the case of wireless communication systems network can comprise for example part of a code division multiple access CDMA or CDMA2000 communication system or alternately the system can be a frequency division multiple access FDMA system a time division multiple access TDMA system such as GSM1GPRS General Packet Radio Service EDGE enhanced data GSM environment or TETRA Terrestrial Trunked Radio mobile telephone technology for the service industry a wideband code division multiple access WCDMA a high data rate 1 EVDO or 1 EV DO Gold Multicast system or in general any wireless communication system employing a combination of techniques.

The device may have connected thereto or integrally include an audio device e.g. earpiece headset and an input device e.g. keypad keyboard stylus . An external storage may be for example external RAM or ROM or a remote server. Image data may be presented on a display component stored in the external storage or stored in internal memory of processor component . The display component may be an integrated part of the device that contains such parts as video display hardware and logic including a display screen or it can be an external peripheral device. The communications component may also contain logic used to communicate the image data to the external storage component or the display component .

In the context of displayed images on e.g. the display component contrast enhancement is a remedy to overcome the ill exposed e.g. over or underexposed images. Ill exposed images tend to have pixels concentrated on a few limited regions of available dynamic range. As a result the image looks either too dark or too bright with few visible details. The histogram of such images is characterized by a few sharp peaks with sparsely occupied regions in between.

According to implementations the algorithm may follow principles of physics of sound or heat propagation to provide a contrast enhancement technique that is automatic and needs little threshold tuning or human interaction. The algorithm may be real time implementable and the resulting enhanced image has a histogram that resembles the original histogram in terms of global characteristics. The enhanced image may have a histogram that occupies substantially all of the entire dynamic range of the display.

In accordance with the above assuming the ill exposed histogram is an initial heat profile or distribution of a conductor this heat distribution will spread in an orderly and physically constrained manner. The spreading may stop as soon as the heat reaches the full scale. This spreading process has the properties that it is a physical process where no threshold tuning or human interference is needed and the spreaded heat profile closely resembles the characteristics of the original profile because the spreading is a physically constrained process. Heat would naturally and gradually reach the full scale available to it.

The above are representative properties of a contrast enhancement algorithm in accordance with the present disclosure. However solving partial differential equations PDE used to determine heat propagation characteristics may be computationally expensive. However the Eigen functions of the heat propagation PDE are exponentially decaying sinusoids that can be computed using a procedure as described in .

At the IFFT inverse fast Fourier transform of the histogram is determined. The output of transform represents the histogram in the spatial domain equivalent. The IFFT may be determined by the transform component and in some implementations where a 16 bin discrete histogram ht i i 0 1 . . . 15 is available the IFFT may be computed as 

At parameters of the spreaded histogram model or Eigen functions of the PDE are determined. This may be performed by the estimation component . The value H k may be used to estimate model parameters using the following recursive algorithm 

At an FFT fast Fourier transform of the histogram model is determined. The FFT may be used to determine the spreaded histogram as follows 

This may be performed by instructions executing on the processor in the device . In some implementations nonlinear mapping functions may be use where the dynamic range of a processed image exceeds the capability of a display device. In such cases only the brightest parts of the image are visible on the display screen. Nonlinear mapping may be used to compress the dynamic range of pixel values using e.g. a logarithmic intensity mapping transformation function such that the complete image will be visible on the display.

Thus a comparison between the original and the processed histograms indicates that the implementations of the present disclosure spread the original histogram while protecting its overall global characteristics. The processed or enhanced images also show more detail than the original images.

With regard to the a device in numerous other general purpose or special purpose computing system environments or configurations may be used. Examples of well known computing systems environments and or configurations that may be suitable for use include but are not limited to PCs server computers handheld or laptop devices multiprocessor systems microprocessor based systems network PCs minicomputers mainframe computers embedded systems distributed computing environments that include any of the above systems or devices and the like.

Computer executable instructions such as program modules being executed by a computer may be used. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. Distributed computing environments may be used where tasks are performed by remote processing devices that are linked through a communications network or other data transmission medium. In a distributed computing environment program modules and other data may be located in both local and remote computer storage media including memory storage devices.

It should be understood that the various techniques described herein may be implemented in connection with hardware or software or where appropriate with a combination of both. Thus the methods and apparatus of the presently disclosed subject matter or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the presently disclosed subject matter. In the case of program code execution on programmable computers the computing device generally includes a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device.

One or more programs may implement or utilize the processes described in connection with the presently disclosed subject matter e.g. using an application programming interface API reusable controls or the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and it may be combined with hardware implementations.

Although exemplary implementations may refer to utilizing aspects of the presently disclosed subject matter in the context of one or more stand alone computer systems the subject matter is not so limited but rather may be implemented in connection with any computing environment such as a network or distributed computing environment. Still further aspects of the presently disclosed subject matter may be implemented in or across a plurality of processing chips or devices and storage may similarly be effected across a plurality of devices. Such devices might include personal computers network servers and handheld devices for example.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

