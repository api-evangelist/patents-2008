---

title: Method and system for identifying defects in NDT image data
abstract: An anomaly detection method includes acquiring image data corresponding to nondestructive testing (NDT) of a scanned object. The NDT image data comprises at least one inspection test image of the scanned object and multiple reference images for the scanned object. The anomaly detection method further includes generating an anomaly detection model based on a statistical analysis of one or more image features in the reference images for the scanned object and identifying one or more defects in the inspection test image, based on the anomaly detection model.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08131107&OS=08131107&RS=08131107
owner: General Electric Company
number: 08131107
owner_city: Niskayuna
owner_country: US
publication_date: 20080512
---
The invention relates generally to nondestructive testing NDT of parts and more particularly to a method and system for automatically identifying defects in NDT image data corresponding to a scanned object.

NDT is a technique of producing relevant data for an object by collecting energy emitted by or transmitted through the object such as by penetrating radiation gamma rays X rays neutrons charged particles etc. sound waves or light infrared ultraviolet visible etc. . The manner by which energy is transmitted through or emitted by any object depends upon variations in object thickness density and chemical composition. The energy emergent from the object is collected by appropriate detectors to form an image or object map which may then be realized on an image detection medium such as a radiation sensitive detector. A radiographic detector for example comprises an array of elements that records the incident energy at each element position and maps the recording onto a two dimensional 2D image. The 2D image is then fed to a computer workstation and interpreted by trained personnel. Non limiting examples of NDT modalities include X ray CT infrared eddy current ultrasound and optical.

Radiography and other NDT inspection modalities find wide application in various medical and industrial applications as a non destructive technique for examining the internal structure of an object. Non destructive evaluation NDE of industrial parts is essential for manufacturing productivity and quality control. For example in aerospace and automotive industries radiographic images of aluminum castings are typically inspected by an operator who identifies defects pertaining to porosities inclusions shrinkages cracks etc. in the castings. However and as will be appreciated by those skilled in the art owing to the structural complexity and large production volumes of these castings the manual inspection procedure is often prone to operator fatigue and hence suffers from low inspection reliability.

A number of NDT inspection techniques such as feature based classification artificial neural networks and adaptive filtering have been developed to perform automatic radiographic inspections of scanned objects. These techniques are typically based on using assisted defect recognition ADR techniques to automatically screen images call out defects and prioritize the ones needing visual inspection. As will be appreciated by those skilled in the art ADR techniques typically achieve more accurate defect detection than human operators and have a much higher efficiency and consistency thereby enhancing quality control in a wide variety of applications such as for example automotive parts and engine components of aircraft ships and power generators. Techniques using ADR may typically be used to perform automatic defect detection on 2D images and or 3D images based on analyzing the geometry e.g. shape size feature e.g. intensity texture color and other local image statistics in the radiographic image data to locate abnormalities. For example ADR techniques based on image features use a set of features to identify potential flaws in scanned object parts based on flaw morphology and gray level statistics. These techniques assign each pixel in the image into one of several classes based on minimizing a distance metric wherein the parameters characterizing the distance metric are evaluated using a supervised learning scheme. However the performance of these techniques is affected by variations caused by object structure or flaw morphology and these techniques generally require large training sets with labeled flaws to perform defect identification.

It would therefore be desirable to develop an efficient NDT inspection technique for automatically detecting defects in the NDT image data corresponding to a scanned object. In addition it would be desirable to develop an efficient NDT inspection technique that detects anomalies in industrial parts produces accurate defect detection rates increases the screening efficiency and consistency of inspection systems efficiently utilizes system operation setup time and system training time and is robust to changes in object part geometry and misalignment of scanned object parts.

In one embodiment an anomaly detection method is provided. The anomaly detection method includes acquiring image data corresponding to nondestructive testing NDT of a scanned object where the NDT image data comprises at least one inspection test image of the scanned object and multiple reference images for the scanned object. The anomaly detection method further includes generating an anomaly detection model based on a statistical analysis of one or more image features in the reference images for the scanned object and identifying one or more defects in the inspection test image based on the anomaly detection model.

In another embodiment an inspection system is provided. The inspection system includes an imaging system configured to acquire image data corresponding to a scanned object. The inspection system further includes a computer system configured to be in signal communication with the imaging system. The computer system comprises a memory configured to store the image data corresponding to the scanned object where the image data comprises at least one of an inspection test image of the scanned object and one or more reference images for the scanned object. The computer system further includes a processor configured to process the image data corresponding to the scanned object. The processor is further configured to generate an anomaly detection model based on a statistical analysis of one or more image features in the reference images for the scanned object and identify one or more defects in the inspection test image based on the anomaly detection model. The inspection system further includes a display device configured to display the one or more defects in the image data corresponding to the scanned object.

The computer system includes a memory configured to store the radiographic image data corresponding to the scanned object. In one embodiment and as will be described in greater detail below the radiographic image data includes an inspection test image and one or more reference radiographic images corresponding to the scanned object. Further the memory may include but is not limited to any type and number of memory chip magnetic storage disks optical storage disks mass storage devices or any other storage device suitable for retaining information. The computer system also includes one or more processors configured to process the radiographic image data corresponding to the scanned object. In one embodiment and as will be described in greater detail below the processor is further configured to generate an anomaly detection model based on an analysis of one or more of the reference images and one or more image features in the radiographic image data corresponding to the scanned object and identify one or more defects in an inspection test image based upon the anomaly detection model.

For the illustrated example shown in the computer system also includes a detector interface card an input device and a display device . The input device may include but is not limited to a keyboard a mouse a pointing device a touch sensitive screen device a tablet a read write drive for a magnetic disk a read write drive for an optical disk a read write drive for any other input medium an input port for a communication link electrical or optical a wireless receiver. The display device may be a CRT cathode ray tube screen or any other suitable display device for displaying text graphics and a graphical user interface for example. In one embodiment the display device is configured to display one or more defects in the radiographic image corresponding to the scanned object. The input device and the display device operate in combination to provide a graphical user interface which enables a user or operator to configure and operate the radiographic inspection system . The detector interface card provides low level control over the image detector buffers data read out from the image detector and optionally reorders image pixels to convert from read out order to display order. The real time image controller includes a set of image control buttons a set of image control dials a display and an embedded application programming interface that maps the functions of the control buttons and dials to the computer system .

According to particular embodiments the image data is pre processed by image registration and image normalization yielding a stack of spatially aligned and appearance normalized images . In accordance with embodiments of the present invention and as will be described in greater detail below the statistical model anomaly detection model of the scanned object is generated based upon an analysis of the pre processed defect free images and one or more image features in the NDT image data and one or more defects in the NDT image data corresponding to the scanned object. The statistical model implicitly captures the normal image to image variation of defect free parts including the spatial misalignment image to image appearance change and manufacturing variation within specification. In one embodiment the statistical model may be represented as a non parametric statistical model by Parzen windowing density approximation. In another embodiment the statistical model may be represented as a parametric model of Gaussian mixture with varying mean and variance. When the pre processed inspection test image data is compared with the statistical model anything outside a normal variation range is called out as a potential change . Based on the indications the learned statistics and domain knowledge defects are identified including the defect type location and size measurement.

For the illustrated embodiment shown in an analysis of the images typically involves image intensity normalization as at step in . Certain radiographic image data is suited for qualitative evaluation but not for quantitative evaluation without specific calibration. As will be appreciated by those skilled in the art appearance shifts caused due to minor part variations positioning and attenuation differences due to source and detector gain variations may be typically observed in the radiographic image data. Such a variation can be compensated for by image normalization. In one embodiment the images are normalized by 2 D median filtering with a large radius generating a spatially variant baseline image which is subtracted from the image under analysis to factor out the spatially variant appearance change.

The statistical modeling step in further comprises generating a non parametric statistical distribution for one or more of the image features in the NDT image data at one or more pixel locations. Non limiting examples of the image features include image intensity color and texture. In one embodiment the step of generating a non parametric statistical distribution for one or more of the image features further includes computing a probability density function PDF for each pixel at a particular pixel location in the baseline image. In a particular embodiment the PDF for each pixel may be computed as a function of a defect probability of a pixel at a particular pixel location and a defect prior term. For example the PDF for a pixel may be computed as shown in equation 2 below p y x p x y p y 2 

where y is the pixel state or defect label x is the computed low level image feature such as intensity color texture and gradients p y x represents the probability of a particular state or defect label given the image observation namely p x y is a likelihood term that represents the defect probability of a pixel at a particular pixel location given a particular defect label and p y represents the prior term for a given a set of defects. The PDF p y x computed for each pixel is proportional to the product of the likelihood term p x y and the prior term p y based on the Bayes rule. In one embodiment the image state y may include for example a label of being normal having excess material or having material loss. Specifically if an image is represented by a set of conditionally independent low level features x . . . x wherein x represents an image feature such as image intensity texture and or color the likelihood term may further be decomposed as shown in equation 3 below.

For a total of N defect free images at each pixel location u v the probability distribution p x u v ly u v may be approximated by a mixture of local kernels. Accordingly and in one embodiment of the present invention the non parametric statistical model may be generated using a Parzen window density estimation technique or a Gaussian mixture with varying mean and standard deviation technique. Referring to equation 4 now when the kernel is chosen as a Gaussian distribution G with a fixed standard deviation of the PDF for each pixel may be approximated by a Gaussian mixture through Parzen windowing as follows 

As may also be observed from the graph illustrated in observations having a normalized feature value over 0.68 or below 0.22 are potentially drawn from regions containing positive or negative materials.

Referring again to equation 2 and to and step in in one embodiment the prior term P y is used to constrain the potential anomalies in the industrial part based on domain and or prior knowledge of the industrial part. In one embodiment the prior term P y may be determined based upon a region of interest ROI mask. In a particular embodiment the ROI mask is a labeled mask image indicating the probability of defects appearing in certain regions in the radiographic image data corresponding to the scanned object. For example excess material in the scanned object may appear in the cavities and chambers and not on the thick walls. The ROI mask may also be used to exclude certain regions such as the background region and other regions that are not of interest. Further the ROI mask image may be manually drawn or outlined using a Computer Aided Analysis CAD model. In one embodiment the ROI mask may be computed from image content information. For example the probability of having excess material is inversely proportional to the material thickness i.e. the intensity code value. The prior term ROI mask may also be derived from the neighboring pixel sites using the Markov random field in another embodiment.

Based on the PDF derived using the likelihood term and the prior term as shown in equations 2 3 4 and 5 the anomaly detection model may be derived as shown in equation 7 as follows 7 

where p u v represents the likelihood defect probability of a pixel at a particular pixel location u v p u v represents the defect prior term at pixel location u v based on the domain knowledge Irepresents the template image used for spatial alignment Irepresents the baseline image for appearance normalization j is a defect index Qrepresents the probability threshold separating normal from abnormal variations Sis the minimum defect size and is the standard deviation of the Gaussian kernel. In one embodiment the likelihood term pand the prior term p are used for statistical analysis the template image Iand baseline image Iare used for spatial and appearance normalization and the parameters Q S are used as an operating point for defect detection. In one embodiment and as will be described in greater detail below the parameters of Q S are derived using a region analysis procedure based on a large set of defect free images and a relatively smaller set of labeled defect images.

As noted above the statistical modeling of step in need only be performed only for each type of object of interest. The detection step indicated in is discussed in detail below with reference to .

Referring to one or more defects in the NDT data corresponding to the scanned object are identified as follows. For the illustrated embodiment at step the inspection test image I is aligned with the template image and normalized with respect to the stack of pre processed defect free images in step . One or more image features from the inspection test image I are extracted and compared with the anomaly detection statistical model . A defect probability map is derived from the defect recognition step for each defect type indicating the probability of a particular pixel having a particular defect. Specifically referring to the definition of the statistical model derived in equation 7 in one embodiment a pixel is detected to be a defective pixel by thresholding the defect probability map if the probability is over the threshold Q the defect size is larger than Sand all the prior domain constraints are met. This process is repeated for all defect types until all potential defects are evaluated in the inspection test image. Domain knowledge in the form of prior distribution and learned statistics may further be employed to confirm if the image changes correspond to defect indications. Defect type location and size are further determined in step .

In accordance with another embodiment of the present invention a cumulative density function CDF for each pixel at a particular pixel location may further be computed based upon the PDF generated for each pixel. is a graph illustrating the cumulative density function CDF values plotted for one or more pixels at one or more pixel locations. In one embodiment the cumulative density function CDF may be evaluated as shown by equation 8 below 8 

In a particular embodiment one or more defects in the radiographic image data corresponding to a scanned object may be further identified by using the CDF computed for each pixel. Specifically in one embodiment an anomaly detection function or a mapping function may be defined based upon the CDF. In one example the mapping function may be defined as a labeling function that maps an image observation I to a defect label L at a particular pixel location u v as shown in equation 9 below F I u v L u v 9 

In other words the mapping function maps one or more of the extracted image features in the inspection test image to one or more defect labels at each pixel location in the inspection test image to detect the defects in the inspection test image. In a particular embodiment the mapping function determines at least one of a defect indication and a defect type in the inspection test image based upon the CDF computed for each pixel as follows 1 if 1 if 

Accordingly if the CDF for a pixel i.e. P y x is greater than the threshold Q or below the threshold Q then the pixel is identified as a defective pixel. Referring to the graph illustrated in in a particular example pixels with a CDF of over Q 0.75 are defined as potential excess material defects and pixels with a CDF below Q 000.18 are defined as potential negative material defects. Specifically in one embodiment the mapping function further determines if an image pixel is a defective pixel in the inspection test image based upon a comparison of the CDF derived for each image pixel and least one of the defect probability threshold the defect size and one or more prior domain constraints derived using the anomaly detection model as defined in equation 7 above. More particularly the defect probability threshold the defect size and the one or more prior domain constraints may be derived using receiver operating characteristic ROC analysis based on the anomaly detection statistical model. In a particular example pixels having defect probability threshold values of over Qand pixels present within regions larger than Sare kept for further analysis.

In accordance with another embodiment of the present invention a region analysis procedure may be performed to alleviate incidental detection due to noisy image data image misalignment and image appearance change. For example in one embodiment a region analysis procedure may be performed to identify the potential defective pixels wherein pixels that are present within regions that are larger than Sare confirmed as defective pixels. In a particular embodiment a connected component analysis may be performed to identify the potential defective pixels. As will be appreciated by those skilled in the art a connected component analysis includes finding the largest image region in which there is a direct connection between any two pixels.

Thus the defect size may be determined by connected component analysis for certain embodiments. In other embodiments the defect prior is designated by defect masks with regions of interest or is related to image intensity of part thickness. In other embodiments the defect prior is enforced through a neighborhood constraint such as a Markov random field. For certain embodiments the method further includes dynamically updating the anomaly detection model as the image data are acquired. In this manner the anomaly detect model is adapted to the data on the fly.

In addition the method is applicable to data acquired for multiple views. According to particular embodiments the method further includes acquiring the image data for the scanned object for multiple views generating the anomaly detection model using the image data obtained for the multiple views. identifying one of more defects using the anomaly detection model for the multiple views and combining the identified defects for the multiple views to make a determination regarding the scanned object. Non limiting examples of determinations that can be performed include determining whether the part meets predetermined specifications or whether the part needs to be subjected to rework or scrapped. In this manner the identified defects resulting from multiple views of the scanned object can be combined to make collective determinations about the scanned object.

In addition the method is suited for integration with the data capture process to screen the captured data on the fly. In particular embodiments the method further includes capturing the identified defects as metadata and attaching the metadata to the respective acquired image data. Moreover the statistical modeling approach of the present method can be integrated into the image review process to aid visual inspection including prioritizing the images and views need to be reviewed highlighting the regions with high probibility of certain defects and measuring the size of the defect indications.

Embodiments of the present invention disclose a statistical modeling technique to identify defects in radiographic image data corresponding to a scanned object by generating non parametric statistical distributions based on observations of defect free images and computed image features extracting image features in the inspection test image and comparing the extracted image features with the learnt statistical model to identify defects in the radiographic image corresponding to the scanned object. The disclosed statistical modeling approach is efficient produces accurate defect detection rates and efficiently utilizes system operation time and system training time. Further the disclosed statistical modeling approach increases screening efficiency and consistency of inspection systems by filtering out the defect free images and prioritizing the images needing visual inspection thereby increasing throughput and efficiency. In addition the disclosed statistical modeling approach is robust to changes in object part geometry and misalignment of scanned object parts since it is built using a number of defect free images that can automatically encode normal variations that occur due to part to part variations within manufacturing specifications and image to image variations that occur due to appearance changes and spatial misalignment.

In addition the disclosed statistical modeling approach for detecting defects may be applied to multiple observations corresponding to multiple images of the scanned object acquired at one or more view angles. Furthermore the disclosed technique can be applied to three dimensional 3D image volumes wherein the disclosed statistical modeling approach can be applied to defect free 3D volumes to evaluate a test volume for potential defect indications. Further the nondestructive imaging geometry may correspond to a 2D projection e.g. X ray projection and infra red thickness 3D volume e.g. CT or 4D spatiotemporal sequence. Hence the domain of the radiographic image and statistical modeling can be 2D 3D or 4D respectively. Further the disclosed statistical modeling approach can be combined with a Computer Aided Design CAD model to enable the detection of defects in the radiographic image data corresponding to the scanned object with greater accuracy.

While only certain features of the invention have been illustrated and described herein many modifications and changes will occur to those skilled in the art. It is therefore to be understood that the appended claims are intended to cover all such modifications and changes as fall within the true spirit of the invention.

