---

title: Updating position assist data on a mobile computing device
abstract: A mobile computing device comprises a memory, a processor and a transceiver. The memory is configured to store at least one type of position assist data. The processor is configured to provide a position fix based on the position assist data. The transceiver is configured for wireless communication. The memory is configured to store updated position assist data for the type of position assist data. The processor is operable in a first operating mode in which the type of position assist data is not updated and operable in a second operating mode in which the type of position assist data is updated in response to at least one triggering event.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08989763&OS=08989763&RS=08989763
owner: QUALCOMM Incorporated
number: 08989763
owner_city: San Diego
owner_country: US
publication_date: 20080327
---
The present application is related to U.S. patent application Ser. No. 11 729 966 titled UPDATING POSITION ASSIST DATA ON A MOBILE COMPUTING DEVICE and filed Mar. 29 2007 the disclosure of which is hereby incorporated by reference in its entirety.

Some mobile computing devices provide location based services to a user. For example a user may use a mobile computing device to report their location to a 9 1 1 emergency service in the event of an emergency. Further the mobile computing device may use a navigation application to provide directions from the user s current location to a desired destination.

A mobile computing device uses various types of position assist data to assist in the calculation of position fixes for use with the location based services. Position assist data includes almanac ephemeris and coarse data and may also include mobile station assist data such as visible satellite data and Doppler data. Almanac data may require updating every 6 months. Ephemeris data may require updating every 30 to 90 minutes and may need to be updated even more frequently e.g. every minute or less if the device is moving since ephemeris data provides data about the orbital information specific to the satellites within visibility at a particular position. Coarse data may provide a last known position and time to a calculation algorithm to speed up calculation of a subsequent position fix.

If the position assist data is not up to date or fresh then the device may need to update one or more types of position assist data before it responds to the request for a position fix. Updating position assist data takes time and power and may take wireless bandwidth. Position assist data may be updated using signals from global positioning system GPS satellites though current approaches take substantial time to download the data.

Accordingly there is a need for a system and method for maintaining or updating position assist data. Further there is a need for updating position assist data with reduced time power and or wireless bandwidth. Further there is a need for updating position assist data less often depending on various states of the device and data stored on the device. Further still there is a need for updating position assist data while minimizing a user s perception of the update. Further still there is a need for using a wireless network to receive position assist data which may receive the position assist data faster than other methods and which may provide useful position data. Further still there is a need for updating position assist data while minimizing the use of network airtime. Further still there is a need for updating position assist data while minimizing disruptions of other processes or applications running on the device. Further still there is a need for minimizing or eliminating the need for updates of position assist data made at the time of receiving a position fix request i.e. ad hoc updates . Further still there is a need for minimizing instances of moving one or more components of a mobile computing device out of a sleep mode.

The teachings herein extend to those embodiments which fall within the scope of the appended claims regardless of whether they accomplish one or more of the above mentioned needs.

The disclosure of U.S. patent application Ser. No. 11 469 374 filed Aug. 31 2006 is incorporated by reference herein in its entirety.

Referring first to a mobile computing device is shown. Device is a smart phone which is a combination mobile telephone and handheld computer having personal digital assistant functionality. The teachings herein can be applied to other mobile computing devices e.g. a laptop computer or other electronic devices e.g. a desktop personal computer etc. . Personal digital assistant functionality can comprise one or more of personal information management database functions word processing spreadsheets voice memo recording etc. and is configured to synchronize personal information from one or more applications with a computer e.g. desktop laptop server etc. . Device is further configured to receive and operate additional applications provided to device after manufacture e.g. via wired or wireless download Secure Digital card etc.

Device comprises a housing having a front side and a back side . An earpiece speaker may be an electro acoustic transducer configured to provide audio output with a volume suitable for a user placing earpiece against or near the ear. Loudspeaker may be an electro acoustic transducer that converts electrical signals into sounds loud enough to be heard at a distance. Loudspeaker can be used for a speakerphone functionality. In alternative embodiments display user input device earpiece and loudspeaker may each be positioned anywhere on front side back side or the edges there between.

Device may provide voice communications functionality in accordance with different types of cellular radiotelephone systems. Examples of cellular radiotelephone systems may include Code Division Multiple Access CDMA cellular radiotelephone communication systems Global System for Mobile Communications GSM cellular radiotelephone systems etc.

In addition to voice communications functionality device may be configured to provide data communications functionality in accordance with different types of cellular radiotelephone systems. Examples of cellular radiotelephone systems offering data communications services may include GSM with General Packet Radio Service GPRS systems GSM GPRS CDMA 1xRTT systems Enhanced Data Rates for Global Evolution EDGE systems Evolution Data Only or Evolution Data Optimized EV DO systems etc.

Device may be configured to provide voice and or data communications functionality in accordance with different types of wireless network systems. Examples of wireless network systems may further include a wireless local area network WLAN system wireless metropolitan area network WMAN system wireless wide area network WWAN system and so forth. Examples of suitable wireless network systems offering data communication services may include the Institute of Electrical and Electronics Engineers IEEE 802.xx series of protocols such as the IEEE 802.11 a b g n series of standard protocols and variants also referred to as WiFi the IEEE 802.16 series of standard protocols and variants also referred to as WiMAX the IEEE 802.20 series of standard protocols and variants and so forth.

Device may be configured to perform data communications in accordance with different types of shorter range wireless systems such as a wireless personal area network PAN system. One example of a suitable wireless PAN system offering data communication services may include a Bluetooth system operating in accordance with the Bluetooth Special Interest Group SIG series of protocols including Bluetooth Specification versions v1.0 v1.1 v1.2 v2.0 v2.0 with Enhanced Data Rate EDR as well as one or more Bluetooth Profiles and so forth.

As shown in the embodiment of device may comprise a dual processor architecture including a host processor and a radio processor e.g. a base band processor . The host processor and the radio processor may be configured to communicate with each other using interfaces such as one or more universal serial bus USB interfaces micro USB interfaces universal asynchronous receiver transmitter UART interfaces general purpose input output GPIO interfaces control status lines control data lines shared memory and so forth.

The host processor may be responsible for executing various software programs such as application programs and system programs to provide computing and processing operations for device . The radio processor may be responsible for performing various voice and data communications operations for device such as transmitting and receiving voice and data information over one or more wireless communications channels. Although embodiments of the dual processor architecture may be described as comprising the host processor and the radio processor for purposes of illustration the dual processor architecture of device may comprise additional processors may be implemented as a dual or multi core chip with both host processor and radio processor on a single chip etc.

In various embodiments the host processor may be implemented as a host central processing unit CPU using any suitable processor or logic device such as a general purpose processor. The host processor may comprise or be implemented as a chip multiprocessor CMP dedicated processor embedded processor media processor input output I O processor co processor a field programmable gate array FPGA a programmable logic device PLD or other processing device in alternative embodiments. In an exemplary embodiment host processor is an OMAP2 such as an OMAP2431 processor manufactured by Texas Instruments Inc.

The host processor may be configured to provide processing or computing resources to device . For example the host processor may be responsible for executing various software programs such as application programs and system programs to provide computing and processing operations for device . Examples of application programs may include for example a telephone application voicemail application e mail application instant message IM application short message service SMS application multimedia message service MMS application web browser application personal information manager PIM application contact management application calendar application scheduling application task management application word processing application spreadsheet application database application video player application audio player application multimedia player application digital camera application video camera application media management application a gaming application and so forth. The application software may provide a graphical user interface GUI to communicate information between device and a user.

System programs assist in the running of a computer system. System programs may be directly responsible for controlling integrating and managing the individual hardware components of the computer system. Examples of system programs may include for example an operating system OS device drivers programming tools utility programs software libraries an application programming interface API graphical user interface GUI and so forth. Device may utilize any suitable OS in accordance with the described embodiments such as a Palm OS Palm OS Cobalt Microsoft Windows OS Microsoft Windows CE Microsoft Pocket PC Microsoft Mobile Symbian OS Embedix OS Linux Binary Run time Environment for Wireless BREW OS JavaOS a Wireless Application Protocol WAP OS and so forth.

Device may comprise a memory coupled to the host processor . In various embodiments the memory may be configured to store one or more software programs to be executed by the host processor . The memory may be implemented using any machine readable or computer readable media capable of storing data such as volatile memory or non volatile memory removable or non removable memory erasable or non erasable memory writeable or re writeable memory and so forth. Examples of machine readable storage media may include without limitation random access memory RAM dynamic RAM DRAM Double Data Rate DRAM DDRAM synchronous DRAM SDRAM static RAM SRAM read only memory ROM programmable ROM PROM erasable programmable ROM EPROM electrically erasable programmable ROM EEPROM flash memory e.g. NOR or NAND flash memory or any other type of media suitable for storing information.

Although the memory may be shown as being separate from the host processor for purposes of illustration in various embodiments some portion or the entire memory may be included on the same integrated circuit as the host processor . Alternatively some portion or the entire memory may be disposed on an integrated circuit or other medium e.g. hard disk drive external to the integrated circuit of host processor . In various embodiments device may comprise an expansion slot to support a multimedia and or memory card for example.

Device may comprise a user input device coupled to the host processor . The user input device may comprise for example a QWERTY key layout and an integrated number dial pad. Device also may comprise various keys buttons and switches such as for example input keys preset and programmable hot keys left and right action buttons a navigation button such as a multidirectional navigation button phone send and power end buttons preset and programmable shortcut buttons a volume rocker switch a ringer on off switch having a vibrate mode a keypad an alphanumeric keypad and so forth.

The host processor may be coupled to a display . The display may comprise any suitable visual interface for displaying content to a user of device . For example the display may be implemented by a liquid crystal display LCD such as a touch sensitive color e.g. 16 bit color thin film transistor TFT LCD screen. In some embodiments the touch sensitive LCD may be used with a stylus and or a handwriting recognizer program.

Device may comprise an input output I O interface coupled to the host processor . The I O interface may comprise one or more I O devices such as a serial connection port an infrared port integrated Bluetooth wireless capability and or integrated 802.11x WiFi wireless capability to enable wired e.g. USB cable and or wireless connection to a local computer system such as a local personal computer PC . In various implementations device may be configured to transfer and or synchronize information with the local computer system.

The host processor may be coupled to various audio video A V devices that support A V capability of device . Examples of A V devices may include for example a microphone one or more speakers an audio port to connect an audio headset an audio coder decoder codec an audio player a digital camera a video camera a video codec a video player and so forth.

The host processor may be coupled to a power supply configured to supply and manage power to the elements of device . In various embodiments the power supply may be implemented by a rechargeable battery such as a removable and rechargeable lithium ion battery to provide direct current DC power and or an alternating current AC adapter to draw power from a standard AC main power supply.

As mentioned above the radio processor may perform voice and or data communication operations for device . For example the radio processor may be configured to communicate voice information and or data information over one or more assigned frequency bands of a wireless communication channel. In various embodiments the radio processor may be implemented as a communications processor using any suitable processor or logic device such as a modem processor or base band processor. Although some embodiments may be described with the radio processor implemented as a modem processor or base band processor by way of example it may be appreciated that the embodiments are not limited in this context. For example the radio processor may comprise or be implemented as a digital signal processor DSP media access control MAC processor or any other type of communications processor in accordance with the described embodiments. Radio processor may be any of a plurality of modems manufactured by Qualcomm Inc. or other manufacturers.

In various embodiments the radio processor may perform analog and or digital base band operations for device . For example the radio processor may perform digital to analog conversion DAC analog to digital conversion ADC modulation demodulation encoding decoding encryption decryption and so forth.

Device may comprise a transceiver module coupled to the radio processor . The transceiver module may comprise one or more transceivers configured to communicate using different types of protocols communication ranges operating power requirements RF sub bands information types e.g. voice or data use scenarios applications and so forth. In various embodiments the transceiver module may comprise one or more transceivers configured to support voice communication for a cellular radiotelephone system such as a GSM UMTS and or CDMA system. The transceiver module also may comprise one or more transceivers configured to perform data communications in accordance with one or more wireless communications protocols such as WWAN protocols e.g. GSM GPRS protocols CDMA 1xRTT protocols EDGE protocols EV DO protocols EV DV protocols HSDPA protocols etc. WLAN protocols e.g. IEEE 802.11a b g n IEEE 802.16 IEEE 802.20 etc. PAN protocols Infrared protocols Bluetooth protocols EMI protocols including passive or active RFID protocols and so forth.

The transceiver module may be implemented using one or more chips as desired for a given implementation. Although the transceiver module may be shown as being separate from and external to the radio processor for purposes of illustration in various embodiments some portion or the entire transceiver module may be included on the same integrated circuit as the radio processor .

Device may comprise an antenna system for transmitting and or receiving electrical signals. As shown the antenna system may be coupled to the radio processor through the transceiver module . The antenna system may comprise or be implemented as one or more internal antennas and or external antennas.

Device may comprise a memory coupled to the radio processor . The memory may be implemented using one or more types of machine readable or computer readable media capable of storing data such as volatile memory or non volatile memory removable or non removable memory erasable or non erasable memory writeable or re writeable memory etc. The memory may comprise for example flash memory and secure digital SD RAM. Although the memory may be shown as being separate from and external to the radio processor for purposes of illustration in various embodiments some portion or the entire memory may be included on the same integrated circuit as the radio processor .

Device may comprise a subscriber identity module SIM coupled to the radio processor . The SIM may comprise for example a removable or non removable smart card configured to encrypt voice and data transmissions and to store user specific data for allowing a voice or data communications network to identify and authenticate the user. The SIM also may store data such as personal settings specific to the user.

Device may comprise an I O interface coupled to the radio processor . The I O interface may comprise one or more I O devices to enable wired e.g. serial cable etc. and or wireless e.g. WiFi short range etc. communication between device and one or more external computer systems.

In various embodiments device may comprise location or position determination capabilities. Device may employ one or more location determination techniques including for example Global Positioning System GPS techniques Cell Global Identity CGI techniques CGI including timing advance TA techniques Enhanced Forward Link Trilateration EFLT techniques Time Difference of Arrival TDOA techniques Angle of Arrival AOA techniques Advanced Forward Link Trilateration AFTL techniques Observed Time Difference of Arrival OTDOA Enhanced Observed Time Difference EOTD techniques Assisted GPS AGPS techniques hybrid techniques e.g. GPS CGI AGPS CGI GPS AFTL or AGPS AFTL for CDMA networks GPS EOTD or AGPS EOTD for GSM GPRS networks GPS OTDOA or AGPS OTDOA for UMTS networks etc.

Device may be configured to operate in one or more location determination modes including for example a standalone mode a mobile station MS assisted mode and or a MS based mode. In a standalone mode such as a standalone GPS mode device may be configured to determine its position without receiving wireless navigation data from the network though it may receive certain types of position assist data such as almanac ephemeris and coarse data. In a standalone mode device may comprise a local location determination circuit e.g. a GPS receiver which may be integrated within housing configured to receive satellite data via an antenna and to calculate a position fix. Local location determination circuit may alternatively comprise a GPS receiver in a second housing separate from housing but in the vicinity of device and configured to communicate with device wirelessly e.g. via a PAN such as Bluetooth . When operating in an MS assisted mode or an MS based mode however device may be configured to communicate over a radio access network e.g. UMTS radio access network with a remote computer e.g. a location determination entity PDE a location proxy server LPS and or a mobile positioning center MPC etc. .

In an MS assisted mode such as an MS assisted AGPS mode the remote computer may be configured to determine the position of the mobile computing device and provide wireless data comprising a position fix. In an MS based mode such as an MS based AGPS mode device may be configured to determine its position using acquisition data or other wireless data from the remote computer . The acquisition data may be provided periodically. In various implementations device and the remote computer may be configured to communicate according to a suitable MS PDE protocol e.g. MS LPS or MS MPC protocol such as the TIA EIA standard IS message protocol for MS assisted and MS based sessions in a CDMA radiotelephone system.

When assisting the mobile computing device the remote computer may handle various processing operations and also may provide information to aid location determination. Examples of position assist data may include satellite based measurements terrestrial based measurements and or system based measurements such as satellite almanac information GPS code phase measurements ionospheric data ephemeris data time correction information altitude estimates timing offsets forward reverse link calibration coarse data and so forth.

In various implementations the position assist data provided by the remote computer may improve the speed of satellite acquisition and the probability of a position fix by concentrating the search for a GPS signal and or may improve the accuracy of location determination. Each position fix or series of position fixes may be available at device and or at the remote computer depending on the location determination mode. In some cases data calls may be made and position assist data may be sent to device from the remote computer for every position fix e.g. in an ad hoc mode . In other cases data calls may be made and position assist data may be sent periodically and or as needed.

In various embodiments device may comprise dedicated hardware circuits or structures or a combination of dedicated hardware and associated software to support location determination. For example the transceiver module and the antenna system may comprise GPS receiver or transceiver hardware and one or more associated antennas coupled to the radio processor to support location determination.

The host processor may comprise and or implement at least one LBS location based service application. In general the LBS application may comprise any type of client application executed by the host processor such as a GPS application configured to communicate location requests e.g. requests for position fixes and location responses. Examples of LBS applications include without limitation wireless 911 emergency services roadside assistance asset tracking fleet management friends and family locator services dating services and navigation services which may provide the user with maps directions routing traffic updates mass transit schedules information regarding local points of interest POI such as restaurants hotels landmarks and entertainment venues and other types of LBS services in accordance with the described embodiments.

The LBS application may be configured to send a location request in response to receiving input from device or from a source external to device . For example the user of device may interact with a data input device to command the LBS application to send a location request. The LBS application also may send a location request in response to receiving input from an external network element or computing device that is attempting to locate the user of device . In some cases the LBS application also may be configured to automatically periodically and or autonomously send location requests.

Although other applications may operate without regard to the location of device in various embodiments the LBS application may request and receive position information to enhance the functionality of one or more of the other applications. For example position information may be provided in conjunction with a messaging application to locate the sender or recipient of a message. Position information may be provided to a web browser application to generate directions to a location associated with a particular website. Positioning information may be provided to a personal management application to generate location based alerts and or directions to a meeting place.

The radio processor may be configured to receive location requests from an LBS API handler on host processor and may forward location responses to the LBS API handler for delivery to the LBS application through the LBS API. Radio processor may be configured to communicate securely over a network with remote computer e.g. PDE LPS or MPC configured to provide authentication and authorization services and or a variety of geo services. For example radio processor may be configured to communicate with a PDE configured to verify privacy for location requests allow authorized access to a location server and provide various location server services. Radio processor also may be configured to communicate with a PDE to request and receive geo service information. Examples of geo service information may include mapping information routing information geo coding and reverse geo coding information for addresses and coordinates POI information and so forth.

Radio processor may be configured to invoke a position fix by configuring a position engine and requesting a position fix. For example a position engine interface on radio processor may set configuration parameters that control the location determination process. Examples of configuration parameters may include without limitation location determination mode e.g. standalone MS assisted MS based actual or estimated number of position fixes e.g. single position fix series of position fixes request position assist data without a position fix time interval between position fixes Quality of Service QoS values optimization parameters e.g. optimized for speed accuracy or payload PDE address e.g. IP address and port number of LPS or MPC etc.

Radio processor also may set request response parameters to request and return various types of position information. Examples of request response parameters may include current location latitude longitude altitude heading vector information such as horizontal and vertical velocity sector based position location position fix method level of accuracy time offset position uncertainty device orientation client initialization and registration and so forth.

The radio processor may comprise or implement a position engine such as a GPS engine. In various embodiments the position engine may be configured to provide location determination capabilities for device . In some embodiments the position engine may be implemented as software operating in conjunction with hardware e.g. GPS receiver hardware allowing device to receive and process GPS satellites signals for location determination. In one embodiment the position engine may be implemented as a QUALCOMM gpsOne engine.

In various implementations the position engine may employ one or more location determination techniques such as GPS CGI CGI TA EFLT TDOA AOA AFTL OTDOA EOTD AGPS GPS AGPS hybrid techniques and so forth. The position engine also may be configured to operate in one or more location determination modes including a standalone mode an MS assisted mode and an MS based mode. The determined position information generated and or obtained by the position engine generally may comprise any type of information associated with the location of device . Examples of position information may include without limitation current location latitude longitude altitude heading information vector information such as horizontal and vertical velocity sector based position location position fix information position uncertainty device orientation and so forth.

Referring now to various embodiments of systems and methods for updating position assist data will be described. When device receives a request for a position fix e.g. from an LBS application a user or other requester device is configured to use the position assist data to calculate the position fix. If one or more of the position assist data are not up to date or fresh device may need to update the data before responding to the request. Further by keeping the coarse data as up to date as possible requests for position fixes can be processed quicker. Device may even be able to respond to a request for a position fix without a new position calculation depending on the freshness of the coarse data and the requirements of the position fix. The coarse data may be accurate enough to satisfy the needs of the request.

Almanac and ephemeris data are used by device to assist in acquiring GPS satellite signals. Depending on the circumstances of device at the time of the request for a position fix the time required to update expired almanac and ephemeris data could be as much as fifteen minutes or more whereas a delay of over a second or two can result in an undesirable user experience. Accordingly one or more of the systems and methods described below may be implemented alone or together to keep the almanac ephemeris coarse and other position assist data as up to date as possible.

Referring to device is configured to determine the likelihood of a need for an update to position assist data. At step device is configured to store at least one type of position assist data e.g. almanac ephemeris coarse MS assist etc. . At step device determines whether it is in a first mode or a second mode. If device is in a first mode mode updates of position assist data in an autonomous or automatic manner are disabled as shown in step . A second mode mode enables updates of position assist data which may be done automatically autonomously periodically without user input etc. as shown at step . Step can determine the mode of device with reference to a flag in non volatile memory or by another mechanism. At step device determines whether it has been used for a position fix yet e.g. since manufacture since a hard reboot since a soft reboot etc. and if it has and step the position fix has not been due to an emergency position fix e.g. E 911 service at step mode is selected to enable updates of position assist data. At step if device has not been used yet for a position fix device determines whether applications requiring a position fix have been installed at step . If applications requiring a position fix have been installed mode is selected at step to enable updates of position assist data. In some embodiments even if applications requiring a position fix have been installed as determined at step mode may not be selected based on this criteria if the applications do not meet an additional criteria at step . For example it may be determined at step whether the installed applications have been used to obtain a position fix within a predetermined or calculated e.g. based on history of usage of the position fix ability by the applications amount of time whether the currently stored position data is capable of providing an accurate enough position fix for the application within a suitable amount of time when requested by the application etc.

If applications requiring a position fix have not been installed at step or meet the criteria at step other criteria may be checked at step . If the device has not been used for a position fix and no applications requiring position fix have been installed in this embodiment device remains in mode which disables updates of position assist data as shown in step . Alternatively only one or two of steps and may be used to make the determination of whether to enable updates of position assist data.

As mentioned device may store a flag in non volatile memory or other indication for whether device has been used for a non emergency position fix and or whether or not any applications that might request position fixes have been installed on device . Until a flag is set under one of these circumstances device may remain in mode to disable updates of position assist data which may disable updates of some or all types of position assist data. In mode position assist data may be updated in response to any number of different triggering events such as the initial determination to enter mode a user input device a request for position fix from an application or other user and or one or more of a variety of periodic autonomous or automatic triggers to update position assist data such as those described herein below. In some embodiments the triggering event may be the launch of an application that may use position fix information etc. In some of these embodiments the position assist data may be updated upon launch of the application even when the application does not request a position fix.

The determination of whether an application is of the type to request a position fix could be made by viewing a header file or a library file associated with the application by having the device or a user of device manually test an application by viewing a security level or certification data associated with the application e.g. certified by a wireless carrier to request position fixes by providing a prompt to a user to have the user select whether a newly loaded application requires position fixes by checking a profile associated with the application by searching one or more data stores which may be local to or remote from e.g. accessible across a network such as the Internet by device and or by other mechanisms. Device may in an exemplary embodiment only be capable of identifying whether certain types of applications require position fixes and may therefore make the determination of whether to stay in mode only with respect to those applications. In this circumstance device may await a request for a position fix from an application before entering mode even though the application is one which requires position fixes since device is incapable of identifying it as an application requiring position fixes.

Applications requiring a position fix may be a navigation application a child finder application other LBS applications or other applications requiring a position fix whether original equipment software or loaded subsequent to manufacture via a third party application.

In some embodiments if a triggering event occurred the position assist data may be updated regularly periodically e.g. autonomously as a response to the initial triggering event. The update may occur at regular intervals at irregular intervals at calculated intervals such as calculated intervals that vary based on other criteria and or in some other manner including in the manner described below for updating in response to a request for a position fix.

Referring now to device is configured to store at least one type of position assist data at step . At step a wireless communication call is established which is unrelated to a request for position assist data such as a telephone call or data communication call for email or other data communications. Device is configured to communicate a request for updated position assist data for one or more of the types of position assist data during the wireless communication call as shown at step . According to an alternative embodiment at step a determination of whether an update is needed can be made. The determination at step can be made based on a time stamp associated with the type of position assist data stored in memory on device which can be used by device to derive a time period since the position assist data was last updated. Alternatively or in addition the determination at step can be made based on a change in position of device which may be determined as described herein with reference to .

In this embodiment a request for position assist data from a wireless network is made during a wireless communication call established for another application. The position assist data can be interspersed with the voice and or data communications received from the wireless network in a manner that appears transparent to a user of device . The request from device and or the data in response to the request from the wireless network can come before after or interspersed within the voice and or data communications. The position assist data may be almanac ephemeris MS assist data or other position assist data.

In an exemplary embodiment device may determine that an update of a type of position assist data is needed and then may wait until a wireless communication connection or session has been set up for an unrelated purpose and then make the request for position assist data from the wireless network at that time. The request for position assist data can be piggybacked on the unrelated wireless communication and the responsive position assist data can likewise be piggybacked on the response signal. According to another exemplary embodiment the request and or responsive position assist data can be communicated on a control signaling data path side band frequency or other channel which may or may not be in use by the voice and or data call which triggered the request for position assist data.

Referring to device may be configured to update position assist data in response to a request from an application for a position fix. Device may be configured to continue to update the position assist data e.g. may continue to obtain position fixes after the initial request based on the receipt of the initial request for the position fix even though no application of device has requested subsequent position fixes. The subsequent position assist data may be obtained immediately e.g. within 30 15 10 5 and or 3 minutes following the initial request for a position fix or may be obtained after a more extended period of time e.g. more than 15 minutes more than 30 minutes more than 45 minutes more than 2 hours more than 4 hours more than 8 hours and or more than 12 hours after the initial position fix request and or within a week a day 16 hours 12 hours 8 hours 6 hours 4 hours 2 hours and or 1 hour of the initial position fix request . In some embodiments device may be configured to obtain position assist data e.g. new position fixes at least about 1 2 3 4 5 6 7 and or 8 additional times based on the receipt of the initial request from the application and without position fixes being requested. In some embodiments device may be configured to obtain position assist data e.g. new position fixes a certain number of additional times which number may be set e.g. pre set calculated etc. at or below 50 30 25 20 15 10 8 and or 5 additional times based on the receipt of the initial request from the application and without position fixes being requested.

Referring now to device is configured to generate position assist data periodically at step . At step if a request for a position fix is received device maintains the same period of generating position assist data. However if a period of time X passes without receiving a request for a position fix then the time period between generating additional position assist data is increased at step by a period Y. In this embodiment a processor of device is configured to receive a request e.g. internally from an application or externally from a user or other external application for a position fix and to provide the position fix based on position assist data stored in memory. The processor may be configured to change the time period between subsequent steps of generating updated position assist data for example based on whether a subsequent request for position fix is received from a requester. In this embodiment the processor is configured to increase the time period a plurality of times between each subsequent request for updated position assist data so long as no subsequent request for position fix is received. This may be referred to as a throttling algorithm or other algorithm which increases the time period between subsequent requests for position assist data so long as no request for a position fix is received from a requester.

According to one exemplary embodiment device after completion of a position fix will periodically update one or more types of position assist data based on the assumption that there will likely be more position fixes in the near future. According to one embodiment device assumes that the likelihood of receiving requests for additional position fixes will decrease over time. Therefore logic is used to determine how frequently to update the position assist data. For example X minutes after a position fix device is configured to autonomously automatically or without user input request a position assist data update e.g. ephemeris data or calculation of coarse data . If a user or other requester has not requested another fix after X plus Y minutes from the last autonomous update of position assist data device is configured to automatically or autonomously request another update. After a period of time Z without receiving a request for a position fix device is configured to cease further automatic updates of position assist data according to this algorithm but may resume requests for position fix data according to other triggering events such as those described herein .

According to one exemplary embodiment after a position fix is calculated if no request for a position fix has been received within approximately 60 minutes device is configured to initiate a request for position assist data without user input. Device is then configured to wait for two hours before autonomously generating additional position assist data for one or more of the position assist data types. Device then may wait four hours e.g. X 60 minutes plus Y 4 hours eight hours e.g. X 60 minutes plus Y 8 hours etc. before subsequent generations of position assist data. The time periods are merely exemplary and may alternatively be on the order of minutes days etc.

According to one embodiment the position assist data is coarse data and device is configured to generate updated coarse data by generating an updated position fix. According to another embodiment device is configured to periodically generate updated coarse data without regard to whether a request for position fix is received to compare a plurality of coarse data points to determine that the device is substantially stationary and to cease generating further updated coarse data if the device is substantially stationary. In an exemplary embodiment after comparing X successive position fixes device determines that it has not moved and subsequent coarse data updates are halted unless an additional position fix is specifically requested by a user or requester or client. In this embodiment power consumption can be reduced.

Referring now to at step a mobile computing device ID or other identifying information is stored at a server accessible via a wireless network. The server can be configured to maintain an account for a mobile device and to provide one or more services to the mobile device such as backup restore features for personal information on device lock kill pill features to lock and or clear the memory of device should it be lost or stolen activation and registration processes for various services picture messaging short messaging service SMS messaging multi media messaging service MMS messaging and other services.

The server may further be configured to store a time of last update for one or more types of position assist data as shown at step . For example if almanac data is programmed into device at the factory then the date of manufacture will be used as the last almanac update time initially. The server computer can be configured to track when almanac data expires and to then trigger a push or other communication of updated almanac data over a wireless network to device . At step the server determines whether an update is needed and if so updated position assist data is transmitted or pushed to a mobile device at step . The push data for updated position assist data may be done via a data connection an SMS or other data downloads. According to one exemplary embodiment the download of data can be timed during a low use period such as at night or during a time in which part or all of the device is powered down. The server may further be configured to download the updated position assist data during an existing telephone or data call. The server may further be configured to download the updated position assist data in small portions. For example the server would not need to track a time stamp of the last update if small chunks of data are periodically sent from time to time over a set time period such as six months.

Referring now to at step device is configured to store an expiration date for one or more types of position assist data. At step device is configured to determine whether an update is needed for one or more types of position assist data. For example device may maintain an expiration date for the position assist data and upon expiration or reaching the time period for expiration device autonomously automatically or without user input triggers a request to generate updated position assist data. Alternatively at step which can be a process step or represent alternative embodiments device can determine whether it is configured for a manual update in which case a user may be notified via the display a chime or other indication that one or more types of position assist data have expired. The user may then request via user input to device updated position assist data as shown at step . Step shows the scenario of an automatic request for an updated position assist data. In either event the request may be sent via a wireless network to a position determination entity PDE or to a download server or by linking to a server via a universal resource locater URL that points to a location where position assist data may be downloaded e.g. a U.S. Government website etc . A user request for position assist data may also be accomplished by sending a text message such as an SMS or mobile originated short message service MO SMS by setting up a data connection to a PDE or another download server on a carrier s network or by setting up a data connection to an established public site for almanac data e.g. U.S. Government website etc. .

According to another exemplary embodiment device may be configured to provide an indication to a user via the display or speaker e.g. an icon chime tone etc. that device is requesting and or receiving updated position assist data. Advantageously the user will then know that processing time is being spent on the operation in the event that sluggish operation is caused for other applications or processes.

According to one exemplary embodiment the download of position assist data may be by method of file transfer and may occur in portions of the complete file.

Referring now to at a step the device detects that it has been powered up. At step a power up sequence is performed such as powering up the processor or processors enabling the display etc. At step if a time stamp check is not required which may be a process step or represent alternative embodiments updated position assist data is generated at step automatically autonomously and or without user input. The position assist data may be generated by sending a request for updated position assist data and or by generating a new position fix to create new coarse data. If a time stamp check is required at step device determines the period of time since the last update of the type of position assist data and if the period is beyond a predetermined threshold representing fresh position assist data then the process proceeds to step to generate updated position assist data.

According to one embodiment every time device is powered up updated position assist data of at least one type is generated.

According to another embodiment each time device is powered up position assist data of at least one type is automatically generated provided a time stamp associated with the data is greater than a predetermined time period representing fresh data.

According to one embodiment coarse data may comprise a position fix a time stamp indicating the time at which the position fix was calculated and accuracy data indicative of the level of accuracy of the position fix and or other data.

Referring now to device is configured to detect whether a change in position of device has occurred at step . If a change in position has been detected of sufficient significance e.g. greater than a predetermined threshold or data showing velocity and or acceleration at step updated position assist data is generated. Device can be configured to detect an event that signals movement of device e.g. system ID network ID SID NID overhead message changes base station BS latitude longitude in overhead message changes beyond some threshold etc. . Upon detecting this change device may be configured to automatically autonomously or without user input initiate or trigger a request for an update of position assist data. In some embodiments the decision to update position assist data is based on the number of changes e.g. changes in SID NID identified e.g. such that a fixed or adjustable threshold number of changes need to be detected before triggering an update and or that a threshold number of unique identifiers stations need to be registered before an update is made based on this criteria .

Ephemeris data is different based on location. An indication of movement would indicate the possible need for an update of ephemeris data. According to one exemplary embodiment device is configured to determine whether it moved within 30 60 90 minutes or some other predetermined period of time and if so the time period of which the position assist data is considered fresh or useable may be decreased or reduced to zero. Alternatively if device indicates that it has not moved device may be configured to not update the position assist data for the entire predetermined period of time whether it be 30 60 90 minutes or some other period of time.

In alternative embodiments geographic designations other than SID NID may be used such as a cellular base station site region a circular square or other shaped region with predetermined parameters etc.

Further while data may be received from an overhead message such as a signaling message provided continuously to a mobile device over a wireless network regardless of whether a data or telephone communication session has been established the SID NID or BS latitude longitude may be provided over any communication signal. For example device may configured to receive such an overhead message at very short intervals such as milliseconds tenths of seconds or seconds. The change in position of the device may further be determined by calculating position fixes such as a stand alone MS assist MS based PDE based or other position fix.

Additionally every reference to updating position assist data made above is a reference to updating any one type of position assist data updating any combination of two or more types of position data and or updating each type of position assist data. All such variations and combinations are contemplated for each reference above to updating position assist data.

With reference to the disclosure and claims use of the phrase based on means based in least in part on and use of the term a or an means one or more or at least one. Further any of the steps of any of the methods disclosed herein may be combined with any of the other steps and or rearranged with other steps in alternative embodiments. Specifically various embodiments may make use of different combinations of parts or all of the methods disclosed herein.

While the exemplary embodiments illustrated in the Figs. and described above are presently exemplary it should be understood that these embodiments are offered by way of example only. For example while some embodiments are shown with reference to receiving position assist data over a wireless network the teachings herein may also be applied to receiving position assist data from GPS satellites FM or AM radio signals other wireless transmissions wired connections etc. Accordingly the present invention is not limited to a particular embodiment but extends to various modifications that nevertheless fall within the scope of the appended claims.

