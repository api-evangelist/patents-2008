---

title: Media independent handover for smart phone architecture
abstract: A wireless transmit/receive unit (WTRU) may include two or more modems, each configured to link to a different network, and a media independent handover (MIH) client. An application programming interfaces (API) may provide the MIH client with mechanisms to receive information about links, control the modems for handover, discover a MIH server and IP multimedia system nodes, trigger mobile IP handover, etc. If a link has been successfully established, the MIH client may start a MIH session. When the modem indicates that a connection is going to be terminated, the MIH client may activate the second modem for handover. If the first modem indicates that a link parameter has crossed a threshold, the MIH client may send signal measurements to a MIH server. After receiving a media independent handover switch request, the MIH client may initiate handover to the second network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08331315&OS=08331315&RS=08331315
owner: SK Telecom, Co. Ltd.
number: 08331315
owner_city: Seoul
owner_country: KR
publication_date: 20080912
---
This application is a continuation in part of U.S. patent application Ser. No. 11 862 963 filed Sep. 27 2007 now U.S. Pat. No. 7 894 400 issued Feb. 22 2011 which claims the benefit of U.S. Provisional Application No. 60 890 273 filed Feb. 16 2007 and U.S. Provisional Application No. 60 939 387 filed May 22 2007 all of which are incorporated by reference as if fully set forth herein. This application further claims the benefit of U.S. Provisional Application No. 60 972 106 filed Sep. 13 2007 which is incorporated by reference as if fully set forth herein.

Many different types of wireless access technologies have been developed including global standards for mobile communication GSM universal mobile telecommunication system UMTS CDMA2000 IEEE 802.16 wireless broadband WiBro WiFi and WiMAX and IEEE 802.11 wireless local area network WLAN . Each of these systems have been developed and tailored to provide specific applications.

With the pervasive adoption of wireless communication networks in enterprise residential and public domains continuous connectivity can be supported as the users of such networks move from one network to the other. With the emerging always on life style wireless transmit receive units WTRUs i.e. mobile stations MS are required to support multiple heterogeneous networks and multimode WTRUs that incorporate more than one of these wireless interfaces require an ability to seamlessly switch among them during communication.

IEEE 802.21 media independent handover MIH has been developed to enable a seamless handover based on measurements and triggers supplied from link layers. IEEE 802.21 defines media independent event service ES command service CS and information service S . IEEE 802.21 also defines media dependant independent service access points SAPs and associated primitives for each specific access technology.

IEEE 802.21 MIH event and information service EIS requires MAC or physical layer based event notification for link status updates between a WTRU and a MIH point of service PoS . The MIH EIS events include link up link down link parameters change link going down service data unit SDU transmission status link event rollback pre trigger L handoff imminent and the like. Currently link layer extensions required to support MIH EIS are under consideration for various technologies.

The key functionality provided by media independent handover is communication among the various wireless layers including an Internet protocol IP layer. The required messages are relayed by a MIH entity that is located in the protocol stack between the layer and layer . The MIH entity may communicate with various IP protocol layers including a session initiation protocol SIP for signaling and a mobile IP layer for mobility management.

When a session is handed off from one access point to another using the same technology the handover can usually be performed within that wireless technology itself without involving the MIH entity. For instance a voice over IP VoIP call from a WiBro handset to a WiBro access point can be handed over to another WiBro access point within the same network using the same WiBro standard. However to perform a handover from a WiBro access point to a UMTS network the media independent handover would be required since the two access points cannot communicate with each other at the link layer and are in general on different IP subnets.

Accordingly it would be desirable to provide a method and apparatus for performing handover between an IEEE 802.16 WiBro network and a UMTS network.

MIH clients may be implemented for personal computers PCs that interface with the PC operating system OS via the OS s application programming interface API and a removable WiBro WCDMA device such as a universal serial bus USB dongle . Such clients rely on a dedicated COM port for communications with the WiBro WCDMA interface.

WTRUs such as smart phones or any other mobile device capable of processing more than one application simultaneously may incorporate an identifiable OS with a well known API. Such WTRUs typically include an application processor configured to run the OS and other applications such as a browser a WCDMA Modem Processor other radio modems such as WiBro and WiFi and other peripherals such as a key pad and camera . The OS allows communication between these components through the API.

Accordingly it would be desirable to provide a method and apparatus for performing media independent handover between an IEEE 802.16 WiBro network and an UMTS network on a smart phone. It would also be desirable for the method and apparatus to be configured to take advantage of existing APIs.

A method and apparatus for performing handover between two different network protocols using IEEE 802.21 MIH functions are disclosed. A WTRU may include two or more modem processors each configured to communicate in a different network. A WTRU may also include a MIH client an operating system various high level applications such as a user interface and various communications protocol components each configured to run on an application processor. The operating system may provide access to an application programming interface API to provide the MIH client with mechanisms to receive information about the communications links control the modems for inter technology handover discover a MIH server and IP multimedia system IMS network nodes through a dynamic host configuration protocol DHCP or through a domain name system DNS trigger mobile IP to perform IP handover and send or receive MIH messages over a transport protocol such as user datagram protocol UDP . The OS may also provide access to each modem via COM port interfaces.

If link has been successfully established using a first modem the MIH client may start a MIH session. When the first modem indicates that a connection is going to be terminated or otherwise torn down the MIH client may activate a second modem for handover. If the first modem indicates that a link parameter has crossed a threshold the MIH client may send signal measurements to a MIH server. After receiving a MIH switch request the MIH client may initiate handover to a second network. The MIH client may map QoS parameters from the first network to the second network and specify a QoS profile to be requested from the second network. Alternatively the MIH client may request a network subscribed QoS profile during PDP context activation.

When referred to hereafter the terminology WTRU includes but is not limited to a user equipment UE a mobile station a fixed or mobile subscriber unit a pager a cellular telephone a personal digital assistant PDA a computer a smart phone or any other type of user device capable of operating in a wireless environment. When referred to hereafter the terminology base station includes but is not limited to a Node B a site controller an access point AP or any other type of interfacing device capable of operating in a wireless environment.

The following description purely for purposes of example will be explained with reference to WiBro and WCDMA. However it should be noted that the embodiments are not limited to WiBro WCDMA handover and may be applied to handover between any two wireless access networks including IEEE 802.16 networks. Furthermore although it is recognized that UMTS is a broader term than WCDMA it is noted that WCDMA and UMTS may be used interchangeably herein.

In an embodiment a method for implementing software interfaces between the MIH client A the OS A the WiBro Modem Processor A and the WCDMA Modem Processor A using the OS s API and between the MIH client A high level applications A and network control components A using the MIH client s interfaces and other existing APIs is provided. The MIH client A may be adapted to place system calls such as instantiation and utilization of timers memory management tracing socket management and thread management to the OS A via the OS s API for example the Win32 API on the Windows Mobile OS The API exposes an interface for communicating with a WCDMA Modem Processor A and an interface for communicating with a WiBro Modem A. The WiBro interface A may place system calls to the WiBro Modem Processor A utilizing the interfaces exposed by the OS s API. Similarly the WCDMA interface A may place system calls to the WCDMA Modem Processor A utilizing the interfaces exposed by the OS s API. The application interface A is adapted to communicate with a user interface UI a Network Control Centre NCC or both. The control protocol interface A is adapted to communicate with a Mobile IP client a TCP client an UPD client an IP client or a combination thereof. The OS A may also expose a transparent interface such as a COM port to allow the MIH client A to communicate directly with the WiBro Modem Processor A the WDCMA Modem Processor A or both. The MIH client A may also include a porting layer not shown to allow adaptation to other APIs.

In an example embodiment a method for implementing software interfaces between the MIH entity B and other entities in the WTRU B is provided. The software interfaces provide the MIH entity B with mechanisms to receive information about the WiBro and WCDMA links control the WiBro modem B the WCDMA modem B and other components of the WTRU B for inter technology handover discover a MIH server and IP multimedia system IMS network nodes through DHCP or domain name system DNS trigger mobile IP to perform IP handover send or receive MIH messages over TCP UDP and allow the O M entity B to be able to control the MIH entity B.

In another embodiment client application programming interfaces APIs for WiBro WCDMA mobility are defined. The APIs include lower layer client APIs and upper layer client APIs. Table 1 shows lower layer client APIs between the WiBro modem B and the MIH entity B and Table 2 shows lower layer client APIs between the WCDMA modem B and the MIH entity B.

AT commands may be used to communicate between the WCDMA modem B and the MIH entity B to perform functions e.g. to create a PDP context . The format of AT commands includes a prefix a body and a termination which will be described in detail hereinafter.

Table 3 shows upper layer client APIs between the MIH entity B and the mobile IP layer B. Table 4 shows upper layer client APIs between the MIH entity B and the SIP client B. Table 5 shows upper layer client APIs between the MIH entity B and the UDP IP layer B B. Table 6 shows upper layer client APIs between the MIH entity B and the DHCP layer B. Table 7 shows upper layer client APIs between the MIH entity B and the O M entity B.

If it is determined that a WiBro link has been successfully established at step the MIH entity requests a mobile IP client B to perform discovery of a foreign agent and mobile IP binding update step . A FA discovery is performed and mobile IP binding update is performed with the discovered FA via an IP stack over the WiBro link step . Proxy call state control function P CSCF and MIH discovery is performed over IP stack via DHCP or DNS step . A P CSCF and a MIH server is discovered with a DHCP or DNS server via an IP stack step . The MIH entity requests the SIP client to perform IP multimedia subsystem IMS registration step . IMS registration is performed with a P CSCF via an IP stack step . The HA IP address is queried via the FA steps . The MIH entity then starts a MIH session step . The start of MIH session is communicated with the MIH server via an IP stack step . When it is detected that the current WiBro cell is a border cell i.e. the WiBro link condition is being lowered the eventual end of WiBro coverage is triggered and the identity ID of the current WiBro border cell is reported to the MIH entity via a Link Going Down.indication API step . The MIH entity then activates the WCDMA modem by sending an AT CFUN command to the WCDMA modem step . The WCDMA modem is activated and OK is signaled step .

The MIH entity sets thresholds via a Link Configure Thresholds.request API to the WiBro modem step for certain WiBro link parameters which when crossed trigger generation of a measurement report. The WiBro modem sends a confirmation in response to the request for configuring the link parameters and specifies the result of configuration to the MIH entity via a Link Configure Thresholds.confirm API step . The WiBro modem reports measurement results to the MIH entity periodically after thresholds are crossed via a Link Parameter Report.indication API step . The MIH entity requests periodic signal quality measurement from the WCDMA modem by sending an AT CSQ command step . The WCDMA modem responds to periodically requested signal quality measurements from the MIH entity step . The MIH entity sends the signal quality measurements and the WiBro cell ID to the MIH server via an IP stack step . The MIH entity receives a MIH switch request from the MIH server step . The MIH entity may request QoS parameters for the currently running application from the WiBro modem via a Link Get Parameters.request API for mapping WiBro QoS parameters to WCDMA QoS parameters step . The WiBro modem responds with the requested QoS parameters via a Link Get Parameters.confirm API step . The MIH entity then maps the WiBro QoS parameters to UMTS QoS parameters step . The mapped UMTS QoS profile is requested to the UMTS network during PDP context activation. WiBro QoS definition and WCDMA QoS definition are shown in Tables 8 and 9 respectively. An example mapping of the WiBro QoS parameters to WCDMA QoS parameters are shown in and Table 10.

Alternatively the MIH entity may obtain the subscribed QoS profile from the UMTS network instead of mapping the previously granted WiBro QoS to WCDMA QoS. In this procedure the previous WiBro granted QoS is ignored and the MIH entity indicates to use network subscribed assigned QoS in the PDP context activation message to the UMTS network. The MIH entity then accepts the QoS profile sent by the UMTS network.

The MIH entity requests a new packet data protocol PDP context creation by sending an AT CGDCONT command to the WCDMA modem step . OK is signalled in response and a new PDP context is created steps . The MIH entity specifies the UMTS QoS profile by sending an AT CGEQREQ command to the WCDMA modem step . OK is signalled in response and the QoS profile is stored for PDP context steps .

The MIH entity initiates a procedure to switch to UMTS step . The MIH entity requests performing attachment with the UMTS network by sending an AT CGATT command to the WCDMA modem step . OK is signalled in response and a radio resource control RRC connection setup procedure is performed with a radio network controller RNC and an attachment procedure is performed with a serving general packet radio services GPRS support node SGSN steps . The WCDMA modem goes to a connected mode. The MIH entity requests a network registration status by sending an AT CGATT command to the WCDMA modem step . The WCDMA modem reports a change in network registration status step . The MIH entity requests activation of the PDP context by sending an AT CGACT command to the WCDMA modem step . OK is signalled in response and PDP context activation and radio bearer establishment are performed with the SGSN and a gateway GPRS support node GGSN steps . During the PDP context activation a QOS profile either generated by mapping the WiBro QoS parameters to WCDMA QoS parameters or indicating a request for subscribed QoS profile is sent with a PDP context activation message. The MIH entity requests current setting for PDP context by sending an AT CGEQREQ command to the WCDMA modem step . The WCDMA modem returns a current setting for each defined PDP context to the MIH entity step .

The MIH entity requests the WCDMA modem to enter a data state by sending an AT CGDATA command step . The WCDMA modem responds with a CONNECT command step . The MIH entity requests the mobile IP client B to perform FA discovery and mobile IP binding update step . FA discovery and mobile IP binding update with the discovered FA are performed via an IP stack over the WCDMA link step . The MIH entity requests the SIP client B to perform IMS re registration step . IMS re registration is performed with the P CSCF over an IP stack step . The MIH entity sends a MIH switch response to the MIH server over the IP stack in response to the switch request at step step . A UMTS session for IMS starts step . The MIH entity sends a link switch command to teardown the WiBro link to the WiBro modem via a Link Action.request API step . The WiBro modem responds via a Link Action.confirm API and the WiBro modem is turned off step .

The MIH entity initiates a procedure to switch to UMTS step . The MIH entity requests a new PDP context creation by sending an AT CGDCONT command to the WCDMA modem step . OK is signalled in response and a new PDP context is created step . The MIH entity requests performing attachment with the UMTS network by sending an AT CGATT command to the WCDMA modem step . OK is signalled in response and the attachment procedure is performed and the WCDMA modem goes to a connected mode step . The MIH entity requests a network registration status by sending an AT CGATT command to the WCDMA modem step . The WCDMA modem reports a change in network registration status step . The MIH entity request activation of the PDP context by sending an AT CGACT command to the WCDMA modem step . OK is signalled in response and PDP context activation and radio bearer establishment are performed step . The MIH entity requests current setting for PDP context by sending an AT CGEQREQ command to the WCDMA modem step . The WCDMA modem returns current setting for each defined PDP context to the MIH entity step .

The MIH entity requests the WCDMA modem to enter a data state by sending an AT CGDATA command step . The WCDMA modem responds with a CONNECT command step . The MIH entity requests the mobile IP client B to perform FA discovery and mobile IP binding update step . FA discovery and mobile IP binding update with the discovered FA are performed via an IP stack step . The MIH entity sends a MIH switch response to the MIH server via an IP stack step . The MIH entity sends a link switch command to teardown the WiBro link to the WiBro modem via a Link Action.request API step . The WiBro modem responds via a Link Action.confirm API and the WiBro modem is turned off step .

The MIH entity requests performing attachment with the UMTS network by sending an AT CGATT command to the WCDMA modem step . OK is signalled in response and an attachment procedure is performed and the WCDMA modem goes to a connected mode step . The MIH entity requests a network registration status by sending an AT CGATT command to the WCDMA modem step . The WCDMA modem reports a change in network registration status step . The MIH entity requests activation of the PDP context by sending an AT CGACT command to the WCDMA modem step . OK is signalled in response and PDP context activation and radio bearer establishment are performed step . The MIH entity requests current setting for PDP context by sending an AT CGEQREQ command to the WCDMA modem step . The WCDMA modem returns current setting for each defined PDP context to the MIH entity step . The MIH entity requests the WCDMA modem to enter a data state by sending an AT CGDATA command step . The WCDMA modem responds with a CONNECT command step . The MIH entity requests the mobile IP client B to perform FA discovery and mobile IP binding update step . FA discovery and mobile IP binding update with the discovered FA are performed via an IP stack step . The MIH interactions end step .

If it is indicated that there is WiBro coverage the MIH entity initiates a procedure to turn off the WCDMA modem step . The MIH entity requests deactivation of the PDP context by sending an AT CGACT command to the WCDMA modem step . OK is signalled in response and the PDP context is deactivated step . The MIH entity requests a current PDP context setting by sending an AT CGEQREQ command to the WCDMA modem step . The WCDMA modem returns a current PDP context setting to the MIH entity step . The MIH entity requests network detachment by sending an AT CGATT command set to 0 to the WCDMA modem step . OK is signalled in response and a detachment procedure is performed step . The MIH entity requests a network registration status by sending an AT CGATT command to the WCDMA modem step . The WCDMA modem returns network registration status to the MIH entity step . The MIH entity activates the WiBro modem via a Link Action.request API step . The WiBro modem is activated and the WiBro modem attempts to establish a WiBro link step . The MIH interactions are continued.

It is noted that the following naming conventions are used herein. Function names are the same for the requests and associated callback functions except for the suffixes. req is used as a suffix when the function implements a request e.g. mihc set req . cb is used as a suffix for the associated callback function e.g. mihc set cb . The name of the entity implementing the request is used as the prefix for both the request and callback. A request function implemented by IMS would be called ims set req and the associated callback would be called ims set cb .

Detailed examples of client API descriptions are described hereinafter. It is noted that these examples are provided purely for purposes of explaining the embodiments and are in no way limiting in scope. MIH middleware i.e. MIH entity is preferably written as portable American national standards institute ANSI C code .c and or .h files that can run on any operating system OS with ANSI C compiler support. The MIH middleware may run in a real time operating system RTOS and or multi threaded environment. An external non MIH thread starts and stops the MIH middleware. The MIH middleware may share some common memory space with other non MIH software threads e.g. WiBro MIP . Function calls are used to communicate with other non MIH software threads e.g. MIP . The functions provided by the MIH middleware to other software threads e.g. to WiBro are executed in the caller s execution time. The functions provided by other software threads e.g. WiBro and called by the MIH middleware are executed during MIH middleware s execution time.

wibro link going down ind may be named to mihc wibro event ind. wibro link going down ind could be indicated with a specified confidence that the WiBro link would be unavailable with a specified interval due to a specified reason. In addition to this functionality the following may be indicated to the MIH entity by mihc wibro event ind 

Software API descriptions for UMTS interface i.e. WCDMA interface . As noted above the prefix UMTS may be used interchangeably with WCDMA .

QoS parameters may be passed to wcdma action req. The foregoing umts link action req and umts link action cb functions could change power mode. wcdma action req API may specify WCDMA low power mode behavior through new AT Command description and configure WCDMA QoS parameters. Function names modified as follows 

mip4 send bu req may trigger a mobile IP registration. The registration may precede with agent discovery procedure with the following functions 

The mihc handover ind API may be named to ncc gen ind. mihc handover ind API may be used to inform O M of link layer handovers. ncc gen ind API may be used as a general purpose indication function to provide O M information about handovers errors and other link layer and MIH related events.

In order to support the behavior of wcdma action req a new proprietary behavior for AT commands is provided. A proprietary behavior is defined to put the WCDMA modem in a receive only state i.e. no TX to cause the WCDMA modem to camp on a suitable network and to prevent the WCDMA modem from registering to any cells. In accordance with one embodiment a proprietary function code fun 5 is added to existing AT Command AT CFUN as exemplified here . Alternatively a new proprietary AT Command is added with new behavior e.g. AT XIDLE .

Although features and elements are described in example embodiments in particular combinations each feature or element can be used alone without the other features and elements of the example embodiments or in various combinations with or without other features and elements. The methods or flow charts described herein may be implemented in a computer program software or firmware tangibly embodied in a computer readable storage medium for execution by a general purpose computer or a processor. Examples of computer readable storage mediums include a read only memory ROM a random access memory RAM a register cache memory semiconductor memory devices magnetic media such as internal hard disks and removable disks magneto optical media and optical media such as CD ROM disks digital versatile disks DVDs and the like.

Suitable processors include by way of example a general purpose processor a special purpose processor a conventional processor a digital signal processor DSP a plurality of microprocessors one or more microprocessors in association with a DSP core a controller a microcontroller Application Specific Integrated Circuits ASICs Field Programmable Gate Arrays FPGAs circuits any other type of integrated circuit IC and or a state machine.

A processor in association with software may be used to implement a radio frequency transceiver for use in a wireless transmit receive unit WTRU user equipment UE terminal base station radio network controller RNC any host computer or the like. The WTRU may be used in conjunction with modules implemented in hardware and or software such as a camera a video camera module a videophone a speakerphone a vibration device a speaker a microphone a television transceiver a hands free headset a keyboard a Bluetooth module a frequency modulated FM radio unit a liquid crystal display LCD display unit an organic light emitting diode OLED display unit a digital music player a media player a video game player module an Internet browser and or any wireless local area network WLAN module.

