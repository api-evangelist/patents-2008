---

title: Systems and methods for compensating for streaks in images
abstract: Defects in an image forming system may give rise to visible streaks, or one-dimensional defects in an image that run parallel to the process direction. One known method for compensating for streaks introduces a separate tone reproduction curve for each pixel column in the process direction. A compensation pattern according to this invention has alignment marks before and after a halftone compensation region. The alignment marks provide alignment between the printer pixel grid and a scanning pixel grid. The line width of each alignment mark and the gray level in each pixel column of each gray level portion is measured and analyzed to produce a local tone reproduction curve for each pixel column and associated line width. The line widths of the alignment marks can be remeasured to adjust the local tone reproduction curves to compensate for the streak defect when printing.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07758146&OS=07758146&RS=07758146
owner: Xerox Corporation
number: 07758146
owner_city: Norwalk
owner_country: US
publication_date: 20080131
---
This is a continuation of application Ser. No. 11 476 009 filed Jun. 28 2006 now U.S. Pat. No. 7 347 525 which in turn is a continuation of application Ser. No. 10 739 204 filed Dec. 19 2003 now U.S. Pat. No. 7 125 094. The prior applications are hereby incorporated by reference in their entirety.

This invention relates to systems and methods for reducing print defects in electrostatically formed images.

Defects in the subsystems of a xerographic electrophotographic or similar image forming system such as a laser printer digital copier or the like may give rise to visible streaks in a printed image. Streaks are primarily one dimensional defects in an image that run parallel to the process direction. Typical defects might arise from a non uniform LED imager contamination of the high voltage elements in a charger scratches in the photoreceptor surface etc. In a uniform patch of gray streaks and bands may appear as a variation in the gray level. In general gray refers to the intensity value of any single color separation layer whether the toner is black cyan magenta yellow or some other color.

One method of reducing such streaks is to design and manufacture the critical parameters of the marking engine subsystems to tight specifications. Often though such precision manufacturing will prove to be cost prohibitive.

A tone reproduction curve TRC may be measured by printing patches of different bitmap area coverage. In some digital image processing applications the reflectivity of a patch of gray is measured with a toner area coverage sensor. The manner of operation of the toner area coverage sensor is described in U.S. Pat. No. 4 553 033 which is incorporated herein by reference in its entirety. Toner area coverage sensors are typically designed with an illumination beam much larger than the halftone screen dimension. This large beam does not provide the resolution for the toner area coverage sensor to be useful as a sensor for the narrow streaks that may occur for poorly performing subsystems.

U.S. Pat. No. 6 760 056 by Klassen et al incorporated herein by reference in its entirety discloses one exemplary embodiment of a method for compensating for streaks by introducing a separate tone reproduction curve for each pixel column in the process direction. A compensation pattern is printed and then scanned to first measure the ideal tone reproduction curve and then detect and measure streaks. The tone reproduction curves for the pixel columns associated with the streak are then modified to compensate for the streak.

In implementing the methods and systems disclosed in the 056 patent the inventors of this invention discovered additional problems that need to be solved before the streaks could be acceptably compensated for. For example for very narrow streaks any misalignment greater than half a pixel between 1 a scanner pixel grid used to measure the compensation pattern and 2 the pixel grid of the image forming device that printed the compensation pattern prevents proper compensation of the streak. Additionally properly adjusting the tone reproduction curve typically requires a greater gray level resolution in halftone intensity than is often available. Furthermore noise in the scanning and printing process makes is difficult to adequately calibrate the streak defects in a single iteration of the compensation process.

This invention provides systems and methods that compensate for pixel misalignment between a scanning grid and the pixel grid of the image forming system.

This invention separately provides a compensation pattern that is not affected by misalignments between a scanner pixel and a printing pixel grid.

This invention separately provides systems and methods for determining tone reproduction curve compensation values based on a metric sensed from processing an image of process control marks in a compensation pattern.

This invention separately provides systems and methods that reduce the effects of halftone spatial period and scanner noise on the compensation process.

In various exemplary embodiments systems and methods according to this invention compensate for pixel grid misalignment by introducing a compensation pattern which is scanned on an image capture device such as for example a flatbed scanner that has process control marks and or alignment marks before and or after a halftone strip that extends across a process direction. The alignment marks provide alignment between the printer pixel grid and the scanning pixel grid. The process control marks allow changes in the printer response to be more easily and or readily detected so that in response to changes on the process control marks the selected local tone reproduction curve used for a given pixel location can be changed appropriately.

In various exemplary embodiments the alignment marks and the process control marks are the same marks.

In various exemplary embodiments systems and methods according to this invention measure a metric from the scanned image of single pixel wide lines between each use and adjust the tone reproduction curves to compensate for streaks.

In various exemplary embodiments systems and methods according to this invention reduce noise effects by averaging the toner density measurements of all the pixels in the halftone compensation region identified as being in a specific pixel column by the alignment process.

In various exemplary embodiments systems and methods according to this invention are implemented using two or more iterations. After manufacture or during maintenance a compensation pattern having alignment marks and process control marks before and or after a halftone compensation region is printed by the printing system and then scanned on a flatbed scanner or other image capture device. A metric from the scanned image of the process control marks is then obtained. The gray level in each pixel column of each patch or section of the gray level sweep of the halftone compensation region is also measured. Then the measured line widths of the process control marks and the measured gray levels are correlated and interpolated to produce a local tone reproduction curve for each pixel column and associated line width.

Subsequently at regular intervals during printing the process control marks are printed and measured. If there is any change in the metric obtained from the scanned image of such process control marks the compensation data from all the columns is used to modify the local tone reproduction curve for that pixel column.

These and other features and advantages of this invention are described in or are apparent from the following detailed description of various exemplary embodiments of systems and methods according to this invention.

The compensation technique described herein can be applied to both color and monochrome image forming devices. The following exemplary embodiments are directed to generating and applying compensation parameters to monochrome image forming devices. However as is well known in the art color monochrome image forming devices operate by overlaying different color separation layers i.e. differently colored monochrome images. Accordingly each color separation layer can be individually compensated for using the techniques described herein. As used herein the term gray indicates the amount of coverage of material between zero and 100 density on the printed surface although in general this material may be colored any desired color.

An input gray level is typically an integer between 0 and 255 that is sent to the marking engine from a computer an input scanner or other image data source. An actual gray level is the response of a sensor measuring the gray level of the printed image. The actual gray level can be a function of distance in the cross process direction. The desired gray level is defined as the response of the sensor to what the marking engine was designed to print. The desired gray level is independent of position for a uniform gray strip and for example can be the average of all the actual gray levels. The desired gray level can also be a target value that the marking engine is designed to print.

The desired gray level as a function of the input gray level defines an intended tone reproduction curve. The actual gray level as a function of the input gray level defines a local tone reproduction curve. A local tone reproduction curve exists for each pixel location in the printed image in the cross process direction. Thus for example a 600 spi printer that is 11 inches wide would have one desired tone reproduction curve and 6600 600 11 local tone reproduction curves one for each of the 6600 different pixel locations.

In various exemplary embodiments systems and methods according to this invention compensate for streaks or improper toner density regions that run the length of the process direction and have a constant lighter or darker intensity than adjacent regions of the same intended intensity.

That is shows a typical plot of the actual gray level for one local reproduction curve . If the printer response at this pixel were accurate the plot of the actual gray level would match the plot of the ideal or intended tone reproduction curve at all positions. Deviations of this local tone reproduction curve from the ideal or intended tone reproduction curve quantify the degree of streaking for this pixel location at all gray levels. Based on the ideal tone reproduction curve if an image portion having a gray level output of 40 is desired under ideal conditions to obtain the desired gray level output at this pixel location a xerographic or electrographic image forming system would need to print that image portion at a gray level of 117. Based on the actual tone reproduction curve if the image portion having a gray level output of 40 is desired to obtain the desired gray level output at this pixel location the xerographic or electrographic image forming system would need to print that image portion at a gray level of 97. That is the image data defining that image portion should be changed to instruct the xerographic or electrographic image forming system to print that image portion at a gray level of 97 at that pixel location. In practice some parametrization of the two tone reproduction curves and shown in is stored in memory and is used to modify the gray level defined by the image data for any gray level for this pixel location to achieve the desired gray level in the printed image portion.

In various exemplary embodiments to compensate for the streak defects the input gray level is changed using different local tone reproduction curves where one local tone reproduction curve exists for each pixel in the cross process direction so that the actual gray level matches the desired gray level at every pixel location. This requires the ability to accurately determine the actual gray level at every pixel location in the cross process direction. Spatial non uniformities in a sensor may cause a discrepancy between the pixel location where the sensor measuring system or image forming system thinks the image is being measured at and the pixel location where the measurement is actually occurring. If this error occurs then the compensation will be applied to the wrong pixel location. As a result narrow streaks such as the one illustrated in will not be properly compensated for.

In the example shown in to achieve a constant luminosity of 40 the input gray level value for the pixel location experiencing the streak defect must be lowered to a value 97 from the value 117 that was determined using the ideal tone reproduction curve. In the methods and systems of the 056 patent the input gray level is adjusted for each pixel by multiplying the input gray level for that pixel by a compensation parameter that is selected depending on the pixel location and the input level. The ideal tone reproduction curve is then applied to the compensated input image or gray level value to convert from the input gray level value to the printer dependent gray level value.

When the compensated input gray level curve is sampled at the printer pixel column positions the appropriately aligned compensated halftone density curve also shows the different density in or intensity values for the pixel column . When the halftone density curve is used in the printing process the output density curve has the desired constant density for all of the pixel columns .

When the input gray level curve is sampled at the printer pixel column positions using linear interpolation between the discrete pixel positions the misaligned compensated halftone density curve indicates that a density to be used that is in reality half the density needed to appropriately compensate for the streak defect and that the compensation needs to be applied to both of the pixel columns and . When the resulting halftone density curve is used in the printing process the output density curve is over or unnecessarily compensated for the pixel column and is under compensated for the pixel column . While the original streaking shown in the actual printed toner density values has been modified detectable streaking may still be seen in the output density values .

While four gray level halftone strips are shown in it should be appreciated that in practice a gray level halftone strip can be included for up to every distinct gray level the printer can print and multiple compensation pages can be used if necessary. It should be appreciated that gray level halftone strips for less than all of the possible printer gray levels can be used. In this case compensation data for the intermediate unprinted gray levels can be interpolated from the printed gray levels. It should also be appreciated that the halftone compensation region can be a region that has a gradually increasing or decreasing toner density rather than multiple distinct gray level halftone strips such as the strips that have step changes in toner density.

The alignment or fiducial marks and are used to align the scan coordinates for the pixel columns to the coordinates of the pixel columns in the printed image. The two sets of alignment or fiducial marks and are placed before and after the halftone compensation region respectively along the process direction . Each set of alignment marks and organizes the alignment marks and respectively into 8 rows and of a 1 on 7 off line pattern. In various exemplary embodiments the process control marks lines and respectively of the rows and are a single pixel wide although wider lines can be used in some situations. In each set or the alignment marks and respectively in one row or respectively are shifted over one pixel in the cross process direction relative to one other row or of the respective set or . A 1 on 7 off pattern is chosen to leave enough white space between the printed lines and to determine the obtained line width. The 8 rows and of the 1 on 7 off pattern provide enough information to identify the line width and to obtain the toner density at the position of each pixel column in the printer coordinates.

It should be appreciated that a different on off spacing can be chosen between the single pixel wide lines that still meet the requirements that there is no interaction between the different lines in a single row. When a different on off pattern is chosen the number of rows is changed so that all the pixel columns are printed with for example a single pixel wide line. It should also be appreciated that the lines within a single row need not be regularly spaced but can be irregularly spaced as shown in the exemplary embodiment shown in as long as all the rows when taken together have at least one line printed in each pixel column.

The line width of the pixel column in scan coordinates for a particular gray level halftone strip is determined by averaging the scanner response over the length of the alignment or fiducial marks and for that pixel column resulting in a cross section of intensity vs. position. The left and right sides of the alignment or fiducial marks and are determined by finding where the cross section of intensity vs. position for the pixel column crosses a specific intensity threshold. If the crossing point occurs between two scan pixels then the fraction of the distance between the two pixels is found using linear interpolation. The line width is the difference of the two crossing points.

The centroids of the alignment or fiducial marks and are also found by finding for each alignment or fiducial mark a scan pixel with a minimum reflectance about that alignment or fiducial mark or . For each of the alignment or fiducial marks and a quadratic fit using the corresponding located scan pixel and two neighboring scan pixels adjacent to that scan pixel is performed. The minimums of each of these quadratic fits are determined to be the centroids of the alignment or fiducial mark before the halftone compensation region and of alignment or fiducial marks after the halftone compensation region respectively.

The centroid of the pixel column section of a particular gray level halftone strip of the halftone compensation region is then determined by linear interpolation in the process direction between the centroids of the alignment or fiducial marks and . The line width of the pixel column and the centroid of the pixel column section in the cross process direction and the boundaries of each halftone strip of constant input density in the process direction are used to define the scanner pixel location of the pixel column section .

The actual printed toner density values of the scanner pixels along the process direction in the pixel column section are then averaged together to provide the measured reflectance for the printer pixel column . The methods and systems of the 573 application are then used to generate a local tone reproduction curve from that pixel column to the measured average scan toner density values for each printed halftone strip for that pixel column . The local tone reproduction curve and the associated line width of that pixel column are saved for use during printing. This process is repeated for each other pixel location in the cross process direction of the image forming device. It should be appreciated that a look up table which provides compensation factors based on the pixel column location and the input gray level value can be used to implement the determined local tone reproduction curves.

It should be appreciated that there is a functional dependence between the line thickness of the process control marks or which are in various exemplary embodiments nominally a single pixel wide and the pixel column gray level. In general the thicker the line width of the process control marks or the darker the pixel column gray level. Standard numerical fitting techniques are used to match the measured line widths to the local tone reproduction curves. When the measured width of the nominally single pixel wide process control mark or associated with a pixel column changes a different tone reproduction curve which is associated with the new line width is selected.

In the first compensation pattern the single pixel wide process control marks of the rows and are also used as the alignment marks to determine the spatial position at which the given gray strips should be analyzed to determine the corresponding gray level for a single pixel wide process control mark. On the other hand in the second compensation pattern shown in a separate part of the image contains a set of N gray level strips such as the strips shown in . At least one set of fiducial marks which can be used to transform the spatial position of a given gray level strip from scanner units to digital image units is adjacent to each gray strip . The details of the image processing required to transform this image into a table of gray level vs. pixel column is set forth in co pending U.S. Pat. No. 7 095 531 issued 22 Aug. 2006 which is incorporated herein by reference in its entirety.

In step S a determination is made whether the analyzed print uniformity meets a desired image quality specification. If not operation continues to step S. Otherwise operation jumps to step S. In step S compensation parameters that are intended to reduce and ideally eliminate the print non uniformities are determined. Operation then returns to step S. In contrast in step S a print request is input. Then in step S the compensation parameters are used to modify the image data of the output image by changing the gray level as a function of the particular pixel column that a given pixel falls into. Next in step S the image data is used by the image forming device to generate an output image on a receiving substrate. Then in step S a determination is made whether the print uniformity is to be checked. If so operation returns to step S. Otherwise operation returns to step S.

In step S for each process control mark difference between the measured line width and the target line width is determined. Next in step S a uniformity metric is determined from the line width deviations determined in step S as a function of the pixel column each measured process control mark is associated with. Operation then continues to step S where operation returns to step S.

In step S the measured line widths of the process control marks obtained in step S and the local tone reproduction curves obtained in step S are used to create a calibration curve that relates each line width value to a particular tone reproduction curve. Next in step S the individual line width measurements and corresponding gray level measurements are related so that a tone reproduction curve can be determined for each different line width. Then in step S the local tone reproduction curve compensation parameters for each pixel location of the image forming device are updated based on the local tone reproduction curve measurements. Operation then continues to step S where operation returns to step S.

It should be appreciated that in step S it would be desirable to calibrate the line width to the gray scale values if no calibration has yet been performed. Calibration would also be desirable if the state of the image forming device has changed in such a way that the dependence of the widths of the single pixel wide process control marks on the gray level may have changed. An example of such an occurrence that could change this relationship is when a customer replaceable unit of the image forming device has been replaced.

In the x points correspond to the thickest lines i.e. the fifth quintile of line widths in the image where the tone reproduction curve is on the average darker locally compared to other parts of the image. In contrast the o points correspond to the thinnest lines i.e. the first quintile of line widths in the image where the tone reproduction curve is on the average lighter locally compared to other parts of the image. Each intermediate line represents an intermediate quintile of the line widths.

Alternatively in various other exemplary embodiments of step S the tone reproduction curve for each line width can be determined by regressing a single function to the scanner response vs. the input gray level and the line width. Knowing this function allows the toner reproduction curve to be determined merely by measuring the line width. The technique is described in the incorporated U.S. Pat. No. 7 095 531.

In step S a profile of the halftone strip that is adjacent the current row of fiducial marks i.e. a current halftone strip or gray level strip is generated as a function of position in scanner pixel units along the cross process direction. Next in step S the profile of the current halftone strip or gray level strip is transformed from being defined based on the scanner pixel units to being defined based on digital image pixel units. In various exemplary embodiments the profile is transformed based on the relationship between the measured centroid positions and the digital image centroid position of the fiducial marks of the current row of fiducial marks. Operation then continues to step S.

In step S the high frequency structure in the profile of the current halftone strip or gray level strip due to the halftone screen is removed. Next in step S a determination is made whether all of the halftone or gray level strips have been analyzed. If all of the halftone or gray level strips have been analyzed operation continues to step S. Otherwise if not all the halftone or gray level strips have been analyzed operation returns to step S.

In step S a local tone reproduction curve is generated for each pixel column in the digital image units based on the transformed halftone profiles. Operation then continues to step S where operation returns to step S.

It should be appreciated that the captured image obtained by scanning the printed compensation test pattern may not be perfectly oriented to the scanning axes due to rotation of the paper on the scanner platen and or rotation of the printed image on the paper. Therefore in step S rotation of the image relative to the scanning axes is determined using for example features of the printed compensation test pattern and or features of the fiducial marks printed elsewhere on the printed compensation test pattern for this purpose. The determined rotation if any of the image is reduced by applying any appropriate image processing technique. Alternatively the image can be processed based on the measured rotation to identify features within the image.

As shown in the printed compensation test pattern includes some number of rows or sets of fiducial marks and what should be uniform halftone strips . In step S selecting a row can be performed using any of a number of conventional techniques. One particular robust technique is to scan line by line through the captured image to identify those scan lines that give a strong signal at the period of the spacing between the fiducial marks . From the location of that fiducial row the position of any adjacent halftone strips can also be identified. Alternatively the positions of the adjacent halftone strips can be identified using edge location marks.

In various exemplary embodiments in step S the centroid of a fiducial or alignment mark is determined by taking a cross section through all of the fiducial marks of the current row of fiducial marks averaging over the length of those fiducial marks.

It should be appreciated that in step S the halftone frequency structure can be removed using any appropriate known or later developed technique. One technique is to use distributed aperture filtering. In this technique over short segments of the image the change in gray level as a function of pixel at the halftone period is determined and subtracted from the profile. It should be appreciated that in various exemplary embodiments in step S a set of Np Ns gray levels have been obtained. In such exemplary embodiments Np is the number of pixel columns in the printed compensation test pattern and Ns is the number of strips in the printed compensation test pattern. These gray level values can be ordered by column to obtain a set of Np local tone reproduction curves where the local tone reproduction curve has been sampled at Ns points. It should be appreciated that the methods and systems of the 573 patent or of any other appropriate local tone reproduction curve generating technique can be used to generate the local tone reproduction curve for each cross process direction image forming device pixel location based on the average gray levels of the halftone strips for cross process direction scanner image pixel column and the determined relationship between the cross process direction image forming device pixel locations and the cross process direction scanner image pixel columns.

As outlined above with respect to some pairs of adjacent compensation strips may not have intervening intermediate sets of fiducial marks. Likewise the first or last sets of fiducial marks may be omitted. In some such exemplary embodiments one or more sets of fiducial marks may each be associated with two or more compensation strips. In such exemplary embodiments after a first or next set of fiducial marks is selected in step S before steps S and are performed if the selected set of fiducial marks has two or more compensation strips associated with that selected set of fiducial marks one of those associated compensation strips is selected as the current compensation strip. In such exemplary embodiments steps S and S are then performed for that current compensation strip. Then before step S is performed each other compensation strip associated with the selected set of fiducial marks is selected in turn and steps S S are repeated for that compensation strip.

In step S a center of each process control mark is determined and is assigned an index position in the cross process direction based on knowledge of the compensation pattern. Next in step S for each cross process control mark index position the line width is measured. The compensation pattern may contain a number of process control marks on different rows at the same process control mark index position. If so these repeat measurements can also be measured in this instance of step S or the width determination of such process control marks can be delayed to a subsequent instance of step S. Then in step S a determination is made whether all of the rows of lines have been analyzed. If not operation returns to step S. Otherwise if all of the rows of lines have been selected and analyzed operation continues to step S where an average is calculated for each repeated measurement if any. Operation then continues to step S where operation returns to step S.

In step S a compensation tone reproduction curve is selected based on the input gray level of the current pixel and the current pixel column. Then in step S the input gray is modified using the compensation tone reproduction curve. Next in step S a determination is made whether all of the pixel columns have been selected. If so operation continues to step S. Otherwise operation returns to step S.

In step S a determination is made whether all of the pixel rows of the image have been selected. If not operation returns to step S. Otherwise operation continues to step S where operation of the method returns to step S.

As shown in one or more user input device s a image data source an image forming device and a scanner are connected to the streak defect compensation system by links and respectively.

In general the image data source shown in can be any known or later developed device that is capable of providing image data to the streak defect compensation system . In general the image forming device shown in can be any known or later developed device that is capable of printing image data and is susceptible to streak defects that can be compensated for using the streak defect compensation system . In general the scanner shown in can be any known or later developed device that is capable of imaging hardcopy material to produce image data from that hardcopy material that can then be input into the streak defect compensation system .

The image data source the image forming device and or the scanner can be integrated with the streak print defect correction system such as in a general purpose digital copier. In addition the streak defect compensation system may be integrated with devices providing additional functions in addition to the image data source the image forming device and or the scanner in a larger system that performs all functions such as a multi function printer scanner copier fax device.

Each of the respective one or more user input device s may be one or any combination of multiple input devices such as a keyboard a mouse a joy stick a trackball a touch pad a touch screen a pen based system a microphone and associated voice recognition software or any other known or later developed device for inputting data and or user commands to the streak print defect correction system . It should be understood that the one or more user input device s of do not need to be the same type of device.

Each of the links and connecting the user input device s the image data source and the image forming device to the streak print defect correction system can be a direct cable connection a modem a local area network a wide area network and intranet the Internet any other distributed processing network or any other known or later developed connection device. It should be appreciated that each of these links and may include wired or wireless portions. In general each of the links and can be implemented using any known or later developed connection system or structure usable to connect the respective devices to the streak print defect correction system . It should be understood that the links and do not need to be of the same type.

As shown in the memory can be implemented using any appropriate combination of alterable volatile or non volatile memory or non alterable or fixed memory. The alterable memory whether volatile or non volatile can be implemented using any one or more of static or dynamic RAM a floppy disk and disk drive a writable or rewritable optical disk and disk drive a hard drive flash memory or the like. Similarly the non alterable or fixed memory can be implemented using any one or more of ROM PROM EPROM EEPROM and gaps an optical ROM disk such as a CD ROM or DVD ROM disk and disk drive or the like.

Each of the various embodiments of the streak defect compensation system can be implemented as software executing on a programmed general purpose computer a special purpose computer a microprocessor or the like. It should also be understood that each of the circuits routines applications objects managers or procedures shown in can be implemented as portions of a suitably programmed general purpose computer. Alternatively each of the circuits routines applications objects managers or procedures shown in can be implemented as physically distinct hardware circuits within an ASIC using a digital signal processor DSP using a FPGA a PLD a PLA and or a PAL or using discrete logic elements or discrete circuit elements. The particular form of the circuits routines applications objects managers or procedures shown in will take is a design choice and will be obvious and predictable to those skilled in the art. It should be appreciated that the circuits routines applications objects managers or procedures shown in do not need to be of the same design.

When operating the streak defect compensation system a print input image request can be input from one of the user input device s over the link or from the image forming device over the link . The input output interface inputs the print input image request and under the control of the controller forwards it to the image data compensation circuit routine or application .

When operating the streak defect compensation system a compensation request can be input from one of the user input device s over the link or from the image forming device over the link shown in . The input output interface inputs the compensation or update compensation parameters request and under the control of the controller forwards it to the compensation pattern generating circuit routine or application .

The compensation pattern generating circuit routine or application then retrieves under control of the controller the compensation pattern image from the compensation pattern image portion of the memory . The compensation pattern generating circuit routine or application then outputs the compensation pattern image under the control of the controller to the image forming device through the input output interface and over the link . In various exemplary embodiments that iteratively modify the printed compensation test pattern the compensation pattern generating circuit routine or application may apply compensation parameters Gdetermined in a previous iteration to the compensation test pattern before outputting the compensation test pattern to the image forming device and printed onto a receiving medium such as a hard copy.

The scanned image of the printed compensation pattern is then input from the scanner over the link . The input output interface inputs the scanned image of the printed compensation pattern and under the control of the controller forwards the scanned image data to the compensation parameter generating circuit routine or application and or to the calibration pattern image portion .

The compensation parameter generating circuit routine or application under control of the controller input the scanned image data from the calibration pattern image portion or directly from the scanner . The compensation parameter generating circuit routine or application determines the compensation parameters to be used in the streak correction process in the form of local tone reproduction curves and or in the form of gray level offset look up tables as described above. The compensation parameter generating circuit routine or application then under the control of the controller stores the compensation parameters in the compensation parameters portion of the memory . It should be appreciated that in various exemplary embodiments that iteratively determine the compensation parameters G the compensation parameter generating circuit routine or application also determines if sufficient uniformity in the halftone strips has been obtained. If not the compensation parameter generating circuit routine or application causes under control of the controller the compensation pattern generating circuit routine or application to generate and print another compensation test pattern.

The image data compensating circuit routine or application then under control of the controller either retrieves the compensation parameters from the compensation parameters portion of the memory or receives compensation parameters directly from the compensation parameter generating circuit routine or application . The image data compensating circuit routine or application under control of the controller also either retrieves the input image data from the input image data portion of the memory and or receives the input image data directly from the image data source over the link .

The image data compensating circuit routine or application modifies the image data to compensate for the streak defects as described above. The image data compensating circuit routine or application under the control of the controller stores the compensated image data in the compensated image portion of the memory or outputs it directly to the image forming device via the input output interface and over the link .

While this invention has been described in conjunction with the exemplary embodiments outlined above various alternatives modifications variations improvements and or substantial equivalents whether known or that are or may be presently unforeseen may become apparent to those having at least ordinary skill in the art. Accordingly the exemplary embodiments of the invention as set forth above are intended to be illustrative not limiting. Various changes may be made without departing from the spirit and scope of the invention. Therefore the claims as filed and as they may be amended are intended to embrace all known or later developed alternatives modifications variations improvements and or substantial equivalents.

