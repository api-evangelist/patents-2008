---

title: Bluetooth control for VoIP telephony using headset profile
abstract: Systems and methods for Bluetooth Control for VoIP telephony using the Bluetooth Headset Profile are presented. A Bluetooth Headset Profile volume control command message is received and translated to a corresponding USB HID profile menu up or menu down command message. A Bluetooth Headset Profile hookswitch command message is received and translated to a USB HID profile menu item select command message.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08208854&OS=08208854&RS=08208854
owner: Plantronics, Inc.
number: 08208854
owner_city: Santa Cruz
owner_country: US
publication_date: 20080618
---
The use of Bluetooth wireless networks with headsets is a fast growing trend in the telephony industry providing mobility and hands free operation. In addition the use of Voice over Internet Protocol VoIP has also increased displacing circuit switch analog and digital telecom systems. Voice over Internet Protocol transmits voice over a data network utilizing Internet Protocol IP data packets. In VoIP analog speech signals received from an audio source are digitized compressed and translated into IP packets for transmission over an IP network such as the Internet. Some benefits of VoIP include cost savings and new applications. For example VoIP can be used to bypass the toll structure imposed by the service providers that operate the public switched telephone network PSTN or combined with other Internet services such as embedding voice mail messages into user e mail.

The Bluetooth specification sets forth a Headset Profile protocol specifically directed at headset wireless communications. The Headset Profile is described in part K6 of the Bluetooth specification which is hereby incorporated by reference. The Headset Profile relies on SCO for audio encoded in 64 kbit s pulse code modulation PCM or continuously variable slope modulation delta CVSD and a subset of AT commands as set forth in global system for mobile communication GSM 07.07 for minimal controls including the limited ability to ring answer a call hang up and adjust the volume. Although only minimal controls are provided for the Headset Profile protocol is advantageous as it does not mandate features typically undesired in headset applications which are required by other profiles such as the Hands Free Profile.

In VoIP systems where the headset is utilized with a personal computer PC certain configurations utilize a Bluetooth USB Universal Serial Bus adapter coupled to the personal computer to effect wireless communications between the headset and a VoIP application running on the PC. Current VoIP solutions using the Bluetooth Headset Profile map button presses on the headset to USB HID Human Interface Device commands which are then interpreted by the VoIP application as either call answer or call end commands. This provides the user with limited call control ability. In this scenario the user is unable to attempt to make an outgoing call. The user is also unable to reject the incoming call. The user is required to perform these and other call related functions using the PC keyboard or mouse.

In these VoIP applications it would be advantageous of the user to be able to perform additional telecommunications operations using the headset. In this manner the user can take advantage of the mobility offered by Bluetooth and need not be in close proximity to the personal computer.

As a result there is a need for improved methods and systems for wireless Bluetooth headsets operating with the Bluetooth Headset Profile.

Methods and apparatuses for Bluetooth control for VoIP telephony using the Headset Profile are disclosed. The following description is presented to enable any person skilled in the art to make and use the invention. Descriptions of specific embodiments and applications are provided only as examples and various modifications will be readily apparent to those skilled in the art. The general principles defined herein may be applied to other embodiments and applications without departing from the spirit and scope of the invention. Thus the present invention is to be accorded the widest scope encompassing numerous alternatives modifications and equivalents consistent with the principles and features disclosed herein. For purpose of clarity details relating to technical material that is known in the technical fields related to the invention have not been described in detail so as not to unnecessarily obscure the present invention.

This invention relates to the use of a personal computer to implement VoIP telephony with a Bluetooth wireless headset. A headset interface application executed on the PC provides an intuitive means of performing call handling on third party VoIP Softphone applications where the third party exposes an application programming interface API . The system uses a USB interface to the headset interface application and a Bluetooth audio gateway. In one example a user can answer or reject incoming VoIP telephone calls and also activate outgoing calls using only the headset without the need for PC intervention. A user can launch other PC based applications also without the need for PC intervention. In one example the headset interface application uses a menu system to allow the user to answer or reject incoming calls. The menu system will also allow the user to initiate a call with a contact defined in a contacts folder. In further examples a variety of enhanced call functions can be implemented with the menu system while using the Bluetooth Headset Profile including but not limited to call initiation call hold and call waiting operations.

In one example a method for menu navigation using a Bluetooth Headset Profile includes receiving a Bluetooth Headset Profile volume control setting command message comprising a received volume control setting. The received volume control setting is compared to a current volume control setting to determine a higher than current setting status lower than current setting status or same as current setting status. The method includes translating the Bluetooth Headset Profile volume control setting command message to a USB HID menu up command message responsive to a higher than current setting status. The method includes translating the Bluetooth Headset Profile volume control setting command message to a USB HID menu down command message responsive to a lower than current setting status.

The received volume control setting is compared to a volume minimum value and a volume maximum value responsive to a same as current setting status to determine a volume minimum value status or a volume maximum value status. The method includes translating the Bluetooth Headset Profile volume control setting command message to a USB HID menu up command message responsive to a volume maximum value status. The method further includes translating the Bluetooth Headset Profile volume control setting command message to a USB HID menu down command message responsive to a volume minimum value status. A USB HID menu down command message or the USB HID menu up command message is output. An audio file corresponding to a next menu item or a previous menu item is received.

In one example a Bluetooth device includes a Bluetooth transceiver a Universal Serial Bus USB interface and a Bluetooth audio gateway including a control unit. The Bluetooth audio gateway receives a Bluetooth Headset Profile volume control command message from the Bluetooth transceiver and translates the Bluetooth Headset Profile volume control command message to a corresponding USB HID profile menu up or menu down command message. The Bluetooth audio gateway receives an audio file responsive to issuing the corresponding USB HID profile menu up or menu down command message.

In one example a Bluetooth device includes a Bluetooth means such as a Bluetooth transceiver for transmitting or receiving signals in accordance with the Bluetooth protocol. The Bluetooth device includes a Universal Serial Bus means such as a USB interface for transmitting or receiving signals. The Bluetooth device further includes a translating means for receiving a Bluetooth Headset Profile volume control command message from the Bluetooth means and translating the Bluetooth Headset Profile volume control command message to a corresponding USB HID profile menu up or menu down command message. The translating means receives an audio file responsive to issuing the corresponding USB HID profile menu up or menu down command message. The translating means may for example be a Bluetooth audio gateway or a controller.

In one example a method for menu item selection using a Bluetooth Headset Profile includes outputting to a headset an audio file corresponding to a menu item receiving from the headset a Bluetooth Headset Profile hookswitch command message translating the Bluetooth Headset Profile hookswitch command message to a USB HID menu item select command and outputting the USB HID menu item select command to a VoIP application. In one instance the menu item select command originates a call.

Bluetooth audio gateway is the gateway for both input audio and output audio. The Bluetooth headset acts as remote audio input and output mechanism for the Bluetooth audio gateway . The Bluetooth audio gateway and Bluetooth headset provide serial port emulation. The serial port emulation is used to transport user data including AT commands from the Bluetooth headset to the Bluetooth audio gateway . The AT commands are parsed by the Bluetooth audio gateway and responses are sent to the Bluetooth headset . Further operation of the Bluetooth audio gateway is described below.

Computer includes a database storing a contacts directory and audio files . Headset interface application includes a menu navigation module accessing contacts directory and audio files . Directory associates names and phone numbers and is stored in memory. Directory may be loaded into the computer through synchronization means such as through the user s Microsoft Outlook address book on the computer. In one example the directory contains session initiation protocol SIP uniform resource identifiers URIs which are used directly to originate calls. Alternatively the directory may contain phone numbers which are used to construct a SIP URI. A VoIP call is originated by initiating a call originate request message including the associated phone number or SIP URI through the VoIP protocol.

On the computer the headset interface application converts the control and audio signals between USB interface and the VoIP Soft Phone . The headset interface application program exchanges control data or control messages preferably using USB HID class data via the USB interface . Bi directional audio data are preferably exchanged directly by the VoIP Softphone application on the computer using audio class input output data via the USB interface . The headset interface application and the VoIP Softphone application exchange data via the Application Programmable Interface API . The VoIP Softphone application handles the data exchange with the Internet Protocol connection.

The VoIP Softphone application can be such as the one provided by a third party with which headset interface application is adapted to communicate. If an IP telephone call request is received from the USB Bluetooth module a control signal is sent via the USB interface . The headset interface application communicates this via the API to the VoIP Softphone application which in turn initiates the call via the Internet connection on the computer . If an IP telephone call is received the VoIP Softphone application informs the headset interface application which sends corresponding control data to the USB Bluetooth module via the USB interface .

Audio signals provided by the VoIP Softphone application are sent via the USB interface to the USB Bluetooth module and then wirelessly sent to Bluetooth headset . Audio signals from the headset are sent via the USB Bluetooth module through the USB interface to the VoIP Softphone application . USB Bluetooth module and Bluetooth headset may support various audio compression formats including for example 7.0 kHz wideband audio compression formats.

Bluetooth audio gateway receives Headset Profile command messages received at USB Bluetooth module . The Headset Profile command messages received are translated to corresponding USB HID menu navigation command messages. These command messages may be vender specific commands. The Headset Profile includes a Headset Control protocol at both the Bluetooth audio gateway and Bluetooth headset responsible for headset specific control signaling. The headset specific control signaling is AT command based. The profile stack for the Headset Profile illustrating the protocols and entities regarding how a headset and audio gateway interact to effect a wireless connection between the devices is known in the art.

The USB HID menu navigation command messages are then communicated between the USB interface of USB Bluetooth module and the headset interface application . The USB interface uses a vendor defined usage page of the HID class data to communicate the auxiliary data command messages.

Bluetooth module includes a transceiver having a transmitter and a receiver . In the present example Bluetooth module receives and transmits a wireless signal utilizing the Bluetooth protocol Headset Profile. The wireless signal transmitted by transmitter includes Headset Profile command messages received from controller . Inbound data or audio is received by receiver and sent to controller . Audio encoder decoder is used for processing a digital audio signal and an analog audio signal as known in the art. Memory is used to store digital data and can take a variety of well known forms such as flash memory.

Controller is operable to receiver user input commands from user interface and convert these commands to Headset Profile digital command messages . In one example controller is part of a Bluetooth chip set. These Headset Profile digital command messages are sent to Bluetooth module for wireless transmission using Bluetooth module . Controller also receives inbound audio or audio files for output by speaker following decoding by audio encoder decoder . In the present example user interface allows a user to navigate a menu and select menu items while the headset is operating in Headset Profile mode. For example a user can scroll through a menu of contacts and select a contact with which to initiate a call to. User interface can be any combinations of visual interfaces tactile interfaces and or an audio interface that allow the user to input commands.

Referring again to at step the Bluetooth audio gateway initiates connection establishment with the Bluetooth headset . At step once the connection is established between Bluetooth audio gateway and Bluetooth headset an AT CKPD 200 Headset Profile command message is sent from the Bluetooth headset to the Bluetooth audio gateway responsive to a hookswitch user input at the Bluetooth headset . This AT CKPD 200 Headset Profile command message is translated at the Bluetooth audio gateway to a USB HID menu current position command message. At step the USB HID command message is sent to the headset interface application . At step the headset interface application issues an open audio channel SCO command to the Bluetooth audio gateway . At step the Bluetooth audio gateway issues the open audio channel SCO command to Bluetooth headset . At step the Bluetooth audio gateway sends an audio channel SCO open message to headset interface application notifying the headset interface application the SCO has been opened. At step the headset interface application outputs an audio file indicating the current position in the application menu to the Bluetooth audio gateway which outputs the audio file to Bluetooth headset at step for playback to the user.

Scrolling up and down menus is achieved by using the volume up and down buttons on the headset. When the user presses the volume up or volume down buttons to scroll through a menu the Bluetooth headset will issue an AT VGS xx Headset Profile message where xx is the new volume setting value. The volume setting value parameter xx ranges on scale between zero and fifteen. Xx is an absolute value relating to a particular implementation dependent volume level controlled by the Bluetooth headset . The xx value is received by the Bluetooth audio gateway and the Bluetooth audio gateway will determine whether the new volume setting is higher or lower than the current settings.

If the new value is higher then the Bluetooth audio gateway issues a USB HID command to the headset interface application indicating that the volume up button on the Bluetooth headset has been pressed. If the new value is lower then the Bluetooth audio gateway issues a USB HID command to the headset interface application indicating that the volume down button on the Bluetooth headset has been pressed. In the case where the volume setting value received by the Bluetooth audio gateway is unchanged then the Bluetooth audio gateway issues a volume down USB HID command when the volume is at the minimum value and a volume up USB HID command when the volume is at the maximum value.

When the headset interface application receives the volume up or volume down USB HID commands it highlights the next selection in the menu and plays the required audio file. The headset interface application also issues a command to the Bluetooth audio gateway which will cause the Bluetooth audio gateway to issue a VGM xx command to the Bluetooth headset where xx is the volume setting of the headset prior to the volume up or volume down buttons being pressed. In this manner the volume gain output of the headset speaker is maintained at a desired level. Furthermore this allows for unlimited menu scrolling.

Referring again to at step an AT VGS xx Headset Profile volume control command message is sent from the Bluetooth headset to the Bluetooth audio gateway responsive to a volume control user input at the Bluetooth headset . This AT VGS xx Headset Profile volume control command message is translated at the Bluetooth audio gateway to a USB HID menu up or menu down command message. At step the USB HID menu up or menu down command message command message is sent to the headset interface application . At step a VGM xx command is sent from Bluetooth audio gateway to Bluetooth headset to reset the volume level setting at the headset to provide for an infinite menu navigation loop and to also maintain a desirable volume level. At step the headset interface application outputs an audio file indicating the next selection in the application menu to the Bluetooth audio gateway which outputs the next selection audio file to Bluetooth headset at step for playback to the user. In one example the audio file is a contact name.

For example the process set forth in may occur following the process set forth in . In one example the Bluetooth Headset Profile hookswitch command message selects a contact name in a contacts folder to be called. In a further example the Bluetooth Headset Profile hookswitch command message rejects an incoming call. When an incoming call is received the user may navigate the menu and select the menu item option to either answer the incoming call or reject the incoming call.

Referring again to at step the Bluetooth audio gateway outputs an audio file indicating the current position in the application men to Bluetooth headset for playback to the user. As step an AT CKPD 200 Headset Profile command message is sent from the Bluetooth headset to the Bluetooth audio gateway responsive to a hookswitch user input at the Bluetooth headset . This AT CKPD 200 Headset Profile command message is translated at the Bluetooth audio gateway to a USB HID command message. At step the USB HID menu item select command message is sent to the headset interface application . At step the headset interface application outputs a confirmation audio file confirming the menu item selection made by the user to the Bluetooth audio gateway which outputs the confirmation audio file to Bluetooth headset at step for playback to the user.

If the received volume setting xx is higher than the current volume setting at block at block the AT VGS xx Headset Profile volume control command message is translated at the Bluetooth audio gateway to a USB HID menu up command message. Following block at block the USB HID menu up command message is issued to the headset interface application. Following block at block an audio file received from the headset interface application corresponding to the menu up next item.

If the received volume setting xx is lower than the current volume setting at block at block the AT VGS xx Headset Profile volume control command message is translated at the Bluetooth audio gateway to a USB HID menu down command message. Following block at block the USB HID menu down command message is issued to the headset interface application. Following block at block an audio file received from the headset interface application corresponding to the menu down next item.

If the received volume setting xx is equal to the current volume setting at block at block it is determined whether the volume setting xx is equal to the Headset Profile volume minimum value or the Headset Profile volume maximum value. If the volume setting xx is equal to the Headset Profile volume minimum value at block then at block the AT VGS xx Headset Profile volume control command message is translated at the Bluetooth audio gateway to a USB HID menu down command message. Following block at block the USB HID menu down command message is issued to the headset interface application. Following block at block an audio file is received from the headset interface application corresponding to the menu down item. In this manner where xx is equal to the headset profile volume minimum value such as zero a menu down command is presumed and initiated.

If the volume setting xx is equal to the Headset Profile volume maximum value at block then at block the AT VGS xx Headset Profile volume control command message is translated at the Bluetooth audio gateway to a USB HID menu up command message. Following block at block the USB HID menu up command message is issued to the headset interface application. Following block at block an audio file is received from the headset interface application corresponding to the menu up item. In this manner where xx is equal to the headset profile volume maximum value such as fifteen a menu up command is presumed and initiated.

The various examples described above are provided by way of illustration only and should not be construed to limit the invention. Based on the above discussion and illustrations those skilled in the art will readily recognize that various modifications and changes may be made to the present invention without strictly following the exemplary embodiments and applications illustrated and described herein. Such changes may include but are not necessarily limited to standards to perform the VoIP call setup signaling and control user interface input mechanisms to control volume or hookswitch operation at the headset. Furthermore the functionality associated with any blocks described above may be centralized or distributed. It is also understood that one or more blocks of the headset USB Bluetooth module and computer may be performed by hardware firmware or software or some combinations thereof. Such modifications and changes do not depart from the true spirit and scope of the present invention that is set forth in the following claims.

Those skilled in the art will appreciate that the reference to the terms VoIP and VoIP phone are used in the generic sense to include any voice over packet technique or device without limitation to a specific standard.

While the exemplary embodiments of the present invention are described and illustrated herein it will be appreciated that they are merely illustrative and that modifications can be made to these embodiments without departing from the spirit and scope of the invention. Thus the scope of the invention is intended to be defined only in terms of the following claims as may be amended with each claim being expressly incorporated into this Description of Specific Embodiments as an embodiment of the invention.

