---

title: System and method for editing cartographic data
abstract: Systems, methods, and computer program products for editing and displaying cartographic data are described. Cartographic source data is retrieved from a first record set and displayed in a display device. Based on a selection by a user of a feature in the display device, source data corresponding to the selected feature is selected. Based on a modification of the selected feature by the user in the display device, cartographic edit data is created. The cartographic edit data is associated with the cartographic source data for the feature and the associated cartographic edit data is stored within a second record set that is editable by the user. An output record set is created for display on the display device, at least in part, from the associated cartographic edit data for the feature.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08386426&OS=08386426&RS=08386426
owner: Intergraph Software Technologies Company
number: 08386426
owner_city: Las Vegas
owner_country: US
publication_date: 20081212
---
The present application claims the benefit of U.S. Application Ser. No. 61 013 635 filed Dec. 13 2007 which application is incorporated herein by reference in its entirety.

The present invention relates generally to systems and methods for editing and displaying data and more particularly to editing and displaying cartographic data.

Cartographic editing systems typically allow users to edit read and write cartographic data and then save their edits. For example the systems may allow a user to change the location of a bridge along the Rio Grande River in a cartographic representation of Alamosa County. Some systems allow the user to save the new location of the bridge by overwriting the source file. However by overwriting the source file the original cartographic representation in the source file is lost. Alternatively systems may allow the user to save the new location of the bridge by saving the changes as a new revision of the cartographic representation. Yet if the user saves the new location of the bridge as a new revision then entire source files for the representation are duplicated and stored as new files. Multiple revisions of large source files may consume substantial amounts of memory. Furthermore if the cartographic data is in a read only format then the user is not able to edit and save the edits performed on the read only data. Accordingly current systems of editing and storing edits to cartographic data are not very efficient.

Illustrative embodiments of the present invention are directed to methods systems and computer program products for editing cartographic data. Various embodiments of the present invention associate cartographic source data with cartographic edit data to provide a user with the capability to perform instance based edits to features and to provide the user with the perception that he is editing read only data. The method of the present invention is performed in a computer system. The method includes retrieving cartographic source data from a first record set and displaying at least one source feature of the source data in a display device. A user may select one of the features in the display device. Based on the user s selection of a feature in the display device source data corresponding to the feature is selected. The user may also modify the selected feature. Based on the user s modification of the selected feature in the display device cartographic edit data representing the user s modification of the feature is created. The cartographic edit data representing the user modification of the feature is associated with the cartographic source data for the feature. The associated cartographic edit data is then stored within a second record set.

A system for editing cartographic data of the present invention includes a display device that displays at least one feature of cartographic source data and a user input device that a user can use to select and modify features in the display device. A processor retrieves cartographic source data from a first record set and selects source data corresponding to a feature selected by the user. Based on the user s modification of the selected feature the processor creates cartographic edit data representing the modification of the feature and associates the cartographic edit data representing the modification of the feature with the cartographic source data for the feature. The system also includes a digital memory for storing the associated cartographic edit data within a second record set.

The invention may also be embodied as a computer program product for use on a computer system for editing cartographic data. The computer program product includes a computer readable storage medium having computer readable code. The computer readable program code includes computer code for retrieving cartographic source data from a first record set and displaying at least one feature of the source data in a display device. The invention as embodied can select source data corresponding to a selected feature based on the user s selection of the feature in the display device. The computer program product creates cartographic edit data representing the user s modification of the selected feature in the display device. The product also associates the cartographic edit data representing the user modification of the feature with the cartographic source data for the feature. The product then stores the associated cartographic edit data within a second record set.

Some or all of the above described embodiments may associate the cartographic edit data with the cartographic source data for the feature by assigning an identifier to the edit data matching an identifier for the source data. Furthermore in some or all of the above described embodiments the cartographic source data may be read only data. The first record set may be stored in a first database and the second record set may be stored in a second database. The source data may also represent a physical geographic location. Also the cartographic edit data may be geometry data style data and or attribute data. Additionally or alternately the cartographic edit data may represent a feature instance edit.

Illustrative embodiments of the present invention are also directed to methods systems and computer program products for displaying cartographic data. Various embodiments of the present invention merge cartographic source data with cartographic edit data but also retain identity information for the edit data and source data even after the data is merged. In this way illustrative embodiments ensure that the original source data will not be overwritten because the edits will be stored separately from the original source data. The computer based method includes retrieving cartographic source data for a feature from a first record set and cartographic edit data associated with the source data from a second record set. The source data for the feature and the associated cartographic edit data for the feature are merged to create an output record set for display on a display device.

In some embodiments the method may incorporate elements of the method for editing cartographic data. For example based on user s selection of the feature in the display device the method may select the source data corresponding to the selected feature. Based on the user s modification of the feature in the display device the method may create cartographic edit data representing the user s modification of the feature. The cartographic edit data representing the user modification of the feature may be associated with the cartographic source data for the feature. Also the method may store the associated cartographic edit data within the second record set.

A system for editing cartographic data of the present invention includes a display device that displays an output record set. A processor retrieves the cartographic source data for a feature from a first record set and retrieves cartographic edit data associated with the source data from a second record set. The processor merges the source data for the feature with the associated cartographic edit data for the feature to create the output record set for display on the display device.

In various embodiments a system for editing cartographic data may also include a user input device. The user may use the input device to select and modify features in the display device. Based on the user s selection of the feature in the display device the processor may select source data corresponding to the user s selected feature selected. Furthermore the processor creates cartographic edit data representing the user s modification of the feature in the display device. The processor may then associate the cartographic edit data representing the modification of the feature with the cartographic source data for the feature. The system may also further include a digital memory for storing the associated cartographic edit data within the second record set.

The invention may be embodied as a computer program product for use on a computer system for displaying cartographic data. The computer program product includes a computer readable storage medium having computer readable code. The computer readable program code includes computer code for retrieving cartographic source data for a feature from a first record set and cartographic edit data associated with the source data from a second record set. The computer program product merges the source data for the feature with the associated cartographic edit data for the feature to create an output record set for display on a display device.

Illustrative embodiments of the computer program product may also include code for editing cartographic data. Such a computer program product may include instructions for selecting source data corresponding to a user selected feature in the display device. The product may create cartographic edit data representing the user s modification of the selected feature in the display device. The product may also associate the cartographic edit data representing the user modification of the feature with the cartographic source data for the feature. Embodiments of the invention may then assign an identifier to the edit data matching an identifier for the source data. The edit data is stored within a second record set.

Some or all of the above described embodiments for displaying data may merge the cartographic edit data with the source data for the feature by matching the associated cartographic edit data to the cartographic source data for the feature. If the source data for the feature has no match with cartographic edit data the output record set for the feature is created based on the cartographic source data. If the source data for the feature has a match to associated cartographic edit data and associated cartographic edit data does not exist for every display parameter of the feature then the output record set for the feature is created based on both the cartographic source data and the associated cartographic edit data for the feature. If source data for a feature has a match to associated cartographic edit data and associated cartographic edit data exists for every display parameter of the feature then the output record set for the feature is created based only on the associated cartographic edit data for the feature.

Also in some or all of the above described embodiments for displaying data the cartographic source data for the feature and the associated cartographic edit data for the feature may have a matching identifier. Furthermore the cartographic source data may be read only data. The first record set may be stored in a first database and the second record set may be stored in a second database. Additionally or alternatively the source data may represent a physical geographic location. In some or all embodiments the cartographic edit data may be geometry data style data and or attribute data. Additionally or alternately the cartographic edit data may represent a feature instance edit.

Illustrative embodiments of the present invention are directed to systems and methods for editing and displaying cartographic data. Various embodiments of the present invention associate and merge cartographic source data with cartographic edit data to provide a user with the capability to perform instance based edits on features and to provide the user with the perception that he is editing read only data. The associations created by illustrative embodiment of the present invention retain identity information for the edit data and source data even after the data is merged. In this way illustrative embodiments ensure that the original source data will not be overwritten because the edits will be stored separately from the original source data. Details of illustrative embodiments are discussed below.

Typically in cartography symbols are used to represent features. For example in the black square symbols represent buildings . The black squares are displayed so that they correspond with the location of the buildings on the map . In this way the symbols are displayed so that they represent the actual physical location of the buildings. Symbols may also conform to the geometry of the feature. For example in the three parallel lines that represent the road trace the linear path of the road across the map. Symbols may also be used as labels. Such symbols may be displayed on top of or adjacent to a feature. For example highways are typically designated by displaying a highway number shield over at least part of the linear path of the highway.

In current cartographic data formats it is common for related features to be categorized as part of a feature class. Features in a feature class are typically represented with common symbols. For example the buildings shown in can be categorized as part of a feature class. The feature class is represented by a common symbol e.g. a black square . Common symbols for related features are typically stored and referenced in a legend. Some cartographic editing systems allow a user to modify the symbol for a class of features in the legend. Accordingly a modification of the symbol in the legend will result in a corresponding modification for the entire feature class. depict an example of a feature class edit. In each of the four buildings are represented with a square. By for example changing the symbol representing buildings from a square to a diamond in the legend the user can change the symbol for the entire feature class. In after the feature class edit each building is represented by a black diamond.

The instance edits and feature class edits shown in B and B are example of style edits. A style edit is any change to the style data for a feature. Style data is a set of criterion that define how the geometry of a feature is rendered for display or output to another file. For example the style data for a line may include the color translucency and width of the line. The style data for a symbol may include the size shape color translucency typeface and font style for the symbol. The edit shown in is a class style edit because the edit changes the shape of a symbol for all of the members of the feature class. The edits shown in are instance style edits because the edits change the shape or color of a symbol for only some of the members of a feature class.

A symbol may be prestroked by mimicking the constituent elements of the symbol with basic shapes line dimensions colors and textual characters. When a prestroking operation occurs the geometries and styles elements that best mimic the symbol are selected and associated with the symbol. The selected shapes line dimensions colors and textual characters are stored in a record set. The mimicked geometry and style elements may then be independently edited.

The cartographic source data may be representative of physical geographic locations such as a real properties buildings towns counties or states. Users may advantageously use the methodology to for example update maps with new locations of bridges and roads or simply update the map to conform with current symbol standards. The cartographic source data may also be representative of proposed developments and designs for a physical geographic location e.g. building blue prints or proposed routes for a new road . In various illustrative embodiments the cartographic source data may be representative of a virtual location such as a board in a video game or a fictional location such as Middle Earth as described in the novel The Hobbit by J. R. R. Tolkein.

The style data for the source data may be set as a default by a cartographic editing program using illustrative embodiments of the present invention e.g. by a workspace itself . The workspace is a data file that persists an editing environment for a map. The workspace may contain the map legends which identify the feature classes being portrayed and the default styles used by each portrayed feature class. For example if one of the feature classes for the source data is a group of rivers then the workspace may display the rivers with a certain width or with a blue color as a default. The user may also be able to select and modify the display data for a source feature class. For example the source feature class may be referenced in a legend. By modifying the width of the rivers in the legend the width of every river in the representation will also be modified. For convenience the default display data and or user modified display data will be referred to as preset style data in the specification.

Once the source data is retrieved at least some of the features classes of the source data base are displayed on the display device . To display the feature classes the preset style is used. A user may select one of the features using for example a cursor. The user may then modify the geometry style or attribute data for the feature. For example as described above for the user may change the location of a building or the user may change the symbol for the building as shown in and B. The method then selects the source data corresponding to the user selection and creates cartographic edit data representing the user modification of the feature . In illustrative embodiments of the present invention cartographic edit data is only created for the display parameters that are modified. In other words if the user modifies the geometry of a feature then cartographic edit data is created only for the geometry data. Cartographic edit data is not created for the attribute data and the style data for the feature.

Accordingly this methodology saves storage space in the edits record set because edit data is only created for features and display parameters that are modified. However other embodiments are also within the scope of the present invention. In some embodiments edit data can be created for all the display parameters even if only one display parameter is modified. For example if a user modifies a style parameter then cartographic edit data is created for all the geometric style and attribute data. Yet in other embodiments cartographic edit data can be created for only a subset of parameters. For example if a user changes the color of a symbol then cartographic data is only created for the color change. No cartographic edit data is created for the shape of the symbol or its size.

The methodology also associates the cartographic edit data representing the modification with the cartographic source data for the feature . In some embodiments the cartographic edit data is associated with the source data by assigning an identifier ID to the edit data that matches an ID for the source data. In this specification this identifier will be referred to as the source feature ID. Once the cartographic edit data is associated with the cartographic source data the edit data is then stored in an edit record set . This methodology may be performed for each feature and feature class that the user modifies. For example once the user modifies the location of building as in the steps of selecting source data creating edit data associating data and storing data may be repeated for a style edit as shown in .

The source record set is stored in a source database. If the source data in the source record sets is read only data then the edit record set is stored in a separate edits database because the read only records in the source database cannot be modified. In this way the method provide the user with the perception that he is editing read only source data. Although the source record set is displayed there is no need for the source record set to be modified because all of the modifications to the display parameters are saved in the edit record set in the edits database. If the source data is read and write data then the source record set and the edit record set can be stored in the same source database.

Furthermore illustrative embodiments of the method allow the user to perform instance edits on a feature belonging to the feature class. Even though a feature may be part of the feature class in the source data illustrative embodiments of the method allow the user to display the new edited display parameter for a single feature of the feature class because as explained further below the edited display parameter replaces the original source data for the feature when displayed.

Furthermore the methodologies of editing the feature as discussed above and displaying the features may be performed before or after one another or they may be performed contemporaneously. Preferably these methodologies are performed contemporaneously so that a user can edit a feature and have his edits appear on the display device nearly contemporaneously.

In some embodiments hard copies of the edited features and the map may be printed so that users could use the map for navigational purposes or builders and surveyors may use the representation to for example construct and build proposed buildings and or routes.

As explained above this methodology saves storage space because edit data is only created and stored for display parameters and features that are edited. If only one feature out of a thousand is edited then the edits record set stores only the edits for that single edited feature and all of the other features are retrieved from the source record set. In contrast some current cartographic editing systems require duplicating and storing the entire map and all of its associated features for each revision of the map.

The edits database includes an edit feature class table . An edit feature class table exists for each source feature class that has an associated cartographic edit. Accordingly for every source feature class table there is an associated edit feature class table . In some embodiments the name of an edit feature class table is generated using the name of the associated source feature class table modified if necessary for size limitations and uniqueness e.g. name of source feature table with prefix ED . The purpose of the edit feature class table is to link the display parameters and the display groups to the cartographically edited source features. Each edited feature in a feature class will have an associated edit feature record in the edit feature class table. Accordingly there can be multiple edit feature records for a single source feature class table. A description for each field in the edit feature table follows 

The schema also includes display parameters tables for geometry style and attribute data. The geometry table style table and attribute table each store respectively geometry data style data and attribute data for a feature class that has been edited. For example the geometry table will include a record for each geometrically edited feature in the feature class. In some embodiments the name for the tables is generated using the name of the associated source feature class table modified if necessary for size limitations and uniqueness e.g. name of source feature class table with prefix GEO for geometry table STL for style table and ATT for attribute table . A description for each field in the geometry style and attribute tables follows 

The style and attribute tables can be referenced by more than one edit feature record because several features may share the same edited styles or attributes and may therefore all be related to a single record in style or attribute tables. Accordingly if the user decides to delete a style edit of a feature the corresponding style table record will not be deleted if other edit feature records relate to that record in the style table. Also if the user decides to modify a style for a feature with an existing style table record and the existing style table record is related to a number of other features then a new style table record will be created for the newly edited feature so as to not disturb the style edits for the other features in the class.

The schema shown in also includes a display group table . The display group table assigns edited feature to groups for the purpose of simultaneously selecting edited feature. In some embodiments the name for the display group table is generated using the name of the associated source feature class table modified if necessary for size limitations and uniqueness e.g. name of source feature table with prefix DIS . A Display Group Name field includes a text string that conforms to certain formatting rules and can be used in a query. The display group allows a user to simultaneously select all of the features associated with the display group. For example the user may select the display group name rivers from a legend. A query is run for each edit feature record that is related to the display group name rivers. Once all the related records are found the user can then perform operations and commands on all of the records simultaneously. For example the user may choose to suppress all of the records. Suppression of a record prevents the feature corresponding to the record from being displayed. The user may also choose to move up the display order for all of the features related to the display group name. By moving up their display order the features will be display above other features. In other words the features would mask the other features where they intersect.

Furthermore more than one display group table record can be assigned to an edit feature class table. For example an edit to a feature and its corresponding record may be related to the display group name rivers and also to the display group name water. A query for either rivers or water would find the related edit feature record. A description for each field in the display group table follows 

The source record set and edit record set are merged in a cartographic join pipe . The cartographic join pipe contains the associations between the cartographic source data and the edit data and intelligently matches the source data to the edit data. The cartographic join pipe merges the data by creating the output record set based on whether edit data matches source data for the feature. For example if edited geometry data exists for a feature but no edited style or attribute data exists then the join pipe will output the edited geometry data with the source attribute data and the preset style data for the feature. The join pipe will also merge data based on user commands and operations. For example the user may choose not to display any edits in which case the cartographic join pipe may turn off any merges between source data and edit data and simply output the source data.

The cartographic join pipe also associates edit data with source data as edits are created. In other words the join pipe filters or segregates the edit data from edited features. For example if the user modifies only the geometry of a feature then the join pipe will store and associate only the edited geometry data for the feature. In this example the join pipe will not store or associate display parameters that have not been edited. The associations and edit data that the join pipe creates later become part of the edit record set that the join pipe uses to create an output record set.

The input record sets include at least the source feature class table for the feature class to be displayed. If there are edits for the source feature class then the associated edit feature class table and display parameter tables for the feature class e.g. edit record set will also be included in the input record set.

In the example provided in there are four source features and for the feature class. Each source feature has a corresponding record in the source feature class table. Geometry tables and style tables are provided as part of the input record set because the source feature records have associated geometry and style records. However attribute tables and records are not provided as part of the input record set because attribute edits do not exist for any of the source records. All of the values in the edit feature tables under attribute ID are NULL. 

Source feature records and have associated edit feature records in the edit feature class table but source feature does not have any associated edit feature records. This means that source record has not been edited. Therefore according to the method as explained above the output record set for source feature record will be created based only on the records in the source feature class table and the preset style data for the feature class. Thus the output record set for source feature corresponds to the records in the source feature class table and a preset style .

Source feature records and however all have associated edits. Source feature record has an associated edit feature class record with carto ID . The name for the edit associated with source feature record is New Path. Edit feature record identifies a geometry with the geometry ID . This geometry ID corresponds with geometry record G in the geometry table. The fields style ID and attribute ID in the edit feature record contain a NULL value because no style and attribute edits exist for source feature . Accordingly the output record set for source feature includes the geometry record G from the geometry table the attribute record SA from the source feature class table and the preset style data PSS from the preset style .

Source feature record has an associated edit feature class record with carto ID . The name for the edit associated with source feature record is New Color. Edit feature record identifies a style with the geometry ID . This style ID corresponds with style record S in the style table. The NULL values under geometry ID and attribute ID indicate that there are no geometry and attribute edits for source feature record . Accordingly the output record set for source feature record includes the style S from the style table and the geometry and attribute data from the source feature table SG and SA. Together the output record sets for source feature and make up the output record set that is used to generate the map display. In this way illustrative embodiments of the present invention allow source data and edit data to be joined while also retaining identification for each original source feature and associated edit.

The output record set also contains the display group and the display group name from the display groups table . These fields in the output record set allow a user to search the output record set for all the edited features associated with a particular group name. For example the display group name local may contain all of the edits that have been performed on the local roads of a map.

In some instances an edit feature table can exist for a source feature class but there may not be an associated geometry style or attribute edit for the source feature class. For example the user may decide to suppress one of the features in the feature class. When a user suppresses a source feature record an associated edit feature record is created but it may not be associated with any edits instead the suppression field in the edit feature record receives a value of 1. Source feature records with suppression values of 1 are not displayed. In source features record and have associated suppression values of 0 and are therefore displayed. However the source feature records may be suppressed by switching the 0 to a 1 in their associated edit feature records.

The user may also choose to display and suppress individual edits. The representation type field of the edit feature table stores a value that indicates which display parameters have been edited for the feature. The user may choose to suppress edits based on the value in the representation type field. For example in only edits with representation types of values 1 and 2 are displayed. A query may be run to select only those edit feature records with representation values of 1 and 2. Representation types of value 1 and 2 are non converted edits. Representation types of value 3 are converted style edits and because only representation types of values 1 and 2 are displayed i.e. non converted edits source feature record and its associated edit feature record is not part of the output record set.

In illustrative embodiments of the present invention the cartographic join pipes shown in may be set as dedicated join pipes in a computer software product using the above described method. In other words the cartographic join pipe may only operate on certain groupings of associations between features in the source database and edits in the edit database. For example the cartographic join pipe in FIG. is dedicated to non converted edits e.g. geometry style and cartographic edits . Whereas the cartographic join pipe in is dedicated to converted style edits. The inventors of the present invention have discovered that using dedicated cartographic join pipes is advantageous because certain associations can be readily turned on and off.

Various embodiments of the disclosed methodology may be at least in part implemented in any conventional computer programming language. For example some embodiments may be implemented in a procedural programming language e.g. C or in an object oriented programming language e.g. C . Other embodiments of the invention may be implemented as preprogrammed hardware elements e.g. application specific integrated circuits FPGAs and digital signal processors or other related components.

Various embodiments of the invention may be implemented as a system. A system for editing cartographic data includes a display device for displaying at least one feature of cartographic source data. The system also includes a user input device for selecting and modifying features in the display device. The user input device may be a mouse joy stick key board or any other device that allows the user to select and modify cartographic data. The display device and the user input device are in communication with a processor. The processor retrieves cartographic source data from a source record set and selects source data in the first database corresponding to a selected feature. The source record may be stored in a local database in communication with the processor or it may be retrieved over a computer network from a remote database.

Based on a modification of the feature the processor creates cartographic edit data representing the modification of the feature and associates the cartographic edit data representing the modification of the feature with the cartographic source data for the feature. Also the system includes a digital memory that is in communication with the processor. The digital memory stores the associated cartographic edit data within an edit record set The digital memory may be any of a random access memory a flash drive a hard drive or a disc drive.

A system for displaying cartographic data includes a display device for displaying an output record set. The display device is in communication with a processor. The processor retrieves cartographic source data for a feature from a source record set and retrieves cartographic edit data associated with the source data from an edit record set. The processor then merges the source data for the feature with the associated cartographic edit data for the feature to create an output record set for display on the display device.

In an alternative embodiment the disclosed system and methods e.g. see the various flow charts described above may be implemented as a computer program product for use with a computer system. Such implementation may include a series of computer instructions fixed either on a tangible medium such as a computer readable medium e.g. a diskette CD ROM ROM or fixed disk or transmittable to a computer system via a modem or other interface device such as a communications adapter connected to a network over a medium. The medium may be a tangible medium e.g. optical or analog communications lines . The series of computer instructions can embody all or part of the functionality previously described herein with respect to the system.

Those skilled in the art should appreciate that such computer instructions can be written in a number of programming languages for use with many computer architectures or operating systems. Furthermore such instructions may be stored in any memory device such as semiconductor magnetic optical or other memory devices and may be transmitted using any communications technology such as optical infrared microwave or other transmission technologies.

Among other ways such a computer program product may be distributed as a removable medium with accompanying printed or electronic documentation e.g. shrink wrapped software preloaded with a computer system e.g. on system ROM or fixed disk or distributed from a server or electronic bulletin board over the network e.g. the Internet or World Wide Web . Of course some embodiments of the invention may be implemented as a combination of both software e.g. a computer program product and hardware. Still other embodiments of the invention are implemented as entirely hardware or entirely software.

The embodiments of the invention described above are intended to be merely exemplary numerous variations and modifications will be apparent to those skilled in the art. The method and system of the present invention have been disclosed as applied to cartographic data however the method and system of the present invention may be applied to other types of data. For example the method and system of the present invention may be applied to computer aided design data computer aided manufacturing data spreadsheet data and word processing data. All such variations and modifications are intended to be within the scope of the present invention as defined in any appended claims.

