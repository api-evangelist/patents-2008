---

title: Virtual sensors
abstract: A method and apparatus for providing a virtual sensor in real-time have been described. In one embodiment, a method to provide a virtual sensor in real-time includes identifying data indicating desired functionality. The method further includes executing the virtual sensor in real-time based on the identified data to generate an output of the virtual sensor with the output being used by at least one data analysis module in real-time for statistical process monitoring.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08572155&OS=08572155&RS=08572155
owner: Applied Materials, Inc.
number: 08572155
owner_city: Santa Clara
owner_country: US
publication_date: 20080212
---
This application claims the priority benefit of U.S. Provisional Patent Application No. 60 966 021 filed on Aug. 23 2007 and entitled VIRTUAL SENSORS which is incorporated herein by reference.

Embodiments of the present invention relate to virtual sensors for manufacturing and process control.

A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever. The following notice applies to the software and data as described below and in the drawings hereto Copyright 2008 Applied Materials Inc. All Rights Reserved.

Many industries employ sophisticated manufacturing equipment that includes multiple sensors and controls each of which may be carefully monitored during processing to ensure product quality. One method of monitoring the multiple sensors and controls is statistical process monitoring a means of performing statistical analysis on sensor measurements and process control values process variables which enables automatic detection and or diagnosis of faults. A fault can be a malfunction or maladjustment of manufacturing equipment e.g. deviation of a machine s operating parameters from intended values or an indication of a need for preventive maintenance to prevent an imminent malfunction or maladjustment. Faults can produce defects in the devices being manufactured. Accordingly one goal of statistical process monitoring is to detect and or diagnose faults before they produce such defects.

One industry approach for statistical process monitoring includes collecting data acquiring and storing data analyzing data and acting. Data is collected by various sensors located on the manufacturing equipment. However these sensors may not be exposed or accessible. Data is then acquired from the manufacturing equipment and saved or stored in a database that can be located on a server. The data is acquired from various types of manufacturing equipment having different configurations and protocols which slows and complicates the acquisition of the data into the database.

Next the data is analyzed which requires filtering e.g. specific runs of semiconductor wafer and possibly transformations of units. Also the data must be pre processed using complex algorithms e.g. virtual sensors in order to perform a meaningful analysis. Finally action must be taken based on the data analysis. For example faults or errors may indicate a malfunctioning equipment or a need to modify a process parameter immediately on the fly during real time. The action usually occurs too late because the data analysis requires a significant amount of time. Furthermore updating or creating new virtual sensors requires restarting or reinstalling the software application being run on a manufacturing machine.

Described herein is a method and apparatus for providing a virtual sensor in real time. In one embodiment a method to create a virtual sensor in real time includes identifying data indicating desired functionality for data analysis. The method further includes accessing the virtual sensor in real time to perform the desired functionality. In one embodiment the method further includes executing the virtual sensor in real time based on the identified data to generate an output of the virtual sensor.

In the following description numerous details are set forth. It will be apparent however to one skilled in the art that the present invention may be practiced without these specific details. In some instances well known structures and devices are shown in block diagram form rather than in detail in order to avoid obscuring the present invention.

Some portions of the detailed description which follows are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion it is appreciated that throughout the description discussions utilizing terms such as processing computing calculating determining displaying or the like refer to the actions and processes of a computer system or similar electronic computing device that manipulates and transforms data represented as physical e.g. electronic quantities within the computer system s registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage transmission or display devices.

The present invention also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium such as but not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic optical disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic or optical cards or any type of media suitable for storing electronic instructions.

The algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein or it may prove convenient to construct a more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition the present invention is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the invention as described herein.

A machine readable medium includes any mechanism for storing or transmitting information in a form readable by a machine e.g. a computer . For example a machine readable medium includes a machine readable storage medium e.g. read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices etc. .

The following description provides details of a statistical process monitoring system that monitors processes run on manufacturing devices to detect and or diagnose faults manufacturing irregularities . In one embodiment the statistical process monitoring system is for use in the manufacturing of electronic devices e.g. semiconductors . Manufacturing such devices generally requires dozens of manufacturing steps involving different types of manufacturing processes. For example etching sputtering and chemical vapor deposition are three different types of processes each of which is performed on different types of machines. Alternatively the statistical process monitoring system may be used to monitor the manufacture of other products such as automobiles. The manufacture of such other products may also require many different processing steps by various manufacturing machines.

In one embodiment each of the manufacturing machines is a machine for the manufacture of electronic devices such as etchers chemical vapor deposition CVD furnaces photolithography devices implanters etc. Alternatively the manufacturing machines may be of a type for manufacturing other products e.g. automobiles . In one embodiment each of the manufacturing machines is of a single type. Alternatively the manufacturing machines may include multiple different types of equipment each of which may run different processes.

Each of the manufacturing machines may include multiple sensors for monitoring processes run on the manufacturing machines . One type of sensor that may be included in the manufacturing machine is a temperature sensor . Examples of other sensors include pressure sensors flow rate sensors or any other sensors that monitor physical conditions of a manufacturing process or physical properties of a work piece manufactured by the manufacturing machines .

Each manufacturing process that is performed on a manufacturing machine is characterized by various physical conditions and properties measured by the sensors and by various operating parameters collectively referred to as process data. Each distinct physical condition or property measured by sensors and each operating parameter may be a distinct process variable of the process data. Examples of process variables representing sensor data include chamber pressure susceptor temperature RF forward power and RF reflected power. Examples of process variables representing operating parameters include flow rate settings e.g. of chemical reagents and throttle valve settings e.g. for a chamber exhaust vacuum pump . The sensors manufacturing machines and process controllers may be monitored during processing to gather the process variables at successive points in time.

In one embodiment each process variable applies to a specific process. Alternatively one or more process variables may apply to only portions of a specific process. In one embodiment sensor measurements and operating parameters for different steps in a process represent distinct process variables modeled as additional dimensions in model space . This may be useful for example if a manufacturing process being performed in a machine has multiple steps with different operating parameter settings. For example in a three step manufacturing process a susceptor temperature during the three steps would be treated as three distinct process variables. The division of process steps into separate dimensions in model space may be advantageous for example when a single process deposits multiple layers on a workpiece or when different steps of a process expose the workpiece to different process conditions e.g. pressure temperature etc. .

Process controllers control operating parameters of manufacturing machines . For example process controllers may control chamber temperature vacuum pumps gas injection systems etc. of manufacturing machines . Process controllers may store one or more process recipes recipes . Each recipe may define operating parameters of a manufacturing machine at each step of a process. In one embodiment recipes may be loaded into manufacturing machines by process controllers .

Data communication links may include conventional communication links and may be wired or wireless. Data may be transmitted between the manufacturing machines the process controllers and the statistical process monitoring apparatus in a raw or processed format. In one embodiment a semiconductor equipment communications standards SECS interface is used. In other embodiments a generic model for communications and control of manufacturing equipment GEM interface a SECS GEM interface a high speed SECS message services HSMS interface etc. may be used.

The statistical process monitoring apparatus may be a single server that analyzes incoming process data from the manufacturing machines sensors and process controllers . Alternatively the statistical process monitoring apparatus may include multiple servers and or computers. The statistical process monitoring apparatus in one embodiment includes a database a statistical process control SPC module and a virtual sensor manager which may include at least one virtual sensor . In one embodiment the statistical process monitoring apparatus is included in one or more of the process controllers . Alternatively the process monitoring apparatus may be a distinct separate apparatus.

The database stores raw data and other types of data that may originate from the manufacturing machine s . In one embodiment the database is a single storage device of a computer or server of the statistical process monitoring apparatus . Alternatively the database may be external to the statistical process monitoring apparatus . In one embodiment the database includes multiple storage devices some of which may include redundant copies of data for backup.

Process measurement data process data may be stored in the database. The stored process data may be used to show drifts and trends for each of the manufacturing machines for processes run on the manufacturing machines etc. The SPC module performs data processing and analysis functions of data stored in the database and also data generated by one or more visual sensors provided by the visual sensor manager . A virtual sensor is a script executed in real time during data collection to perform arbitrary complex logic functions. Data values calculated by virtual sensors are available for analysis modules e.g. SPC module along with tool sensors in real time i.e. as soon as data values are calculated .

The database stores raw data received from at least one manufacturing machine and stores analyzed data received from the statistical process control module . The virtual sensor manager may be a calculated data tag manager that is communicatively coupled to the database and the statistical process control module . Throughout this disclosure the terms virtual sensor and calculated data tag CDT may be used interchangeably.

The virtual sensor manager provides at least one virtual sensor or calculated data tag CDT for execution during data collection to perform arbitrary complex logic functions. The CDT is a script provided in real time using a software programming language e.g. C Sharp C Visual Basic . The CDT may be created as a CDT.xml file. The xml file is then copied into a file directory accessible to a virtual sensor manager as illustrated in . The virtual sensor manager illustrated in executes the calculated data tag in real time to perform calculations on selected data and generate an output of the calculated data tag for use by the statistical process control module in real time. The virtual sensor manager selects data to be used for performing calculations based on an algorithm associated with the calculated data tag being executed in real time. The virtual sensor manager receives the selected data from at least one of an external physical sensor associated with a machine tool a second calculated data tag the database the machine tool and a real sensor attached to the machine tool.

The statistical process control module analyzes the output of the calculated data tag in real time and generates an error notification in real time based on analyzing the output of the calculated data tag. The statistical process control module can stop a manufacturing machine in real time in response to analyzing the output of the calculated data tag and determining a fault condition. Creating and executing the calculated data tag in real time occurs without having to restart a data analysis software application that performs functionality associated with the statistical process control module . Real time actions or events occur immediately or as soon as possible during data collection without having to wait for other operations in contrast to prior approaches that require collecting data acquiring and storing data analyzing data and then acting in a delayed manner.

Virtual sensors or calculated data tags enable the user to perform predefined calculations on raw signals and use the results to perform SPC analysis. They are particularly powerful because they can be used to create an artificial parameter that is derived from the output of one or more physical sensors. Importantly they can utilize the element of time to create completely new parameters that a physical sensor simply cannot measure. In one embodiment virtual sensors perform predefined calculations on raw signals and use the results to perform SPC analysis and multivariate analysis. For example virtual sensors can be designated as data collection plans and virtually sense when certain events or conditions occur.

In another embodiment virtual sensors perform calculations on data received from real sensors. In yet other embodiments virtual sensors perform calculations on data from real sensors configuration data e.g. chamber configuration process set points external physical sensors and or other virtual sensors.

In one embodiment real time tool e.g. manufacturing machine data is collected and stored from the tools into the database. Other information stored in the database may include events and or alarms associated with the tools. The tool data is stored in a context such as process recipe wafer data lot name etc. The SPC module using collected data and or real time data from the visual sensors may generates real time and historical charting including overlying these charts in addition to providing trend charting.

Real time actions based on discovering a fault or error condition may include stopping a tool or process chamber based on the analysis results and or notification email to a responsible party. For example production and research and development engineers can monitor the real time data and analysis in order to quickly correct a fault or error condition resulting in improved product yield for manufacturing machines.

Referring to the method begins with identifying data indicating desired functionality e.g. fault detection error detection process monitoring at block . The method further includes acquiring the identified data from one or more of manufacturing machines sensors physical sensors process controllers virtual sensors configuration data and or databases at block . The identified data may include for example chamber temperature pressure gas flow rates etc. The identified data used by a first virtual sensor can be formed from a combination of data sources including at least one of the following a database a machine tool a real sensor attached to the machine tool a external physical sensor associated with the machine tool a second virtual sensor and a third virtual sensor. The identified data may be indicative of a fault if for example the temperature is too high or too low the gas flow rates are erratic the pressure is different than is required for a current process etc.

The method further includes accessing the first virtual sensor in real time to perform the desired functionality at block . The first virtual sensor e.g. in response to user input may be coded using a software programming language e.g. C Sharp C Visual Basic and stored in a xml file. The xml file is then copied into a file directory located on a server such as the virtual sensor manager as illustrated in . The method further includes executing the first virtual sensor in real time based on the identified data to generate an output of the first virtual sensor at block . The method further includes analyzing the output of the first virtual sensor in real time at block with the data analysis module for statistical process monitoring. The statistical process monitoring may include detecting fault conditions error conditions and or monitoring various parameters and or derived parameters e.g. temperature set point temperature reading minimum maximum standard deviation during recipe steps moving average of pressure reading during a recipe step average value of a plurality of temperature sensors during a recipe step and width of temperature peak for predetermined temperature deviation from maximum temperature during a recipe . Creating accessing and executing the first virtual sensor in real time occurs without having to restart or reinstall a data analysis software application that performs functionality associated with the data analysis module.

The method further includes generating an error notification in real time based on the data analysis module analyzing the output of the first virtual sensor in real time at block . The method further includes stopping a machine tool in real time in response to the data analysis module analyzing the output of the first virtual sensor in real time and determining a fault condition at block .

In one embodiment a tool records temperature set points and temperature readings on a continuous basis during process conditions. This data is transferred to the database via a communication link. A dynamically created virtual sensor generates temperature error data in real time based on the temperature set point and temperature reading data. The temperature error data is sent to a data analysis module in real time for analysis and corrective action is taken if necessary.

Other examples for a virtual sensor or CDT include the following minimum maximum standard deviation during recipe steps range moving average of pressure reading during specific recipe step for specific process recipe average value of a plurality of temperature sensors during the recipe step and width of temperature peak for a certain temperature degree deviation from maximum during a recipe e.g. 50 degree .

Prior approaches would have required creating a new built in algorithm documenting the new algorithm releasing a new software version or update with the new algorithm restarting or rebooting each tool that requires the new algorithm evaluating the algorithm under test conditions and then performing analysis with the new algorithm. These prior approaches are not able to plug in a new algorithm on a real time basis during data collection and quickly respond to the data analysis.

A virtual sensor has numerous advantages compared to prior approaches. For example some tool sensors are not exposed or easily accessible. A virtual sensor may calculate a result based on data from existing tool sensors. If the required sensor is not exposed then a virtual sensor can be used to communicate with an external sensor. As will be discussed in more detail below virtual sensors can be easily added or modified by users. Rather than just applying an algorithm to raw data that the tool provides the virtual sensors also allow the collecting and processing of additional data by attaching external sensors that are not normally part of the tool. This can be done to troubleshoot issues i.e. attach an extra temperature sensor to the process chamber. Virtual sensors can then read in the data from those external sensors and process them. Since this data from external sensors can also be combined with raw tool data in the algorithms this is a powerful mechanism to analyze process behavior. A virtual sensor can also transform a tool sensor value that may originate from tools having different protocols into a value used for data analysis.

A virtual sensor can be developed in the format of an extensible markup language XML file containing a programming language script such as C Sharp or visual basic. A virtual sensor can be deployed by copying the XML file into a file directory of the virtual sensor manager as illustrated in with no software restart or experimentation needed. A virtual sensor can execute arbitrary complex script logic based on a particular processing requirement for a particular tool. Also a virtual sensor can be accessed easily by other modules including other virtual sensors. Furthermore data from both tool sensors and virtual sensors can be equally available for real time and historical data analysis.

Referring back to the VSM may represent a calculated data tag manager CDTM having a set of classes which perform all operations required to produce data by using calculated data tags for managing a list of templates to actual instantiation of a CDT instance and interaction between CDT and another application e.g. foundation manager .

A user configures calculated data tags e.g. CDT using a graphical user interface GUI . The CDM generates a special data source DSCDT xml file directory with configuration xml file s such as CDT1.xml and CDT2.xml for the calculated data tags. Each CDT may be associated with one data source xml file. In one embodiment the file directory includes a list of CDTs such as CDT chamberA and CDT chamberB as discussed above in conjunction with . The data source manager can be communicatively coupled to various data sources such as a database and or machine tools. The data source manager reads CDTs from the file directory and creates appropriate attributes for the CDTs. Various bi directional links and allow the different managers to communicate. These links can communicate data subscription information and or notification information.

A single XML definition may be used for multiple CDT instances. To make an XML definition reusable with different instances there are multiple methods available in the CDT framework.

For example using ShortName in alias if you declare alias which uses ShortName then CDT manager use the following logic to find a data tag which corresponds to alias 

CDT manager will resolve the alias to data tag with name Temperature Main Channel location B and index .

As illustrated in virtual sensors have numerous applications. Additionally virtual sensors are applicable for research and development groups that require complex logic for data analysis. Virtual sensors can be easily developed with new analysis algorithms that can be deployed in real time on the fly during data collection. Data can be collected and analyzed even though the software application does not provide the needed data itself. Virtual sensors enable the receiving of results in real time in order to adjust algorithms accordingly in real time.

Virtual sensors are also applicable for process and diagnostic groups that benefit from receiving real time notifications based on virtual sensor values. Data analysis modules e.g. SPC APC chamber matching are supported by virtual sensors. These groups also benefit from using derivate metrics based on virtual sensors for hardware matching and qualification.

Virtual sensors enable users of manufacturing machines to collect and analyze data in real time for research and development process monitoring and diagnostics and hardware matching. A virtual sensor mechanism implemented in a SPC software application decreases the cost of implementation and deployment of different data analysis applications such as SPC APC and hardware matching. Virtual sensors allow users to implement their own algorithms protected with intellectual property while also leveraging the SPC application capabilities for advanced process control and monitoring and data analysis applications.

The exemplary computer system includes a processing device processor a main memory e.g. read only memory ROM flash memory dynamic random access memory DRAM such as synchronous DRAM SDRAM or Rambus DRAM RDRAM etc. a static memory e.g. flash memory static random access memory SRAM etc. and a data storage device which communicate with each other via a bus .

Processor represents one or more general purpose processing devices such as a microprocessor central processing unit or the like. More particularly the processor may be a complex instruction set computing CISC microprocessor reduced instruction set computing RISC microprocessor very long instruction word VLIW microprocessor or a processor implementing other instruction sets or processors implementing a combination of instruction sets. The processor may also be one or more special purpose processing devices such as an application specific integrated circuit ASIC a field programmable gate array FPGA a digital signal processor DSP network processor or the like. The processor is configured to execute the processing logic for performing the operations and steps discussed herein.

The computer system may further include a network interface device . The computer system also may include a video display unit e.g. a liquid crystal display LCD or a cathode ray tube CRT an alphanumeric input device e.g. a keyboard a cursor control device e.g. a mouse and a signal generation device e.g. a speaker .

The data storage device may include a machine accessible storage medium on which is stored one or more sets of instructions e.g. software embodying any one or more of the methodologies or functions described herein. The software may also reside completely or at least partially within the main memory and or within the processor during execution thereof by the computer system the main memory and the processor also constituting machine accessible storage media. The software may further be transmitted or received over a network via the network interface device .

The machine accessible storage medium may also be used to store data structure sets that define user identifying states and user preferences that define user profiles. Data structure sets and user profiles may also be stored in other sections of computer system such as static memory .

While the machine accessible storage medium is shown in an exemplary embodiment to be a single medium the term machine accessible storage medium should be taken to include a single medium or multiple media e.g. a centralized or distributed database and or associated caches and servers that store the one or more sets of instructions. The term machine accessible storage medium shall also be taken to include any medium that is capable of storing encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present invention. The term machine accessible storage medium shall accordingly be taken to include but not be limited to solid state memories optical and magnetic media.

It is to be understood that the above description is intended to be illustrative and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reading and understanding the above description. The scope of the invention should therefore be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled.

