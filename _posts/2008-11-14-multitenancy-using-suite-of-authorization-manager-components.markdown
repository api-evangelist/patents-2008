---

title: Multi-tenancy using suite of authorization manager components
abstract: Embodiments described herein are directed to implementing a multi-tenancy service component configured to provide multi-tenancy capabilities for submitted services. In one embodiment, a computer system instantiates a hosting service that includes a multi-tenancy component configured to provide resource access to multiple users through a single multi-tenant resource instance. The computer system receives a submitted service submitted to be hosted by the hosting service. The submitted service includes a portion of use information usable to configure parameters of the multi-tenancy component. The computer system configures the multi-tenancy component to provide resource access for multiple users through a single multi-tenant resource instance, where each user provides a resource instance claim indicating a resource instance level authorization for the user. The computer system also provides resource access to each of the users through the single multi-tenant resource instance, based on the resource instance level authorization included in the resource instance claim.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08271536&OS=08271536&RS=08271536
owner: Microsoft Corporation
number: 08271536
owner_city: Redmond
owner_country: US
publication_date: 20081114
---
Computers have become highly integrated in the workforce in the home in mobile devices and many other places. Computers can process massive amounts of information quickly and efficiently. Software applications designed to run on computer systems allow users to perform a wide variety of functions including business applications schoolwork entertainment and more. Software applications are often designed to perform specific tasks such as word processor applications for drafting documents or email programs for sending receiving and organizing email.

In many cases software applications are designed to interact with other software applications or other computer systems. For example a client computer system might connect to a server in a datacenter to access a service. The service could provide simple or very complex functionality and may be able to communicate with other services in the process. Such services are often referred to as software as a service or SAAS.

In some cases it may be desirable for a developer of a service to offload the finalized service to another person or business for hosting. Such hosting businesses often have proprietary implementations in place requiring the developer to add specific scripts or other code to enable communication between the hosting company s servers and the developer s service. Furthermore in many cases services hosted by hosting servers may be limited when providing resources to multiple users.

Embodiments described herein are directed to implementing a multi tenancy service component configured to provide multi tenancy capabilities for submitted services. In one embodiment a computer system instantiates a hosting service that includes a multi tenancy component configured to provide resource access to multiple users through a single multi tenant resource instance. The computer system receives a submitted service submitted to be hosted by the hosting service. The submitted service includes a portion of use information usable to configure parameters of the multi tenancy component. The computer system configures the multi tenancy component to provide resource access for multiple users through a single multi tenant resource instance where each user provides a resource instance claim indicating a resource instance level authorization for the user. The computer system also provides resource access to each of the users through the single multi tenant resource instance based on the resource instance level authorization included in the resource instance claim.

In another embodiment a computer system instantiates an online hosting service that includes a multi tenancy component configured to provide resource access to multiple users through a single multi tenant resource instance. The computer system receives a submitted service submitted to be hosted by the online hosting service. The submitted service includes use information usable to configure parameters of the multi tenancy component. The computer system configures the multi tenancy component to provide resource access to resources for a plurality of authenticated users through a single multi tenant resource instance. Each user provides a validated security token generated from the users credentials where the security token includes a resource instance claim indicating a resource instance level authorization for the user. The computer system accesses an authentication database to verify that some of the users have rights to access resources through the single resource instance based on each user s corresponding validated security token and provide resource access to each of the authenticated users through the single multi tenant resource instance based on the resource instance level authorization included in the resource instance claim.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

Embodiments described herein are directed to implementing a multi tenancy service component configured to provide multi tenancy capabilities for submitted services. In one embodiment a computer system instantiates a hosting service that includes a multi tenancy component configured to provide resource access to multiple users through a single multi tenant resource instance. The computer system receives a submitted service submitted to be hosted by the hosting service. The submitted service includes a portion of use information usable to configure parameters of the multi tenancy component. The computer system configures the multi tenancy component to provide resource access for multiple users through a single multi tenant resource instance where each user provides a resource instance claim indicating a resource instance level authorization for the user. The computer system also provides resource access to each of the users through the single multi tenant resource instance based on the resource instance level authorization included in the resource instance claim.

In another embodiment a computer system instantiates an online hosting service that includes a multi tenancy component configured to provide resource access to multiple users through a single multi tenant resource instance. The computer system receives a submitted service submitted to be hosted by the online hosting service. The submitted service includes use information usable to configure parameters of the multi tenancy component. The computer system configures the multi tenancy component to provide resource access to resources for a plurality of authenticated users through a single multi tenant resource instance. Each user provides a validated security token generated from the users credentials where the security token includes a resource instance claim indicating a resource instance level authorization for the user. The computer system accesses an authentication database to verify that some of the users have rights to access resources through the single resource instance based on each user s corresponding validated security token and provide resource access to each of the authenticated users through the single multi tenant resource instance based on the resource instance level authorization included in the resource instance claim.

Embodiments of the present invention may comprise or utilize a special purpose or general purpose computer including computer hardware as discussed in greater detail below. Embodiments within the scope of the present invention also include physical and other computer readable media for carrying or storing computer executable instructions and or data structures. Such computer readable media can be any available media that can be accessed by a general purpose or special purpose computer system. Computer readable media that store computer executable instructions are physical storage media including recordable type storage media. Computer readable media that carry computer executable instructions are transmission media. Thus by way of example and not limitation embodiments of the invention can comprise at least two distinctly different kinds of computer readable media physical storage media and transmission media.

Physical storage media includes RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium which can be used to store desired program code means in the form of computer executable instructions or data structures and which can be accessed by a general purpose or special purpose computer.

A network is defined as one or more data links that enable the transport of electronic data between computer systems and or modules and or other electronic devices. When information is transferred or provided over a network or another communications connection either hardwired wireless or a combination of hardwired or wireless to a computer the computer properly views the connection as a transmission medium. Transmission media can include a network and or data links which can be used to carry or transport desired program code means in the form of computer executable instructions or data structures and which can be accessed by a general purpose or special purpose computer. Combinations of the above should also be included within the scope of computer readable media.

However it should be understood that upon reaching various computer system components program code means in the form of computer executable instructions or data structures can be transferred automatically from transmission media to physical storage media. For example computer executable instructions or data structures received over a network or data link can be buffered in RAM within a network interface card and then eventually transferred to computer system RAM and or to less volatile physical storage media at a computer system. Thus it should be understood that physical storage media can be included in computer system components that also or even primarily utilize transmission media.

Computer executable instructions comprise for example instructions and data which cause a general purpose computer special purpose computer or special purpose processing device to perform a certain function or group of functions. The computer executable instructions may be for example binaries intermediate format instructions such as assembly language or even source code. Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the described features or acts described above. Rather the described features and acts are disclosed as example forms of implementing the claims.

Those skilled in the art will appreciate that the invention may be practiced in network computing environments with many types of computer system configurations including personal computers desktop computers laptop computers message processors hand held devices multi processor systems microprocessor based or programmable consumer electronics network PCs minicomputers mainframe computers mobile telephones PDAs pagers routers switches and the like. The invention may also be practiced in distributed system environments where local and remote computer systems which are linked either by hardwired data links wireless data links or by a combination of hardwired and wireless data links through a network both perform tasks. In a distributed system environment program modules may be located in both local and remote memory storage devices.

In some cases client may upload or submit a service . Submitted service may be any type of online service software program or other code portion. Service may be submitted by a user or by another computer system or service. Service may be submitted to a service delivery platform that is part of an online service provided by a datacenter or other server. Use information generally included with service although it may be transmitted separately is information describing hosting parameters for the service. For example use information may include settings describing how hosting service is to host service or which hosting service components e.g. are to be used in conjunction with hosting service . Use management module may be configured to receive and determine based on information how service is to be hosted and or which components are to be used during the hosting.

Hosting service includes hosting module which may be configured to host services and includes use management module . After submitted service has been accepted for hosting by service service may be represented generally as a hosted service . Hosted service may include a plurality of hosted services submitted from multiple different users. Users such as client may submit any number of services for hosting by hosting service . In some embodiments hosting service may be distributed over multiple different server computing systems and is scalable to host substantially any number of user or other submitted services.

Generally services provide resources e.g. resources A . Each service may provide any number of resources accessible by various users. Each resource provided to a user may be viewed as an instance of that resource. In some embodiments a single resource instance may be provided to a plurality of different users e.g. multi tenant resource instance . As used herein the terms multi tenant or multi tenancy refer to a plurality of different users or tenants accessing a resource or resource instance. Thus if a resource instance is multi tenant that resource instance may provide the resource to a plurality of different users. This will be explained in greater detail with regard to .

As mentioned above hosting service includes components . Components may include a variety of different components or plug in services usable by client for hosting the user s submitted services. The submitter may indicate in use information which components are to be used in hosting the submitted service and may further indicate parameters for using the various components. Thus for example user may indicate in use information that multi tenant component is to be used when hosting service . User may use component to enable multiple users to access resources A through a single resource instance e.g. . Additionally or alternatively user may use component to enable multiple users to access other resources B located on data store . Data store may include any type of data storage hardware and or software and may be located on the same or a different computer system than the system on which hosting service is running. These concepts will be explained in greater detail below with regard to method of below.

For example a resource instance claim may indicate that the user has one or more of the following rights read write execute or other rights as may be applicable for a given resource. Upon authenticating the user s validated security token and verifying the user s resource instance claim i.e. that the user actually has the rights indicated in the claim authentication database sends reply to instance indicating that the user is or is not authorized to access resource . As used herein resource may include any specific instance of a resource e.g. A B C or D or may refer to resources provided by hosted service in general. Thus upon receiving an indication that both user and user are authorized and have valid resource instance claims each user s resource claim is sent to store whereupon resources are sent to and provided to each user by multi tenant resource instance . It will be understood that either user or any other user not shown may be denied access by authentication database as having an invalid e.g. expired security token or invalid resource instance claim. In such cases reply would include an indication of which users were denied access and instead of sending the requested resources e.g. C and D a notification that access was denied would be sent. These and other concepts will be described in greater detail below with reference to method of .

Method includes an act of instantiating a hosting service that includes a multi tenancy component configured to provide resource access to a plurality of users through a single multi tenant resource instance act . For example hosting service may be instantiated by a server in a cloud database comprised of a plurality of computer servers. Hosting service may include multi tenancy component which may be configured to provide access to resources A and or B to a plurality of users through a single multi tenant resource instance . In some embodiments each resource may include a resource identifier linking the resource to one or more resource instance claims e.g. A B . This resource identifier may be validated against at least one of the resource instance claims to determine that the user e.g. and or has access rights of the type requested for the resource requested.

For example as described above in reference to user may send validated security token A including resource instance claim A to multi tenant resource instance . Resource instance claim A includes an indication of which resources are to be accessed and which rights user purports to have i.e. a rights claim . This rights claim is verified by authentication database to determine that the user does indeed have read write and or execute rights for the resource requested.

Thus for instance if the resource was a mailbox and the resource instance was a particular user s mailbox the user s resource instance claim would be accessed to verify that the user had the purported read write and or execute rights to the email items in the user s mailbox. It will be appreciated that this mailbox example is only one example of a resource or resource instance and that any type of resource may be provided by hosted service and further that any type of rights may be purported in resource instance claim A B. Upon determining that a user does not have the indicated rights the user will be notified of such. It should also be noted that as will be explained in greater detail below resource instance claims A and or B may have been previously validated or authenticated before being sent to multi tenant resource instance . In such cases it may be possible for resource instance to send the corresponding resource instance claim directly to store without sending the claim to authentication database for authentication.

Returning to method also includes an act of receiving a submitted service submitted to be hosted by the hosting service where the submitted service includes a portion of use information usable to configure one or more parameters of the multi tenancy component act . For example hosting service may receive submitted service submitted to be hosted by hosting service . Service includes use information usable to configure various parameters of multi tenancy component .

For example component may have parameters specifying how it is to be used in conjunction with other components of hosting service e.g. a billing component provisioning service level management resource manager syndication or other components . Other parameters may include limitations on the number or type of users permitted to use service or limitations on the resources provided by service . Many other parameters may be adjusted or set using use information. In some cases use information includes metadata resulting in a metadata driven user submission process that allows users to upload services for hosting while controlling how the submitted service is to be hosted. Multi tenancy component may additionally provide users with an indication of customizable multi tenancy component parameters that are implementable using use information.

Method includes an act of configuring the multi tenancy component to provide resource access for a plurality of users through a single multi tenant resource instance where each user provides a resource instance claim indicating a resource instance level authorization for the user act . For example multi tenancy component may be configured to provide resource access for users and or through multi tenant resource instance . Each user provides a resource instance claim A B indicating a resource instance level authorization for each user. The resource instance level authorization indicates that as described above the user has the rights purported in the claim i.e. that the user has rights to access the resource in the manner indicated in the claim .

In some embodiments each user provides a validated security token generated from the users credentials. The validated security token A B may be generated by server as shown in architecture of . Client which may be the same as or different than client may send security token request to server requesting that user be authenticated. Server which may be the same as or different than authentication database may receive and access security token request to determine which claims or rights the user has in association with a multi tenancy resource instance. Claim store may store a plurality of claims and may indicate which rights client has in association with resource instance .

Additionally or alternatively client may be associated with or belong to a group or user type which may be associated with a certain role. Upon determining that a user is associated with a role based on membership in a group or user type the rights associated with that role may be conveyed to the user. After determining the user s rights if any in association with resource instance the user is either denied access if the user has no rights or signed security token is sent to user indicating the user s rights in association with multi tenant resource instance . In some cases authentication database may establish a trust relationship with server such that token signed by server are trusted by database as being authentic and valid. A validated signed security token may include an indication that the user that sent security token request is assigned to a role that has access to the single resource instance e.g. instance . In some cases a role may indicate rights for a plurality of users across a domain or federation.

It may be determined in some cases that at least two of a plurality of users have rights to access resources through the single multi tenant resource instance based on each user s corresponding validated security token. Thus in such cases a single multi tenant resource instance may be provided the resources of which are only available to authenticated users who have rights to access the instance. Each authenticated user can then access a customized virtual application instance in cases where the resource is a software application or portion thereof where the user has rights to use the application instance according to the user s resource instance claim.

Returning again to method includes an act of providing resource access to each of the users through the single resource instance based on the resource instance level authorization included in the resource instance claim act . For example multi tenant resource instance may provide resource access to each of users and through instance based on the resource instance level authorization included in resource instance claims A B respectively. Each resource instance claim may include a listing of resource instance rights corresponding to each resource provided by the submitted hosted service. Thus in cases where a service provides a plurality of resources the resource instance claim may provide a listing of a user s resource instance rights corresponding to each of the plurality of resources provided by the resource instance.

Method includes an act of instantiating an online hosting service that includes a multi tenancy component configured to provide resource access to a plurality of users through a single multi tenant resource instance act . For example an online hosting service such as hosting service may be instantiated by a computer system. Service may include multi tenancy component which is configured to provide access to resources A D for at least both of users and through multi tenant resource instance .

In some embodiments online hosting service may include a plug in configured to authorize tenants at an operation level. Thus users and other users may be authorized to access at least one of resources A D by the plug in at an operation level on the computer system running the hosting service. In some cases the plug in may provide an application programming interface API for creating updating and deleting resource instance claims. Thus a developer or other computer user may use such an API to create delete and or update resource instance claims A and or B. The API may be used such that a service provider does not have to know how the security token authentication process works or how to implement the claims or validate and authorize against those claims. The plug in in effect can be used by to abstracts away the associated complexity of managing different resource claims.

Method includes an act of receiving a submitted service submitted to be hosted by the online hosting service where the submitted service includes a portion of use information usable to configure one or more parameters of the multi tenancy component act . For example hosting module may receive submitted service submitted to be hosted by online hosting service . Submitted service may include a portion of use information usable to configure various parameters of multi tenancy component . As indicated above use information may be used to set a variety of parameters regarding component use in association with submitted service as well as other parameters regarding how hosting module is to interface with and respond to other computer systems in a surrounding cloud or other computer network.

Method includes an act of configuring the multi tenancy component to provide resource access to resources for a plurality of authenticated users through a single multi tenant resource instance where each user provides a validated security token generated from the users credentials and where the security token includes a resource instance claim indicating a resource instance level authorization for the user act . For example multi tenancy component may be configured to provide resource access to resources A D for multiple authenticated users and through multi tenant resource instance . Each of users and provides validated security tokens A and B generated from the users credentials. Security tokens A and B each include resource instance claims A and B indicating a resource instance level authorization for each user. In some cases online hosting service may implement a plurality of security token service brokers servers . Each of these servers may be configured to authenticate the users credentials and identify which rights the user has vis a vis the multi tenant resource instance.

In some embodiments one security token service broker may be configured to communicate with other security token service brokers on other computer systems in other domains. In this manner each security token service broker may access resources across different domains. This allows an identity e.g. a user s identity to be federated across otherwise autonomous security domains. The federation of identities enables users of one domain e.g. server to securely access data or systems of another domain seamlessly and at least in some cases without various forms of redundant user administration. The federation of user identities may be enabled through the use of open industry standards and or openly published specifications such that multiple parties can achieve interoperability for common use cases. Some use cases may involve cross domain web based single sign on cross domain user account provisioning cross domain entitlement management and or cross domain user attribute exchange.

For instance in one example client may sign up with a third party client to provide services. The user may send security token request to server which acts as a security token service broker sending the security token request to a security token service broker provided by the third party from whom the client is to receive the service. Thus server may interact with other security token service brokers in other domains in order to validate and return a signed security token . This may allow some third party organizations the ability to offer web single sign on SSO to users from partner organizations. In this scenario each organization may continue to manage its own identity stores which include client identifiers.

In some embodiment a user may be able to upload his or her own customized security token service configured to generate security tokens based on user credentials and or validate authenticated tokens created by other services. Multi tenant resource instance may be configured to accept validated security tokens generated by the user s own security token service. Additionally or alternatively instance may be configured to receive a validated security token from a user connected to a different remote datacenter server. Multi tenant resource instance may access an authentication database on the remote datacenter to verify that the user has rights to access resources provided by the online service. Thus it should be understood that users and as well as their corresponding validated security tokens and resource instance claims may be received from various different services as well as from local or remote locations.

Method includes an act of accessing an authentication database to verify that at least two of the users have rights to access resources through the single resource instance based on each user s corresponding validated security token act . For example multi tenant resource instance may communicate with authentication database using request and reply to verify that users and have rights to access resources through instance based on each user s corresponding validated security token. Thus returning to client may send data request along with signed security token to online service which may be user submitted service to request data and resources from the service. Demand store service may perform a check to verify that for any resource demands proper resource instance claims have been provided by the user. Validation plug in as indicated above may provide an API for creating updating and deleting resource instance claims. Using plug in a developer may provide metadata to interact with the plug in library and the underlying resource instance claims. The plug in may also verify that the incoming claims match what is required to actually use the resource.

Method includes an act of providing resource access to each of the authenticated users through the single multi tenant resource instance based on the resource instance level authorization included in the resource instance claim act . For example multi tenant resource instance may provide resources C to user and resources D to user or alternatively service resources to client based on the resource instance level authorization included in each of resource instance claims A and B respectively. Each user has access to separate information depending on the user s authorization level. Thus a resource may be provided to multiple users while maintaining data isolation among each user. Accordingly users may submit a service for hosting and include with the service use information specifying how the service is to be hosted. Moreover a multi tenancy component may be provided that allows multiple users to access a single resource instance.

The present invention may be embodied in other specific forms without departing from its spirit or essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. The scope of the invention is therefore indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope.

