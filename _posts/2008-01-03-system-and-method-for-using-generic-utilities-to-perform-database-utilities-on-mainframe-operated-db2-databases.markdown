---

title: System and method for using generic utilities to perform database utilities on mainframe operated DB2 databases
abstract: A system and method for performing database utilities on a DB2 database may include using a single procedure (proc) for each database utility function. At least one parameter may be provided, where the at least one parameter identifies a DB2 database name. A generic control card may be accessed, where the generic control card may be identified by a value of the parameter(s). A utility control card may be generated using the at least one parameter. A database utility may be executed on a DB2 database by using the generated utility control card.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08150821&OS=08150821&RS=08150821
owner: Embarq Holdings Company LLC
number: 08150821
owner_city: Overland Park
owner_country: US
publication_date: 20080103
---
Companies in many different industries handle large database operations using mainframe computers. One such industry is the telecommunications industry where databases are used to store detailed subscriber records. These databases are large and require routine maintenance to manage them due to a number of reasons including crashes updates corrections and verifications.

One mainframe manufacturer is International Business Machines IBM . IBM also provides a database software program known as DB2 which can manage very large databases e.g. several hundred Gigabytes . As understood in the art mainframe computers operate by processing jobs that are scheduled in a queue. These jobs are formed by a series of statements or commands that are processed by a processor of the mainframe computer. Jobs are generally statements formatted in the job control language JCL . Typically a mainframe computer runs a job by scheduling and executing a file with JCL commands or statements configured for the mainframe computer to perform a task such as re loading a database from a certain time. In addition to the file with JCL statements control cards are used to set parameters for the jobs and know the syntax of the control cards. The control cards are typically eighty byte strings that have each byte and groups of bytes representative of the different parameters. The JCL commands and control cards are comprehensive and generally require well trained database administrators to adequately generate proper job files and control cards to perform even routine procedures and maintenance on DB2 databases.

To aid database administrators IBM provides database utilities. These utilities are JCL programs that are configured to perform certain functions. The database administrator however must generate a procedure generally known as a proc and control card for each job. Companies that manage large numbers of databases such as telecommunication service providers may have over 25 000 databases. To perform a single routine or regularly executed function on each database a JCL command file proc file and control card must be created. Typically six or more regularly executed operations including check copy modify reorg quiesce and runstats and many non regularly schedule operations are performed on each database. This means that in the event of a global change to any of the JCL command files proc files or control cards 150 000 or more file edits must be made.

These and other issues result in significant costs and expenses to staff database operations with database administrators. For example in a typical telecommunications company twenty or more database administrators are needed to manage the customer database and support database developers because the database developers are unfamiliar and generally unskilled to generate the necessary database utility operations needed during database development projects and interpret the resulting reports. This number of database administrators is generally needed because of the amount of time needed to generate JCL files proc files and control cards using the utilities available by both IBM and other vendors.

To overcome the difficulties of using DB2 database utilities on mainframes minimize costs of staffing a database with database administrators and increase the speed at which utility jobs can be created and revised the principles of the present invention provide for generic database utilities that enable an operator to modify one set of utilities to perform a global change to procs and eliminate the use of control cards.

A system and method for performing database utilities on a DB2 database may include using a single procedure proc for each database utility function. At least one parameter may be provided where the at least one parameter identifies a DB2 database name. A generic control card may be accessed where the generic control card may be identified by a value of the parameter s . A utility control card may be generated using the at least one parameter. A database utility may be executed on a DB2 database by using the generated utility control card.

In operation the mainframe computer may execute the software for operating the database s stored in the storage unit . In the case of the database s being DB2 databases these databases are challenging for users to perform utilities due to confusing user interfaces provided by utility developers including IBM and control cards that are difficult to understand even by the most seasoned database administrator. In accordance with the principles of the present invention the software may include a database utility system that provides intuitive user interfaces that is capable of generating JCL command files that include parameters thereby eliminating the need for control cards to be used during execution of a job as the parameters entered by a user are included in the JCL command file.

TABLE I includes an exemplary list of proc names job or function descriptions and job suffixes. These procs are typical routinely executed functions that are executed on databases maintained by mainframe computers. As previously described each of these procs conventionally are supported with jobs and control cards. However through the use of generic DB2 utilities the principles of the present invention enable elimination of customized procs and control cards thereby reducing the total number of procs and eliminating customized control cards. In place of customized control cards skeleton or generic control cards may be stored in a library of generic control cards where a skeleton control card provides generic operation for a respective proc. PARMS that are expanded into the procs determine which control card member is used when executed.

In operation the generic utilities use a software program DB010A01 which writes a dataset that includes PARM field s plus a skeleton or generic control card where the control card may be stored in a library such as DBAdb2ssid.PARMLIB. Member or generic control card names used are determined at execution by a PARM on the EXEC statement. The control card for performing a command such as COPY TABLESPACE DB.. TS in the PARM field is written to a temporary dataset after JCL expansion or substitution. The is a symbolic that causes the PARMS DB and TS to be expanded. The command is concatenated with one or more skeleton control cards to create the utility control cards used by the job. Some systems may use different dataset names and options. To accommodate the different systems system specific options may be created by adding members to the library without having to change the generic procs in production. These options should be created at a system level and not data base level.

It should be understood that control cards are not generated by the generic procs but rather are generated from the PARM field in JCL assembler utility program e.g. DB010A01 and library DBA.db2ssid.PARMLIB based on the symbolics in the execute statement in the JCL. In most cases the member name in the library PARMLIB has the same name as the PROC name.

At step utility control cards are generated from the software program of step . The utility provided by the utility control cards are executed at step . A condition code check is performed at step where if the condition code is greater than 5 the utility is abended or abort ended at step . Alternatively the job is ended at step .

An example of JCL statements used in performing an image copy is provided below. The image copy is an IBM company image copy for DB2 databases. The name of the proc is DB2IC which is commonly known as an I job meaning IBM job. If a letter B were used it would indicate that a BMC utility is being used. The purpose of this proc is to image copy tablespaces for a DB2 databases using the IBM utility. The DB2 subsystem ID and the SMFID variables are set by the PRD01 where is the JES include member in the JCL. A database name is specified in the EXEC statement. All tablespaces in the database are processed by this job unless TS is specified. Wildcards and can be use in DB and TS parms. Specify SHRLVL 1 for REFERENCE default or SHRLVL 2 for CHANGE. Since control cards for the utility are not required by this proc there is no need to create control cards for this job. The utility will be recorded as user.job name. This proc uses a LISTDEF to wildcard. It should be understood that other procs may be configured in the same or similar manner as provided below.

The purpose of the assembler utility program i.e. DB010A01 is to take the PARM field on the execute statement and write it to a dataset. The dataset can be used to build control cards from the PARM using JCL symbolics instead of having to create unique control card members for each job. This program is executed in procs before a step needing control cards. At execution time any PARMS that change in the control card are substituted with the PARMS specified on the EXEC statement. By using this simple utility thousands of control cards may be eliminated. Since the PARM determines the control cards created this program can be used in any proc.

The previous detailed description is of a small number of embodiments for implementing the invention and is not intended to be limiting in scope. One of skill in this art will immediately envisage the methods and variations used to implement this invention in other areas than those described in detail. The following clams set forth a number of the embodiments of the invention disclosed with greater particularity.

