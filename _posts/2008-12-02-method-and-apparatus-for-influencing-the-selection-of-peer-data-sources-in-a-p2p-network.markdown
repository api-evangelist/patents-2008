---

title: Method and apparatus for influencing the selection of peer data sources in a P2P network
abstract: Disclosed is a method of selecting a data source node from a plurality of data source nodes, the selected data source node being used to send data to a data requesting node over a packet data network. The method includes, at an intermediate node of the network, intercepting at least one message sent to or from the data requesting node, the message(s) relating to data source node suitability, determining a cost of communication between the data requesting node and each of the data source nodes to which the message(s) relate, and influencing data source node suitability information sent to the data requesting node to take account of the cost to enable the data requesting node to use the information to select a data source node.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09130960&OS=09130960&RS=09130960
owner: Telefonaktiebolaget L M Ericsson (publ)
number: 09130960
owner_city: Stockholm
owner_country: SE
publication_date: 20081202
---
This application is a 35 U.S.C. 371 national stage application of PCT International Application No. PCT EP2008 066660 filed on 2 Dec. 2008 the disclosure and content of which is incorporated by reference herein in its entirety. The above referenced PCT International Application was published in the English language as International Publication No. WO 2010 063314 A1 on 10 Jun. 2010.

The present invention relates to a method and apparatus for influencing collaborative networking and in particular to a method and apparatus for influencing the routing of messages and data in a collaborative network.

Peer to peer P2P applications such as those for sharing music movies and software have become very popular such that the majority of IP traffic on the Internet is now caused by P2P applications. The share of Internet traffic taken by P2P applications will continue to grow particularly as the media industry has identified P2P as an efficient system for content distribution.

In P2P networking the peers are distributed throughout the physical network and an overlay network can be constructed on top of this physical network in which the nodes are connected by virtual or logical links that may represent many physical links in the underlying physical network . This overlay network is then used for routing between the nodes in the P2P network. illustrates schematically an overlay network and the underlying physical network.

In non structured P2P networks the content is distributed randomly whereas in structured P2P networks the location of content is determined by the utilised P2P protocol and as such requests for content can be routed by the P2P protocol in order to determine a source for the content.

Typically a node in a structured P2P network maintains a list of nodes of which it is aware and with whom it collaborates for a specific task. This list of nodes is the P2P routing table and contains the node s neighbours in the collaborative network. For example in Peer A s list of neighbouring nodes might include Peer B and Peer D. Structured P2P networks are mostly based on Distributed Hash Tables DHT in order to manage the storage and retrieval of data within the network. DHT define a logical keyspace and split ownership of this keyspace between the nodes participating in the P2P network. To store a file a hashing algorithm e.g. SHA 1 is applied to the file contents or to its filename generating a hash which is used as a key for the file. The location at which this file can be found or the file itself is then sent to and stored at the node responsible for the area of the keyspace in which this key lies. Generally when a node wants to obtain this file it will generate the file key and select a node from within its list of neighbouring nodes whose keyspace is closer to that in which the key lies. The data requesting node will then send a message containing the file key to the selected neighbouring node. This node then forwards the message to a node within its list of neighbouring nodes whose keyspace is closer still to that in which the key lies. The message is forwarded from node to node until it reaches the node responsible for key. For this reason the selection of the nodes that feature in the list of neighbouring nodes is usually determined in order to minimise the number of hops that are required to reach any other node in the P2P network.

Some structured P2P applications also take account of the topology of the underlying physical network when selecting the nodes that will feature in a nodes list of neighbours and when selecting a node from within that list with the aim of alleviating unnecessary load in the communication links between the nodes. For example proximity neighbour selection attempts to construct the list of neighbouring nodes such that it contains the topologically closest nodes among all nodes within the desired portion of the keyspace. Furthermore when routing a message there can be potentially several nodes in the list of neighbouring nodes that are closer to the message s key in the keyspace. Proximity message routing attempts to select the node that is closest in the physical network or that represents a good compromise between progress in the keyspace and proximity in the physical network. When attempting to account for node proximity these structured P2P applications often rely on simple Round Trip Time RTT measurements e.g. made using ping packets.

Non structured P2P networks can be further categorised as either pure P2P networks centralised P2P networks or hybrid P2P networks. In a pure P2P network a node that wants to obtain some data floods the network with a query or request. This data requesting node then receives a response or a number of responses from those nodes that can provide the requested data and must then select one of these possible data sources from which to retrieve the data. Once again the selection often relies on simple RTT measurements when attempting to take account of the topology of the underlying network.

In a centralised P2P network a data requesting node sends the request for data to some centralised look up server or hub that stores a directory or database of the data that each node can provide. The centralised server then returns a list identifying possible source nodes from which the requesting node must select the source s it will contact to retrieve the date. In hybrid P2P networks a routing hierarchy is established within the nodes of the network in which some nodes are defined as superpeers . The other non super nodes of the P2P network send their data requests to their superpeer node which then returns a list identifying possible source nodes. In other words each superpeer node acts as a centralized server to a subset of the other nodes in the P2P network. In these P2P networks the data requesting peer may either make RTT measurements to each of the possible data sources or will merely attempt to retrieve the data from the sources in the order in which they are listed. In some cases the server or superpeer may determine the order of the list depending upon the uplink speed of each possible data source node.

In order to optimise the cost of the transport and the performance of collaborative applications such as the P2P applications described above it is inefficient to rely on simple RTT measurements or the ordering provided by some server or superpeer and more detailed knowledge of the network architecture and dynamic conditions within the network is required. However details of the transport network are often hidden from the end users.

Proactive network Provider Participation for P2P P4P has been proposed as an approach to optimize peer to peer connections using a more detailed knowledge of the network. However this approach is based on a centralized node that offers a global view of the network and that the P2P client must interact with when selecting which neighbouring nodes to collaborate with. This centralised approach has a number of disadvantages. Firstly it requires that the user s P2P application must be configured to cooperate with the centralised node. Secondly the P2P application must contact the centralised P4P node at least once every time they initiate collaborative communication with other peers placing a significant load on this centralised node. Furthermore whenever there is a change in the network topology the centralised node must be updated to reflect the new topology.

According to a first aspect of the present invention there is provided a method of selecting a data source node from a plurality of data source nodes the selected data source node being used to send data to a data requesting node over a packet data network. The method comprises at an intermediate node of the network intercepting at least one message sent to or from said data requesting node the message s relating to data source node suitability determining a cost of communication between said data requesting node and the or each data source node to which said message s relate and influencing data source node suitability information sent to said data requesting node to take account of said cost s to enable said data requesting node to use the information to select a data source node. The packet data network may be an Evolved Packet System mobile communications network in which the intermediate node can be either an evolved NodeB or a System Architecture Evolution Gateway.

If the message s relating to data source node suitability sent to or from said data requesting node are round trip time request or round trip time reply messages relating to a data source node the step of influencing data source node suitability information sent to said data requesting node may comprise influencing the round trip time reply message sent to said data requesting node from the data source node.

The step of influencing the round trip time reply message may comprise imposing a delay on the round trip time reply message sent to the data requesting node from the data source node such that the round trip time indicated to the data requesting node depends on the calculated cost of communication between said data requesting node and the data source node. The imposed delay may be proportional to the calculated cost of communication or alternatively the imposed delay may be selected from at least a first preconfigured delay and a second preconfigured delay with the first delay being shorter than the second delay and the first delay being imposed on the round trip time reply message relating to the data source node with the lowest cost of communication.

Alternatively the step of influencing the round trip time reply may comprise generating and sending a simulated round trip time reply message to the data requesting node such that the round trip time indicated to the data requesting node depends on the calculated cost of communication between said data requesting node and the data source node.

If the message s relating to data source node suitability sent to or from said data requesting node is a message containing a list of potential data source nodes the step of influencing data source node suitability information sent to said data requesting node may comprise modifying the list such that the nodes appearing in the list or the order of the nodes in list depends on the calculated cost of communication between said data requesting node and the data source nodes.

If the data requesting node is connected to a visited network and traffic to and from the data requesting node is routed through a home network of the data requesting node then intermediate node may be a node of the home network.

According to a second aspect of the present invention there is provided a recording medium storing computer interpretable instructions for causing a programmable computer to perform a method of selecting a data source node from a plurality of data source nodes the selected data source node being used to send data to a data requesting node over a packet data network. The method comprises upon receipt of at least one message sent to or from said data requesting node the message s relating to data source node suitability determining a cost of communication between said data requesting node and the or each data source node to which said message s relate and influencing data source node suitability information sent to said data requesting node to take account of said cost s to enable said data requesting node to use the information to select a data source node.

According to a third aspect of the present invention there is provided an apparatus for use in a packet data network. The apparatus comprises a receiver for intercepting messages sent to or from a data requesting node an inspection unit for identifying messages that relate to the suitability of one or more data source nodes for sending data to said data requesting node a cost control unit for determining the cost of communication between said data requesting node and the or each data source node to which any identified message s relate and influencing data source node suitability information sent to said data requesting node to take account of said cost s and a transmitter for sending the data source node suitability information to the data requesting node. The inspection unit may identify messages that relate to the suitability of one or more data source nodes for sending data to said data requesting node using deep packet inspection. The apparatus may be an eNodeB or a System Architecture Evolution Gateway.

The inspection unit may identify round trip time request messages and round trip time reply messages sent to or from a data source node and the cost control unit may influence the round trip time reply messages sent to said data requesting node. The cost control unit may impose a delay on round trip time reply messages sent from the data source node to the data requesting node such that the round trip time measured by the data requesting node depends on the calculated cost of communication between the data requesting node and the data source node. Alternatively the cost control unit may generate and send simulated round trip time reply messages to the date requesting node such that the round trip time indicated to the data requesting node depends on the calculated cost of communication between the data requesting node and the data source node.

The inspection unit may identify messages containing a list of potential data source nodes and the cost control unit may modify the list of potential data source nodes.

According to a fourth aspect of the present invention there is provided a method of constructing and maintaining a routing table at a first node of a collaborative network the collaborative network being overlaid on a packet data network. The method comprises at a node of the packet data network intercepting at least one message sent between said first collaborative network node and one or more second nodes of the collaborative network the message relating to the suitability of said second collaborative network node s as a next hop in a route from the first collaborative network node determining a cost of communication between said first collaborative network node and the or each second collaborative network node and influencing second collaborative network node suitability information sent to said first collaborative network node to take account of said cost in order that said first collaborative network node will preferably select the second collaborative network node with the lowest cost of communication when using the routing table to route a message in the collaborative network. The packet data network may be an Evolved Packet System mobile communications network and the node of the packet data network may be either an evolved NodeB or a System Architecture Evolution Gateway.

If the message s relating to second collaborative network node suitability are round trip time request or a round trip time reply messages relating to a second collaborative network node the step of influencing correspondent node suitability information sent to said first collaborative network node may comprise influencing the round trip time reply messages sent to said first collaborative network node from the second collaborative network node. The step of influencing the round trip time reply messages may comprise imposing a delay on the round trip time reply messages sent from the second collaborative network node to said first collaborative network node such that the round trip time measured by the first collaborative network node depends on the calculated cost of communication between said first collaborative network node and the second collaborative network node. Alternatively the step of influencing the round trip time reply may comprise generating and sending a simulated round trip time reply message to the first collaborative network node such that the round trip time indicated to the first collaborative network node depends on the calculated cost of communication between said first collaborative network node and the second collaborative network node.

If the first collaborative network node is connected to a visited network and traffic to and from the first collaborative network node is routed through a home network of the first collaborative network node the node of the packet data network may be a node of the home network.

According to a fifth aspect of the present invention there is provided a recording medium storing computer interpretable instructions for causing a programmable computer to perform a method of constructing and maintaining a routing table at a first node of a collaborative network the collaborative network being overlaid on a packet data network. The method comprises upon receipt of at least one message sent between said first collaborative network node and one or more second nodes of the collaborative network the message relating to the suitability of said second collaborative network nodes as a next hop in a route from the first collaborative network node determining a cost of communication between said first collaborative network node and the or each second collaborative network node and influencing second collaborative network node suitability information sent to said first collaborative network node to take account of said cost in order that said first collaborative network node will preferably select the second collaborative network node with the lowest cost of communication when using the routing table to route a message in the collaborative network.

According to a sixth aspect of the present invention there is provided an apparatus for use in a packet data network. The apparatus comprises a receiver for intercepting messages sent between a first node of a collaborative network node and one or more second nodes of the collaborative network the collaborative network being overlaid on the packet data network an inspection unit for identifying messages that relate to the suitability of said second collaborative network nodes as a next hop in a route from the first collaborative network node a cost control unit for determining the cost of communication between said first collaborative network node and the or each second collaborative network node and influencing second collaborative network node suitability information sent to said first collaborative network node to take account of said cost and a transmitter for sending the second collaborative network node suitability information to the first collaborative network node.

According to a seventh aspect of the present invention there is provided a method of optimising the utilisation of resources in a collaborative network. The method comprises at a node of an access network the access network being used by a first node of the collaborative network to access the collaborative network receiving a request message from the first collaborative network node the message requesting the cost of communication between the first collaborative network node and one or more second nodes of the collaborative network determining the cost of communication between said first collaborative network node and the or each second collaborative network node and sending a reply message to the first collaborative network node in order that said first collaborative network node can take into account said cost s when selecting one or more of the second collaborative network nodes with which to communicate.

According to an eighth aspect of the present invention there is provided a recording medium storing computer interpretable instructions for causing a programmable computer to perform a method of optimising the utilisation of resources in a collaborative network. The method comprises upon receipt of a request message from a first node of the collaborative network the message requesting the cost of communication between the first collaborative network node and one or more second nodes of the collaborative network determining the cost of communication between said first collaborative network node and the or each second collaborative network node and sending a reply message to the first collaborative network node in order that said first collaborative network node can take into account said cost s when selecting one or more of the second collaborative network nodes with which to communicate.

According to a ninth aspect of the present invention there is provided an apparatus for use in an access network. The apparatus comprises a receiver for receiving a request messages sent from a first node the access network being used by the first node to access a collaborative network the message requesting the cost of communication between the first collaborative network node and one or more second nodes of the collaborative network a cost control unit for determining the cost of communication between said first collaborative network node and the or each second collaborative network node and a transmitter for sending a reply message to the first collaborative network node.

There will now be described a method of optimising the bandwidth efficiency of multi source collaborative networks such as P2P networks content distribution networks and Distributed Hash Table creation and maintenance etc that also mitigates the disadvantages of a centralised solution such as P4P. The method involves providing a new enabler function distributed throughout the underlying network that will obtain knowledge of the elements of the underlying network and their dynamic status and use this knowledge to calculate the cost of communication between a node of the collaborative network and other nodes of the collaborative network with which it may correspond.

The enabler will then influence the selection by the node of one or more correspondent nodes from those possible nodes such that the node will preferably communicate with the correspondent node with the lowest communication costs. In this regard the enabler can influence the construction and maintenance of the routing table of a collaborative network node by influencing the selection of nodes that will feature in the routing table or influencing the selection of a node from the routing table when routing a request for data and can also influence the selection of a node from a number of nodes that have been identified to a data requesting node as potential data sources.

The enabler obtains network topology information collects real time measurements of the underlying network and determines the cost of communicating with a potential correspondent node based on this real time network information e.g. available bandwidth administrative costs etc . The enabler function is distributed throughout the underlying network such that messages sent to and from nodes using a collaborative application always traverse the nodes that provide the enabler function. The enabler can then influence the selection by a first node of second correspondent nodes by intercepting messages used in measuring the RTT or messages containing a list of nodes and influencing this such that it reflects the enabler s assessment of the underlying network. Alternatively the enabler can interact with an application programming interface API provided to the collaborative applications within a node to provide an estimate of the cost of communication with the different correspondent nodes.

The RTT measurements used by a collaborative application may be made by sending Internet Control Message Protocol ICMP echo request packets to the target and listening for ICMP echo response replies. In this case it is straightforward for the enabler to catch these ICMP messages. However the RTT measurements may alternatively be based on some application specific mechanism for which deep packet inspection DPI would be required to identify the relevant messages.

Once the enabler has identified the relevant RTT messages the enabler can either impose an artificial delay on the RTT response messages or it can generate fake or simulated RTT response messages in order to influence the RTT measurements. By delaying a response the enabler can prolong the RTT measurement made by a node and thereby discourage selection of those second correspondent nodes that have the highest cost of communication. For example the imposed delay can be preconfigured e.g. with a particular delay for preferred nodes and another longer delay for unwanted nodes or it can vary based on the real time network measurements made by the enabler. In generating simulated responses the enabler can encourage selection of the preferred correspondent nodes e.g. by sending a response to the first node that ensures the RTT is lower for those second correspondent nodes with the lowest cost of communication.

If the enabler identifies a message as containing a list of possible data source nodes it will use its knowledge of the underlying network to calculate the cost of communicating with each of these nodes and modify the list to reflect these costs. For example the enabler may re order the list to ensure that the node with lowest cost of communication appears first in the list and the node with the highest cost of communication appears last.

Alternatively if the node of the collaborative network were to be provided with an appropriate API then the enabler could interact directly with this API in order to influence the selection of correspondent nodes. is a flow diagram illustrating the process of the enabler interacting with an API at the first collaborative network node. In this case the steps performed are as follows 

Due to the high speed offered to end users and flat rate pricing it is expected that users attached to High Speed Packet Access HSPA and LTE Long Term Evolution mobile access networks will run collaborative applications and as with fixed DSL access that such collaborative applications will be responsible for the majority of the traffic. However in these access networks the cost of transport can be very expensive due either to a lack of resources e.g. relatively low capacity microwave links or due to the use of rented transmission for which operators must pay for the bandwidth used. As such it is desirable to enhance the bandwidth efficiency of these collaborative applications.

The enabler unit is provided in the SAE GW and or in the eNodeBs of the access network. The enabler determines the communication costs from a first node of the collaborative network to the potential second correspondent nodes based on the topology of the underlying physical network and dynamic network information such as the link loads on the links to the core network and the predicted or estimated quality of the radio channels to terminals connected to the eNodeBs.

The purpose of the control plane is to manage the network resources and the connections to the UEs including bearer setup and handover. This is controlled via an S1 CP interface to the MME and an X2 CP interface to neighbouring eNodeBs . The control plane also includes the MAC scheduler providing optimisation of the air interface.

The MAC scheduler maintains information about the traffic buffered in the user plane the QoS contract to each UE and the radio propagation to each UE. The MAC scheduler determines what data the eNodeB will transmit to or receive from UEs over the air interface and how. The MAC scheduler also receives measurements of the properties of the air interface from both the Layer uplink processing and from the UEs by means of measurement reports.

The eNodeB also has an MuI interface to the NM node . This interface may optionally also carry time information using Network Time Protocol NTP or Precision Time Protocol PTP IEEE1588 to control the time and frequency generation of the eNodeB. Typically NTP PTP messages are sent 1 10 times a second and the delay of each message is determined by the eNodeB.

Any packets identified by the DPI as being involved in the control plane of a collaborative application are forwarded to a new P2P control function in the control plane e.g. in the eNodeB controller . The P2P control function also receives the following inputs 

In addition the P2P control function can initiate communication to a UE that is a candidate peer data source e.g. by initiating transmission of a Radio Resource Control RRC protocol message in order to update the information relating to the properties of the air interface for that UE. The transmission of such a communication will update the MAC Scheduler with the current radio link quality to the candidate UE.

Furthermore as the transport topology may be such that there are multiple hops between two eNodeBs an operator may want to rely on more sophisticated methods to collect the topology information as well as dynamic capacity and load related information of the links in the network. For example the P2P control function could be provided with an interface toward the transport network management system which has knowledge of the transport topology and which should also possess some dynamic load free capacity related information. Alternatively the transport network routing protocols could be enhanced to propagate and carry link load related information e.g. by flooding link load related information in the Opaque Link State Advertisement LSA message of Open Shortest Path First OSPF protocol as described in RFC3630 Traffic Engineering TE Extensions to OSPF Version 2 . There are similar extensions to the other widely deployed link state routing protocols such as the Intermediate System to Intermediate System IS IS protocol. If the underlying network is an Ethernet network instead of an IP network the Generalised Multi Protocol Label Switching GMPLS control plane of the Ethernet network can still utilise the OSPF or IS IS protocol to flood the network with topology and link capacity related information.

The P2P control function uses this information to calculate the cost of communication with each of the potential correspondent nodes and influences the control plane of a collaborative application in order to reflect the calculated the costs. The calculated cost can be based on any one or a combination of the network topology the available bandwidth on network links the administrative cost of network links the load on network links the Quality of Service of the network links the security of the network links the current predicted air interface properties etc.

After decapsulation QoS policies are applied to the packet in the QoS module and then another protocol selector determines how the packet will be sent e.g. plainly encrypted with IPSec tunneled etc . The outgoing module forwards the packet back to the underlying IP router.

A P2P control function is also added in the control plane. In order to acquire the information it needs to estimate the costs the P2P control function within the SAE GW is connected to network Operation and Maintenance OAM systems and or to the underlying router s routing information base RIB from where it can collect dynamic network state and topology information. The RAN transport network and air interface related information is inferred by the SAE GW.

The P2P control function uses this information to calculate the cost of communication with each of the potential correspondent nodes and influences the control plane of a collaborative application in order to reflect the calculated costs. The calculated cost can be based on any one or a combination of the network topology the available bandwidth on network links the administrative cost of network links the load on network links the Quality of Service of the network links the security of the network links the current predicted air interface properties etc.

In addition the SAE GW may also infer from the OAM system whether or not the eNodeB of the data requesting UE is capable of performing the enabler function in order to manipulate the data source selection. If it is then the SAE GW may decide to let the eNodeB handle any collaborative application control plane packets as it is likely to have more recent network information.

The enabler function can also further enhance the optimisation of collaborative applications in access networks that make use of local switching or route optimisation. Normally user plane packets are tunneled e.g. using GTP or PMIP up to the PDN GW even if the other communicating party is within the same mobile network at a neighbouring eNodeB or even if it is at the same eNodeB. Local switching provides that packets can be routed back to the RAN by the serving gateway if both parties are in the same mobile network segment. Local switching can also be applied within the RAN itself i.e. when communications between two terminals within the same RAN segment e.g. at neighbouring or close eNodeBs or at the same eNodeB are routed directly within the RAN without having to go up to the serving gateway in the core network. An enabler within an SAE GW could determine that a traffic flow can be switched either within the eNodeB or to another eNodeB over the X2 UP interface. Alternatively an enabler within an eNodeB could determine that the traffic can be switched locally within the eNodeB or that the flow can be switched directly to a neighbouring eNodeB over X2 UP. This could be achieved by making use of the DPI module as a router to decrease the load on the interface to the core network and to enhance the user experience with the routing table of the DPI module updated as required. The shortest possible locally switched route can then be used as a basis for the cost calculation performed by the P2P controller.

In addition a user in a visited network may also start using a collaborative application. In such a situation all the traffic to from the visitor UE would normally be routed via a PDN gateway of the home network. In such circumstances an enabler in the home PDN gateway could influence node selection such that nodes in the home network are selected. However local breakout allows traffic to be routed directly to its destination by the visiting network without having to go via the home network. As such an enabler within a visited network for which local breakout is used could direct traffic from a node of a collaborative network to other nodes of the collaborative network that are also within the visited network and are likely have the lowest communication cost. Whilst a PDN gateway will know whether local breakout is possible for a particular UE the core network would need to communicate this to the eNodeB. This could be achieved by extending the S1 CP interface between the MME and the eNodeB with this information.

The enabler within an eNodeB or a SAE GW can build a topological graph enhanced with almost real time load information. At the same time the known IP addresses of UEs served by the same eNodeB SAE GW are added as sub leaves onto the graph. If for a particular UE any of these IP addresses are those of potential correspondent UEs then the cost between them source IP address target IP address is calculated and the addresses are ordered in inverse proportion to the cost.

The cost for the communication transport between two nodes can be a function of the capacity free capacity along the communication path including the core network and air interfaces the estimated quality of the radio channel of the nodes the load utilisation of the communication path and the cost of capacity along the communication path. For example if the path between two nodes consist of i links where i 1 . . . n and fis the free capacity on link i cis the total capacity of link i and ais the administrative cost of capacity of link i then the cost of the path between two nodes could be defined as 

The radio interface can be modelled as one link in the above cost function. The capacity of a cell is a function of both the hardware resources and the current traffic scenario and the most important variables are 

Taking into account the link adaptation history for the specific UE when calculating both the f cell power and the f cell BW ensures an accurate estimation of the bit rate equivalent of the free resources. The free bit rate then becomes

The bitrate capacity can also be limited by policies such as maximum allowed transmission to that UE based on the subscription type radio bearer type and the amount of other higher priority transmissions in the cell. This is denoted the c ue policy.

An enabler using such a cost function can calculate the cost of communication with each potential correspondent node and use these costs to influence the RTT value measured by a first node of a collaborative network or to influence a list of correspondent nodes provided to the node. However the calculated cost can be based on any one or a combination of the network topology the available bandwidth on network links the administrative cost of network links the load on network links the Quality of Service of the network links the security of the network links the current predicted air interface properties etc.

The methods described here provide that the bandwidth efficiency of multi source collaborative applications can be optimised using topological information and real time measurements of the underlying physical network to influence the selection of correspondent nodes such that a node preferably communicates with other those nodes with the lowest costs. This in turn improves the experience of end users when using applications where the requested content can be downloaded from multiple sources e.g. P2P file sharing applications content distribution networks Distributed Hash Table creation and maintenance process etc leading to better customer satisfaction.

Furthermore when combined with techniques for local switching the methods described reduce the traffic sent over the core network as local nodes are selected for collaboration and traffic is routed back in the serving gateway before penetrating the core network. This also provides efficient RAN operation reducing operator costs.

It will be appreciated by the person of skill in the art that various modifications may be made to the above described embodiments without departing from the scope of the present invention. For example although an embodiment has been described with reference to peer to peer networking over an Evolved Packet System mobile communications network the methods described herein are equally applicable to any scenario wherein one or more correspondent nodes of a collaborative network must be selected from a number of possible correspondent nodes distributed throughout a physical network.

