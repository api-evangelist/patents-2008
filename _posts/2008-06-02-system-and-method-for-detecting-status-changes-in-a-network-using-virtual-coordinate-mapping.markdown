---

title: System and method for detecting status changes in a network using virtual coordinate mapping
abstract: A system and method for scalable status change detection in a network of nodes includes embedding node coordinate positions into a virtual map environment. A cluster of nodes are represented with a representative node to form a hierarchy of nodes and clusters where changes in a status of the representative node imply a status change in the nodes of the cluster. By selectively monitoring the representative nodes for the changes in status, the representative nodes create a capability for scalable monitoring of the network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07979537&OS=07979537&RS=07979537
owner: International Business Machines Corporation
number: 07979537
owner_city: Armonk
owner_country: US
publication_date: 20080602
---
This application is a Continuation application of U.S. patent application Ser. No. 11 214 102 filed Aug. 29 2005 Now U.S. Pat. No. 7 496 663 issued Feb. 4 2009 incorporated herein by reference in its entirety.

The present invention relates to a scalable hierarchical system and method for quickly detecting network anomalies or large changes in network delay using a scalable end to end approach.

Users or network operators often intend to monitor the status of different parts of a network continuously to detect anomalies quickly. Current internet routing protocols link status monitoring and adjust the routing table to detour failed links. However the routing change information of a remote network does not usually propagate to the other parts of the internet because of the BGP border gateway protocol policy routing. For some applications like overlay network or p2p peer to peer network the number of nodes is very large and widely distributed. So it is quite difficult to quickly know the network status around remote nodes.

One straightforward way is to monitor the nodes of interest continuously. However if the number of nodes of interest is high the monitoring process is not scalable.

Embodiments of the present invention include hierarchical methods using a virtual coordinate based map embedding process to make monitoring networks more scalable and to be able to address the dynamic nature of the network changes. A hierarchical approach is included which is directed towards determining the delay anomalies in the network by combining the hierarchical map embedding with detailed topology aware probing and to selectively diagnose for network delay anomalies via a virtual co ordinate approach. Selective diagnosis of changes in attributes that describe the virtual coordinates is also included.

A system and method for scalable status change detection in a network of nodes includes embedding node coordinate positions into a virtual map environment. A cluster of nodes are represented with a representative node to form a hierarchy of nodes and clusters where changes in a status of the representative node imply a status change in the nodes of the cluster. By selectively monitoring the representative nodes for the changes in status the representative nodes create a capability for scalable monitoring of the network.

A system method for scalable status change detection in a network of nodes includes determining reference positions in a virtual map environment and determining node coordinate positions based on the reference positions in the virtual map environment. Clustering of nodes based on the positions in the virtual map environment is performed. A cluster of nodes is represented with a leader node where changes in a status of the leader node implies a status change in the nodes of the cluster. The leader node is monitored for status changes.

Another system method for scalable status change detection in a network of nodes includes embedding node coordinate positions into a virtual map environment and representing a cluster of nodes with a representative virtual map to form a hierarchy of virtual maps representing clusters and subclusters of nodes such that changes in a status of the representative virtual map implies a status change in the nodes of the cluster or subcluster. The representative virtual maps are selectively monitored for the changes in status such that the representative virtual maps create a capability for scalable monitoring of the network.

A system for monitoring status changes in a network includes a server coupled to a network and interacting with the network to collect virtual coordinate information from the network. A virtual map is stored in memory associated with the server. The virtual map includes virtual coordinates for nodes and representative nodes which represent groups of nodes in the network. A monitoring module periodically updates the virtual coordinates in the map to detect status changes in or between the nodes or groups of nodes. The virtual coordinates represent monitored properties of the network.

These and other objects features and advantages will become apparent from the following detailed description of illustrative embodiments thereof which is to be read in connection with the accompanying drawings.

Exemplary embodiments of the present invention provide a scalable adaptive network monitoring system and method. Target nodes are grouped into a number of clusters. The nodes in a cluster are preferably in a close area. In other words the network status change of a node implies the network status change of other nodes. However it is quite difficult to find out which nodes are close to which.

A virtual coordinate system is employed where a set of ping points landmarks or other reference positions are chosen in the Internet or other network. Distances from the references to the target nodes are measured. Based on the network distances from the references to the target nodes a set of virtual coordinates are computed in 2 or 3 dimensional Euclidean space for each target node in such a way that the network distance is estimated by a geometric distance in the Euclidean space. Since the virtual coordinate system provides a method to estimate the distance among hosts clustering algorithms may be applied such as K mean to group the target nodes. Next a node is selected from each cluster and only the selected nodes are monitored. The monitoring includes the landmarks periodically measuring the distances from themselves to the selected nodes. Then new virtual coordinates for the selected nodes are computed.

If the position of the selected nodes changes more than a threshold it is likely that the network status around the node may have also changed. The group that the node belongs to is further investigated. However all nodes in the group need not be monitored. The group may be subdivided into several subgroups by applying some clustering algorithms and then choosing a centroid or representative node for each subgroup. The network status of the centroids may be obtained again. If some of the centroids have changed their positions the subgroups may be further subdivided.

The nodes with a network status change can be identified. This set of nodes may be referred to as identified nodes. However the problem area of the network may not actually be known. To get more detailed information traceroute data may be used assuming that the traceroute data from the landmarks to all the target nodes is available.

A set of segments involved in the traceroute data is collected. A segment is a consecutive set of links at which no branch is attached. Then for each segment the following steps may be iterated.

Choose one segment and if the segment has increased its delay list all the target nodes that would be affected by the delay increase of the segment. If the set of selected target nodes are a subset of the identified nodes the segment is a possible candidate which causes the network status change. If the set is a superset of the identified nodes the segment cannot be a problematic node. This iteration sequence may be performed for other segments.

The set of segments selected in the above steps includes the candidates which might have caused the problem. Among the selected set of segments the smallest subset of segments is chosen. This smallest subset of the segments is assumed to have caused the network changes of the identified nodes. One heuristic in this algorithm is that the cause of network changes should be as small as possible. To find out the set a straightforward exponential time algorithm may be used e.g. just try each subset of the selected segments to see whether that subset causes the network status change of the identified nodes.

Embodiments of the present invention can take the form of an entirely hardware embodiment an entirely software embodiment or an embodiment including both hardware and software elements. In a preferred embodiment the present invention is implemented in software which includes but is not limited to firmware resident software microcode etc.

Furthermore the invention can take the form of a computer program product accessible from a computer usable or computer readable medium providing program code for use by or in connection with a computer or any instruction execution system. For the purposes of this description a computer usable or computer readable medium can be any apparatus that may include store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device. The medium can be an electronic magnetic optical electromagnetic infrared or semiconductor system or apparatus or device or a propagation medium. Examples of a computer readable medium include a semiconductor or solid state memory magnetic tape a removable computer diskette a random access memory RAM a read only memory ROM a rigid magnetic disk and an optical disk. Current examples of optical disks include compact disk read only memory CD ROM compact disk read write CD R W and DVD.

A data processing system suitable for storing and or executing program code may include at least one processor coupled directly or indirectly to memory elements through a system bus. The memory elements can include local memory employed during actual execution of the program code bulk storage and cache memories which provide temporary storage of at least some program code to reduce the number of times code is retrieved from bulk storage during execution. Input output or I O devices including but not limited to keyboards displays pointing devices etc. may be coupled to the system either directly or through intervening I O controllers.

Network adapters may also be coupled to the system to enable the data processing system to become coupled to other data processing systems or remote printers or storage devices through intervening private or public networks. Modems cable modem and Ethernet cards are just a few of the currently available types of network adapters.

Referring now to the drawings in which like numerals represent the same or similar elements and initially to a scalable network distance map service is illustratively shown in accordance with an embodiment of the present invention. A network may include the Internet a cable network a telephone network a local area network a wide are network or any other distributed network. Network includes a plurality of nodes . Among these nodes landmarks or points of measurement may be defined.

Each node is assigned a set of coordinates that represents its positioning in a virtual map . The coordinates e.g. x y coordinates reflect one or more properties e.g. delay distance traffic congestion packet loss rate activity security etc. relative to other nodes in the map . For example x y may be position x may be delay and y a measure of traffic etc. The assigned coordinates are determined in such a manner that the relative ordering of the desired property remains valid. For example a round trip time RTT metric among a set of nodes can be considered. Each node is assigned a coordinate in Euclidean space in the virtual map such that the Euclidean distance between the two coordinates provides the RTT between the two corresponding nodes. This process may be defined as a map embedding process. The present invention makes use of a map embedding process to scalably determine e.g. delay changes distances or other properties between nodes in a network.

There may be any number of landmarks or other reference positions however three well distributed landmarks may give preferred results. The landmarks are employed to provide a reference against which other nodes may define their coordinates in a virtual coordinate map.

Referring to a map embedding process is shown in accordance with a general embodiment of the present invention. In block among a large set of N nodes only a few nodes M where M

In block with a period interval these M nodes are embedded into the map to determine the co ordinates of these nodes.

If there is a change in the co ordinate beyond a specified threshold the nodes are marked candidate nodes for detection for the co ordinates which have changed in block . Now a more detailed process using traceroute or other software algorithms is used to detect where the network delay has changed among this set of nodes in block .

Referring to the map embedding process using landmark nodes is illustratively shown in greater detail. After the landmarks nodes have been selected added to the virtual map and coordinates determined for the landmark nodes e.g. L L L as described with reference to each node or host node is measured from a set of landmark nodes e.g. for RTT in block . shows a node or host node calculating distances between the coordinates for landmarks in the virtual map . Once the RTT from these landmarks is determined a co ordinate x y is assigned for the node such that Euclidean distance preserves the metric of interest in block . In block a clustering algorithm may be employed to determine which nodes to cluster together and define a leader node for each cluster see .

Referring to nodes may be grouped into a cluster of nodes. A clustering algorithm may be employed to determine which nodes to cluster together. The nodes in a cluster are preferably close to each other in an area. In other words the network status change of a node implies the network status change of other nodes. While it is difficult to determine which nodes are close to each other a virtual coordinate system is employed where a set of ping points landmarks are chosen in the network . The distances from the landmarks to the target nodes which have been determined may be used to group the nodes into clusters although other criteria may be employed. Each cluster will have its own leader node defined which is representative of the nodes of the cluster .

Referring again to in block in one embodiment based on the network distances from the landmarks to the target nodes a set of virtual coordinates in 2 or 3 dimensional Euclidean space are computed for each target node in such a way that the network distance is estimated by the geometric distance in the Euclidean space. Since the virtual coordinate system provides a method to estimate the distance among hosts clustering algorithms such as K mean may be applied to group the target nodes.

A node from each cluster is selected and monitored e.g. leader node in block . In one embodiment only the selected nodes are monitored. The monitoring provides that the landmarks periodically measure the distances from themselves to the selected nodes. Then new virtual coordinates for the selected nodes are computed in block G.

In block the new virtual coordinates are compared with the old virtual coordinates and if the position of the selected nodes changes more than a threshold it is likely that the network status around the node has also changed. In block the group where the change exceeding the threshold has occurred is further investigated to determine where the change has occurred since the system may not monitor all the nodes in the group.

In block the group is subdivided into several subgroups by applying one or more clustering algorithms. In block a centroid is chosen or calculated for each subgroup and a network status is checked again for the centroids block . If some of the centroids have changed their positions the subgroups are further subdivided in block .

Referring to a leader node or virtual map is monitored until a change exceeding a threshold is encountered. If such a problem exists the clustering program subdivides the cluster or virtual map of the cluster into sub clusters or virtual maps of the subcluster and . A centroid and is determined for each sub cluster and and the monitoring is performed to further identify which sub cluster has encountered the change. Each sub cluster and can then be further subdivided into sub sub clusters and so on until the status change has been identified.

By providing the clustering and declustering of nodes a hierarchical system for monitoring the network is provided that is completely scalable to any size network or any number of nodes. The system can be monitored at a high level if everything is running well or monitored at a very low level in trouble spots or any combination of granularity.

It is also to be understood that virtual maps may be arranged in a same hierarchical manner as nodes. In this way a virtual map of a cluster can be monitored and should a change occur the problem can be zoomed in on by going down the hierarchy of virtual maps until the problems can be identified and solved. Virtual maps can be substituted for nodes as described herein for monitoring a network.

In one embodiment scalable status change detection in a network of nodes may be preformed using the virtual maps arranged hierarchically. Node coordinate positions are embedded into a virtual map environment. A cluster of nodes may be represented by a representative virtual map to form a hierarchy of virtual maps representing clusters and subclusters of nodes such that changes in a status of the representative virtual map implies a status change in the nodes of the cluster or subcluster. The representative virtual maps are selectively monitoring for changes in status and the representative virtual maps create a capability for scalable monitoring of the network.

Referring again to the nodes with a network status change can be identified in block . This set of nodes may be called identified nodes. However the areas which are actually the problematic part network are not specifically known. To get more detailed information traceroute data or other date may be used assuming that traceroute data from the landmarks to all the target nodes is available. In block a set of segments involved in the traceroute data is collected. A segment is a consecutive set of links at which no branch is attached. Then for each segment the following steps are performed and iterated in a detection algorithm.

In block choose one segment. In block if the segment has changed its delay or other monitored property has changed list all the target nodes that would be affected by the delay increase of the segment. In block if the set of selected target nodes is a subset of the identified nodes the segment is a possible candidate which causes the network status change. In block if the set is a superset of the identified nodes the segment cannot be a problematic node. Perform iterations for other segments.

The set of segments selected includes candidates which might have caused the problem. Among the selected set of segments the smallest subset of segments is preferably chosen. This smallest subset of the segments may be concluded to have caused the network changes of the identified nodes. One heuristic in this algorithm includes that the cause of network changes should be as small as possible. To find out the set a straightforward exponential time algorithm may be used e.g. just try each subset of the selected segments to see whether that subset causes the network status change of the identified nodes.

Referring to a segment map showing segments between nodes is illustratively shown. Each segment may have a time or other property calculated or measured for a particular segment. These properties can be compared using the segments analysis described above.

Segments or nodes can be characterized in advance. One possible approach would be to setup the nodes in a controlled environment or model and observe reported results and probe traffic as the various delays are injected. The output may be analyzed by correlating the delay changes with the injected probe traffic the tool in accordance with the present invention.

Referring to a system for mapping and monitoring a network is illustratively shown in accordance with one embodiment of the present invention. A server is connected to a network . The network includes landmarks which may include nodes or other identifying markers in the network . Landmarks provide measurement information to host nodes or nodes . Other references may also be employed in addition to or instead of landmarks . Nodes may include a leader node s cluster of nodes and or a single node depending on the level of the hierarchy or the way the system has been set up. The landmarks provide a reference from which virtual coordinates of the nodes are determined.

Distance or other information is input to server which processes this information to assign coordinates to the nodes . This information is stored in a database or library to create a virtual map environment used to classify and associate cluster host nodes . Library also stores modules for performing a plurality of services used in monitoring the network. For example a distance estimation module a search module a server selection module and a periodic monitoring module are illustratively shown along with their respective application programming interface and respectively. Other modules may be added and provided in stead or in addition to the modules illustratively shown.

Distance estimation module performs distance calculations based on the virtual coordinates of the nodes of the network. Search module enables the searching of the network for specific nodes hardware performance information or other criteria. Search module permits the system to find nodes or segments which have underwent specific changes or changes of a specific value. Server selection module permits the determination of leader nodes or centroids to provide a characteristic node server to monitor rather than monitor all of the nodes of the network. Periodic monitoring module looks for status changes between old and new virtual coordinates. These updates in status are tested periodically and compared to a threshold to determine if a problem exists. Other modules may be added or substituted for those shown in . The monitoring modules send requests for information or measurements to specific host nodes Host IP and the nodes response with information which is received and updated in the virtual map.

The present systems and methods may be provided as a monitoring service for a network. The hierarchical levels of clustering permit the system to easily be scaled to large and small networks regardless of the number of nodes. The service may be provided by purchasing a program storage device which runs the methods of the present invention.

Having described preferred embodiments of a system and method for detecting status changes using virtual coordinate mapping which are intended to be illustrative and not limiting it is noted that modifications and variations can be made by persons skilled in the art in light of the above teachings. It is therefore to be understood that changes may be made in the particular embodiments disclosed which are within the scope and spirit of the invention as outlined by the appended claims. Having thus described aspects of the invention with the details and particularity required by the patent laws what is claimed and desired protected by Letters Patent is set forth in the appended claims.

