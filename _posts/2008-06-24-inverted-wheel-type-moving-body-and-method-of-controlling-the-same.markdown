---

title: Inverted wheel type moving body and method of controlling the same
abstract: An inverted wheel type moving body that can enhance convenience and a method of controlling the same. The inverted wheel type moving body includes a right chassis and a left chassis rotationally supporting a right driving wheel and a left driving wheel, motors rotationally driving the right driving wheel and the left driving wheel, a body rotatably supported on the right chassis and the left chassis through a right arm and a left arm, a pressure-sensitive sensor provided to judge whether a transportation object dismounts, and a control unit controlling the motors to reduce velocity upon judgment that the transportation object dismounts based on the output from the pressure-sensitive sensor when the moving body travels faster than a certain velocity, in which overturn preventing operation is executed after an absolute value of the velocity is lower than a threshold value.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08160794&OS=08160794&RS=08160794
owner: Toyota Jidosha Kabushiki Kaisha
number: 08160794
owner_city: Toyota-shi
owner_country: JP
publication_date: 20080624
---
The present invention relates to an inverted wheel type moving body and a method of controlling the same.

An inverted wheel type moving body is typically controlled to travel in such a manner that the position of the center of mass of the body is constantly corrected to maintain the stable state by driving right and left driving wheels. By mounting a transportation object such as a person or an inanimate object on the moving body transportation can be made in a simple way. In such a moving body sudden stop or sudden acceleration may cause overturn of the moving body. A moving body equipped with sub wheels in order to prevent such an overturn during the travelling is disclosed patent document 1 .

For example according to a vehicle in the patent document 1 sub wheels are arranged in a front back direction of drive wheels. The sub wheels are provided in end parts of struts extended and retracted by actuators. An inclination is detected by a detector that detects a moment. According to the inclination that is detected the strut is deployed by the actuator to bring the sub wheel contact with the ground.

 Patent Document 1 Published Japanese Translation of PCT International Publication for Patent Application No. 2000 514680

Such an inverted wheel type moving body is a vehicle that is assumed to be prevalent in people s lives. Thus if it provides high ride quality a passenger may consider that it is similar to a normal vehicle like a wheelchair. As such a passenger may forget that the moving body keeps an inverted state while performing feedback control. When the passenger accidentally puts his her feet on the ground the inverted wheel type moving body is inclined in the forward direction due to the movement of the center of mass by the passenger. In such a case the moving body makes the inclined angle back to its original angle for keeping the inverted state. Thus the moving body accelerates in the forward direction and moves forward. As a result the vehicle may hit the feet that are put on the ground. The similar problem occurs not only when the passenger mounts the moving body but also when the transportation object is an inanimate object. In short as the moving body is inclined in the forward direction when the transportation object is dismounted from the moving body the moving body moves forward.

Although it may be possible to deal with such a problem by requiring manufacturers to equip the moving body with a seat belt and requiring the passenger to wear his her seat belt it may be out of the vehicle concept that it is assumed to be prevalent in people s lives. Further if special skills are required for the passenger to prevent the moving in abrupt dismount usability as a vehicle will be reduced. As such according to the related inverted wheel type moving body it is difficult to enhance convenience in dismounting.

The present invention has been made in order to solve such a problem and aims to provide an inverted wheel type moving body which is capable of enhancing convenience and a method of controlling the same.

An inverted wheel type moving body according to a first aspect of the present invention is a moving body that moves in accordance with command input according to manipulation by a manipulator and transports a transportation object the inverted wheel type moving body including a chassis rotationally supporting a wheel a first drive unit rotationally driving the wheel a body provided to mount the transportation object and rotatably supported on the chassis through a support member a sensor provided to judge whether the transportation object dismounts from the body output of the sensor varying depending on states of the transportation object on the body a second drive unit performing overturn preventing operation and a control unit controlling the first drive unit to reduce velocity of the inverted wheel type moving body upon judgment that the transportation object dismounts based on the output from the sensor when the inverted wheel type moving body travels faster than a certain velocity in which the control unit controls the second drive unit to perform the overturn preventing operation after an absolute value of velocity of the inverted wheel type moving body is lower than a threshold value when it is judged that the transportation object dismounts. Accordingly the overturn preventing operation is executed after the velocity is reduced which enhances safety. Thus this moving body can be applied in various places which enhances convenience.

An inverted wheel type moving body according to a second aspect of the present invention is the above described inverted wheel type moving body in which the control unit judges that the transportation object dismounts based on the output from the sensor and the command input and controls the second drive unit to execute the overturn preventing operation when the inverted wheel type moving body travels at or less than the certain velocity. Accordingly it is possible to prevent the false judgment that the object dismounts whereby it is possible to prevent the overturn preventing operation from being executed when it is not desired. Thus convenience can be enhanced.

An inverted wheel type moving body according to a third aspect of the present invention is a moving body that moves in accordance with command input according to manipulation by a manipulator and transports a transportation object the inverted wheel type moving body including a chassis rotationally supporting a wheel a first drive unit rotationally driving the wheel a body provided to mount the transportation object and rotatably supported on the chassis through a support member a sensor provided to judge whether the transportation object dismounts from the body output of the sensor varying depending on states of the transportation object on the body a second drive unit performing overturn preventing operation and a control unit judging that the transportation object dismounts based on the output from the sensor and the command input and controlling the second drive unit to execute the overturn preventing operation when the inverted wheel type moving body travels at or less than the certain velocity. Accordingly it is possible to prevent the false judgment that the object dismounts whereby it is possible to prevent the overturn preventing operation from being executed when it is not desired. Thus convenience can be enhanced.

An inverted wheel type moving body according to a fourth aspect of the present invention is the above described inverted wheel type moving body in which upon judgment that the transportation object dismounts the inverted wheel type moving body sets a target inclination angle that allows the body to incline in a direction opposite to moving direction and the control unit feedback controls the first drive unit in accordance with the target inclination angle. Accordingly the velocity can be promptly reduced.

An inverted wheel type moving body according to a fifth aspect of the present invention is the above described inverted wheel type moving body in which upon judgment that the transportation object dismounts the inverted wheel type moving body sets a torque command that allows the body to incline in a direction opposite to moving direction and the first drive unit rotationally drives the wheel based on the torque command. Accordingly the velocity can be promptly reduced.

An inverted wheel type moving body according to a sixth aspect of the present invention is the above described inverted wheel type moving body in which the inverted wheel type moving body sets drive torque of the wheel to 0 after starting the overturn preventing operation. Accordingly safe dismount can be realized.

An inverted wheel type moving body according to a seventh aspect of the present invention is the above described inverted wheel type moving body in which the inverted wheel type moving body executes the overturn preventing operation by lowering position of center of mass of the body or deploying an overturn preventing member in a forward side of the body. Accordingly it is possible to definitely prevent overturn.

According to an eighth aspect of the present invention there is provided a method of controlling an inverted wheel type moving body the inverted wheel type moving body including a chassis rotationally supporting a wheel a first drive unit rotationally driving the wheel a body provided to mount the transportation object and rotatably supported on the chassis through a support member a sensor provided to judge whether the transportation object dismounts from the body output of the sensor varying depending on states of the transportation object on the body and a second drive unit performing overturn preventing operation the method including a step of judging whether the inverted wheel type moving body travels faster than a certain velocity a step of judging whether the transportation object dismounts based on the output from the sensor when the body travels faster than the certain velocity a step of reducing velocity of the inverted wheel type moving body upon judgment that the transportation object dismounts and a step of controlling the second drive unit to execute the overturn preventing operation after an absolute value of velocity of the inverted wheel type moving body is lower than a threshold value. Accordingly the overturn preventing operation is executed after the velocity is reduced which enhances safety. Thus this moving body can be applied in various places which enhances convenience.

A method of controlling an inverted wheel type moving body according to a ninth aspect of the present invention is the above described method further including steps of judging that the transportation object dismounts based on the output from the sensor and the command input and controlling the second drive unit to operate the overturn preventing operation when the inverted wheel type moving body travels at or less than the certain velocity. Accordingly it is possible to prevent the false judgment that the object dismounts whereby it is possible to prevent the overturn preventing operation from being executed when it is not desired. Thus convenience can be enhanced.

According to a tenth aspect of the present invention there is provided a method of controlling an inverted wheel type moving body the inverted wheel type moving body including a chassis rotationally supporting a wheel a first drive unit rotationally driving the wheel a body provided to mount the transportation object and rotatably supported on the chassis through a support member a sensor provided to judge whether the transportation object dismounts from the body output of the sensor varying depending on states of the transportation object on the body and a second drive unit performing overturn preventing operation the inverted wheel type moving body moving in accordance with command input according to manipulation by a manipulator and transporting a transportation object the method including

a step of judging whether the inverted wheel type moving body travels faster than a certain velocity and

steps of judging that the transportation object dismounts based on the output from the sensor and the command input and controlling the second drive unit to execute the overturn preventing operation when the inverted wheel type moving body travels at or less than the certain velocity. Accordingly it is possible to prevent the false judgment that the object dismounts whereby it is possible to prevent the overturn preventing operation from being executed when it is not desired. Thus convenience can be enhanced.

A method of controlling an inverted wheel type moving body according to an eleventh aspect of the present invention is the above described method including upon judgment that the transportation object dismounts setting a target inclination angle that allows the body to incline in a direction opposite to moving direction and feedback controlling the first drive unit in accordance with the target inclination angle. Accordingly the velocity can be promptly reduced.

A method of controlling an inverted wheel type moving body according to a twelfth aspect of the present invention is the above described method including upon judgment that the transportation object dismounts setting a torque command that allows the body to incline in a direction opposite to moving direction and rotationally driving the wheel by the first drive unit based on the torque command. Accordingly the velocity can be promptly reduced.

A method of controlling an inverted wheel type moving body according to a thirteenth aspect of the present invention is the above described method including setting drive torque of the wheel to 0 after starting the overturn preventing operation. Accordingly safe dismount can be realized.

A method of controlling an inverted wheel type moving body according to a fourteenth aspect of the present invention is the above described method including executing the overturn preventing operation by lowering position of center of mass of the body or deploying an overturn preventing member in a forward side of the body. Accordingly overturn can be definitely prevented.

According to the present invention it is an object to provide an inverted wheel type moving body which is capable of enhancing convenience and a method of controlling the same.

A moving body according to the present embodiment is an inverted wheel type moving body that travels by the inverted pendulum control. The moving body travels to the desired place by driving wheels that contact with the ground. Thus a transportation object that mounts on the body can be transported. In addition the moving body can be maintained at an inverted state by driving the wheels in response to an output from a gyro sensor or the like. Further the moving body is provided with a sensor to judge whether the transportation object is dismounted or not.

Referring to the structure of a moving body according to the present embodiment will be described. is a side view schematically showing the structure of the moving body and FIG. is a front view schematically showing the structure of the moving body .

As shown in the moving body is an inverted wheel type moving body travelling body and includes a right driving wheel a left driving wheel a right chassis a left chassis a right arm a left arm and a body . The body is an upper body unit of the moving body disposed above the right driving wheel and the left driving wheel . Here the travelling direction of the moving body direction perpendicular to the paper in which is drawn is referred to as front back direction and a direction perpendicular to the front back direction in the horizontal plane is referred to as lateral direction transverse direction . Thus is a diagram of the moving body when seen from the front side in the travelling direction and is a diagram of the moving body when seen from the left side.

The right arm and the left arm are swing arms including joints. When the moving body travels normally the right arm and the left arm are extended as shown in . Further the right arm and the left arm are driven in accordance with the inclination angle of the body . Specifically when the body is inclined in the lateral direction in accordance with the inclination angle of the ground one of the arms is driven to level the body . For example assume a situation in which only the right driving wheel runs on a step while the moving body is travelling on the level ground or a situation in which the moving body is travelling from the level ground to the inclined ground where the right side is higher than the left side. In this case the height with respect to the horizontal direction varies between the right driving wheel and the left driving wheel . In summary the right driving wheel becomes higher than the left driving wheel . In this case the right arm is shortened to adjust the inclination angle of the body . For example the joint of the right arm is driven to bend the right arm into a dog leg shape. Thus the right arm becomes shorter and the body can be horizontal in the transverse direction lateral direction . Further the right arm and the left arm perform overturn preventing operation when a passenger dismounts. Note that the structure of the right arm and the left arm will be described later.

On the side surface side of the right chassis the right driving wheel that contacts with the ground is provided. On the side surface side of the left chassis the left driving wheel that contacts with the ground is provided. The right driving wheel and the left driving wheel are a pair of wheels that rotate on the same axis. The moving body moves by the rotation of the right driving wheel and the left driving wheel that contact with the ground.

Between the right driving wheel and the right arm the right chassis is disposed. The right chassis includes a right mount . Between the right arm and the right driving wheel the right mount is disposed. The right mount is fixed to the side end of the right arm . The right chassis rotationally supports the right driving wheel through an axle . The right driving wheel is fixed to a rotation axis C of a right wheel drive motor through the axle . The right wheel drive motor is fixed into the right mount and functions as a drive unit actuator for the wheel. In short the right wheel drive motor rotationally drives the right driving wheel .

Between the left driving wheel and the left arm the left chassis is disposed. The left chassis includes a left mount . Between the left arm and the left driving wheel the left mount is disposed. The left mount is fixed to the side end of the left arm . The left mount rotationally supports the left driving wheel through an axle . The left driving wheel is fixed to a rotation axis C of a left wheel drive motor through the axle . The left wheel drive motor is fixed into the left mount and functions as a drive unit actuator for the wheel. In short the left wheel drive motor rotationally drives the left driving wheel . Between the right driving wheel and the left driving wheel the right chassis and the left chassis are disposed. The right chassis may be fixed to the left chassis in order to dispose the right driving wheel and the left driving wheel on the same axis.

The right wheel drive motor and the left wheel drive motor are for example servomotors. The actuators for the wheels are not limited to electrical motors and actuators using air pressure or oil pressure may also be used.

The right mount further includes a right wheel encoder . The right wheel encoder detects the rotation angle of the right driving wheel as the rotation amount of the right driving wheel . The left mount includes a left wheel encoder . The left wheel encoder detects the rotation angle of the left driving wheel as the rotation amount of the left driving wheel .

The left arm is mounted to the side end of the left driving wheel through the left mount . The left arm includes an upper joint an upper link a lower joint and a lower link . The upper link and the lower link are rod shaped members. The upper link and the lower link are rigid bodies having substantially the same length. The upper joint and the lower joint are rotary joints.

The lower link is connected to the left mount . In short the left mount is mounted to the lower end of the lower link . The left mount rotatably supports the lower link . Further the lower joint is disposed to the lower link . The lower link is connected to the upper link through the lower joint . In summary the lower joint disposed to the upper end of the lower link is disposed to the lower end of the upper link .

The lower joint includes a lower joint motor . When the lower joint motor is driven the upper link rotates. When the lower joint motor is driven the angle of the upper link with respect to the lower link varies. As will be shown the lower joint is disposed in the middle of the left arm . In summary the lower joint is disposed between the upper link and the lower link . The upper link is fixed to a rotation axis C of the lower joint motor .

The upper joint is provided in the upper end of the upper link . The upper joint connects the upper link and the body . The left arm is connected to the body through the upper joint . As stated the upper joint is provided in the upper end of the left arm . Further the upper joint includes an upper joint motor . The body is mounted to the left arm through the upper joint motor . When the upper joint motor is driven the body rotates. In summary when the upper joint motor is driven the angle of the body with respect to the upper link varies. The body is fixed to a rotation axis C of the upper joint motor .

When the upper joint and the lower joint are driven the posture of the body varies. In summary the left arm is a link mechanism that connects the body with the left driving wheel . Thus the lower end side of the left arm is connected to the rotation axis C of the left driving wheel and the upper end side thereof is connected to the rotation axis C of the body . The left arm functions as an arm mechanism of two degree of freedom including two rotary joints. In summary the left arm functions as an arm mechanism including a plurality of joints and connects the body with the right chassis .

The longitudinal direction of the left arm is perpendicular to the rotation axis C. Thus the longitudinal direction of the lower link and the rotation axis C are perpendicular to each other. When the moving body travels normally the upper link and the lower link are provided along with the vertical direction. Thus the rotation angle of the lower joint motor is fixed so that the upper link and the lower link become parallel to each other. The body is rotationally supported with respect to the rotation axis C through the left arm . The rotation axis C and the rotation axis C are disposed in parallel with a distance corresponding to the length of the lower link . The rotation axis C and the rotation axis C are disposed in parallel with a distance corresponding to the length of the upper link . When the moving body travels normally the rotation axis C is parallel with the rotation axis C.

The right arm is mounted to the side end of the right driving wheel through the right mount . The right arm includes an upper joint an upper link a lower joint and a lower link . The upper link is connected to the body through the upper joint . Further the lower link is connected to the right chassis . Further the lower link and the upper link are connected through the lower joint . The lower joint includes a lower joint motor . The upper joint includes an upper joint motor . As stated above the right arm also functions as an arm mechanism of two degrees of freedom including two joints as is the same as the left arm . As the structure of the right arm is the same as that of the left arm the description will be omitted. Note that the rotation axis of the lower joint motor of the right arm is a rotation axis C. Further the upper joint motor rotates about the rotation axis C.

When the upper joint and the lower joint of the right arm are driven the posture of the body varies. In summary the right arm is a link mechanism that connects the body with the right driving wheel . Thus the lower end side of the right arm is connected to the rotation axis C of the right driving wheel and the upper end side thereof is connected to the rotation axis C of the body . The right arm functions as an arm mechanism of two degrees of freedom including two rotary joints. In summary the right arm functions as an arm mechanism including a plurality of joints and connects the body with the right chassis .

The longitudinal direction of the right arm is perpendicular to the rotation axis C. Thus the longitudinal direction of the lower link and the rotation axis C are perpendicular to each other. When the moving body travels normally the upper link and the lower link are arranged on the same axis. In summary the rotation angle of the lower joint motor is fixed so that the upper link and the lower link are collinearly arranged when seen from the side surface. The body is rotationally supported with respect to the rotation axis C through the right arm . Further when the moving body travels normally the rotation axis C the rotation axis C and the rotation axis C are parallel with one another.

Now the upper joint motor of the right arm and the upper joint motor of the left arm are arranged along with the vertical direction. In summary the upper joint motor of the right arm and the upper joint motor of the left arm include a common rotation axis C. Further when the moving body travels normally the lower joint motor of the right arm and the lower joint motor of the left arm are arranged on the same axis. In summary the rotation axis C of the upper joint motor has the same height as that of the rotation axis C of the upper joint motor .

As stated above the upper joint motor and the lower joint motor are mounted to the right arm and the upper joint motor and the lower joint motor are mounted to the left arm . The upper joint motors and vary the angle of the body with respect to the upper links and . The lower joint motor varies the angle of the upper link with respect to the lower link and the lower joint motor varies the angle of the upper link with respect to the lower link . In summary the upper joint motor and the lower joint motor are drive units actuators controlling the angle of the joint of the right arm . The upper joint motor and the lower joint motor are drive units actuators controlling the angle of the joint of the left arm . Thus the position of the body with respect to the right chassis and the left chassis can be varied by driving the right arm and the left arm . The upper joint motors and and the lower joint motors and are for example servomotors that control the posture angle of the body . Note that the kinetic power of the motors may be transmitted through gears belts pulleys and the like. The height of the body is varied by driving each of the motors. Thus the vehicle height of the moving body can be varied.

When the upper joint motor and the upper joint motor are driven the angle of the pedestal with respect to the right arm and the left arm varies. Thus the pedestal can be rotated back and forth with the rotation axis C being as a rotation center. The rotation axis C is parallel to the rotation axes C and C and positioned above the rotation axes C and C. The right arm is provided between the rotation axis C and the rotation axis C. The left arm is provided between the rotation axis C and the rotation axis C. The lower joint motor rotates the upper link about the rotation axis C with respect to the lower link . The lower joint motor rotates the upper link about the rotation axis C with respect to the lower link . Further the rotation axis C is positioned between the rotation axis C and the rotation axis C and the rotation axis C is positioned between the rotation axis C and the rotation axis C. The upper joint motor and the upper joint motor are provided in the rotation axis C and serve as swing arms controlling the posture by the right arm and the left arm . Note that when the moving body travels normally the rotation axis C to the rotation axis C are parallel which means that the axes are horizontal with the lateral direction of the moving body .

The body includes a pedestal a column a gyro sensor and a passenger seat . The flat plate like pedestal is mounted to the right arm and the left arm through the upper joint motor and the upper joint motor respectively. The right arm and the left arm are provided at the opposing side surfaces of the pedestal . In short the pedestal is disposed between the right arm and the left arm .

The pedestal contains a battery module and a sensor . The sensor is for example an optical obstacle detection sensor that outputs a detection signal upon detection of an obstacle in front of the moving body . The sensor may include other sensors in place of the obstacle sensor. For example the sensor may be an acceleration sensor. As a matter of course two or more sensors may be used as the sensor . The sensor detects variations that vary in accordance with the state of the moving body . For example the sensor measures the velocity of the moving body in translational direction. The battery module supplies electrical power to the sensor the gyro sensor the right wheel drive motor the left wheel drive motor the upper joint motor the upper joint motor the lower joint motor the lower joint motor a control unit and the like.

The gyro sensor is provided on the pedestal of the body . The gyro sensor detects an angular velocity with respect to the inclination angle of the body . In this case the term inclination angle of the body means the degree of the inclination of the position of the center of mass of the moving body with respect to the vertical axis extending upwardly from the axles and . For example the inclination angle of the body is defined to be positive when the body is inclined forward in the travelling direction of the moving body and defined to be negative when the body is inclined backward in the travelling direction of the moving body .

Further in addition to the front back direction in the travelling direction an inclination angle velocity in the lateral direction is also measured by using the three axis roll pitch and yaw gyro sensor . In this manner the gyro sensor measures variations in the inclination angles of the pedestal as the inclination angle velocities of the body . As a matter of course the gyro sensor may be mounted in other places. The inclination angle velocities measured by the gyro sensor vary in accordance with variations in the posture of the moving body . That is the inclination angle velocities are variations that vary in accordance with the position of the center of mass of the body with respect to the positions of the axles. Accordingly when the inclination angles of the body vary abruptly by a disturbance or the like the inclination angle velocity values become larger. The inclination angle of the body is specified based on the inclination angle velocity detected by the gyro sensor . The inclination angle in the front back direction as a basis of the vertical direction is called body inclination angle.

The column is provided near the center of the pedestal . The column supports the passenger seat . That is the passenger seat is fixed to the pedestal through the column . The passenger seat has a chair like shape on which the passenger can be seated.

A manipulation module is provided on the side surface of the passenger seat . A manipulation lever not shown and a brake lever not shown are provided on the manipulation module . The manipulation lever is a manipulation member that is used by the passenger to adjust the travelling velocity and the travelling direction of the moving body . The passenger can adjust the travelling velocity of the moving body by adjusting the manipulation amount of the manipulation lever. Further the passenger can specify the travelling direction of the moving body by adjusting the manipulation direction of the manipulation lever. The moving body can perform forward movements stops backward movements left turns right turns left rotations and right rotations in accordance with manipulations applied to the manipulation lever. The passenger can put a brake on the moving body by tilting the brake lever. The moving body travels in the direction perpendicular to the axles and . As the manipulator manipulates the manipulation module command input input command value in accordance with the manipulation by the manipulator is input. This command input corresponds to the target velocity or the target accelerations. For example forward backward command is input to the control unit by tilting the manipulation lever in the front back direction.

A pressure sensitive sensor is provided on the seating surface of the passenger seat . A passenger is seated on the pressure sensitive sensor . Thus the passenger is seated on the passenger seat with contacting with the pressure sensitive sensor . The pressure sensitive sensor detects the pressure that is applied by the weight of the passenger. The pressure detected by the pressure sensitive sensor is called seat pressure.

The pressure sensitive sensor and the gyro sensor are provided to judge whether the passenger dismounts. For example when the moving body travels normally a certain pressure is applied to the pressure sensitive sensor by the weight of the passenger. On the other hand as the passenger half rises from the seat when dismounting the passenger is apart from the pressure sensitive sensor . Thus the pressure applied to the pressure sensitive sensor is reduced. It is thus possible to judge whether the passenger dismounts based on the output from the pressure sensitive sensor . More specifically the seat pressure detected by the pressure sensitive sensor and the threshold value are compared. When the seat pressure is smaller than the threshold value it is judged that the passenger dismounts.

Alternatively it is judged whether the passenger dismounts by the body inclination angle estimated based on the output from the gyro sensor . For example when the body inclination angle in the front back direction is large it is judged that the passenger dismounts. More specifically the passenger stoops when trying to dismount. In such a case the body is inclined in the forward direction and the body inclination angle becomes larger. Thus it is possible to judge whether the passenger dismounts based on the body inclination angle estimated by the gyro sensor . More specifically the body inclination angle and the threshold value are compared. When the body inclination angle is larger than the threshold value it is judged that the passenger dismounts. In summary it is judged that the passenger dismounts when the body is inclined forward in the moving direction from the vertical direction for more than certain degrees.

As will be understood from the above description the pressure sensitive sensor and the gyro sensor are provided to judge whether the passenger dismounts. The outputs of the gyro sensor and the pressure sensitive sensor vary depending on the states of the passenger that is the transportation object. Accordingly it is possible to judge whether the passenger dismounts based on the output of the gyro sensor or the pressure sensitive sensor . As a matter of course it is also possible to judge whether the passenger dismounts using both of the gyro sensor and the pressure sensitive sensor . Upon judgment of dismount the mode is changed from the normal travelling mode in which normal travelling processing is performed to the overturn preventing mode to prevent overturn. The processing for dismounting will be described later.

Furthermore the control unit is mounted on the backrest unit of the passenger seat . The control unit controls the travelling movement of the moving body by controlling the right wheel drive motor and the left wheel drive motor in accordance with the manipulations carried out on the manipulation module by the passenger. The seating surface of the passenger seat is disposed in parallel to the upper surface of the pedestal . The control unit controls the right wheel drive motor and the left wheel drive motor in accordance with the manipulations carried out on the manipulation module . In this manner the right wheel drive motor and the left wheel drive motor are driven in accordance with the command input according to the manipulations carried out on the manipulation module .

The control unit includes a CPU Central Processing Unit a ROM Read Only Memory a RAM Random Access Memory a communication interface and the like and controls various operations of the moving body . Further the control unit carries out various control in accordance with a control program stored for example in the ROM. The control unit controls the right wheel drive motor and the left wheel drive motor independently from each other by using well known feedback control at the predetermined angle. The right wheel drive motor and the left wheel drive motor rotate according to the command input in accordance with the manipulations in the manipulation module . For example the manipulation module is equipped with the sensor measuring the tilt angle of the manipulation lever. The manipulation module calculates the accelerations and the target velocity by the tilt angle of the manipulation lever and the variations of the tilt angle. More specifically the accelerations and the target velocity increase as the tilt angle of the manipulation lever increases. Then the right wheel drive motor and the left wheel drive motor are controlled so as to be able to achieve desired accelerations and target velocity.

Further the output signal from the gyro sensor or the pressure sensitive sensor is input to the control unit . The control unit judges whether the passenger dismounts based on the output from the pressure sensitive sensor . More specifically the output value from the pressure sensitive sensor is compared with the threshold value. When the output value is lower than the threshold value it is judged that the passenger dismounts.

Furthermore the control unit controls the angle of each joint of the right arm and the left arm . Each joint is independently driven. The posture of the moving body varies by driving the right arm and the left arm . In short the control unit controls the height of the moving body and the inclination angle of the lateral direction.

For example when the right arm or the left arm is driven the pedestal can be inclined in the lateral direction. In short it is possible to autonomously swing and incline the body of the moving body in a roll direction about the longitudinal axis of the moving body parallel with a forward propelling direction . For example the upper joint motor and the lower joint motor of the right arm are driven to bend the right arm into the dog leg shape. Specifically the upper joint motor and the lower joint motor are rotated in an opposite direction with each other by a certain angle. Thus the rotation axis C and the rotation axis C are close to each other. The vehicle height of the right side of the moving body becomes lower. As such by independently driving the right arm and the left arm the ride quality for the passenger can be improved. To be more specific the body can level off in the lateral direction even with the inclination or the step on the ground. In short it is possible to prevent the body from being inclined in the lateral direction and to improve the ride quality.

For example the right arm and the left arm are extended during a time at which the moving body travels on the level ground. In other words the distance from the rotation axis C to the rotation axis C and the distance from the rotation axis C to the rotation axis C are made equal to each other. Accordingly the rotation axis C levels off and the body levels off in the lateral direction. When the right driving wheel runs on a step while the moving body is travelling on the level ground or when the moving body is travelling from the level ground to the inclined ground the right driving wheel becomes higher than the left driving wheel . Then the rotation axis C inclines in the right upward direction and the body is inclined in the lateral direction. In order to prevent the body from being inclined in the lateral direction the right arm is driven as stated above. Then the right arm is bent into the dog leg shape and the rotation axis C and the rotation axis C are close to each other. On the other hand as the left arm is extended the rotation axis C is away from the rotation axis C. As such the inclination of the rotation axis C varies and the body can level off.

More specifically it is detected by the output from the gyro sensor that the body is inclined in the lateral direction. The control unit drives one of the arms according to the output from the gyro sensor . In other words the control unit drives the arm which is made higher by the inclination. For example when the right side of the body is higher the control unit controls each joint of the right arm . Then the lower joint motor and the upper joint motor are driven to bend the right arm . Further the right arm is bent by the length corresponding to the inclination angle of the body . In other words the upper joint and the lower joint are driven by the rotation angle corresponding to the inclination angle of the body in the lateral direction. Thus the rotation axis C levels off and the body levels off in the lateral direction. As a matter of course when the left side of the body is higher the left arm is driven in the same way. As such the right arm and the left arm serve as swing arms that correct the inclination of the body in the horizontal direction.

Furthermore when the passenger dismounts the control unit drives both of the right arm and the left arm to execute the overturn preventing operation. For example the right arm and the left arm are bent into the dog leg shape from a state shown in in which the right arm and the left arm are extended. Accordingly as shown in the body moves downwardly which lowers the vehicle height. are side views describing the operation of the arms of the moving body . Here each joint is rotated in a way that the height of the rotation axis C is equal to the height of the rotation axis C. Accordingly the rotation axis C and the rotation axis C are in the same horizontal plane. Thus the position of the center of mass of the body becomes lower while keeping the body horizontal in the lateral direction. In other words the position of the center of mass of the body approaches the rotation axes C and C. The vehicle height of the moving body can thus be lowered. In summary the highest part of the body approaches the ground and the seating surface is lowered. Thus the center of mass of the body is lowered thereby preventing the body from overturning.

Further in a state shown in the lower joint projects in the forward direction. The lower joint that projects anterior to the body serves as an overturn preventing unit that prevents overturn in the forward direction. In summary when the moving body is greatly inclined forward the lower joint which is the overturn preventing unit contacts with the ground. Thus overturn of the body can be prevented. Further the lower joint projects in the backward direction. The lower joint that projects posterior to the body serves as an overturn preventing unit that prevents overturn in the backward direction. In summary when the moving body is greatly inclined backward the lower joint which is the overturn preventing unit contacts with the ground. Thus overturn of the body can be prevented. Accordingly by deploying the overturn preventing unit in the front back direction and lowering the position of the center of mass of the body the overturn preventing operation is performed.

The right arm and the left arm are rotated by the same angle in opposite directions with each other. More specifically when the operation moves from to the lower joint rotates in a counterclockwise direction while the lower joint in a clockwise direction. Further the rotation angles of the lower joint and the lower joint are made the same. Furthermore the upper joint rotates in the clockwise direction and the upper joint in the counterclockwise direction. Then the rotation angles of the upper joint and the upper joint are made the same. Accordingly the configuration is obtained in which the right arm and the left arm are inverted to each other. In other words when the moving body is seen from the lateral direction with the state shown in the right arm and the left arm are inverted with respect to the vertical line that extends from the rotation axis C to the ground. Then the rotation axis C is arranged on the axle that connects the rotation axis C and the rotation axis C. Further each joint is driven in synchronization with each other. Thus it is possible to prevent the body from being inclined in the lateral direction which enhances the ride quality. The stability can thus be improved.

Furthermore even when the arms are bent as shown in the lower joints and are made higher than the axles C and C. In summary as the lower joints and are projected in the forward and the backward directions the parts which firstly contact with the ground upon occurrence of the overturn can be made higher. As such the lower joints and are projected in the forward and the backward directions above the axles C and C. Accordingly the overturn can be prevented that may occur when the lower joints and of the arms and run on the ground. In summary the lower joints and that firstly contact with the ground upon occurrence of overturn are arranged to be apart from the ground with a certain distance. This is due to the fact that the lower joints and are projected in the forward and backward of the body by bending the arms. In other words by optimizing the length of the both arms and the angle of the joints the clearance of the lower joints and against the ground can be maintained. Accordingly overturn due to running on can be prevented even when the lower joints and are projected anterior and posterior to the body . Thus the overturn can be prevented at the ground with a step or the like. Alternatively the impact may be absorbed by providing an elastic body at a position that contacts with the ground.

When the passenger dismounts from the passenger seat variations of the position of the center of mass of the body in the front back direction increases. In summary the operation of the passenger greatly varies the position of the center of mass of the body . Thus it becomes difficult to keep inverted state and the body becomes unstable. Thus by executing the overturn preventing operation as above even when the position of the center of mass of the body greatly varies when dismounting overturn can be prevented. Accordingly prompt dismount can be possible and convenience when dismounting can be improved. Even when the passenger dismounts accidentally or suddenly overturn can be prevented thereby enhancing convenience.

When dismounting from the body the passenger moves in the forward direction from the passenger seat . At this time the body inclines in the forward direction which increases the body inclination angle. Thus when feedback control is performed to keep the inverted state the body is accelerated and hits against the passenger. The control unit performs the processing to prevent such a case. This processing will be described later.

Now the control by the control unit will be described with reference to . is a block diagram describing the control of the control unit . First processing of performing the normal travelling will be described. As shown in the control unit includes a travel control module and a posture control module . The control unit controls the travel control module and the posture control module in an integrated manner. The travel control module includes amplifiers controlling the right wheel drive motor and the left wheel drive motor . The travel control module outputs drive signals to the right wheel drive motor and the left wheel drive motor and performs feedback control of the right driving wheel and the left driving wheel . More specifically measured values obtained by the right wheel encoder and the left wheel encoder are input to the travel control module . Further the inclination angle velocity obtained by the gyro sensor is input to the travel control module so that the inverted state becomes stable. Furthermore command input corresponding to the manipulations carried out on the manipulation module is input to the travel control module . Then the travel control module drives the right wheel drive motor and the left wheel drive motor based on the measured values the command input and the inclination angle velocity. In this manner the travel control module performs feedback control of the right driving wheel and the left driving wheel . As a result the moving body moves in accordance with the manipulations carried out on the manipulation module . As a result the moving body travels stably in the inverted state. In this case a well known control method can be employed as the feedback control.

For example when the moving body travels normally the target inclination angle is set to 0 to keep the inverted state. In summary the inclination angle in which the right arm and the left arm are in the vertical direction is set as the target inclination angle. Further the current body inclination angle is estimated from the output of the gyro sensor . An invert control value is calculated by multiplying a difference between the target inclination angle and the current body inclination angle by a certain feedback gain. Further the target velocity is calculated by the command input in accordance with the input from the manipulation module . Further the current velocity of the moving body is estimated from the outputs of the encoders and . Then the movement control value is calculated by multiplying a difference between the target velocity and the current velocity by a certain feedback gain. Then by adding the movement control value and the invert control value the drive control value to drive the right wheel drive motor and the left wheel drive motor is calculated. Then the right wheel drive motor and the left wheel drive motor are driven at a drive torque based on the drive control value. Accordingly the travel control module sets the target inclination angle and the target velocity as command values and performs feedback control in accordance with the command values.

The posture control module controls the posture of the moving body . That is the posture control module includes amplifiers that drive the motors of each joint of the right arm and the left arm . The posture control module outputs control signals to control the posture of the right arm and the left arm . More specifically a detection signal indicating the inclination angle velocity of the body is input to the posture control module from the gyro sensor . In summary the inclination angle velocity values of the body detected in the gyro sensor are input to the posture control module . Then it is detected by the inclination angle velocity detected at the gyro sensor that the body is inclined in the lateral direction. When the body is inclined in the lateral direction the right arm or the left arm is driven. In this case the body drives the arm which is higher to correct the inclination angle. In short the posture control module controls one of the arms so as to cancel out the inclination angle. Thus the variations of the inclination angle in the lateral direction decreases which makes it possible to stably travel the vehicle. It is possible to improve the ride quality for the passenger.

Further when the passenger dismounts the posture control module controls driving of the right arm and the left arm . Accordingly the vehicle height can be made lower. In other words the state is changed from the one shown in to the one shown in and the position of the center of mass of the body is lowered. The outputs from the pressure sensitive sensor and the gyro sensor are input to the control unit . The control unit includes a judgment unit to judge whether the passenger dismounts. The judgment unit judges whether the passenger dismounts based on the outputs from the pressure sensitive sensor and the gyro sensor . More specifically the control unit estimates the body inclination angle based on the output from the gyro sensor . Then the body inclination angle and the threshold value are compared. When the body inclination angle exceeds the threshold value it is judged that the passenger dismounts. In summary when the body is greatly inclined in the front back direction it is judged that the passenger dismounts. Alternatively it is judged that the passenger dismounts when the seat pressure detected by the pressure sensitive sensor becomes lower than the threshold value.

Next the control performed when the passenger dismounts will be described with reference to . is a flow chart showing the control method as above. A control cycle to perform dismounting processing for dismounting will be described with reference to . In other words the control performed when the mode is changed from the normal travelling mode to the overturn preventing mode when the passenger dismounts will be described. First the body inclination angle when the moving body travels is estimated step S . The body inclination angle can be estimated by integrating the inclination angle velocities output from the gyro sensor . The body inclination angle is for example estimated at a certain cycle. Then the velocity of the moving body and the threshold value A are compared step S . In short it is judged whether the moving body travels at or more than a certain velocity. For example judgment is made based on the outputs from the sensor or the encoders and . First a case will be described in which the velocity of the moving body does not exceed the certain velocity.

When the velocity of the moving body is lower than the threshold value A the body inclination angle and the threshold value B are compared step S . In short it is judged whether the inclination angle in the front back direction is equal to or more than the threshold value B. For example when the direction of the right arm and the left arm greatly tilts from the vertical direction the body inclination angle exceeds the threshold value B. When the body inclination angle does not exceed the threshold value B it is judged that the passenger does not dismount. In this case normal processing is performed step S and the process goes to the next cycle. In short the processing to perform normal travelling is performed and the process goes back to step S.

When the body inclination angle exceeds the threshold value B it is judged that the passenger may dismount. More specifically when trying to dismount the passenger moves his her weight on the body . Thus the body inclination angle increases. In such a case it is judged that the passenger may dismount. When the body inclination angle exceeds the threshold value B it is judged whether there is forward backward command input step S . In summary it is judged whether there is forward backward command input based on the command input from the manipulation module . More specifically when the manipulation lever tilts in the forward or backward direction it is judged that there is forward backward command input. When it is judged that there is forward backward command input it is judged that the passenger does not dismount even when the body inclination angle exceeds the threshold value B. Specifically when there is forward backward command input the moving body accelerates or decelerates according to the forward backward command input. Thus the body inclination angle may exceed the threshold value B. Thus it is judged that the passenger does not dismount when there is forward backward command input even when the body inclination angle exceeds the threshold value B. In such a case the normal processing is performed step S and the process goes to the next cycle.

When there is no forward backward command input it is judged that the passenger dismounts step S . Then the command value that makes the body move in the direction opposite to the travelling direction is set step S . In other words the target inclination angle that makes the body incline backwardly against the moving direction is set. Thus the moving body promptly decelerates. More specifically the target inclination angle is shifted backwardly from 0 and the target velocity is set to 0. Accordingly the body is controlled to incline in the direction opposite to the travelling direction. Thus the target inclination angle is set to the negative value so that the body is inclined in the backward direction. The travel control module performs control in accordance with the target inclination angle and the target velocity. By changing the target inclination angle and the target velocity the body can promptly decelerate. The target inclination angle that makes the body move in the direction opposite to the travelling direction is set. The target inclination angle such as an angle inverted the body inclination angle when it is judged as dismount with respect to the vertical direction are applied. The body that is inclined in the forward direction with respect to the travelling direction is gradually inclined backwardly.

It is also possible to set torque command that allows the body to incline in the direction opposite to the moving direction upon judgment that the transportation object dismounts. The motors rotate the right driving wheel and the left driving wheel based on this torque command. In summary the drive torque of the motors and is set as the torque command value so as to rotationally drive the right driving wheel and the left driving wheel . Thus as is similar to the above description the moving body inclines in the backward direction and promptly decelerates. Then after setting the torque command the control unit feedback controls the motors and to keep the stable inverted state. For example the control unit rotates the right driving wheel and the left driving wheel at torque command that allows the moving body to incline in the direction opposite to the moving direction for a predetermined period that is set in advance. Thereafter the feedback control is performed to keep the stable inverted state. As such the moving body can promptly decelerate also by applying the torque command instead of the target inclination angle.

Then the absolute value of the velocity of the moving body is compared with the threshold value D and the body inclination angle is compared with the threshold value E step S . When the absolute value of the velocity becomes smaller than the threshold value D and the body inclination angle is smaller than the threshold value E the overturn preventing operation is performed step S . As such the overturn preventing operation is performed when the velocity is included in a certain range and the body inclination angle is included in a certain range. Note that the threshold value D with respect to the absolute value of the velocity is smaller than the threshold value A of step S. When at least one of the absolute value of the velocity and the body inclination angle is not included in a certain range the process goes back to step S. Then the processing of steps S and S is repeated until when the absolute value of the velocity becomes smaller than the threshold value D and the body inclination angle becomes smaller than the threshold value E. At this time the command value may be constant or may be changed according to the velocity.

In step S the right arm and the left arm are driven so as to make the vehicle height lower as shown in . When each joint of the right arm and the left arm rotates to a certain angle the overturn preventing operation is completed. Upon completion of the overturn preventing operation the drive torque is set to 0 step S . In summary the drive torque is immediately set to 0. The moving body moves by inertia resulting in the moving body stopping the movement. When the moving body that has moved at or less than a certain velocity sets the drive torque to 0 the velocity is lower than the threshold value D. Thus after setting the drive torque to 0 the inertia force applied to the moving body becomes almost 0. Accordingly the moving body hardly moves after step S.

Note that the operation of steps and S may be performed in parallel. In summary the drive torque is reduced while performing the overturn preventing operation. In this case for example the drive torque is reduced immediately after the overturn preventing operation is started. It is preferable to set the drive torque to 0 after the overturn preventing operation is completed. Alternatively the drive torque may be set to 0 after ensuring the completion of the overturn preventing operation. Thus it is judged whether the passenger dismounts based on presence or absence of forward backward command input.

Now the operation of the moving body in steps S and S will be described in detail with reference to . are diagrams in which the operation of the moving body in the translational direction is modeled. In the position of the center of mass of the body is shown as a representative example. In it is assumed that the moving body moves in left direction. Further the translational movement in the front back direction will be described. In this example the body inclination angle becomes positive with a state in which the body is inclined forward of the moving direction. When the moving body moves normally as shown in the body is inclined in the forward direction. In other words the position of the center of mass of the body is shifted anterior to the rotation axes C and C in the moving direction in the front back direction. In this case the body inclination angle is a positive value. When the moving body travels normally the target inclination angle is set to 0. In the target inclination angle is shown by an alternate long and short dash line. The control unit performs feedback control so that the position of the center of mass of the body is just above the axle. Thus the right driving wheel and the left driving wheel are rotated to move in the front direction. In summary the rotation of the right driving wheel and the left driving wheel is feedback controlled in accordance with the target inclination angle. Note that when there is forward backward command input the rotation is feedback controlled to accelerate or decelerate the body based on the forward backward command input. The moving body moves as stated above when it travels normally.

When the command value is set in step S the target inclination angle varies. More specifically the target inclination angle changes from 0 to a negative value. In this case the moving body is accelerated so that the position of the center of mass of the body is posterior to the axle. In short the body is feedback controlled so as to incline in the backward direction. Thus forward drive torque is applied and the angular velocities of the right driving wheel and the left driving wheel are increased. Note that the forward drive torque is the torque to increase accelerations in the forward side of the moving direction. Here the target velocity of the moving body is set to 0. Thus when the angular velocities of the right driving wheel and the left driving wheel increase and the body inclination angle reaches around 0 the velocity reaches around 0. When the moving body is accelerated the velocity is made lower in accordance with the target velocity 0. Accordingly as the body inclination angle gradually approaches the backward inclined posture in accordance with the target inclination angle the velocity is decreased. Thus as shown in the position of the center of mass of the body is moved on the axle. In the state shown in the absolute value of the velocity becomes smaller than the threshold value D and the body inclination angle becomes smaller than the threshold value E. Then the overturn preventing operation is performed from the state shown in .

By performing such a control the overturn preventing operation is executed after the moving body sufficiently decelerates. In other words the right arm and the left arm are driven after the body inclination angle is decreased and the moving body is almost stopped. Accordingly the moving body hardly moves with a state in which the vehicle height is lowered. Accordingly it is possible to prevent the right arm and the left arm protruding in the front back direction from hitting against the obstacle. For example it is possible to prevent the right arm or the left arm from running on the ground or hitting against the wall. Accordingly it is possible to safely stop the body when the passenger dismounts. Furthermore even when the passenger tries to dismount the moving body does not keep accelerating. In summary as the velocity is promptly decreased the inertia force becomes almost 0. The drive torque becomes 0 after the inertia force becomes almost 0. This prevents the moving body that is unstable due to the dismount by the passenger from moving by inertia force. This realizes safe stop not only for the passenger but also for surrounding people. Thus the area where the moving body may be applied can be made wider thereby enhancing convenience. In summary as safety is enhanced safe stop can be realized even at a place where there are a lot of people. Accordingly this moving body can be applied in various places which enhances convenience.

Although the case in which there is no command input is judged as dismount in the above example the case in which there is command input may be judged as dismount. For example when the command input command input value is equal to or less than a certain value it may be judged that the passenger dismounts. Alternatively it may be judged that the passenger dismounts when there is command input of stop.

Next description will be made on a case in which the velocity of the moving body exceeds the certain velocity. When the moving body exceeds the certain velocity the seat pressure measured in the pressure sensitive sensor and the threshold value F are compared step S . When the seat pressure is lower than the threshold value F it is judged that the passenger dismounts step S . In summary when the seat pressure is lower than the threshold value F it is assumed that the passenger has moved his her weight for dismounting. On the other hand when the seat pressure is equal to or more than the threshold value F normal processing is performed step S and the process moves to the next cycle.

When it is judged that the seat pressure is lower than the threshold value which means the passenger dismounts the command value that makes the body move in the direction opposite to the moving direction is set step S . Thus the moving body promptly decelerates. Similarly to step S the target inclination angle and the target velocity are set. Specifically the target inclination angle is made negative and the target velocity is made 0. Further as the velocity of the moving body is higher in step S than in step S the absolute value of the target inclination angle is made higher than that in step S. In short the deviation of the inclination angle with respect to the vertical direction is made larger. In other words the target inclination angle is set that allows further inclination in the backward direction compared with step S. The absolute value of the target inclination angle in step S becomes larger than the absolute value of the target inclination angle of step S. Thus the absolute value of the target inclination angle is changed according to the velocity. More specifically the value of the target inclination angle set in dismounting is changed in accordance with the velocity of the moving body . Then the target inclination angle that allows further inclination in the backward of the moving direction is set as the velocity is higher. By performing such a control prompt deceleration is made possible. Note that when the torque command is applied instead of the target inclination angle the torque command may be changed according to the velocities. As a matter of course the torque command may be a certain value.

Then the threshold value and the absolute value of the velocity of the moving body are compared and the body inclination angle is compared with the threshold value step S . When the absolute value of the velocity becomes smaller than the threshold value D and the body inclination angle is smaller than the threshold value E the overturn preventing operation is executed step S . In summary when the velocity is included in a certain range and the body inclination angle is included in a certain range the overturn preventing operation is executed. Then after executing the overturn preventing operation the drive torque is set to 0 step S . As step S to step S are similar to step S to step S detailed description will be omitted.

By performing such a control the similar effect as above can be obtained. For example the velocity of the moving body that has moved at or more than the threshold value A becomes lower than the threshold value D at a timing at which the drive torque is made 0. Thus after setting the drive torque to 0 inertia force applied to the moving body becomes almost 0. Thus safety level can be improved and higher convenience can be realized. Further it is possible to promptly decelerate the moving body that moves at or more than a certain velocity. Thus prompt dismount can be realized which enhances convenience. Further when the velocity exceeds the threshold value A it is judged whether the passenger dismounts using the seat pressure. Accordingly it is possible to judge whether the passenger dismounts more accurately. Thus convenience can be enhanced.

Note that in the first embodiment the overturn preventing operation may be promptly performed when it is judged in step S that the velocity does not exceed the threshold value A. In short the processing of step S and step S can be omitted. Even with such a control safe dismount can be promptly performed. When the velocity of the moving body does not exceed the certain velocity it is judged whether the passenger dismounts using both of the body inclination angle and the forward backward command input. Accordingly it is possible to judge whether the dismount is the one intended by the passenger or not. For example when the body inclination angle exceeds the threshold value B when there is no forward backward command input it is judged that the dismount is the one that is not intended by the passenger. Thus it is judged as accidental dismount. In such a case the overturn preventing operation is performed and thereafter the drive torque is set to 0. As the moving body moves at or less than a certain velocity even when the command value is not changed after performing the overturn preventing operation the arms do not run on the ground or hit the obstacle. Thus even when the drive torque is promptly set to 0 safe dismount can be promptly performed thereby enhancing convenience. Further when there is forward backward command input it is not judged that the passenger dismounts. Accordingly when the body inclination angle exceeds the threshold value by abrupt acceleration or deceleration the overturn preventing operation is not performed. As it is possible to prevent false judgment as dismount it is possible to prevent execution of the overturn preventing operation when it is not desired. Thus it is not judged as dismount even when the body inclination angle is abruptly inclined when abrupt acceleration or deceleration is performed. Thus normal travelling is not interrupted when the passenger desires to move. Thus convenience can be enhanced.

Although the example of driving the right arm and the left arm as the overturn preventing operation has been described in the above description the overturn preventing operation is not limited to this example. In short the overturn preventing mechanism is not limited to the arm mechanism. For example sub wheels trailing wheels projecting in the front back direction may be used as the overturn preventing mechanism. In such a case the sub wheels are provided in end parts of struts that can be extended and retracted. Then the strut is deployed to project the sub wheel in the front back direction of the body . As a matter of course a mechanism such as a safety bar may be driven. In the present embodiment various overturn preventing mechanisms may be employed. The overturn preventing member such as the sub wheels or the safety bar may be deployed in the front side and the back side of the body to perform the overturn preventing operation. Otherwise the overturn preventing operation may be performed by lowering the position of the center of mass of the body . Accordingly overturn may be definitely prevented. As a matter of course two or more overturn preventing mechanisms may be combined for operation.

Note that in steps S and S the target inclination angle is set to a negative value. In other words the target inclination angle that is opposite to the body inclination angle when it is judged as dismount is set with respect to the vertical direction. By performing such a control the moving body promptly decelerates. Thus safety and convenience can be enhanced. As a matter of course control for deceleration is not limited to the above control. For example the position of the center of mass of the body is estimated and the target inclination angle of the body can be estimated to be balanced. Such a method is disclosed in Japanese Unexamined Patent Application Publication No. 2007 11634. More specifically external force which is moment of inertia around the rotation axes C and C generated by external force applied on the body is estimated. Then the body inclination angle which makes gravity moment around the rotation axes C and C of the centroid of the body balance with the external force moment is set as the target inclination angle. By performing control as above prompt deceleration is realized. Otherwise the target velocity can be a negative value. Thus the target velocity that makes the moving direction opposite may be set.

A control method of the moving body according to the second embodiment will be described with reference to . is a flow chart showing a control method of the moving body according to the second embodiment. The basic structure and the operation of the moving body are similar to those shown in the first embodiment and thus the description will be omitted.

When it is judged in step S that the seat pressure does not exceed the threshold value H it is judged that the passenger dismounts step S . Then the command value that makes the body move in the direction opposite to the moving direction is set as is similar to the first embodiment step S . For example the target inclination angle is set to the negative value and the target velocity is set to 0. On the other hand when it is judged in step S that the seat pressure exceeds the threshold value H the normal processing is performed step S .

When the command value is set the absolute value of the velocity is compared with the threshold value I and the body inclination angle is compared with the threshold value J step S . When the absolute value of the velocity is smaller than the threshold value I and the body inclination angle is smaller than the threshold value J the overturn preventing operation is executed step S . Otherwise the process goes back to step S. After executing the overturn preventing operation the drive torque is set to 0 step S . Note that each of steps S to S is similar to steps S to S of the first embodiment and thus the description will be omitted.

By performing such a control the same effect as in the first embodiment can be obtained. In other words when the body moves in the forward backward direction in accordance with the command value it is estimated that the body moves at or more than a certain velocity. Thus prompt deceleration can be performed. Further as the overturn preventing operation is started after deceleration safety can be enhanced when the passenger dismounts. This enhances convenience.

Although it has been judged in the first and second embodiments whether the passenger dismounts based on the seat pressure or the body inclination angle it is not limited to this example. Another example of the sensor provided for judging dismount will be described with reference to . is a side view schematically showing the structure of the moving body . In two sensors are shown as an example.

In a footrest on which the passenger puts his her feet is provided in the moving body . Then the pressure sensitive sensor is arranged on the footrest . The pressure sensitive sensor detects sole pressure received from soles of the passenger . Accordingly the output of the pressure sensitive sensor varies depending on the states of the passenger . For example when dismounting the passenger tries to put his her feet down on the ground from the footrest . Thus sole pressure is reduced. As such it can be judged that the passenger dismounts when the sole pressure detected in the pressure sensitive sensor is equal to or lower than the threshold value.

Further a shield sensor provided in the footrest may also be used. The shield sensor optically detects that it is covered with the legs of the passenger. The output of the shield sensor varies depending on the states of the passenger. When the receiving surface or the like is covered with the legs of the passenger the shield sensor is ON. It is possible to judge whether the passenger dismounts by arranging the shield sensor at an appropriate place. For example the passenger moves his her legs when dismounting. The shield sensor is arranged at a position that can detect the movement of the legs. The location at which the shield sensor is provided is not limited to the footrest . It is desirable that the shield sensor is provided at a front side of the moving body . In summary the shield sensor is arranged so that ON OFF can be switched by dismount operation by the passenger . Accordingly the output varies depending on the states of the passenger. Thus it is judged whether the passenger dismounts. As a matter of course it may be judged whether the passenger dismounts by combination of two or more sensors. Otherwise two or more sensors of the same type may be arranged.

Although the two wheel type moving body has been described in the above description the number of wheels is not limited to such examples. The present invention is also applicable to single wheel type moving bodies or to moving bodies having three or more wheels. Further although the moving body having the passenger seat is explained in the above description the moving body may be a moving carriage for transporting objects. Thus the transportation object may be any one of an inanimate object and a person. The above control can be executed even when the inanimate object is dismounted from the body . As a matter of course the moving body may be other similar moving bodies such as mobile robots. Further manipulation may be performed by someone other than the passenger. In this case the moving body may be moved by remote manipulation.

The present invention is applicable to an inverted wheel type moving body and a method of controlling the same.

