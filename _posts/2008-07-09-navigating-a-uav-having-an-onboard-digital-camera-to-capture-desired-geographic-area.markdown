---

title: Navigating a UAV having an on-board digital camera to capture desired geographic area
abstract: Methods, systems, and products for navigating a UAV having an on-board digital camera are provided. Embodiments include identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern, and modifying the current flying pattern to capture an image of the identified geographic area. Identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern may be carried out by determining an area captured by the onboard camera, extrapolating the area captured by the onboard camera along the flying pattern to determine a perimeter of uncaptured geographic area, and determining the area of the uncaptured geographic area in dependence upon the perimeter.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07546187&OS=07546187&RS=07546187
owner: International Business Machines Corporation
number: 07546187
owner_city: Armonk
owner_country: US
publication_date: 20080709
---
This application is a continuation application of and claims priority from U.S. patent application Ser. No. 11 041 923 filed on Jan. 24 2005.

The field of the invention is data processing or more specifically methods systems and products for navigating a UAV having an on board digital camera.

Many forms of UAV are available in prior art both domestically and internationally. Their payload weight carrying capability their accommodations volume environment their mission profiles altitude range duration and their command control and data acquisition capabilities vary significantly. Routine civil access to these various UAV assets is in an embryonic state.

Conventional UAVs are typically manually controlled by an operator who may view aspects of a UAV s flight using cameras installed on the UAV with images provided through downlink telemetry. Navigating such UAVs from a starting position to one or more waypoints requires an operator to have specific knowledge of the UAV s flight including such aspects as starting location the UAV s current location waypoint locations and so on. Operators of prior art UAVs usually are required generally to manually control the UAV from a starting position to a waypoint with little aid from automation. There is therefore an ongoing need for improvement in the area of UAV navigations.

Methods systems and products for navigating a UAV having an on board digital camera are provided. Embodiments include identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern and modifying the current flying pattern to capture an image of the identified geographic area. Identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern may be carried out by determining an area captured by the onboard camera extrapolating the area captured by the onboard camera along the flying pattern to determine a perimeter of uncaptured geographic area and determining the area of the uncaptured geographic area in dependence upon the perimeter. Identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern may also be carried out by determining a gap in camera coverage between the camera coverage of the on board camera of the UAV in the current flying pattern and a camera coverage of another on board camera of another UAV in another flying pattern.

Modifying the current flying pattern to capture an image of the identified geographic area may include identifying flight control instructions for changing the altitude of the UAV. Modifying the current flying pattern to capture an image of the identified geographic area may also include identifying flight control instructions for changing the shape of the current flying pattern of the UAV.

Piloting the UAV in a current flying pattern may include receiving from a GPS receiver a current position of the UAV calculating a heading in dependence upon a flying pattern algorithm and flying on the heading.

The foregoing and other objects features and advantages of the invention will be apparent from the following more particular descriptions of exemplary embodiments of the invention as illustrated in the accompanying drawings wherein like reference numbers generally represent like parts of exemplary embodiments of the invention.

The present invention is described to a large extent in this specification in terms of methods for navigating a UAV having an on board digital camera. Persons skilled in the art however will recognize that any computer system that includes suitable programming means for operating in accordance with the disclosed methods also falls well within the scope of the present invention. Suitable programming means include any means for directing a computer system to execute the steps of the method of the invention including for example systems comprised of processing units and arithmetic logic circuits coupled to computer memory which systems have the capability of storing in computer memory which computer memory includes electronic circuits configured to store data and program instructions and programmed steps of the method of the invention for execution by a processing unit.

The invention also may be embodied in a computer program product such as a diskette or other recording medium for use with any suitable data processing system. Embodiments of a computer program product may be implemented by use of any recording medium for machine readable information including magnetic media optical media or other suitable media. Persons skilled in the art will immediately recognize that any computer system having suitable programming means will be capable of executing the steps of the method of the invention as embodied in a program product. Persons skilled in the art will recognize immediately that although most of the exemplary embodiments described in this specification are oriented to software installed and executed on computer hardware nevertheless alternative embodiments implemented as firmware or as hardware are well within the scope of the present invention.

A cross track is a fixed course from a starting point directly to a waypoint. A cross track has a direction a cross track direction that is the direction straight from a starting point to a waypoint. That is a cross track direction is the heading that a UAV would fly directly from a starting point to a waypoint in the absence of wind.

 Course means the direction of travel of the UAV over the ground. In the absence of wind or in the presence of a straight tailwind or straight headwind the course and the heading are the same direction. In the presence of cross wind the course and the heading are different directions.

 Position refers to a location in the air or over the ground. Position is typically specified as Earth coordinates latitude and longitude. A specification of position may also include altitude.

A waypoint is a position chosen as a destination for navigation of a route. A route has one or more waypoints. That is a route is composed of waypoints including at least one final waypoint and one or more intermediate waypoints.

 TDMA stands for Time Division Multiple Access a technology for delivering digital wireless service using time division multiplexing. TDMA works by dividing a radio frequency into time slots and then allocating slots to multiple calls. In this way a single frequency can support multiple simultaneous data channels. TDMA is used by GSM.

 GSM stands for Global System for Mobile Communications a digital cellular standard. GSM at this time is the de facto standard for wireless digital communications in Europe and Asia.

 CDPD stands for Cellular Digital Packet Data a data transmission technology developed for use on cellular phone frequencies. CDPD uses unused cellular channels to transmit data in packets. CDPD supports data transfer rates of up to 19.2 Kbps.

 GPRS stands for General Packet Radio Service a standard for wireless data communications which runs at speeds up to 150 Kbps compared with current GSM systems which cannot support more than about 9.6 Kbps. GPRS which supports a wide range of speeds is an efficient use of limited bandwidth and is particularly suited for sending and receiving small bursts of data such as e mail and Web browsing as well as large volumes of data.

 EDGE stands for Enhanced Data Rates for GSM Evolution a standard for wireless data communications supporting data transfer rates of more than 300 Kbps. GPRS and EDGE are considered interim steps on the road to UMTS.

 UMTS stands for Universal Mobile Telecommunication System a standard for wireless data communications supporting data transfer rates of up to 2 Mpbs. UMTS is also referred to W CDMA for Wideband Code Division Multiple Access.

Methods systems and products for navigating a UAV are explained with reference to the accompanying drawings beginning with . sets forth a system diagram illustrating relations among components of an exemplary system for navigating a UAV. The system of includes UAV which includes a GPS Global Positioning System receiver not shown that receives a steady stream of GPS data from satellites . For convenience of explanation only two GPS satellites are shown in although the GPS satellite network in fact includes 24 GPS satellites.

The system of operates to navigate a UAV by receiving in a remote control device a user s selection of a GUI map pixel that represents a waypoint for UAV navigation. Each such pixel has a location on a GUI map typically specified as a row and column position. Examples of remote control devices in include mobile telephone workstation laptop computer and PDA Personal Digital Assistant . Each such remote control device is capable of supporting a GUI display of a map of the surface of the Earth in which each pixel on the GUI map represents a position on the Earth.

Each remote control device also supports at least one user input device through which a user may enter the user s selection of a pixel. Examples of user input devices in the system of include telephone keypad workstation keyboard workstation joystick laptop keyboard and PDA touch screen .

The system of typically is capable of operating a remote control device to map the pixel s location on the GUI to Earth coordinates of a waypoint. The remote control device is often capable of receiving downlink telemetry including starting position from a GPS receiver on the UAV through the socket. In fact the remote control device is often receiving downlink telemetry that includes a steady stream of GPS positions of the UAV. Receiving a starting position therefore is typically carried out by taking the current position of the UAV when the user selects the pixel as the starting position. In the example of the remote control device generally receives the starting position from the UAV through wireless network . The remote control device is often capable of transmitting uplink telemetry including the coordinates of the waypoint flight control instructions or UAV instructions through a socket on the remote control devices.

Wireless network is implemented using any wireless data transmission technology as will occur to those of skill in the art including for example TDMA GSM CDPD GPRS EDGE and UMTS. In a one embodiment a data communications link layer is implemented using one of these technologies a data communications network layer is implemented with the Internet Protocol IP and a data communications transmission layer is implemented using the Transmission Control Protocol TCP . In such systems telemetry between the UAV and remote control devices including starting positions UAV instructions and flight control instructions are transmitted using an application level protocol such as for example the HyperText Transmission Protocol HTTP the Wireless Application Protocol WAP the Handheld Device Transmission Protocol HDTP or any other data communications protocol as will occur to those of skill in the art.

The system of typically is capable of calculating a heading in dependence upon the starting position the coordinates of the waypoint and a navigation algorithm identifying flight control instructions for flying the UAV on the heading and transmitting the flight control instructions from the remote control device to the UAV.

The system of is also capable of navigating the UAV in dependence upon the digital resolution of an on board digital camera . The system of is capable of identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern and modifying the current flying pattern to capture an image of the identified geographic area. A flying pattern is a consistent pattern of flight of a UAV. Flying patterns include patterns for orbiting a waypoint flying a square or other shape around a waypoint or other flying patterns that will occur to those of skill in the art. A flying pattern typically is implemented by a consistent series of flight control instructions that pilot the UAV such that the resulting flight path creates a pattern. Flying patterns are often implemented with algorithms that result in the UAV flying in a particular shaped pattern over the ground at a particular altitude.

Commercial off the shelf high resolution digital cameras for use in navigating UAVs are currently available. One example of such a high resolution digital camera capable of being mounted on a UAV is the Pro Back digital camera available from Kodak.

UAVs according to embodiments of the present invention typically include not only an aircraft but also automated computing machinery capable of receiving GPS data operating telemetry between the UAV and one or more remote control devices and navigating a UAV among waypoints. is a block diagram of an exemplary UAV showing relations among components of included automated computing machinery. In UAV includes a processor also typically referred to as a central processing unit or CPU. The processor may be a microprocessor a programmable control unit or any other form of processor useful according to the form factor of a particular UAV as will occur to those of skill in the art. Other components of UAV are coupled for data transfer to processor through system bus .

UAV includes random access memory or RAM . Stored in RAM is an application program that implements inventive methods according to embodiments of the present invention. In some embodiments the application programming runs on an OSGi services framework . OSGi Stands for Open Services Gateway Initiative. The OSGi specification is a Java based application layer framework that provides vendor neutral application layer APIs and functions. An OSGi service framework is written in Java and therefore typically runs on a Java Virtual Machine JVM which in turn runs on an operating system . Examples of operating systems useful in UAVs according to the present invention include Unix AIX and Microsoft Windows .

In OSGi the framework is a hosting platform for running services . Services are the main building blocks for creating applications according to the OSGi. A service is a group of Java classes and interfaces that implement a certain feature. The OSGi specification provides a number of standard services. For example OSGi provides a standard HTTP service that can respond to requests from HTTP clients such as for example remote control devices according to embodiments of the present invention. That is such remote control devices are enabled to communicate with a UAV having an HTTP service by use of data communications messages in the HTTP protocol.

Services in OSGi are packaged in bundles with other files images and resources that the services need for execution. A bundle is a Java archive or JAR file including one or more service implementations an activator class and a manifest file. An activator class is a Java class that the service framework uses to start and stop a bundle. A manifest file is a standard text file that describes the contents of the bundle.

The services framework in OSGi also includes a service registry. The service registry includes a service registration including the service s name and an instance of a class that implements the service for each bundle installed on the framework and registered with the service registry. A bundle may request services that are not included in the bundle but are registered on the framework service registry. To find a service a bundle performs a query on the framework s service registry.

The application program of is capable generally of navigating a UAV in dependence upon the digital resolution of an on board digital camera. The system of is capable of identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern and modifying the current flying pattern to capture an image of the identified geographic area.

In the UAV of software programs and other useful information may be stored in RAM or in non volatile memory . Non volatile memory may be implemented as a magnetic disk drive such as a micro drive an optical disk drive static read only memory ROM electrically erasable programmable read only memory space EEPROM or flash memory or otherwise as will occur to those of skill in the art.

UAV includes communications adapter implementing data communications connections to other computers which may be wireless networks satellites remote control devices servers or others as will occur to those of skill in the art. Communications adapter advantageously facilitates receiving flight control instructions from a remote control device. Communications adapters implement the hardware level of data communications connections through which UAVs transmit wireless data communications. Examples of communications adapters include wireless modems for dial up connections through wireless telephone networks.

UAV includes servos . Servos are proportional control servos that convert digital control signals from system bus into actual proportional displacement of flight control surfaces ailerons elevators and the rudder. The displacement of flight control surfaces is proportional to values of digital control signals as opposed to the all or nothing motion produced by some servos. In this way ailerons for example may be set to thirty degrees sixty degrees or any other supported angle rather than always being only neutral or fully rotated. Several proportional control servos useful in various UAVs according to embodiments of the present invention are available from Futaba .

UAV includes a servo control adapter . A servo control adapter is multi function input output servo motion controller capable of controlling several servos. An example of such a servo control adapter is the IOSERVO model from National Control Devices of Osceola Mo. The IOSERVO is described on National Control Devices website at www.controlanything.com.

UAV includes a flight stabilizer system . A flight stabilizer system is a control module that operates servos to automatically return a UAV to straight and level flight thereby simplifying the work that must be done by navigation algorithms. An example of a flight stabilizer system useful in various embodiments of UAVs according to the present invention is model CO Pilot from FMA Inc. of Frederick Md. The Co Pilot flight stabilizer system identifies a horizon with heat sensors identifies changes in aircraft attitude relative to the horizon and sends corrective signals to the servos to keep the UAV flying straight and level.

UAV includes an AVCS gyro . An AVCS gryo is an angular vector control system gyroscope that provides control signal to the servos to counter undesired changes in attitude such as those caused by sudden gusts of wind. An example of an AVCS gyro useful in various UAVs according to the present invention is model GYA350 from Futaba .

The UAV of includes an on board digital camera . Commercial off the shelf high resolution digital cameras for use in navigating UAVs are currently available. One example of such a high resolution digital camera capable of being mounted on a UAV is the Pro Back digital camera available from Kodak.

Remote control devices according to embodiments of the present invention typically include automated computing machinery capable of receiving user selections of pixel on GUI maps mapping the pixel to a waypoint location receiving downlink telemetry including for example a starting position from a GPS receiver on the UAV calculating a heading in dependence upon the starting position the coordinates of the waypoint and a navigation algorithm identifying flight control instructions for flying the UAV on the heading and transmitting the flight control instructions as uplink telemetry from the remote control device to the UAV. is a block diagram of an exemplary remote control device showing relations among components of included automated computing machinery. In remote control device includes a processor also typically referred to as a central processing unit or CPU. The processor may be a microprocessor a programmable control unit or any other form of processor useful according to the form factor of a particular remote control device as will occur to those of skill in the art. Other components of remote control device are coupled for data transfer to processor through system bus .

Remote control device includes random access memory or RAM . Stored in RAM an application program that implements inventive methods of the present invention. In some embodiments the application program is OSGi compliant and therefore runs on an OSGi services framework installed not shown on a JVM not shown . In addition software programs and further information for use in implementing methods of navigating a UAV according to embodiments of the present invention may be stored in RAM or in non volatile memory .

The application program of is capable generally of navigating a UAV in dependence upon the digital resolution of an on board digital camera. The system of is capable of identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern and modifying the current flying pattern to capture an image of the identified geographic area by transmitting flight control instructions to the UAV to modify the current flying pattern.

Non volatile memory may be implemented as a magnetic disk drive such as a micro drive an optical disk drive static read only memory ROM electrically erasable programmable read only memory space EEPROM or flash memory or otherwise as will occur to those of skill in the art.

Remote control device includes communications adapter implementing data communications connections to other computers including particularly computers on UAVs. Communications adapters implement the hardware level of data communications connections through which remote control devices communicate with UAVs directly or through networks. Examples of communications adapters include modems for wired dial up connections Ethernet IEEE 802.3 adapters for wired LAN connections 802.11b adapters for wireless LAN connections and Bluetooth adapters for wireless microLAN connections.

The example remote control device of includes one or more input output interface adapters . Input output interface adapters in computers implement user oriented input output through for example software drivers and computer hardware for controlling output to display devices such as computer display screens as well as user input from user input devices such as keypads joysticks keyboards and touch screens.

The method of includes mapping the pixel s location on the GUI to Earth coordinates of the waypoint. As discussed in more detail above with reference to mapping the pixel s location on the GUI to Earth coordinates of the waypoint typically includes mapping pixel boundaries of the GUI map to corresponding Earth coordinates and identifying a range of latitude and a range of longitude represented by each pixel. Mapping the pixel s location on the GUI to Earth coordinates of the waypoint also typically includes locating a region on the surface of the Earth in dependence upon the boundaries the ranges and the location of the pixel on the GUI map.

The method of also includes receiving downlink telemetry including a starting position from a GPS receiver on the UAV from the UAV through a socket on the remote control device. In fact the remote control device is receiving downlink telemetry that includes a steady stream of GPS positions of the UAV. Receiving a starting position therefore is typically carried out by taking the current position of the UAV when the user selects the pixel as the starting position.

A socket is one end point of a two way communication link between two application programs running on a network. In Java socket classes are used to represent a connection between a client program and a server program. The java.net package provides two Java classes Socket and ServerSocket that implement the client side of the connection and the server side of the connection respectively. In some embodiments of the present invention a Java web server is included in an OSGi framework on a remote control device. Often then a socket on the remote control device would be considered a server side socket and a socket on the UAV would be considered a client socket. In other embodiments of the present invention a Java web server is included in an OSGi framework on the UAV. In such embodiments a socket on the UAV would be considered a server side socket and a socket on a remote control device would be considered a client socket.

Use of a socket requires creating a socket and creating data streams for writing to and reading from the socket. One way of creating a socket and two data streams for use with the socket is shown in the following exemplary pseudocode segment 

The first statement in this segment creates a new socket object and names it uavSocket. The socket constructor used here requires a fully qualified IP address of the machine the socket is to connect to in this case the Java server on a remote control device or a UAV and the port number to connect to. In this example computerAddress is taken as a domain name that resolves to a fully qualified dotted decimal IP address. Alternatively a dotted decimal IP address may be employed directly as for example 195.123.001.001. The second argument in the call to the socket constructor is the port number. Port number 7 is the port on which the server listens in this example whether the server is on a remote control device or on a UAV.

The second statement in this segment gets the socket s output stream and opens a Java PrintWriter object on it. Similarly the third statement gets the socket s input stream and opens a Java BufferedReader object on it. To send data through the socket an application writes to the PrintWriter as for example 

To receive data through the socket an application reads from the BufferedReader as show here for example 

The method of also includes calculating a heading in dependence upon the starting position the coordinates of the waypoint and a navigation algorithm. Methods of calculating a heading are discussed in detail below in this specification. The method of includes identifying flight control instructions for flying the UAV on the heading. Flight control instructions are specific commands that affect the flight control surfaces of the UAV. That is instructions to move the flight control surfaces to affect the UAV s flight causing the UAV to turn climb descend and so on. As an aid to further explanation an exemplary method of identifying flight control instructions for flying on a calculated heading is provided 

The method of includes transmitting uplink telemetry including the flight instructions through the socket to the UAV. Transmitting the flight control instructions from the remote control device to the UAV may be carried out by use of any data communications protocol including for example transmitting the flight control instructions as form data URI encoded data in an HTTP message a WAP message an HDML message or any other data communications protocol message as will occur to those of skill in the art.

This segment opens a socket object named uavSocket with an input stream named inStream. Listening for downlink data on the socket is accomplished with a blocking call to inStream.readLine which returns a String object name downLinkData. 

The method of includes storing downlink data in computer memory and exposing the stored downlink data through an API to a navigation application . Downlink data typically is exposed through an API Application Programming Interface by providing in a Java interface class public accessor functions for reading from member data elements in which the downlink data is stored. A navigation application wishing to access downlink data then may access the data by calling a public accessor methods as for example String someDownLinkData APIimpl.getDownLinkData .

In the method of the downlink telemetry further comprises flight control instructions. It is counterintuitive that downlink telemetry contains flight control instruction when the expected data communications direction for flight control instructions ordinarily is in uplink from a remote control device to a UAV. It is useful to note however that flight control instructions can be uplinked from a multiplicity of remote control devices not just one. A flight line technician with a handheld PDA can issue flight control instructions to a UAV that is also linked for flight control to a computer in a ground station. It is sometimes advantageous therefore for downlink telemetry to include flight control instructions so that one remote control device can be advised of the fact that some other remote control device issued flight control instructions to the same UAV.

This segment opens a socket object named uavSocket with an output stream named outStream. Sending uplink data through the socket is accomplished with a call to outStream.println which takes as a call parameter a String object named someUplinkData. 

Although the flow chart of illustrates navigating a UAV to a single waypoint as a practical matter embodiments of the present invention typically support navigating a UAV along a route having many waypoints including a final waypoint and one or more intermediate waypoints. That is methods of the kind illustrated in may also include receiving user selections of a multiplicity of GUI map pixels representing waypoints where each pixel has a location on the GUI and mapping each pixel location to Earth coordinates of a waypoint.

Such methods for navigating a UAV can also include assigning one or more UAV instructions to each waypoint and storing the coordinates of the waypoints and the UAV instructions in computer memory on the remote control device. A UAV instruction typically includes one or more instructions for a UAV to perform a task in connection with a waypoint. Exemplary tasks include turning on or off a camera installed on the UAV turning on or off a light installed on the UAV orbiting a waypoint or any other task that will occur to those of skill in the art.

UAV instructions to perform tasks in connection with a waypoint may be encoded in for example XML the eXtensible Markup Language as shown in the following exemplary XML segment 

This XML example has a root element named UAV instructions. The example contains several subelements named macro. One macro subelement contains a waypoint location representing an instruction to fly to 33 44 10 N 30 15 50 W. That macro subelement also contains several instructions for tasks to be performed when the UAV arrives at the waypoint coordinates including orbiting around the waypoint coordinates turning on an on board video camera continuing to orbit for thirty minutes with the camera on turning off the video camera and continuing to a next waypoint. Only one macro set of UAV instructions is shown in this example but that is not a limitation of the invention. In fact such sets of UAV instructions may be of any useful size as will occur to those of skill in the art.

Exemplary methods of navigating a UAV also include flying the UAV to each waypoint in accordance with one or more navigation algorithms and operating the UAV at each waypoint in accordance with the UAV instructions for each waypoint. Operating the UAV at the waypoint in accordance with the UAV instructions for each waypoint typically includes identifying flight control instructions in dependence upon the UAV instructions for each waypoint and transmitting the flight control instructions as uplink telemetry through a socket. Flight control instructions identified in dependence upon the UAV instructions for each waypoint typically include specific flight controls to move the flight control surfaces of the UAV causing the UAV to fly in accordance with the UAV instructions. For example in the case of a simple orbit a flight control instruction to move the ailerons and hold them at a certain position causing the UAV to bank at an angle can effect an orbit around a waypoint.

Operating the UAV at the waypoint in accordance with the UAV instructions for each way point typically includes transmitting the flight control instructions as uplink data from the remote control device to the UAV. Transmitting the flight control instructions as uplink data from the remote control device to the UAV may be carried out by use of any data communications protocol including for example transmitting the flight control instructions as form data URI encoded data in an HTTP message a WAP message an HDML message or any other data communications protocol message as will occur to those of skill in the art.

For further explanation of the process of mapping pixels locations to Earth coordinates sets forth a block diagram that includes a GUI displaying a map not shown and a corresponding area of the surface of the Earth . The GUI map has pixel boundaries identified as Row Col Row Col Row Col and Row Col. In this example the GUI map is assumed to include 100 rows of pixels and 100 columns of pixels. This example of 100 rows and columns is presented for convenience of explanation it is not a limitation of the invention. GUI maps according to embodiments of the present invention may include any number of pixels as will occur to those of skill in the art.

The illustrated area of the surface of the Earth has corresponding boundary points identified as Lat Lon Lat Lon Lat Lon and Lat Lon. This example assumes that the distance along one side of surface area is 100 nautical miles so that the distance expressed in terms of latitude or longitude between boundary points of surface area is 100 minutes or 1 40 .

In typical embodiments mapping a pixel s location on the GUI to Earth coordinates of a waypoint includes mapping pixel boundaries of the GUI map to Earth coordinates. In this example the GUI map boundary at Row Colmaps to the surface boundary point at Lat Lon the GUI map boundary at Row Colmaps to the surface boundary point at Lat Lon the GUI map boundary at Row Colmaps to the surface boundary point at Lat Lon the GUI map boundary at Row Colmaps to the surface boundary point at Lat Lon.

Mapping a pixel s location on the GUI to Earth coordinates of a waypoint typically also includes identifying a range of latitude and a range of longitude represented by each pixel. The range of latitude represented by each pixel may be described as Lat Lat N where Lat Lat is the length in degrees of the vertical side of the corresponding surface and Nis the number of rows of pixels. In this example Lat Lat is 1 40 or 100 nautical miles and Nis 100 rows of pixels. The range of latitude represented by each pixel in this example therefore is one minute of arc or one nautical mile.

Similarly the range of longitude represented by each pixel may be described as Lon Lon N where Lon Lon is the length in degrees of the horizontal side of the corresponding surface and Nis the number of columns of pixels. In this example Lon Lon is 1 40 or 100 nautical miles and Nis 100 columns of pixels. The range of longitude represented by each pixel in this example therefore is one minute of arc or one nautical mile.

Mapping a pixel s location on the GUI to Earth coordinates of a waypoint typically also includes locating a region on the surface of the Earth in dependence upon the boundaries the ranges and the location of the pixel on the GUI map. The region is the portion of the surface corresponding to the pixel itself. That region is located generally by multiplying in both dimensions latitude and longitude the range of latitude and longitude by column or row numbers of the pixel location on the GUI map. That is a latitude for the surface region of interest is given by Expression 1. Lat Lat Lat Exp. 1 In Expression 1 

Similarly a longitude for the surface region of interest is given by Expression 2. Lon P Lon Lon N Exp. 2 In Expression 2 

Referring to for further explanation Expressions 1 and 2 taken together identify a region of surface area that corresponds to the location of pixel mapping the pixel location to the bottom left corner of the region . Advantageously however many embodiments of the present invention further map the pixel to the center of the region by adding one half of the length of the region s sides to the location of the bottom left corner .

More particularly locating a region on the surface of the Earth in dependence upon the boundaries the ranges and the location of the pixel on the GUI map as illustrated by Expression 3 may include multiplying the range of longitude represented by each pixel by a column number of the selected pixel yielding a first multiplicand and multiplying the range of longitude represented by each pixel by 0.5 yielding a second multiplicand adding the first and second multiplicands to an origin longitude of the GUI map. Lon Lon Lon 0.5 Lon Lon Exp. 3 

In Expression 3 the range of longitude represented by each pixel is given by Lon Lon N and the first multiplicand is P Lon Lon N . The second multiplicand is given by 0.5 Lon Lon N .

Similarly locating a region on the surface of the Earth in dependence upon the boundaries the ranges and the location of the pixel on the GUI map as illustrated by Expression 4 typically also includes multiplying the range of latitude represented by each pixel by a row number of the selected pixel yielding a third multiplicand multiplying the range of latitude represented by each pixel by 0.5 yielding a fourth multiplicand and adding the third and fourth multiplicands to an origin latitude of the GUI map. Lat Lat Lat 0.5 Lat Lat Exp. 4 

In Expression 4 the range of latitude represented by each pixel is given by Lat Lat N and the third multiplicand is P Lat Lat N . The fourth multiplicand is given by 0.5 Lat Lat N . Expressions 3 and 4 taken together map the location of pixel to the center of the located region .

An exemplary method of navigating in accordance with a navigation algorithm is explained with reference to . sets forth a flow chart illustrating an exemplary method of navigating a UAV in accordance with a navigation algorithm and sets forth a line drawing illustrating a flight path produced by application of the method of .

The method of includes periodically repeating the steps of receiving in the remote control device from the GPS receiver a current position of the UAV and calculating a new heading from the current position to the waypoint. The method of also includes identifying flight control instructions for flying the UAV on the new heading and transmitting from the remote control device to the UAV the flight control instructions for flying the UAV on the new heading. In this method if Lon Latis taken as the current position and Lon Latis taken as the waypoint position then the new heading may be calculated generally as the inverse tangent of Lat Lat Lon Lon .

A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to . sets forth a flow chart illustrating an exemplary method of navigating a UAV in accordance with a navigation algorithm and sets forth a line drawing illustrating a flight path produced by application of the method of . The method of includes identifying a cross track between the starting point and the waypoint. A cross track is a fixed course from a starting point directly to a waypoint. If Lon Latis taken as the position of a starting point and Lon Latis taken as the waypoint position then a cross track is identified by Lon Latand Lon Lat. A cross track has a direction a cross track direction that is the direction straight from a starting point to a waypoint and it is often useful to characterize a cross track by its cross track direction. The cross track direction for a cross track identified by starting point Lon Latand waypoint position Lon Latmay be calculated generally as the inverse tangent of Lat Lat Lon Lon .

The method of includes periodically repeating the steps of receiving in the remote control device from the GPS receiver a current position of the UAV and calculating a shortest distance between the current position and the cross track. If the shortest distance between the current position and the cross track is greater than a threshold distance the method of includes transmitting flight control instructions that pilot the UAV toward the cross track and when the UAV arrives at the cross track transmitting flight control instructions that pilot the UAV in a cross track direction toward the waypoint.

In this example calculating a shortest distance between the current position and a cross track also includes calculating the angle between a direction from the current position to the waypoint and a cross track direction. In the example of the direction from the current position to the waypoint is represented as the direction of line . In the example of the cross track direction is the direction of cross track . The angle between a direction from the current position to the waypoint and a cross track direction is the difference between those directions.

In the current example calculating a shortest distance between the current position and a cross track also includes calculating the tangent of the angle between a direction from the current position to the waypoint and a cross track direction and multiplying the tangent of the angle by the distance from the current position to the waypoint.

A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to . sets forth a flow chart illustrating an exemplary method of navigating a UAV in accordance with a navigation algorithm and sets forth a line drawing illustrating a flight path produced by application of the method of .

In the method of piloting in accordance with a navigation algorithm includes identifying a cross track having a cross track direction between the starting point and the waypoint. As described above a cross track is identified by a position of a starting point and a waypoint position. For a starting point position of Lon Latand a waypoint position of Lon Lat a cross track is identified by Lon Latand Lon Lat. In addition it is often also useful to characterize a cross track by its cross track direction. The cross track direction for a cross track identified by starting point Lon Latand waypoint position Lon Latmay be calculated generally as the inverse tangent of Lat Lat Lon Lon .

In the method of navigating a UAV in accordance with a navigation algorithm includes periodically repeating the steps of receiving in the remote control device from the GPS receiver a current position and a current heading of the UAV and calculating an angle between the direction from the current position to the waypoint and a cross track direction. If the angle is greater than a threshold angle the method of includes transmitting flight control instructions that pilot the UAV toward the cross track and upon arriving at the cross track transmitting flight control instructions that pilot the UAV in the cross track direction toward the waypoint.

Transmitting flight control instructions that pilot the UAV toward the cross track is carried out by transmitting flight control instructions to turn to a heading no more than ninety degrees from the cross track direction turning to the left if the current position is right of the cross track and to the right if the current position is left of the cross track. Transmitting flight control instructions that pilot the UAV in the cross track direction toward the waypoint transmitting flight control instructions to turn the UAV to the cross track direction and then flying straight and level on the cross track direction.

In many embodiments of the method of the threshold angle is a variable whose value varies in dependence upon a distance between the UAV and the waypoint. In typical embodiments that vary the threshold angle the threshold angle is increased as the UAV flies closer to the waypoint. It is useful to increase the threshold angle as the UAV flies closer to the waypoint to reduce the risk of excessive hunting. That is because the heading is the cross track direction straight to the WP rather than cross wind if the angle remains the same the distance that the UAV needs to be blown off course to trigger transmitting flight control signals instructing the UAV to return to the cross track gets smaller and smaller until the UAV is flying to the cross track turning to the cross track direction getting blown immediately across the threshold flying back the cross track turning to the cross track direction getting blown immediately across the threshold and so on and so on in rapid repetition. Increasing the threshold angle as the UAV flies closer to the waypoint increases the lateral distance available for wind error before triggering the transmission of flight instructions to return to the cross track thereby reducing this risk of excessive hunting.

The method of includes mapping the pixel s location on the GUI to Earth coordinates of the waypoint . As discussed in more detail above with reference to mapping the pixel s location on the GUI to Earth coordinates of the waypoint typically includes mapping pixel boundaries of the GUI map to corresponding Earth coordinates and identifying a range of latitude and a range of longitude represented by each pixel. Mapping the pixel s location on the GUI to Earth coordinates of the waypoint also typically includes locating a region on the surface of the Earth in dependence upon the boundaries the ranges and the location of the pixel on the GUI map.

The method of also includes transmitting uplink telemetry including the coordinates of the waypoint to the UAV through a socket on the remote control device. Transmitting uplink telemetry including the coordinates of the waypoint to the UAV through a socket on the remote control device may be carried out by use of any data communications protocol including for example transmitting the coordinates as form data URI encoded data in an HTTP message a WAP message an HDML message or any other data communications protocol message as will occur to those of skill in the art. Transmitting uplink telemetry through a socket may be implemented by opening a socket creating an output stream for the socket and writing uplink telemetry data to the output stream as illustrated for example in the following segment of pseudocode 

This segment opens a socket object named uavSocket with an output stream named outStream. Transmitting uplink telemetry through the socket is accomplished with a call to outStream.println which takes as a call parameter a String object named someUplinkData. 

The method of also includes receiving downlink telemetry including a starting position from a GPS receiver from the UAV through the socket and piloting the UAV under control of a navigation computer on the UAV from the starting position to the waypoint in accordance with a navigation algorithm. Methods of piloting a UAV according to a navigation algorithm are discussed in detail below in this specification.

Receiving downlink telemetry through a socket may be implemented by opening a socket creating an input stream for the socket and reading data from the input stream as illustrated for example in the following segment of pseudocode 

This segment opens a socket object named uavSocket with an input stream named inStream. Receiving downlink telemetry through the socket is accomplished with a blocking call to inStream.readLine which returns a String object name downLinkTelemetry. 

In the method of downlink telemetry may include Earth coordinates of waypoints as well as one or more UAV instructions. It is counterintuitive that downlink telemetry contains waypoint coordinates and UAV instructions when the expected data communications direction for waypoint coordinates and UAV instructions ordinarily is in uplink from a remote control device to a UAV. It is useful to note however that waypoint coordinates and UAV instructions can be uplinked from a multiplicity of remote control devices not just one. A flight line technician with a handheld PDA can issue waypoint coordinates and UAV instructions to a UAV that is also linked for flight control to a computer in a ground station. It is sometimes advantageous therefore for downlink telemetry to include waypoint coordinates or UAV instructions so that one remote control device can be advised of the fact that some other remote control device issued waypoint coordinates or UAV instructions to the same UAV.

As mentioned above embodiments of the present invention often support navigating a UAV along a route having many waypoints including a final waypoint and one or more intermediate waypoints. That is methods of the kind illustrated in may also include receiving user selections of a multiplicity of GUI map pixels representing waypoints where each pixel has a location on the GUI and mapping each pixel location to Earth coordinates of a waypoint.

Such methods of navigating a UAV can also include assigning one or more UAV instructions to each waypoint and transmitting the coordinates of the waypoints and the UAV instructions in the uplink telemetry through the socket to the UAV. A UAV instruction typically includes one or more instructions for a UAV to perform a task in connection with a waypoint. Exemplary tasks include turning on or off a camera installed on the UAV turning on or off a light installed on the UAV orbiting a waypoint or any other task that will occur to those of skill in the art. Such exemplary methods of navigating a UAV also include storing the coordinates of the waypoints and the UAV instructions in computer memory on the UAV piloting the UAV to each waypoint in accordance with one or more navigation algorithms and operating the UAV at each waypoint in accordance with the UAV instructions for each waypoint.

A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to and . sets forth a flow chart illustrating an exemplary method of piloting in accordance with a navigation algorithm. sets forth a line drawing illustrating a method of calculating a heading with a cross wind to achieve a particular ground course. And sets forth a line drawing illustrating a flight path produced by application of the method of .

In the method of piloting in accordance with a navigation algorithm comprises periodically repeating the steps of reading from the GPS receiver a current position of the UAV calculating a direction to the waypoint from the current position calculating a heading in dependence upon wind speed wind direction airspeed and the direction to the waypoint turning the UAV to the heading and flying the UAV on the heading.

In angle A represents the difference between the wind direction E and the direction to the waypoint D. In the wind velocity vector is presented twice once to show the wind direction as angle E and again to illustrate angle A as the difference between angles E and D. Drawing wind velocity to form angle A with the resultant velocity also helps explain how to calculate wind correction angle B using the law of sines. Knowing two sides of a triangle and the angle opposite one of them the angle opposite the other may be calculated in this example by B sin b sin A a . The two known sides are airspeed a and wind speed b. The known angle is A the angle opposite side a representing the difference between wind direction E and direction to the waypoint D. Calculating a heading angle F on is then carried out by subtracting the wind correction angle B from the direction to the waypoint D.

A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to . sets forth a flow chart illustrating an exemplary method of piloting in accordance with a navigation algorithm and sets forth a line drawing illustrating a flight path produced by application of the method of .

The method of includes identifying a cross track and calculating a cross track direction from the starting position to the waypoint. In the method of piloting in accordance with a navigation algorithm is carried out by periodically repeating the steps of reading from the GPS receiver a current position of the UAV calculating a shortest distance between the cross track and the current position and if the shortest distance between the cross track and the current position is greater than a threshold distance piloting the UAV to the cross track. Upon arriving at the cross track the method includes reading from the GPS receiver a new current position of the UAV calculating in dependence upon wind speed wind direction airspeed and the cross track direction a new heading turning the UAV to the new heading and flying the UAV on the new heading.

As described above UAVs according to the present invention often include an on board digital camera useful in monitoring a geographic area by the UAV. Such UAVs are capable of transmitting images captured by the on board digital camera to a remote control device or other display device or are capable of storing the images for later review. The dimensions of the geographic area captured by an on board digital camera will vary according to the current altitude of the UAV the flying pattern of the UAV camera settings of the UAV as well as other factors that will occur to those of skill in the art.

In the example of the UAV is flying a square shaped pattern . The digital camera in the example of is currently capturing a geographic area having a portion within the area bounded by the current flying pattern and a portion outside the area bounded by the current flying pattern . In the example of the current altitude and camera settings on the digital camera leaves an uncaptured geographic area when flying the current square shaped pattern . The size and shape of an uncaptured geographic area will typically depend upon the size and shape of the current flying pattern of the UAV as well as the size of the geographic area captured by the camera.

Capturing digital images of a geographic area with a digital camera mounted on a UAV is facilitated by flying patterns. For further explanation therefore sets forth a flow chart illustrating an exemplary method for flying a pattern. A flying pattern is implemented by a consistent series of flight control instructions identified using algorithms unique to the pattern that pilot the UAV such that the resulting flight path creates a pattern of a particular shape over the ground at a particular altitude.

The method of includes repeatedly receiving from a GPS receiver a current position of the UAV calculating a heading in dependence upon a current flying pattern algorithm and flying on the heading. Calculating a heading in dependence upon a current flying pattern algorithm may be carried out by a navigational computer on board the UAV or by a navigational computer in a remote control device. The particular heading calculated for flying a particular pattern will vary according to the flying pattern algorithm itself. For example on algorithm for flying an orbit around a waypoint includes calculating a locus of points in a circle according to a defined radius and establishing a turn on that circle. One way to maintain the orbit in the presence of cross wind includes establishing a threshold distance from the calculated circle and periodically adjusting the heading of the UAV when the UAV deviates more that the threshold distance from the calculated circle. A square shaped flying pattern may be accomplished by defining four coordinates representing corners of the square and piloting the UAV to each of the four coordinates sequentially to fly a square.

The inclusion of a circular flying pattern and a square shaped flying pattern are for explanation and not for limitation. In fact UAVs according to embodiments of the present invention may fly patterns of many shapes as will occur to those of skill in the art including circles squares defined by particular coordinates and other polygons as will occur to those of skill in the art.

As described above with reference to on board cameras provide a limited area coverage depending upon the altitude of the UAV the camera angle the camera settings and other factors that will occur to those of skill in the art. Identifying a geographic area not captured by the digital camera while flying the UAV in a current pattern is useful in modification of the altitude or flying pattern of the UAV to capture the previously uncaptured geographic area. For further explanation set forth line drawings illustrating an aerial view of geographic areas uncaptured by a UAV flying a square shaped pattern. The example of shows an aerial view of a square shaped flying pattern . The area currently captured by the onboard camera is a geographic area beneath the UAV the size of which will vary according to the altitude of the UAV the camera angle of the on board digital camera the camera settings of the camera and other factors as will occur to those of skill in the art. In the example of the area captured by the onboard camera extends within the area bounded by the current flying pattern . The area captured by the onboard camera also extends beyond the perimeter of the current flying pattern .

To identify a geographic area not captured by the digital camera the method of includes extrapolating the area captured by the onboard camera along the flying pattern to determine a perimeter of uncaptured geographic area. Turning now to the total area captured by an on board camera beneath a UAV flying the square shaped flying pattern is obtained by extrapolating the area captured by the camera along the flight path. Because portions of the area captured by the camera may extend beyond the area bounded by the flight path the outer perimeter of the total area captured by the on board camera is often larger than the perimeter of the flight path itself. The inner perimeter of the total area captured by the onboard camera defines the outer boundary of the uncaptured geographic area .

Identifying a geographic area not captured by the digital camera according to the methods of therefore includes determining the area of the uncaptured geographic area in dependence upon the inner perimeter. Typically determining the area of the uncaptured geographic area in dependence upon the perimeter is carried out by determining the area bounded by the inner perimeter.

Identifying uncaptured geographic areas is not limited to situations where a single UAV is flying a pattern. In fact often UAVs fly in formation with other UAVs leaving gaps between their respective areas of camera coverage. For further explanation therefore sets forth a line drawing illustrating two UAVs and each equipped with on board digital cameras and and each flying a square shaped flying pattern and . Each UAV has a currently captured geographic area and representing the geographic area currently captured by the respective on board digital camera. Identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern according to the example of therefore includes determining a gap in camera coverage between the camera coverage of the UAV in the current flying pattern and the camera coverage of another UAV in another flying pattern . In the example of each digital camera and captures an area and that extends beyond the respective perimeter of the flying pattern and of its corresponding UAV.

For further explanation sets forth a line drawing illustrating an aerial view of geographic areas uncaptured by a two UAVs flying square shaped patterns useful in explaining a method for identifying a geographic area not captured by the digital camera while the UAV is flying in a current flying pattern in formation with another UAV. In the example of the camera coverage of two UAVs is extrapolated along their flight respective flight paths resulting in the total area captured by a first on board camera on the first UAV and the total area captured by the second on board camera on the second UAV. Determining a gap in camera coverage between the total camera coverage of the first UAV and the total camera coverage of the second UAV according to the example of includes determining an area between a portion of the outer perimeter of the total area captured by the first on board camera and a portion of the perimeter of the total area captured by the second on board camera.

The example of two UAVs flying in square shaped patterns is for explanation and not for limitation. In fact UAVs according to the present invention may be implemented using a single UAV or many UAVs flying any pattern as will occur to those of skill in the art.

After identifying a geographic area not captured by the digital camera methods of navigating a UAV according to the present invention include modifying the current flying pattern to capture an image of the identified and uncaptured geographic area. Modifying the current flying pattern to capture an image of the identified geographic area may be carried out by identifying flight control instructions for changing the shape of the current flying pattern of the UAV identifying flight control instructions for increasing the altitude of the UAV identifying flight control instructions for changing the shape of the current pattern identifying flight control instructions for changing the scope of the current flying pattern of the UAV by for example changing the radius of the pattern or other ways as will occur to those of skill in the art. Modifying the current flying pattern to capture an image of the identified and uncaptured geographic area may be carried out by reducing a distance between the first UAV and the second UAV by for example identifying flight control instructions for modifying one or more the flying patterns of the UAVs to reduce the distance between the UAVs. Flight control instructions may be identified and executed by a navigational algorithm on a navigational computer on board the UAV. Alternatively flight control instructions may be identified by a navigational algorithm on a navigational computer in a remote control device and transmitted to the UAV to modify the current flying pattern.

For further explanation sets forth line drawing illustrating a changed area of camera coverage resulting from modifying the flying pattern of the UAV. In the example of modifying the current flying pattern to capture an image of the identified and previously uncaptured geographic area includes identifying flight control instructions for changing the altitude of the UAV . In the example of increasing the altitude of the UAV results in increasing size of the currently captured geographic area . The increased size of the currently captured geographic area includes a portion of the previously uncaptured geographic area . In the example of the shape of the previous flying pattern is not modified. Only the altitude of the UAV is modified such that at least a portion of the previously uncaptured geographic area is now captured by the onboard digital camera.

As discussed above the shape of the flying pattern of a UAV may also be changed to capture the previously uncaptured area. For further explanation sets forth a line drawing illustrating the changed area of camera coverage resulting in changing the flying pattern of the UAV by changing the shape of the flying pattern of the UAV. In the example of the modified flying pattern of the UAV is changed from a rectangular flying pattern to a circular flying pattern that orbits a waypoint located generally in the center of the previously uncaptured geographic area . Modifying the flying pattern advantageously results in an area captured by the on board camera that covers the previously uncaptured area .

It will be understood from the foregoing description that modifications and changes may be made in various embodiments of the present invention without departing from its true spirit. The descriptions in this specification are for purposes of illustration only and are not to be construed in a limiting sense. The scope of the present invention is limited only by the language of the following claims.

