---

title: User-based wide area network optimization
abstract: An improved user experience at a local client computer that is coupled to one or more remote servers over a WAN is provided by an arrangement in which data and files that are likely to be needed by a user during a work session are identified through the application of one or more heuristics and then pre-fetched to be made available in advance of the session's start. The pre-fetching of the data and files may be performed as the client computer goes through its startup or boot process. When the startup is completed and the desktop applications become ready for use, the data and files that the user needs to immediately begin work are already available at the local client computer.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08578018&OS=08578018&RS=08578018
owner: Microsoft Corporation
number: 08578018
owner_city: Redmond
owner_country: US
publication_date: 20080629
---
Information technology IT management in organizations that operate branch offices must accommodate the often conflicting needs of local like application performance and manageability versus deployment costs. To reduce total cost of ownership TCO there is a trend where branch office servers are consolidated and services and applications are pushed from the LAN local area network to being hosted across a WAN wide area network from a hub that is commonly located at an enterprise s headquarters location. While such branch and hub architectures can provide substantial cost benefits the reliance on WAN resources can often lead to depleted bandwidth and increased end user wait time. This typically results in a reduction in the quality of the user experience at a branch office compared to that at the main office and an overall loss of productivity in the branch.

One solution to the problem has been to add more wide area bandwidth and historically data services commonly consume a large portion of enterprise IT budgets. However incremental increases in bandwidth can carry a disproportionate price increase and limiting factors such as network latency and application behavior can restrict both performance and the return on bandwidth investment.

WAN optimization solutions such as wide area file systems WAFS have emerged that seek to enable the cost advantages provided by centralized servers without compromising performance by maximizing WAN utilization which can often delay or eliminate the need to purchase additional WAN bandwidth. While such solutions can provide significant benefits and typically represent a good return on investment current WAN optimization and WAFS solutions are typically file or data oriented and do not take users behaviors into account. Accordingly additional opportunities still remain for more effective WAN optimization.

This Background is provided to introduce a brief context for the Summary and Detailed Description that follow. This Background is not intended to be an aid in determining the scope of the claimed subject matter nor be viewed as limiting the claimed subject matter to implementations that solve any or all of the disadvantages or problems presented above.

An improved user experience at a local client computer that is coupled to one or more remote servers over a WAN is provided by an arrangement in which data and files that are likely to be needed by a user during a work session are identified through the application of one or more heuristics and then pre fetched to be made available in advance of the session s start. The pre fetching of the data and files may be performed as the client computer goes through its startup or boot process. When the startup is completed and the desktop applications become ready for use the data and files that the user needs to immediately begin work are already available at the local client computer.

In an illustrative example a domain server which provides access control using authentication authorization and accounting AAA services is operatively coupled to a WAN optimization appliance such as one of a pair of WAFS controllers that are typically deployed pair wise in respective hub and branch subnets of an enterprise network that are connected over a WAN link. When the user logs in to the domain server to begin work the domain controller notifies the local WAFS controller which can begin pre fetching data and files identified using heuristics which take expected user behavior into account.

Illustrative heuristics include for example recently edited files directory information for mirrored documents or folders file names that are explicitly configured by a network administrator home pages for web browsers and the like. The WAFS controllers may apply one or more WAN optimization techniques to transport the identified data and files across the WAN to efficiently utilize available bandwidth and reduce latency. The combination of the features provided by the access control system and the WAN optimization appliances advantageously provides the user with the perception of a quick and responsive network and an overall experience in the branch subnet that is more transparent seamless and LAN like.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

A number of centralized resources such as servers are configured at the hub to provide services to the client computers in the branch . Such services commonly include those provided by a file server mail server and web server . However it is emphasized that these servers are merely illustrative and the actual number and configuration of servers may vary from that shown and will generally be dependent upon the requirements of a particular branch hub deployment. The consolidation of server infrastructure into the hub typically enables all maintenance troubleshooting security policy enforcement backups and auditing to be performed centrally which can significantly lower TOC for most enterprises.

WAN may operate over portions of private networks and or public networks such as the Internet. WAN is representative of many current WANs that are commonly utilized to support remote branch operations. Typical WAN issues include high network latency constraints on bandwidth and packet loss. Such limitations can constrain branch productivity. In addition many business or productivity applications operating in the network were developed for LAN environments and are not particularly WAN optimized.

Consequently it is recognized that optimizing the utilization of the limited available WAN bandwidth can significantly contribute to better user experience in the branch . Optimizing WAN traffic provides users with the perception of a quick and responsive network and an overall experience in the branch that is more transparent seamless and LAN like. In addition many enterprises will benefit from lowered operating costs which would result from a decrease in the traffic crossing the WAN .

A domain controller is utilized in the branch subnet for implementing a user access control system for tracking users at the client computers . More particularly as shown in the domain controller is configured for implementing AAA authentication authorization and accounting services for the client computers in the branch subnet as respectively indicated by reference numerals and .

The authentication service provides the ability to identify someone known as a principal or client and to control the client s access to resources. Authentication is thus the act of validating a client s identity. Generally clients must present some form of evidence known as credentials proving who they are for authentication. Typically credentials include a username password pair.

After authenticating a principal the next step is to determine whether that principal has permission to access the resources it is requesting. This process is known as authorization and provided by the authorization service . There are several schemes to determine if an authenticated principal has authorization to access a particular resource.

For example in a Microsoft Windows Server context authentication is provided by the server infrastructure and server operating system. Any communication between client and application must first pass through the server and any process that runs on a Windows server does so in the context of an authenticated user account. In addition when using the Microsoft NTFS file system New Technology File System the operating system maintains an access control list ACL for every resource it controls which serves as the ultimate authority for resource access permissions.

The accounting service measures the consumptions of the resources by users at the client computers . Common measurements include the amount of time that the user is logged on during a use session or the amount of data transmitted to or received from the hub . The accounting service will typically log statistics and usage data pertaining to a user s session on the network for purposes of billing planning trend analysis resource allocation and utilization capacity planning and similar activities.

Returning back to WAFS controllers and are located in respective subnets i.e. the branch and hub of the network in a symmetrical configuration. The WAFS controllers are located in the direct traffic paths at opposite ends of the WAN .

In this illustrative example the WAFS controllers are configured to overcome some of the limitations in the WAN by optimizing traffic flowing over the link. As indicated in such optimization is typically implemented using various techniques such as stateless and stateful data compression caching protocol optimization policy based routing quality of service QoS techniques and other conventional techniques . It is noted that the use of the WAFS controllers is intended to be illustrative and that other arrangements for optimizing traffic may also be utilized including solutions that are not necessarily locally or client based as may be required to meet the needs of a particular implementation.

Data compression algorithms typically identify relatively short byte sequences that are repeated frequently over time. These sequences get replaced with shorter segments of code to reduce the size of the data that gets transmitted over the WAN link. Data compression can be implemented using various methodologies or algorithms including stateless compression such as the well known LZW Lempel Ziv Welch technique and stateful compression such dictionary based compression. Dictionary compression relies on storing all the data passing a compression engine in an external dictionary. In addition to storing the data a compression engine identifies the data already seen and replaces it with a much smaller reference to an index in the dictionary thereby enabling subsequent decompression of the data.

Protocol specific optimization typically looks to improve throughput on the link by overcoming some of the inherent limitations in so called chatty transfer protocols such as CIFS Common Internet File System and MAPI Message Application Programming Interface that were primarily designed for low latency local area networks. Unless optimized such protocols can experience significant performance degradation when used on less responsive WANs.

Caching entails the WAN compression server simulating an application server by watching all requests and saving copies of the responses. If another request is made from a client computer for the same file the WAN compression server functions as a proxy and after validating with the server that the file has not been altered may serve the file from its cache.

Policy based routing is commonly used to implement quality of service techniques that classify and prioritize traffic by application by user or in accordance with characteristics of the traffic e.g. source and or destination addresses . In combination with queuing policy based routing can allocate available WAN bandwidth to ensure that traffic associated with some applications does not disrupt enterprise critical traffic. Prioritization may be implemented for example using policy based QoS to mark outbound traffic with a specific Differentiated Services Code Point DSCP value. DSCP capable routers read the DSCP value and place traffic being forwarded into specific queues e.g. a high priority queue best effort lower than best effort etc. that are serviced based on priority.

In accordance with the principles of the present user based WAN optimization arrangement the WAFS controllers are further arranged to enable user based WAN optimization that may be expected to significantly improve the user experience at the branch subnet . The WAN optimization is implemented by integrating functionality of the user access control system provided by the domain controller with that of WAFS controllers which are configured to perform user based data pre fetching according to a set of heuristics.

More particularly as shown in the domain controller is configured to enable the user to log in to the domain and or network operating in the hub and branch network . Upon user login or other action that is indicative that the user is using a computer in the domain or network the domain controller generates a notification to the WAFS branch controller of the activation event .

When the notification is received the WAFS branch controller applies heuristics to identify files and data for pre fetching from the centralized resources at the hub subnet that are likely to be required by the user . While the heuristics are shown in this example as being located in a store that is associated with the WAFS branch controller it is noted that the heuristics may be alternatively implemented in a store that is associated with the WAFS hub controller the domain controller or located in a standalone store.

An illustrative set of heuristics is shown in which takes the behavior of the user into account. Such user behaviors may be tracked for example by the accounting functionality implemented in the domain controller . It is emphasized that the heuristics are merely illustrative and that the particular heuristics utilized can vary depending on the requirements of a specific implementation and not all the heuristics shown need necessarily be used in every case.

The illustrative heuristics include a heuristic used to identify files that were recently edited by the user for example during the previous session before the current login. This heuristic recognizes that the recently edited files could represent work in progress and makes use of the likelihood that the user will require the files again in the current session.

A heuristic may be used to identify and pre fetch directory information for mirrored documents . Such directory information identifies those files typically important large or frequently accessed files that are mirrored across all of the organization s branches for which requests may be fulfilled locally. Mirroring is commonly utilized to speed user access to such files and often makes more efficient use of bandwidth on the WAN by transferring the mirrored content when the network is otherwise idle for example at night to thus free up bandwidth for other applications during the day.

Similarly a heuristic can be utilized to identify directory information that can be pre fetched for a networked folder for user e.g. My Folder or My Documents directory information that is stored on a file server among the centralized resources in the hub subnet .

A heuristic may be used for identifying and then pre fetching the home page set by the user in a web browser that is installed on a local client computer . The home page is the first webpage that is displayed after the web browser is launched by the user . Home pages are typically user selectable in many enterprise network environments. Given the Internet s popularity as a source of news business information and other important resources pre fetching the home page for the user will often be effective as the web browser is typically a frequently utilized application that is often launched shortly after start up of the client computer. The heuristic may also be optionally extended to favorite web pages that are bookmarked by the user .

A heuristic relating to explicitly configured file names enables for example an enterprise network administrator to configure certain application profile data to be pre fetched to the client computer . An illustrative example of the application of this heuristic is shown in where dialing rules having an explicitly configured file name are pre fetched for a unified communication client .

In this example the unified communication client running on a client computer helps users be more productive by enabling them to communicate easily with others in different locations or time zones using a range of different communication applications including e mail instant messaging IM and voice and or video telephone calls. Integration with collaboration and information sharing applications as well as office productivity applications such as word processing spreadsheet and presentation also gives the users different ways to communicate through the unified communications client . It is noted however that the dialing rules are simply illustrative and that other types and kinds of application profile information or data may also be pre fetched according to the heuristic.

The data and files at the centralized resources at the hub subnet identified through application of the heuristics are pre fetched using the WAFS controllers during the time period in which the client computer is initialing up its operating system and before the desktop applications become available to the user . By performing the pre fetching in such a manner the pre fetched data and files may be made available at about the same time as the client computer has completed its startup processes.

Timing the pre fetching to coincide with startup provides the user with the perception of a quick and responsive network and an overall experience in the branch subnet that is more transparent seamless and LAN like. In addition many enterprises will benefit from lowered operating costs which result from a decrease in the traffic crossing the WAN . The timing of the pre fetching is shown in the flowchart provided in .

The user begins by starting up the client computer . As the client computer performs its normal start up processes the user is typically provided with a prompt and performs a login to the enterprise network via the domain controller . The domain controller sends a notification of the user activation event which is received by the WAFS branch controller .

The WAFS controllers operate to pre fetch data and or files identified through the application of one or more heuristics from the centralized resources at the hub subnet . As data and files are sent across the WAN from the hub subnet to the client in the branch subnet the WAFS controllers may apply one or more WAN optimization techniques as shown in and described in the accompanying text to utilize bandwidth efficiently and perform the transport with minimized latency.

Once the client computer completes it start up processes and makes the desktop applications available to the user the pre fetched data and files that are likely to be needed by the user are available in advance or at about the same time that the desktop applications become available to the user . That way as soon as the desktop applications are available on the client computer the user may immediately begin working without needing to wait to access or download the needed data and files over the WAN .

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

