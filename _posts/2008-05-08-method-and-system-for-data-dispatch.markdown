---

title: Method and system for data dispatch
abstract: A method and system for migrating source data from one or more databases to a destination database, wherein the destination database is selected based on power consumption of the destination database. A data migration server determines which destination database should be selected by selecting a number of candidates and comparing the power consumed, the available space and the maximum monthly power consumption limit. A user intervention policy is created to evaluate which data should be moved to a destination database. A “payback period” is calculated to determine the amount of time that will elapse before savings are realized.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07865460&OS=07865460&RS=07865460
owner: International Business Machines Corporation
number: 07865460
owner_city: Armonk
owner_country: US
publication_date: 20080508
---
The present invention relates generally to energy efficiency across the data center and more particularly to the migration of data based on power consumption.

Energy efficiency across the entire data center is becoming a top concern for corporations around the world. This problem requires consideration of all energy efficiency components of the data center from component levels through server and system levels and concluding with the complete data center. At the system level storage devices are an extremely important part of the equation which needs to be analyzed. Disk systems can require substantial amounts of power to operate and cool and in many cases can require more power than the server itself.

Data migration is the process of transferring data between storage types formats or computer systems. Data migration is usually performed programmatically to achieve an automated migration freeing up human resources from tedious tasks. It is required when organizations or individuals change computer systems or upgrade to new systems or when systems merge such as when the organizations that use them undergo a merger takeover .

To achieve an effective data migration procedure data on the old system is mapped to the new system providing a design for data extraction and data loading. The design relates old data formats to the new system s formats and requirements. Programmatic data migration may involve many phases but it minimally includes data extraction where data is read from the old system and data loading where data is written to the new system.

After loading into the new system results are subjected to data verification to determine that data was accurately translated is complete and supports processes in the new system. During verification there may be a need for a parallel run of both systems to identify areas of disparity and forestall erroneous data loss. Automated and manual data cleansing is commonly performed in migration to improve data quality eliminate redundant or obsolete information and match the requirements of the new system. Data migration phases design extraction cleansing load verification for applications of moderate to high complexity are commonly repeated several times before the new system is activated.

Traditional data migration involves business decisions from application owners and IT administrators to predefine a destination database that usually resides physically on another disk for each given source database. Very often such migration is a one to one relationship where a source database is mapped to a predefined destination database This migration process is done at a database level that involves no concerns on how data is being used by applications and how it relates to power consumption.

Reference is made to which illustrates a traditional database migration process . Database A at and Database B at are source databases containing data that can be migrated to another storage database. Migration routines cleansing routines and indexing strategies are created by application owners. IT administrators then determine the physical location of the destination database. The source data from Database A is moved to Staging Database A at and source data from Database B is moved to Staging Database B at . Cleansing scripts are applied to the data on Staging Database A and to the data on Staging Database B. An index is then created for the data on Staging Database A and for the data on Staging Database B. Each set of data from Staging Database A and Staging Database B is migrated to a destination database which is Database in the Figure. The data from Staging Database A and Staging Database B must be merged with each other and with any existing data on Database . In these prior art methods the destination database is predefined when it enters the system. As data comes in it is written to the designated source not taking into account the amount of power that may used in the destination database. Current data assignment does not provide any intelligent decision making around selecting the optimal location considering energy efficiency and other requirements.

It is a primary object of the invention to provide a method and system for dispatching data based on power conservation. It is another object of the invention to provide a method and system for selecting the destination database based on energy efficiency. It is a further object of the invention to provide a method and system for indexing the dispatched data for fast and easy retrieval.

These and other objects and advantages are accomplished by a method for receiving source data from one or more databases and dispatching it to a destination database wherein the destination database is selected based on power efficiency. Specifically the method of the present invention determines which destination database should be selected by selecting a number of candidates and comparing the power consumed the available space and other predefined criteria. In one aspect of the method of the invention incoming data may be fragmented and sent to different destinations. An index is created for each dataset that is dispatched so the retrieval and recombining of fragmented data is made easy.

In accordance with another embodiment a system is provided for receiving source data from one or more databases and dispatching it to a destination database wherein the destination database is selected based on power efficiency of the destination database. Specifically the system of the present invention includes a number of target or destination databases which are analyzed for power efficiency available space and other predefined criteria. In one aspect of the system of the invention incoming data is received and may be fragmented and sent to different destinations. An index is created for each dataset that is dispatched so the retrieval and recombining of fragmented data is made easy.

As will be appreciated the present invention provides an effective method for reducing energy consumption of certain types of computer systems. The data dispatch process is enhanced by using power consumption as a guiding factor in determining how data in the source database can be assigned real time to a destination database to maintain a desirable power consumption level.

Three separate sets of data and are shown incoming to system facility . The number of data sets is not limited and any number of data sets may be input into DDS as long as the storage needs can be met. Decision system of DDS controls the decision process and the management of data needed to be dispatched based on energy efficiency characteristics. Data and are received in facility and temporarily held in storage device until a decision is made by decision system as to which destination database to migrate the data. System includes three destination databases and for migration of data and . The number of destination databases is not limited and may be as many as the system can maintain. Moreover new destination databases may be added to the candidates from time to time as they become available.

DDS handles the mapping of data from a staging database such as temporary storage device to a destination database such as destination database or . Database migration tools currently exist in the prior art which allow administrators to migrate a database from staging server to a destination server or via a graphical user interface GUI instead of writing script language for the process. Although the currently available migration tools facilitate the actual migration of data it is decision system of DDS which calculates the size of data to be moved and determines the best candidate for the destination database.

In one aspect of the present invention DDS locates the most energy efficient location for a given set of data. After DDS determines the best location for a given set of data the data is written to the destination and migrated there. It will not need to be relocated unless another destination becomes available with more desirable energy efficiency characteristics than the currently selected destination.

In another aspect of the present invention after data has been migrated to the preferred destination system monitors the destination databases for storage capacity. As the most energy efficient destination storage facility reaches its capacity or becomes unavailable it may be necessary to migrate subsequent incoming data to a different location. The subsequent incoming data may be related to already migrated data. The inability to migrate the subsequent incoming data to the same destination database as the related data may cause the data to become fragmented. DDS will keep an index of the location where all the data is stored so that it can be located and recombined upon retrieval.

In yet another aspect of the present invention the most energy efficient database may not have enough available space to hold an entire dataset. DDS may fragment the data and send a portion to the most energy efficient database and send the rest to the next most energy efficient database. Since an index is created for each set of dispatched data retrieval and recombining of the fragmented data is not a problem.

Part of the decision process performed by decision system involves the monitoring of the power consumption level of each destination database candidate.

Decision system of DDS must also gather usage and requirements of the incoming data. These can be identified by answering a set of queries categorizing the answers and creating tags. DDS will compare the tags of the incoming data with the tags of the stored data in the candidate destinations.

DDS executes dispatch policies including the control of reference data schema configuration merges of data and the like. As an added benefit DDS can perform a predictive data dispatch decision making process to predict when data may arrive. This aspect will be discussed more specifically below.

As data enters DDS DDS identifies the incoming data and determines whether it is a real time data b near real time data or 3 non real time data. Real time data denotes information that is delivered immediately after collection. There is no delay in the timeliness of the information provided Near real time pertains to the delay introduced by automated data processing or network transmission between the occurrence of an event and the use of the processed data such as for display or feedback and control purposes. For example a near real time display depicts an event or situation as it existed at the current time less the processing time. The distinction between near real time and real time varies and the delay is dependent on the type and speed of the transmission. Non real time data has no time constraints for delivery of data. It is often used for lower priority data.

After it has identified the type of data it has received DDS determines if the data should be dispatched immediately. Real time and near real time data should preferably be dispatched immediately while non real time data may be retained. If data is retained and does not need to be dispatched right away DDS must determine an acceptable duration of time for storing data in temporary staging system .

Next DDS determines the best option or candidate from the list of available destinations for migration of the data. Data is then dispatched to the selected destination.

DDS may select candidates for destination databases either through manual entry or through automatic discovery. After a list of candidates has been created DDS will monitor the status of the destination candidates to ensure that they are available for writing and must also maintain information about their current energy efficiency characteristics. Monitoring by DDS may be conducted a at regular intervals b proactively when DDS predicts a data write may be incoming or c when data has come to DDS and needs to be written.

DDS and destination candidates may communicate via any known or future protocol or by an application programming interface API . In some cases it is not best to simply dispatch data as it enters DDS . If DDS believes that more related data will be incoming shortly it may temporarily store data aggregate it and write it altogether. Conversely if a large amount of data enters DDS DDS may divide it and write a portion of it to an efficient destination that has only limited space. When the dispatch of data is delayed incoming data is stored in temporary staging location for a short period of time before it is dispatched.

Although energy efficiency is becoming more important in most cases businesses want to make an intelligent decision about how they may conserve while still meeting other business criteria. The decision algorithm which is more specifically discussed below with respect to may set business or technical criteria based on importance. Factors such as cost of fragmentation of data and query time will be considered to ensure that the most energy efficient location meets those criteria. The logic of the system may be based on algorithms such as a weighted algorithm method whereby energy efficiency is assigned a weighting along with other business or technical requirements. The weightings are assigned to each variable to select the optimum location.

A Markov decision process MDP which uses a mathematical framework is another means for providing a decision making pattern in the process herein. MDPs are useful where outcomes are partly random and partly under the control of the decision maker.

A method embodiment of the invention in relation to can be performed by system in response to a processor executing an arrangement of instructions contained in a main memory in DDS . Such instructions can be read into the main memory from a computer readable medium such as decision system . Execution of the arrangement of instructions contained in main memory causes DDS to perform the steps described herein. One or more processors in a multi processing arrangement may also be employed to execute the instructions contained in the main memory of DDS . In alternative embodiments hard wired circuitry may be used in place of or in combination with software instructions to implement an embodiment of the present invention. Thus embodiments of the present invention are not limited to any specific combination of hardware circuitry and software.

The logic of system of initializing data dispatch will now be described with reference to . According to this embodiment a list of candidate destinations is established at step by decision system of DDS . DDS monitors the destination candidates for power consumption space restrictions data usage and requirements as shown at step . Data that needs to be migrated such as from source or as shown at step is sent to system facility of DDS from an application as shown at step .

DDS evaluates the incoming data and considers all the candidates from the list. At step DDS selects the candidate with the best energy efficiency characteristics for the received data. At step DDS must determine whether the candidate with the best energy characteristics has available space. If there is not enough available space to migrate data to the selected candidate database this candidate is removed from the list as shown at step . The selection process starts over at step and the next best available candidate is selected. If it is determined that there is available space other predefined criteria are evaluated such as usage and requirements of the existing stored data in the destination database as shown in step . Other factors to consider include but are not limited to time of access geography of users frequency of access and number of users. The data to be migrated is compared with the data that exists in the candidate destinations. If there is not enough available space fragmentation may be considered. The amount of fragmentation that may be necessary is considered along with the cost of reassembly that will be necessary when the data must be combined. A threshold is set in order limit the cost of migration. After all the factors are considered and the cost of migrating the data is greater than the threshold this candidate must be removed from the list and the selection process begins yet again at step .

Once the candidate destination has been selected DDS creates an index to the destination location at step so that data may be retrieved when needed. DDS then writes the data to the selected destination at step . DDS continues to monitor this destination and all other candidates at step . The process continues to repeat with new incoming data to DDS at step .

In another aspect of the invention predictive data dispatch methods may be included in the dispatch process of the present invention. One method involves predicting the input of particular data such as expecting particular kinds of data at particular times. Certain data environments may require writing data in patterns that are predictable. Nightly batch jobs or seasonal usage patterns may help to determine future data migration needs. DDS can predict when to expect incoming data based on past history Monte Carlo simulation and other predictive methods. Rather than simply writing data requests as they arrive future needs may be taken into consideration during the decision process. By factoring this into its decision process DDS may choose to leave certain destinations available for future expected incoming data.

Another predictive method involves action by DDS with respect to the status of candidate destinations. DDS may use predictive methods to act proactively before expected data enters. This may include proactive checks of a candidate s availability calculation of fragmentation and preemptive decision making. In cases where a destination candidate is the most energy efficient choice and size is adjustable DDS may send a request to increase the available data amount based on incoming workloads. Any known or current methods for requesting allocation of additional space may be used.

Examples of types of databases useful herein as a destination database are set forth in Table 1 below. The parameters set forth in the Table are accessed in order to determine the best possible candidate for the destination database. The power metrics are determined by methods already known such as nameplate power or power measured from an external power meter.

Another embodiment of the invention is directed to a medium that is readable by a computer or other device which includes an executable instruction for initializing data dispatch. In an aspect the executable instruction involves the process steps shown in as described in detail above. In various aspects the executable instruction may be in the form of a database utility application a script type program a compiled program or other suitable forms known in the art.

The term computer readable medium as used herein refers to any medium that participates in providing an instruction to a computer processor for execution. Such a medium may take many forms including but not limited to non volatile media volatile media and transmission media. Non volatile media include for example optical or magnetic disks such as temporary storage device . Volatile media include dynamic memory. Transmission media include coaxial cables copper wire and fiber optics. Transmission media can also take the form of acoustic optical or electromagnetic waves such as those generated during radio frequency RF and infrared IR data communications. Common forms of computer readable media include for example a hard disc any magnetic medium a CD ROM CDRW DVD any other optical medium optical mark sheets and any other physical medium with patterns of holes or other optically recognizable indicia a RAM a PROM an EPROM a FLASH EPROM any other memory chip or cartridge a carrier wave or any other medium from which a computer can read.

It should be mentioned that this embodiments discussed herein apply to any and all types of computer data including but not limited to relations database management systems RDMBS non relational data blocks of computer data application specific computer files such as spreadsheets word processing documents and the like and computer executable files.

The invention has been described with reference to exemplary embodiments it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted for elements thereof without departing from the scope of the invention. In addition many modifications may be made to adapt a particular situation or material to the teachings of the invention without departing from the essential scope thereof. Therefore it is intended that the invention not be limited to the particular embodiment disclosed as the best mode contemplated for carrying out this invention but that the invention will include all embodiments falling within the scope of the appended embodiments.

