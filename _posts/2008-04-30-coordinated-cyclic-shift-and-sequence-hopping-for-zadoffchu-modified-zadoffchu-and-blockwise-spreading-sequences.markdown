---

title: Coordinated cyclic shift and sequence hopping for Zadoff-Chu, modified Zadoff-Chu, and block-wise spreading sequences
abstract: A cyclic shift of a reference signal is quantized as a combination of a cell specific cyclic shift with an outcome of a pseudo-random hopping, and an indication of the cell specific cyclic shift is broadcast in the cell. In one embodiment the cyclic shift is quantized as a modulo operation on a sum of the cell specific cyclic shift, the outcome of the pseudo-random hopping, and a user specific cyclic shift, in which case an indication of the user specific cyclic shift is sent in an uplink resource allocation and a user sends its cyclically shifted reference signal in the uplink resource allocated by the uplink resource allocation. The cyclic shift may also be quantized according to length of the reference signal as cyclic_shift_symbol=(cyclic_shift_value*length of the reference signal)/12; where cyclic_shift_value is between zero and eleven and cyclic_shift_symbol is the amount of cyclic shift given in reference signal symbols.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08432979&OS=08432979&RS=08432979
owner: Nokia Siemens Networks Oy
number: 08432979
owner_city: Espoo
owner_country: FI
publication_date: 20080430
---
This patent application claims priority under 35 U.S.C. 119 e from Provisional Patent Application Nos. 60 927 054 filed Apr. 30 2007 and 60 964 878 filed Aug. 15 2007 the disclosure of each being hereby incorporated by reference in their entirety.

The exemplary and non limiting embodiments of this invention relate generally to wireless communications systems and more specifically relate to transmission reception of ZC Zadoff Chu sequences including traditional ZC sequences as well as modified e.g. extended or truncated ZC sequences.

Reference can be made to 3GPP TR 25.814 V7.0.0 2006 06 TSGRAN PUTRA UTRA Release 7 such as generally in section 9.1 for a description of the SC FDMA UL of e UTRA. Referring to which reproduces FIG. 9.1.1 4 of 3GPP TR 25.814 according to that former format there are two blocks reserved for the pilot signal in the 3GPP LTE UL former frame format referred to as short blocks SB and SB. That format has been recently changed and shows a generic format according to current adoption taken from section 4.1 of 3GPP TS 36.211 V1.0.0 2007 03 . It is seen at that according to the current format there are no longer SBs but rather the structure is one subframe consisting of two slots each of length 0.5 msec. The SBs of the older format are replaced by LBs in the newer format. Regardless of the particular format though B or otherwise in each subframe there will be two pilots 2 pilot LBs in the latest format or more generically two pilot RSs . Additional LBs may also be used for this purpose e.g. for transmitting out band or out time RSs which may or may not be periodic.

More specifically as is described in Section 9.1 of 3GPP TR25.814 the basic uplink transmission scheme is single carrier transmission SC FDMA with cyclic prefix to achieve uplink inter user orthogonality and to enable efficient frequency domain equalization at the receiver side. Frequency domain generation of the signal sometimes known as DFT spread OFDM DFT S OFDM is assumed and illustrated in which reproduces FIG. 9.1.1 1 of 3GPP TR 25.814. This approach allows for a relatively high degree of commonality with the downlink OFDM scheme and the same parameters e.g. clock frequency can be reused.

The basic sub frame structure formerly approved for the UL transmission is shown herein in two short blocks SB and six long blocks LB are defined per sub frame and two subframes span one TTI. Short blocks are used for reference signals for coherent demodulation and or control data transmission. Long blocks are used for control and or data transmission. As seen at there is no longer a distinction as between SBs and LBs but there are still two slots each to bear one pilot sequence. The data could include either or both of scheduled data transmission and non scheduled data transmission and the same sub frame structure is used for both localized and distributed transmission.

ZC sequences and their modified versions i.e. truncated and or extended ZC sequences are therefore used as reference signals in the LTE uplink system and will also be used on the physical uplink control channel PUCCH . It has been decided in 3GPP that data non associated control signals such as ACK NACK and CQI will be transmitted on PUCCH by means of ZC sequences. A paper entitled ML1 L2 CSBUEAUL D 3GPP TSG RAN WG1 Meeting 47bis Sorrento Italy Jan. 15 19 2007 by Nokia document R1 070394 is a reference for those methods. Multiple UEs in a given cell share the same Zadoff Chu sequence while keeping the orthogonality by using a cyclic shift specific to each UE. In this manner different ones of the UEs in a cell may multiplex their UL transmissions e.g. non data associated UL transmissions on the same frequency and time resource physical resource block unit or PRB PRU currently 180 kHz in LTE . The orthogonality of the ZC sequences enables the receiving Node B to discern the different signals from one another. However two problems arise.

First ZC sequences of different lengths may occasionally have large cross correlation properties. This causes an interference problem for demodulation reference signals.

In order to avoid code domain collisions on PUCCH different cells sectors should utilize different ZC mother sequences. This is a problem related to ZC sequences used in PUCCH in that there are not enough proper mother sequences for sufficient randomization so in some instances adjacent cells operate with the same ZC mother sequence sometimes termed the base sequence .

Another issue related to PUCCH is that different UEs transmitting data non associated control signals in the same cell are separated only by means of different cyclic shifts of the same ZC sequence. The problem with this approach is that the sequences are not perfectly orthogonal against each other.

It is also noted that orthogonality problems will increase when some practical limitations such as power control errors are taken into account.

The same issue is related also to the cyclic shifts of block level spreading codes see the above referenced document R1 070394 for further details . Considering an extreme case where the Doppler spread is very high i.e. due to the UE movement . It is noted that block level codes with adjacent cyclic shifts have the worst cross correlation properties and are therefore most difficult to distinguish from one another at the receiver after being multiplexed. Further detail as to addressing such Doppler shifts can be seen at U.S. Provisional Patent Application No. 60 899 861 filed on Feb. 5 2007 and now PCT IB2007 004134 filed on Dec. 28 2007.

Pseudo random cyclic shift hopping is known in the art as can be seen at a paper entitled CSHUSRS 3GPP TSG RAN WG1 Meeting 48 St. Louis USA Feb. 12 16 2007 by ETRI document R1 070748 .

Another relevant paper is entitled N CACK NACK SUCSIE UTRAN U 3GPP TSG RAN WG1 Meeting 47bis Sorrento Italy Jan. 15 19 2007 by ETRI document R1 070078 . This paper proposes to use some kind of randomization for ACK NACK signaling. It assumes that the ACK NACK signal is transmitted without separate RS such that a certain cyclic shift of CAZAC code corresponds to an ACK and another cyclic shift corresponds to a NACK respectively. Document R1 070078 appears to propose that mapping of ACK NACK is done such that a one to one mapping relation between the ACK NACK information and the transmission cyclic shifts in the second block is reversed against the mapping in the first long block LB and the ACK NACK information is conveyed in the amount of the cyclic shift.

This is seen to forego what the inventors see as the primary advantage of cyclic shifting randomizing interference between different code channels when the same underlying mother ZC sequence is used. Where the cyclic shift is given by the ACK NACK message the UE seeks to send the orthogonality of the ZC codes cannot be maximized. As will be seen below the inventors have devised a different approach to address the problem of too few ZC mother codes available to orthogonalize all ZC sequences in use by the various UEs.

In accordance with one exemplary aspect of the invention is a method that includes quantizing a cyclic shift of a reference signal as a combination of a cell specific cyclic shift with an outcome of a pseudo random hopping and broadcasting an indication of the cell specific cyclic shift.

In accordance with another exemplary aspect of the invention is an apparatus that includes a processor and a transmitter. The processor is configured to quantize a cyclic shift of a reference signal as a combination of a cell specific cyclic shift with an outcome of pseudo random hopping. The transmitter is configured to broadcast an indication of the cell specific cyclic shift.

In accordance with another exemplary aspect of the invention is a computer readable readable memory embodying a program of instructions that are executable by a processor to perform actions directed toward determining a cyclic shift of a reference signal. In this embodiment the actions include quantizing a cyclic shift of a reference signal as a combination of a cell specific cyclic shift with an outcome of a pseudo random hopping and broadcasting an indication of the cell specific cyclic shift.

In accordance with another exemplary aspect of the invention is an apparatus that includes processing means such as for example a digital processor an ASIC a FPGA or the like and communication means such as for example a transmitter or transceiver configured to broadcast the cell specific cyclic shift wirelessly . The processing means is for quantizing a cyclic shift of a reference signal as a combination of a cell specific cyclic shift with an outcome of pseudo random hopping. The communication means is for sending an indication of the cell specific cyclic shift over a wireless link

In accordance with another exemplary aspect of the invention is a method that includes determining a cell specific cyclic shift from a received indication of the cell specific cyclic shift determining a quantized cyclic shift of a reference signal as a combination of the cell specific cyclic shift with an outcome of a pseudo random hopping and sending a reference signal that is cyclically shifted according to the determined quantized cyclic shift

In accordance with another exemplary aspect of the invention is a computer readable memory embodying a program of instructions that is executable by a processor to perform actions directed toward determining a cyclic shift of a reference signal. In this embodiment the actions include determining a cell specific cyclic shift from a received indication of the cell specific cyclic shift determining a quantized cyclic shift of a reference signal as a combination of the cell specific cyclic shift with an outcome of a pseudo random hopping and sending a reference signal that is cyclically shifted according to the determined quantized cyclic shift.

In accordance with another exemplary aspect of the invention is an apparatus that includes a receiver a processor and a transmitter. The receiver is configured to receive an indication of a cell specific cyclic shift. The processor is configured to determine from the received indication the cell specific cyclic shift and also to determine a quantized cyclic shift of a reference signal as a combination of the cell specific cyclic shift with an outcome of a pseudo random hopping. The transmitter is configured to send a reference signal that is cyclically shifted according to the determined quantized cyclic shift.

In accordance with another exemplary aspect of the invention is an apparatus that includes receiving means such as for example a receiver or a transceiver determining means such as for example a processor and ASIC or FPGA or the like and sending means such as for example a transmitter or a transceiver . The receiving means is for receiving receive an indication of a cell specific cyclic shift. The determining means is for determining from the received indication the cell specific cyclic shift and is also for determining a quantized cyclic shift of a reference signal as a combination of the cell specific cyclic shift with an outcome of a pseudo random hopping. The sending means is for sending a reference signal that is cyclically shifted according to the determined quantized cyclic shift.

Embodiments of this invention concern ZC cyclic shift hopping. The goal of the shift hopping in certain embodiments is to provide improved cross correlation and interference averaging properties between the ZC sequences transmitted by multiple UEs. Embodiments of this invention present a coordinated cyclic shift hopping scheme that is applicable for both demodulation RS and PUCCH. In broad terms an exemplary code hopping scheme presented herein can be divided into two distinct aspects randomization inside a TTI and randomization outside the TTI. A particularly advantageous environment for this invention is the UL in a UTRAN LTE system though that itself is not a limitation to this invention since the sequence hopping techniques detailed herein may be used in any wireless system such as GSM global system for mobile communication HSDPA high speed data packet access or any other system that might employ shifted CAZAC sequences reference signals from a limited number of mother base codes. Further the invention is not limited to only ZC codes but to any CAZAC sequence and the ZC codes detailed herein include modified e.g. extended or truncated ZC codes as well. As will be seen both transmission and reception of such ZC sequences are detailed.

Reference is made first to for illustrating a simplified block diagram of various electronic devices that are suitable for use in practicing the exemplary embodiments of this invention. In a wireless network is adapted for communication with a UE via a Node B base station . The network may include a serving gateway GW or other radio controller function. The UE includes a data processor DP A a memory MEM B that stores a program PROG C and a suitable radio frequency RF transceiver D for bidirectional wireless communications over a link via one or more antennas E with the Node B which also includes a DP A a MEM B that stores a PROG C and a suitable RF transceiver D and antenna E. The Node B may communicate via a data path e.g. Iub to the serving or other GW which itself includes a DR A coupled to a MEM B storing a PROG C. The GW may then communicate via another data interface to a core network not shown as well as to other GWs. At least one of the PROGs C C and C is assumed to include program instructions that when executed by the associated DP enable the electronic device to operate in accordance with the exemplary embodiments of this invention as will be discussed below in greater detail. In general the exemplary embodiments of this invention may be implemented by computer software executable by the DP A of the UE and the other DPs or by hardware or by a combination of software and or firmware and hardware.

In general the various embodiments of the UE can include but are not limited to cellular telephones personal digital assistants PDAs having wireless communication capabilities portable computers having wireless communication capabilities image capture devices such as digital cameras having wireless communication capabilities gaming devices having wireless communication capabilities music storage and playback appliances having wireless communication capabilities Internet appliances permitting wireless Internet access and browsing as well as portable units or terminals that incorporate combinations of such functions.

The MEMs B B and B may be of any type suitable to the local technical environment and may be implemented using any suitable data storage technology such as semiconductor based memory devices magnetic memory devices and systems optical memory devices and systems fixed memory and removable memory. The DPs A A and A may be of any type suitable to the local technical environment and may include one or more of general purpose computers special purpose computers microprocessors digital signal processors DSPs and processors based on a multi core processor architecture as non limiting examples.

As noted above it is convenient for this description to parse the invention into two components randomization inside a TTI and randomization outside a TTI. detail randomization inside a TTI for different scenarios and details randomization outside a TTI. combines the above two aspects to show total cyclic shift for a certain ZC sequence taking into account both intra TTI shifts and inter TTI shifts to arrive at the final shift of the sequence. A shifted ZC is alternatively termed the reference signal. shows the principle extended to a virtual MIMO scenario.

As will be detailed below the specific example of and shows the cyclic shift hopping principle for DM RS of minimum length 12 symbols . In fact the DM RS length depends on the allocated bandwidth which is a multiple of RUs. In LTE the RUs are each 12 frequency pins. It follows then that the allowed cyclic shifts can be quantized according to the RS length of the minimum bandwidth allocation. For LTE with 12 frequency pins per RU this means that there are always only 12 possible cyclic shift values for CAZAC sequence regardless of the RS bandwidth. The possible cyclic shift values cyclic shift value are then 0 1 . . . 11 . Assuming a generation of the cyclic shifts so that cyclic shifts in time results the actual cyclic shift in symbols is calculated as follows 

First is detailed randomization inside a TTI for the environment of CAZAC sequence cyclic shifts described with reference to and using all 12 possible cyclic shifts. Randomization inside a TTI is realized by means of pre defined shift hopping pattern. There are two slots in each TTI Slot and Slot shows a subframe or a single slot of a TTI and shows two slots within a single subframe . shows one embodiment of the shift hopping principle. shows the shift hopping allocation pattern for the first slot and shows the shift hopping allocation pattern for the second slot. The driving criterion is to maximize the cyclic shift separation with respect to the adjacent cyclic shifts within the TTI. This is seen at adjacent shifts e.g. and are adjacent to are well separated from their adjacent shift in that second slot. Another criterion is to maximize the cyclic shift rotation between the 1st and the 2nd slot the shift as between the same clock position TTI of . shows this as a clockwise rotation between the adjacent resources whereas with the randomized shifts illustrated in this shown as a counterclockwise rotation between the adjacent resources. The shift hopping pattern of is shown in numerical format in the table of . Each clock position of corresponds to one row resource number or RU of and each row informs the shift for one resource of one TTI. For example at resource number of the ZC sequence in slot is shifted to shift position and the ZC sequence in slot of that same TTI is shifted to shift position which are well spaced from one another as can be seen at .

Additionally to avoid interference among adjacent cells a cell specific constant rotation for the cyclic shifts of slot with respect to the original hopping pattern of may be imposed in order to guarantee that the shift rotation from the 1st slot to the 2nd slot is not the same between different adjacent cells. This can be illustrated as follows 

It is noted that if the cyclic shifts are calculated in the time domain after the inverse fast Fourier transform IFFT block of then Eq. 2 as written is not valid in that instance IFFT oversampling should be taken into account.

Continuing with an exemplary intra TTI cyclic shift aspect of the invention now is described with reference to an example for block level spreading. Randomization for block level spreading codes ZC sequences and their modified versions inside a TTI is achieved again by means of a pre defined cyclic shift hopping pattern. In this case though the ZC sequence length used in the block level spreading application depends on the spreading factor. An exemplary cyclic shift hopping pattern is shown at in clock pairs for spreading factors SFs two through seven and the same data is shown numerically in the table of . As with the CAZAC sequence example above note that for each SF the cyclic shift separation is maximized with respect to adjacent cyclic shifts in slot and that the cyclic shift rotation is maximized between the first and second slots. Different columns are shown in for even versus odd SFs. The SF equals the number of long blocks in the subframe see .

It should be noted that the hopping pattern shown at can be applied also for other block wise spreading sequences that ZC or CAZAC sequences. In particular hopping pattern with SF 4 is optimal for randomizing Doppler induced interference between Walsh Hadamard sequences defined by Hadamard matrices.

Similar to that noted above in the CAZAC sequence example it follows that an additional cell specific constant rotation may be imposed for the cyclic shifts of slot with respect to the original hopping pattern shown in according to Equation 2 above and for the same reason to forego cross correlation among adjacent cells shifting the same base ZC sequence.

Now is described a specific implementation for intra TTI cyclic shifts of ZC sequences in an ACK NACK transmission that randomizes those sequences. The transmission format of ACK NACK signaling on the PUCCH was agreed at the RAN1 48bis meeting in Malta. illustrates that agreed upon format. There are three blocks reserved for pilot signals darkened blocks and four blocks reserved for data the lighter blocks which is where the ACK NACK signal lies . Two consecutive slots 0.5 msec equal one TTI 1.0 msec and each physical resource unit PRU has twelve RUs identified in the table of by the index cyclic shift .

According to an embodiment of the invention both ZC sequences the CAZAC sequence in a symbol such as at and the block level ZC spreading sequence such as at apply the proposed shift hopping principles separately. A cyclic shift randomization example using a specific cyclic shift according to an embodiment of the invention is shown in . As seen there the rotation in slot for both data and pilots is identical to one another. However the cyclic shift differs markedly once in slot so as to randomize any cross correlation. In each of the slots for data or pilots there are eighteen ACK NACK resources in use in as evidenced by the darkened blocks reciting a shift number.

Now is described by example the other distinct aspect of the invention noted above randomization as between different TTIs or inter TTI randomization. Randomization outside one TTI is achieved by means of cell specific cyclic shift patterns. An important aspect of this inter TTI randomization is to provide uncorrelated ZC to ZC cross correlation properties from TTI to TTI.

A randomization pattern is generated according to the minimum DM reference signal length which continuing with the example above is 12 symbols. There are then 12 orthogonal shift hopping patterns with 12 cyclic shifts. This means that a reuse pattern of 1 12 is possible.

Randomization outside the TTI may also be imposed for the block spreading codes following the teachings above for intra TTI block spreading. As with the intra TTI cyclic spreading a pseudo random hopping pattern permutation matrix for those codes would be generated separately and used separately or combined as the wireless protocol may allow with the CAZAC sequence cyclic shifts similar to that done at when combining the intra TTI cyclic shifts. Alternatively and for inter TTI randomization only the same randomization matrix e.g. that of or similar may be used for both CAZAC sequence cyclic shifts and block level cyclic shifts.

Now that both intra TTI cyclic shifts and inter TTI cyclic shifts have been detailed with respect to both CAZAC sequences and block spreading codes the combined cyclic shift hopping is derived from the component shifts. The net cyclic shift of the ZC sequence that is ultimately transmitted is simply the total cyclic shift for the given slot which is obtained as a combination of resource or cell specific cyclic shift slot slot combined with an outcome of cell specific pseudo random hopping. In a specific example when the value of a cell specific permutation matrix equals to 4 rotation shift A of moving from 0 to 4 and the resource specific cyclic shift is 4 rotation shift B of moving from 4 to 8 then the actual cyclic shift for slot is the combined result or eight in . The combined rotation for slot will similarly be a combination of the cell specific permutation matrix for the second slot the intra TTI shift with the resource specific cyclic shift for that second slot the inter TTI shift .

The total cyclic shift value for a certain slot of a TTI taking into account both intra TTI and inter TTI randomization can be illustrated as

It was agreed at the RAN1 49bis meeting that a symbol wise cyclic shift hopping is applied on PUCCH. Cyclic shift hopping for each symbol on the PUCCH is discussed particularly at section 4 in a paper entitled CSHUL ACK C 3GPP TSG RAN WG1 Meeting 49bis Orlando USA 25 29 Jun. 2007 by Samsung document R1 073149 . The previously described cyclic shift hopping can be applied also with symbol rate cyclic shift hopping allowing for clearly structured hopping patterns over multiple TTIs. Two cases are considered 

Other variations are possible but since the above description provides an inter TTI shift pattern an intra TTI shift pattern and a total shift pattern any one of those patterns can be used as an index referencing to a cyclic shift resource for a symbol wise hopping pattern in the slots of a TTI and among different TTIs.

Now symbol wise cyclic shift hopping patterns with a duration of a slot are defined. These patterns are composed of two components with the other providing intra cell interference randomisation and the other providing inter cell randomisation. Starting from the hopping pattern component randomizing intra cell interference the main criterion on the hopping pattern design is to minimize the occurrence or the number of LBs within a TTI when a particular pair of UEs uses neighbouring cyclic shifts. Only the pairs between UEs using the same block wise spreading code are considered in the criterion since the transmissions from UEs using different block wise spreading codes are mutually orthogonal at low or moderate UE speeds.

Two different multiplexing scenarios are considered with intra cell interference randomization when either 12 or 6 LEs are multiplexed by CAZAC sequence cyclic shifts within a LB Cyclic shift symbols in Eq. 1 . When 12 UEs are multiplexed by CAZAC sequence cyclic shifts all 12 cyclic shifts can be used by UEs having the same block wise spreading code. Hence the design of hopping pattern is focused on randomization of interference between even and odd cyclic shifts in particular. shows one cyclic shift hopping pattern according the design criterion. The multiplexing scenario of 12 UEs by CAZAC sequence cyclic shifts may be used on the transmission of scheduling requests in which case the intra cell interference randomization by symbol wise cyclic shift hopping becomes crucial.

6 UEs can be multiplexed by CAZAC sequence cyclic shifts in the case of CQI ACK NACK or scheduling request transmission. In this scenario different UEs having the same block wise spreading code are separated by two cyclic shifts. Hence the design of hopping pattern is focused on randomization of interference among the even cyclic shifts as well as among the odd cyclic shifts and only little attention is paid to the randomization between even and odd cyclic shifts. Another aspect of this scenario is that some of the LBs are used for reference signal 2 or 3 in the case of CQI or ACK NACK respectively while others are used to carry information 4 or 5 in the case of ACK NACK or CQI respectively . As a result the cyclic shift hopping pattern does not need to have length of subframe and the length corresponding to the maximum number of either information or reference LBs is sufficient. To obtain the period of a subframe some of the columns of the hopping pattern are repeated during the subframe. However they are repeated so that the same columns are not repeated during the transmission of information LBs or during the transmission of reference symbols. One such mapping between hopping pattern columns and LB number in a slot is shown in . It should be noted that such mapping allows for multiplexing of CQI and ACK NACK transmissions from different UEs into one RU. shows one cyclic shift hopping pattern according the presented design criterion

Continuing with the component of symbol wise hopping pattern randomizing inter cell interference the same principles as with inter TTI randomization are applied. Randomization is achieved by means of cell specific cyclic shift patterns and a randomization pattern is generated according to the sequence length within a LB which continuing with the example above is 12 symbols. There are then 12 orthogonal shift hopping patterns with 12 cyclic shifts meaning that a reuse pattern of 1 12 is possible.

The cyclic shift value for a certain LB taking into account intra TTI and inter TTI randomization as well as symbol wise hopping can be illustrated as

Implementation of the shift hopping patterns can be based on a lookup table located stored in a MEM of the UE and of the Node B . Separate lookup tables may be used for randomization inside the TTI and randomization outside the TTI as well as for the intra cell and inter cell interference randomisation components of symbol wise cyclic shift hopping in the manner described above.

An alternative to the stored lookup tables is to implement the functionality by means of simple equations which may be implemented as software firmware integrated circuitry or a combination. For example can be implemented as the equations Cyclic sft slot2 mod 6 Cyclic sft slot1 12 for even values of Cyclic sft slot1 and by Cyclic sft slot2 mod Cyclic sft slot1 12 for odd values of Cyclic sft slot1 where N is the length of the sequence in symbols .

Similarly can be implemented as the equations Cyclic sft slot2 mod 1 Cyclic sft slot1 for even values of Cyclic sft slot2 mod 1 2 Cyclic sft slot1 for 3 Cyclic sft slot2 mod 2 3 Cyclic sft slot1 for 5 and Cyclic sft slot2 mod 2 Cyclic sft slot1 1 for 7.

Intra cell interference randomization hopping component in the scenario of 12 UEs multiplexed can be implemented as the equations Symbol hop intra mod Cyclic sft value 7 Cyclic sft value 2 12 for even values of Cyclic sft value given by Eq. 3 Symbol hop intra mod cyclic sft value

Intra cell interference randomization hopping component in the scenario of 6 UEs multiplexed can be implemented as the equations Symbol hop intra mod 2 4 2 mod 3 1 4 12 for even values of Cyclic sft value given by Eq. 3 Symbol hop intra mod 2 4 1 4 5 4 3 2 mod 4 1 4 12 for odd values of Cyclic sft value where cs Cyclic sft value 2 thus ranging 0 1 . . . 5 mis as shown in x is the smallest integer larger than or equal to x x is the largest integer smaller than or equal to x parameter c can have values 0 or 1. The value for parameter c may be obtained as a remainder of Cyclic sft value 2 or derived from the block spreading sequence index. It may be also a constant a cell specific parameter or an UE may use both values as in the case of CQI transmission utilizing two adjacent cyclic shifts.

These equations as well as Eq. 1 Eq. 2 Eq. 3 and Eq. 4 above may be embodied in software and executed by a digital signal processor such as the DP A A A or by firmware circuitry of an integrated circuit or by some combination thereof.

The invention as detailed above by example offers multiple advantages over the cyclic shift regimens known in the art. Specifically 

In a particular embodiment the cyclic shift hopping is not fully configurable by the network Node B e.g. not on every allocation table AT physical downlink control channel PDCCH it sends . The inventors deem the required signaling as overly burdensome if the used cyclic shifts need to be signaled in every UL DL allocation grant i.e 12 cyclic shifts 2 slots requires at least 5 bits from the allocation grant signaling a large signaling overhead commitment . Where the network Node B cannot configure the cyclic shifts fully radio link control RLC signaling and or a sector specific broadcast channel provides the UEs with the relevant cyclic shift hopping sequences in current use such as upon entry or re entry of the UE into a cell.

It is noted that DM RS allocation in a V MIMO application is a special case from the cyclic shift allocation point of view compared to the SIMO case . Basically in V MIMO we need multiple cyclic shift resources per cell whereas in the SIMO case we need only a single cyclic shift per cell. Therefore 

Thereby in the MIMO case it is advantageous to also use UE specific signaling for the cyclic shifts. This information can be transmitted with UL resource allocation grant signaling e.g. in an allocation table AT also known as a packet data control channel PDCCH . That signaling would be used to signal the actual cyclic shift allocated for the particular UE in case of MIMO such as a separate field with entries associated with each of the UEs being allocated or entries associated with only those UEs whose cyclic shift pattern is to be changed on the allocated resources as compared to its previous UL data transmission.

As an exemplary embodiment of this UE specific signaling with the UL resource allocation the UE specific information would include 

For convenience we term these extra bits in the UL allocation grant message as a MIMO cyclic shift indicator .

As can be seen at the MIMO cyclic shift indicator is disregarded by the UE operating in SIMO mode as only a single antenna is used and the MIMO cyclic shift indicator bits 0 or 00 if used signaled to the SIMO UE with its UL resource allocation reflect the SIMO case cyclic shifting pattern. For the MIMO UEs 2 2 or 4 4 as seen at the MIMO cyclic shift indicator bits that are signaled to the MIMO UEs with their UL resource allocations are used in conjunction with the gray mapping of part a above or with some other RLC signaling to inform the MIMO UEs how they are to adjust their cyclic shifting pattern for the next UL transmission. The network NodeB determines how a particular UE is to change its cyclic shift pattern and signals it accordingly so as to ensure conflicts interference is avoided in the cell.

So from each ZC sequence multiple reference signals are derived with a cyclic shift of the sequence. Multiple UEs in the given cell share the same Zadoff Chu sequence while keeping the orthogonality by using a UE specific cyclic shift as detailed above. But due to different bandwidths of UE UL allocations in neighboring cells as well as due to channel estimation which requires effectively partial correlation of the sequences the ideal cross correlation properties of ZC sequences are lost resulting in unacceptable partial cross correlation properties arising. Randomization by cyclic shift hopping and sequence hopping addresses this problem in part as detailed above. However coordination of the hopping patterns is seen as a further improvement to the solution detailed above.

An ideal solution for ZC sequence hopping and coordination would allow for efficient averaging of reference signal cross correlation while maintaining low signaling overhead and a flexible structure. A flexible solution allows for cross correlation randomization by ZC sequence hopping as above but also for sequence coordination and also for combining the aspects of sequence hopping and coordination. Otherwise the solution would restrict the possibilities for network planning as well as for advanced receivers mitigating RS cross correlations.

However these solutions do not efficiently support both randomization by sequence hopping as well as coordination. The inventors are unaware of any prior art for a signaling arrangement that supports both randomization by sequence hopping and also sequence coordination.

It is noted that for intra TTI sequence hopping the length of the sequence hopping pattern is equal to the number of RS blocks within a TTI two in the frame structures of which we denote here as n and the pattern is repeated periodically for each TTI. On the network side the e Node B signals to the UE the n sequence indexes for each possible UL allocation bandwidth. These sequence indexes are signaled on a radio resource control RRC message and or on an eNodeB specific broadcast channel.

It is also possible to group the sequence indexes in a predetermined way and just signal the group index instead of sequence indexes of a certain group. These sequence groups can be cell specific. The groups can be configurable or hardwired by the specification. It is also possible to perform sequence hopping outside the groups. This choice will increase the length of the hopping pattern in case that the number of sequences per group and bandwidth option is small e.g. only 2 . The UE selects the used reference signal based on the bandwidth of the UL allocation and on the current RS block number. The cyclic shift hopping is applied on the top of sequence hopping sequence coordination.

The signaling of the n sequence indexes is required for all UL allocation bandwidth options and thus may cause considerable signaling overhead. One option is two divide it into two parts. The first part contains n sequence indexes for the most essential allocation bandwidths and it may be signaled to the UE on a RACH response as part of handover control signaling and or repeated relatively frequently on an e NodeB specific broadcast channel. The second part contains n sequence indexes for the remaining allocation bandwidth options and it may be signaled to the UE on a radio resource control RRC message and or repeated less frequently on an eNodeB specific broadcast channel.

The need for signaling is considerably smaller in case of pre determined sequence groups. Signaling of the cell specific sequence group can be done on a broadcast channel with limited number of bits. However in case that sequence indexes within the groups are configured considerable signaling is required.

While described in the context of UTRAN LTE it is within the scope of the exemplary embodiments of this invention to use the above described UE and e Node B procedures for other types of wireless networks and the teachings herein are not limited to a particular wireless communication protocol.

It will be appreciated that embodiments of this invention provide a method a device a computer program tangibly embodied on a computer readable memory and executable by a processor and an integrated circuit to store a first cyclic shift hopping pattern adapted for intra TTI shifting to store a second cyclic shift hopping pattern adapted for inter TTI shifting within a physical resource unit to apply the first cyclic shift hopping pattern to a CAZAC sequence and to apply the second cyclic shift hopping pattern to the CAZAC sequence and to transmit the CAZAC sequence according to a cyclic shift pattern that combines the first and the second cyclic hopping patterns.

In a particular embodiment the first cyclic shift pattern is for CAZAC sequence is for block level spreading for a specific spreading factor or is a combination of both CAZAC sequence and block level spreading. In another particular embodiment the second cyclic shift pattern is for CAZAC sequence is for block level spreading for a specific spreading factor or is a combination of both CAZAC sequence and block level spreading. In an embodiment separation of cyclic shifts for either or both of the first and second patterns is maximized with respect to adjacent shifts. In another embodiment cyclic shifts as between two slots is maximized. In yet another embodiment the shift of at least one slot is rotated so as to avoid cross correlation with an adjacent cell. In yet another embodiment the cyclic shifts of the patterns is quantized according to a reference signal of a minimum bandwidth allocation. In another embodiment the pattern defines x cyclic shifts and is reused each 1 x where x is a minimum demodulation reference signal length. In another embodiment the second pattern is periodic and defines a length equal to one radio frame. There are separate and simultaneous hopping patterns for base sequence hopping and for cyclic shift hopping and the network may signal to a UE by radio link control message or by broadcast message which of n sequence indices of cyclic shift hopping patterns to use for its UL transmissions. These and other aspects are detailed above with particularity.

In general the various embodiments may be implemented in hardware or special purpose circuits software logic or any combination thereof. For example some aspects may be implemented in hardware while other aspects may be implemented in firmware or software which may be executed by a controller microprocessor or other computing device although the invention is not limited thereto. While various aspects of the invention may be illustrated and described as block diagrams flow charts or using some other pictorial representation it is well understood that these blocks apparatus systems techniques or methods described herein may be implemented in as non limiting examples hardware software firmware special purpose circuits or logic general purpose hardware or controller or other computing devices or some combination thereof.

Embodiments of the inventions may be practiced in various components such as integrated circuit modules. The design of integrated circuits is by and large a highly automated process. Complex and powerful software tools are available for converting a logic level design into a semiconductor circuit design ready to be etched and formed on a semiconductor substrate.

Programs such as those provided by Synopsys Inc. of Mountain View Calif. and Cadence Design of San Jose Calif. automatically route conductors and locate components on a semiconductor chip using well established rules of design as well as libraries of pre stored design modules. Once the design for a semiconductor circuit has been completed the resultant design in a standardized electronic format e.g. Opus GDSII or the like may be transmitted to a semiconductor fabrication facility or fab for fabrication.

Various modifications and adaptations may become apparent to those skilled in the relevant arts in view of the foregoing description when read in conjunction with the accompanying drawings. However any and all modifications of the teachings of this invention will still fall within the scope of the non limiting embodiments of this invention.

Furthermore some of the features of the various non limiting embodiments of this invention may be used to advantage without the corresponding use of other features. As such the foregoing description should be considered as merely illustrative of the principles teachings and exemplary embodiments of this invention and not in limitation thereof.

