---

title: System and method for clustering nodes of a tree structure
abstract: A system and method for clustering nodes of a tree structure is provided. A plurality of messages is maintained. Each message is represented as a node in a tree structure. A word vector is assigned to each message. Pairs of the nodes are identified based on relationships in the tree structure. The nodes of one or more of the pairs are combined into clusters. Boundaries of each cluster are adjusted, including at least one of placing a root node into one such duster having a closest related child node, separating children nodes into distinct groups and retaining a relationship between a parent node and one such group including a nearest child node, and transferring a parent node to one such cluster having all children of the parent node. A digest of the messages, including one or more of the clusters is formed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08156430&OS=08156430&RS=08156430
owner: Palo Alto Research Center Incorporated
number: 08156430
owner_city: Palo Alto
owner_country: US
publication_date: 20080303
---
This patent application is a continuation of application Ser. No. 10 321 416 filed Dec. 16 2002 now U.S. Pat. No. 7 340 674 issued Mar. 4 2008 the priority filing date of which is claimed and the disclosure of which is incorporated by reference.

U.S. Pat. No. 7 007 069 issued Feb. 28 2006 to Newman et al. titled A Method and Apparatus for Clustering Hierarchically Related Information filed concurrently herewith 

U.S. Pat. No. 7 280 957 issued Oct. 9 2007 to Newman et al. titled A Method and Apparatus for Generating Overview Information for Hierarchically Related Information filed concurrently herewith 

U.S. Pat. No. 7 031 970 issued Apr. 18 2006 to Blitzer titled A Method and Apparatus for Generating Summary Information for Hierarchically Related Information filed concurrently herewith 

U.S. Pat. No. 7 111 253 issued Sep. 19 2006 to Newman titled Method and Apparatus for Displaying Hierarchical Information filed concurrently herewith and

U.S. Pat. No. 7 107 550 issued Sep. 12 2006 to Newman titled Method and Apparatus for Segmenting Hierarchical Information for Display Purposes filed concurrently herewith.

U.S. Pat. No. 7 243 125 issued Jul. 10 2007 to Newman et al. titled Method and Apparatus for Presenting Email Threads as Semi Connected Text by Removing Redundant Material 

U.S. Pat. No. 7 003 724 issued Feb. 21 2006 to Newman titled Method and System for Display of Electronic Mail 

U.S. Pat. No. 6 976 212 issued Dec. 13 2005 to Newman et at titled Method and Apparatus for the Construction and Use of Table Like Visualizations of Hierarchic Material 

U.S. Pat. No. 6 944 818 issued Sep. 13 2005 to Newman et al. titled Method and Apparatus for the Viewing and Exploration of the Content of Hierarchical Information 

U.S. patent application Ser. No. 09 717 278 titled Systems and Methods for Performing Sender Independent Managing of Electronic Messages by Michelle Baldonado Paula Newman and William Janssen filed Nov. 22 2000 abandoned 

U.S. Pat. No. 6 683 632 issued Jan. 27 2004 to Newman titled Method and System for Presenting Semi Linear Hierarchy 

U.S. Pat. No. 6 944 830 issued Sep. 13 2005 to Card et al. titled System and Method for Browsing Hierarchically Based Node Link Structures Based on an Estimated Degree of Interest 

U.S. Pat. No. 7 130 837 issued Oct. 31 2006 to Tsochantaridis et al. titled Systems and Methods for Determining the Topic Structure of a Portion of Text and

U.S. Pat. No. 7 120 622 issued Oct. 10 2006 to Zellweger et al. titled Authoring Tools Including Content Driven Treetables for Fluid Text .

This invention relates to electronic messages hi particular this invention relates to manipulating electronic messages based on sender independent role based criteria.

The present invention relates generally to the field of information analysis and display. More specifically it provides methods for partitioning tree structured textual material into topically related clusters of adjacent items then developing digests of each cluster. The digests include both shorter overviews and arbitrarily long summaries. The tree structured material involved could be for example but is not limited to trees containing the messages and postings of an archived discussion within a newsgroup discussion list or on line forum. This invention also provides methods for partitioning a two dimensional tree visualization called a treetable into conveniently sized segments for detailed exploration. The segments may be grouped into regions corresponding to the topically related clusters.

To establish some terminology a tree or tree structure is a standard term denoting an abstract data structure that models information as a set of nodes connected by directed edges such that a there is exactly one element having no incoming edges called the root and b all other nodes have exactly one incoming edge. A leaf node is a node with no outgoing edges. All nodes besides the root node and the leaf nodes can be called interior nodes . The parent of a node is the source of its incoming edge and the children of a node are the targets of its outgoing edges. A subtree of a tree is a set of nodes consisting of a subtree root node that has no parent in the subtree and other nodes all having parents in the subtree.

The present invention is intended for use in connection with tree structures whose interior nodes represent substantial amounts of logically related textual information. For example in the tree structures formed by archived discussions the nodes represent individual messages or contributions and a message represented by a child node is a response to the message represented by its parent. The creation of the parent child links in archived discussions can be established by a combination of conventional means utilizing header information and deeper means as described in U.S. Pat. No. 7 243 125 issued Jul. 10 2007 to Newman et al. titled Method and System for Presenting Email Threads as Semi connected Text by Removing Redundant Material the disclosure of which is incorporated by reference.

Tree structured archived discussions on a particular subject are usually represented for exploration by indented lists. Each contribution is represented by some identification information such as contributor name and date indented under the identification information for its parent. The individual contributions may then be accessed for reading by selecting one of the list items. However archived discussions pay varying amounts of the ostensible subject and initial contribution and often branch into several subtopics so the reader cannot assume based only on the ostensible subject whether any portion of the discussion is actually of interest and if so what parts of the discussion. A more informative representation of the overall content of an archived discussion is described in U.S. Pat. No. 7 003 724 issued Feb. 21 2006 to Newman titled Method and System for Display of Electronic Mail the disclosure of which is incorporated by reference. In that representation initial substantive fragments of each contribution containing actual text of the message rather than quotes or quote introduction are embedded within a reduced width linear tree tailored to text embedding. This representation is suitable as a level of presentation of the discussion and also as the content of an emailed digest summarizing activity in the discussion list or as a client side digest of such activity. Client side accumulation of email from discussion lists involving concatenating or sampling messages from all mail received in a particular period is introduced in U.S. patent application Ser. No. 09 717 278 titled Systems and Methods for Performing Sender Independent Managing of Electronic Messages by Michelle Baldonado Paula Newman and William Janssen filed on Nov. 22 2000 abandoned the disclosure of which is incorporated by reference.

Yet another method of representing the overall content of an archived discussion is described in U.S. Pat. No. 6 976 212 issued Dec. 13 2005 to Newman et al titled Method and Apparatus for the Construction and Use of Table Like Visualizations of Hierarchic Material and U.S. Pat. No. 6 944 818 issued Sep. 13 2005 to Newman et al. titled Method and Apparatus for the Viewing and Exploration of the Content of Hierarchical Information the disclosures of which are incorporated by reference in this method the conversation tree is presented in a two dimensional tabular form called a treetable . In such a treetable each cell represents a single node and exactly spans the cells representing its children if any and a substantive initial fragment of the message associated with the node is displayed in the cell to the extent that space allows. The individual columns and subtrees of the treetable may be selected for expansion reducing other parts of the tree to view more of the associated texts and the full texts of each column may be selected for display in auxiliary windows or frames. Note that a similar representation is described in an article entitled Structured Graphs a Visualization for Scalable Graph Based Case Tools by M. Sifer and J. Potter in the Australian Computer Journal Volume 28 Number 1 and also in later papers authored by M. Sifer and other colleagues but in these references the potential of the structure is not exploited for purposes of exploring trees whose nodes have associated significant text. 

While the latter two methods reduced width linear trees and treetables with embedded initial fragments are useful methods of providing overviews for smaller discussions and other tree structured textual material they are less useful for larger discussions. For example for a stored conversation consisting of 93 messages a reduced width linear tree containing initial fragments requires over 11 standard size display windows. Alternatively if such a conversation is represented in a treetable that can be contained in a single window the cells are too small to contain any indicative content and there are too many columns to expand individually to determine if there is content of interest.

Therefore more accessible digests of such larger discussions are needed. Current approaches to text processing address some related problems. Methods have been developed for segmenting individual documents into extents dealing with different approximate subtopics and for identifying the topics covered by the most indicative words as described in U.S. Pat. No. 7 130 837 issued Oct. 31 2006 to Tsochantaridis et al. titled Systems and Methods for Determining the Topic Structure of a Portion of Text the disclosure of which is incorporated by reference. Methods have also been developed for summarizing identified topic extents by collections of extracted sentences and for associating summary elements with the text extents covered as described for example in a paper by Branimir Boguraev and Mary Neff entitled Discourse Segmentation in Aid of Document Summarization in the Proceedings of the Hawaii International Conference on System Sciences 2000 . Methods have also been developed for summarizing collections of separate documents by grouping them by topic generally using centroid based clustering methods and then extracting sentences dealing with each topic. An example of such an approach is described by Dragomir Radev Hongyan Jing and Malgorzata Budzikowska in the paper Centroid Based Summarization of Multiple Documents Sentence Extraction in the 2000 Seattle Wash. April 2000 pages 21 29. However tree structured discussions are neither single documents nor collections of independent documents and specialized methods are needed for their segmentation and summarization.

Two limited approaches seem to have been developed to date relating to segmenting tree structured discussions but none as far as can be ascertained at this time to summarizing those discussions. A paper by K. Tajima V. Mizuuchi M. Kitagawa and K. Tanaka entitled Cut as a Querying Unit for WWW Netnews and E mail in the Proceedings of the 9ACM Conference on Hypertext and Hypermedia 1998 describes a method for identifying overlapping subtrees of a discussion as units of information retrieval to put retrieved messages into a useful context. The clustering method processes the thread tree bottom up and at each step combines a parent with currently open child subtrees separately or together if the similarity between the parent word vector and the centroid vector of tire child subtree or subtrees exceeds an unspecified absolute input threshold. The word vectors used to represent the vectors handle quoted passages by reducing the weights of quoted words in order to keep inter message distances from being too small. While no results are given if the threshold is set relatively high this method would probably lead to shallow subtrees suitable as query results. However it is unlikely that the method would lead to clustering results suitable for subtopic identification or digesting. Based on our experiments quoted words require more detailed treatment and some trials of a similar single link clustering method using distances between a node and the centroid of an adjacent cluster produced unsatisfactory results.

Another approach related to discussion tree segmentation is described in a paper by H. Ozaku K. Uchimoto M. Murata and H. Isahara entitled Topic Search for Intelligent Network News Reader HISHO in the Proceedings of the 2000 ACM Symposium on Applied Computing. This paper describes a method for retrieving many discussions relating to a query topic and then attempting to filter out discussion subtrees irrelevant to the topic. The method uses for the most part noun keywords to represent messages and tries to find topic changing articles where the proportion of never seen keywords shifts and topic branching articles where a message gives rise to several responses distinguished by their keyword usage and their referenced quotes. This strategy is reported as of limited success in finding topic changing articles recall 57 and larger success in finding topic branching articles.

The present invention incorporates methods of dividing a tree structured discussion into major subtopics and of developing digests containing segments for each such subtopic. Two types of digests are developed that may be inspected in sequence. Shorter digests which we will call overviews choose a set of texts in each subtopic based on topic relevance and potential for providing coherent sequences and represent each such text by one or more extracted sentences. Potentially longer digests which we will call summaries choose a set of extracted sentences representing a proportion of the text associated with a subtopic by a combination of features resting on inherent properties of the sentences and on the content of a developing summary.

The present invention also provides methods for pre segmenting a large tree or treetable for purposes of visualization and deeper exploration of individual nodes with the segments sized so as to allow inclusion of at least some amount of content indicative text for each node. There have been many approaches developed to allow investigation of detailed areas of large visualizations usually distinguished as either fisheye approaches that expand part of visualization at the expense of other parts or focus plus context approaches that extract and expand part of visualization into another window. Some examples of these approaches as applied to trees and treetables are a in situ expansions of nodes in the neighborhood of a selected node within a Degree of Interest Tree described in U.S. Pat. No. 6 944 830 issued Sep. 13 2005 to Card et al. titled System and Method for Browsing Node Link Structures Based on Estimated Degree of Interest the disclosure of which is incorporated by reference b in situ expansion of treetable columns and complete subtrees all nodes descended from a given node and extraction of sets of columns and complete subtrees into another window as described in U.S. Pat. No. 6 976 212 issued Dec. 13 2005 to Newman et at titled Method and Apparatus for the Construction and Use of Table Like Visualizations of Hierarchic Material the disclosure of which is incorporated by reference and c iterative restriction of the display to subtrees or user defined sets of nodes is provided in a treetable like visualization described in the papers The SGF Metadata Framework and its Support for Social Awareness on the World Wide Web by O. Liechti et al. in Baltzer 1999 294. and M. Sifer and O. Liechti Zooming in One Dimension Can Be Better Than Two An Interface for Placing Search Results in Context with a Restricted Sitemap in Proceedings of the 1999 IEEE Symposium on Visual Languages Tokyo Japan 72 79.

These methods all have some problems when used in connection with large trees. In situ expansion of neighborhoods columns or subtrees can be disorienting when the expanded nodes are to contain significant amounts of text because the shape of the tree changes dramatically and little space is left for unexpanded nodes. Also for large trees subtree extraction or restriction of the display to a subtree tends to be an iterative process. This may be suitable when the tree represents a generalization hierarchy so that higher level nodes provide good cues as to the content of lower level ones but not otherwise for example when the trees represent discussions or the network of linked nodes on a website reduced to a tree by removing cyclic paths. Finally leaving the specification of sets of nodes to be extracted to users is problematic both because it is laborious and because successive extractions are still generally needed to make sufficient node identification information visible to permit an intelligent selection.

For this reason the methods provided in this invention pre partition a tree or treetable into segments of related nodes whose approximate maximum dimension permits significant text to be presented for each node. The segments can be visually differentiated in an outline depiction of the tree or treetable as a whole and individual segments then extracted for deeper exploration. The segments may also be constrained to represent only nodes within the same logical grouping which may be an identified subtopic or collection of less focused material or other type of grouping. When the segments are so constrained regions of adjacent segments associated with each such grouping can also be visually differentiated from other such regions.

The method for partitioning is related to but different from the large body of work on partitioning graphs collections of nodes linked by edges but not necessarily hierarchic into roughly equal size subgraphs given either the number of subgraphs to be found or a maximum size per subgraph and possibly some additional constraints on the subgraphs with the purpose being to minimize the number of edges between subgraphs. Much of the work derives from an algorithm described by B. W. Kernighan and S. Lin in the paper An Efficient Heuristic Procedure for Partitioning Graphs in 49 2 1970 in which a greedy algorithm obtains an initial partitioning and then nodes are iteratively moved among subgraphs to improve the quality of the partition. Such methods have applications in VLSI design distribution of processes and data among processors and sparse matrix representations. The problem addressed by the methods of the present invention is different in that the permissible subgraphs are far more constrained subgraphs must represent either subtrees or sets of subtrees whose roots have a common parent and sometimes are part of the same logical grouping and most largely respect a given layout dimensionality. This in turn permits the careful initial partitioning algorithm described in this invention to be sufficient to the purpose.

Briefly stated and in accordance with the present invention there is provided a method for partitioning a tree structured discussion or other tree structured collections of texts into clusters dealing with identifiable subtopics if such subtopics exist or into manageable partitions if not. The partitioning method uses a variant of a standard method of agglomerative single link nearest neighbor clustering described by G. Salton in Addison Wesley 1989 . In that method each document is represented by a vector containing one position for each unique word to be taken into account in the combined texts and is initially placed in a cluster containing only that document. Then a sequence of cluster combinations is performed at each step combining the most similar two clusters where the most similar two clusters are the clusters related by the most similar pair of document vectors into a new cluster. The process can be halted before all clusters are combined based on application specific criteria. In the partitioning method of this invention the vector positions for a particular node are generally also filled in well known ways namely by stemming the words of the associated text to lemma root word forms and ignoring words occurring in a stop list of very common words and representing each word by a tf.idf weighted frequency a weighting of a term frequency tf by the inverse document frequency idf which is basically the quotient of the number of documents in a collection divided by the number of documents in which the word appears thus giving preference to words occurring less frequently in the collection and has many variations also described by Salton in Addison Wesley 1989 .

The word vectors can also optionally be converted into vectors reflecting some semantic relationships by methods such as Probabilistic Latent Semantic Analysis PLSA as described by Thomas Hofmann in the paper titled Probabilistic Latent Semantic indexing in 99 Berkeley Calif. August 1999 50 57.

However the clustering method is unique to grouping tree structured texts especially message texts both in processing that occurs before constructing word vectors and within the clustering process proper. In this invention before constructing the word vector for a node 

It should be noted that this type of message adjustment is also suitable for use in representing message content for other applications for example in finding messages dealing with a particular topic or finding inter conversation topic groupings via centroid based clustering methods.

The other divergences from standard clustering practice are within the clustering process proper. First the inter node relationships considered in the single link clustering are restricted to parent child and sibling relationships within the tree so that a cluster consists either of a subtree or of several subtrees whose roots have a common parent external to the cluster. Second the final clusters used for summary purposes are isolated in the following tree specific ways 

After clustering for digesting purposes is halted clusters are selected that probably represent subtopics and are closed to further combination. The selection may be based on a function of the number of nodes in the cluster and in the tree as a whole. Not all such clusters may actually be represented in a displayed digest which may further select among the sub topic associated clusters based on absolute and tree relative cluster size and other factors such as average text lengths. Clustering then continues to obtain secondary clusters that form less closely related collections which can also be reflected as regions within a partitioned treetable. The results of such a clustering as reflected in a segmented treetable are shown in discussed hereinbelow.

Two methods are also provided for digesting the content of individual clusters. One method which obtains relatively short overviews selects a proportion of representative nodes from the cluster and then extracts and organizes one or more sentences from the text associated with each selected node. For text trees representing archived discussions the basic intuition underlying the selection of nodes and sentences is that comment response sequences drawn from lexically central nodes will capture those aspects of the discussion considered most important to discussion participants.

The nodes are selected based on their centrality to all or part of the cluster and also for their potential for providing some degree of fluency in reading. They comprise central nodes and auxiliary nodes. Central nodes comprise 

We note that central nodes derived their lexical centrality both from their inherent content and from their incorporated quotes. The total number of nodes used as central nodes is determined by an input parameter.

Auxiliary nodes are generally non central nodes that are parents of central nodes or parents having more than a given number of children. It is from these nodes that passages quoted in central nodes or in many nodes will be drawn thus auxiliary nodes both fulfill the coverage potential of their more central children as well as supplying continuity. For some clusters specifically those containing or descending from the root of the entire conversation auxiliary nodes may also include the root text and a proportion of its children. This allows the overview to be more informative with respect to what is generally the most important topic of the discussion.

The total number of nodes represented in the overview is determined by the number of central nodes selected and the number of auxiliary nodes added for any of the reasons given above.

After nodes are selected to represent a cluster sentences are extracted from their associated texts for use in the overview so as to provide coherent comment response sequences. The sentences extracted depend on the whether the node is a central node or an auxiliary node. For all selected nodes if the associated text been has been quoted sentences are extracted that correspond to the most germane quote or quotes depending on an input parameter in each of the texts associated with each of its child nodes. In the current embodiment a germane quote is a quote preceding a relatively long non quoted sequence. Also 

If an extracted sentence is very short it is extended with additional text material using material to the left if it is a quoted sentence and to the right if not.

After sentences are extracted to represent a node they are sorted based on their position in the text associated with a node duplicates are eliminated and the remaining sentences are concatenated into a string representing the node in the overview with intervening gap indicators such as ellipsis symbols . . . to represent sentences in the text not included in the overview. These strings are then arranged in the tree order of the cluster to form the cluster overview using either a reduced width tree such as shown in representing a completed overview for a discussion or an indented tree such as shown in representing the part of the summary see below associated with group of the same discussion. In both cases the cluster overview may be prefaced with a list of the most frequent words occurring in the cluster that serve to further illustrate the concerns of the cluster. The word lists are obtained by standard methods e.g. by adding the idf weighted word vectors obtained for each text within the cluster and then selecting the words having the largest value in the resultant sum vector.

Another cluster digesting method is also provided that can obtain longer more readable and more informative summaries of clusters whose contained texts are well focused and longer. This method selects a percentage of the sentences associated with nodes in the cluster in the current embodiment 10 or to accommodate to clusters containing many short texts a percentage of the nodes in the cluster in the current embodiment 60 whichever number is larger to obtain reasonably sized informative summaries. The sentences are selected from the cluster as a whole using a staged feature based method that builds on methods well known to practitioners of the art such as the methods described by M. White and C. Cardie in the paper Selecting Sentences for Multi Document Summaries Using Randomized Local Search in the 2002 Philadelphia Pa. July 2002 . However many of the features used and the specifics of the staging are specific to obtaining coherent summaries of tree structured discussions.

The method initially assigns an intrinsic score to each sentence based on its lexical centrality in the cluster its ordinal position in its containing text and the number of nodes in the tree descended from the node associated with that text in the tree and chooses the sentence with the best intrinsic score as the first sentence to be included in the summary. Then the process iterates until the desired number of summary sentences is found in each iteration each not yet chosen sentence is given an extract score that modifies its intrinsic score by features concerned with the relationship of the sentence to sentences already in the extract and the sentence with the highest extract score is added to the summary. The conventional features used to form the extract score measure the adjacency of the sentence being tested to sentences already in the summary adjacency being desirable and the redundancy of the sentence with sentences in the summary redundancy being undesirable . The discussion specific features used in the process test whether the sentence is from a node that is a parent or child of a node already represented in the summary and whether the sentence is quoted immediately before a sentence in the summary or immediately follows a quote of a sentence represented in the summary. After the summary sentences are chosen by this method they are organized in the same way as sentences in the overview as described above.

A method is also provided for dividing a tree of texts into segments for purposes of visualization within a display window or frame with each segment either a subtree or a set of subtrees whose roots have the same parent external to the segment and each segment sized such that extracting a visualization of the segment into another window or frame permits significant text to be associated with each node in the segment. The segments may also be constrained to be associated with the same logical grouping of nodes which may be a cluster obtained by the method described hereinabove or some other logical grouping such as the set of nodes associated with a given time period.

The division of the tree into segments may be obtained by a method that operates bottom up within the tree. A desirable maximum width and height is set for segments. Then for each node in the tree starting with the leaves and not processing a node until all of its children have been processed the method proceeds as follows 

Companion methods are also provided to visualize and explore the result of the segmentation. The visualizations place a two dimensional representation of the full tree in either a classic node plus edge representation or a treetable representation in one window or frame and a representation of a selected segment in another window or frame. The visualization of the full tree may take one of several forms. It may be an outline treetable in which all cells are represented in that case the segments as well as collections of adjacent segments within the same logical grouping which we will call regions can be visually differentiated as shown in by visually separating regions and differentiating segments within the same region by heavy outlining and or different cell backgrounds. Alternatively the visualization of the full tree may be in the form of an abstracted segmented tree or treetable in which entire segments are represented as nodes visually grouped into regions and represented as a standard treetable or a classic node edge tree representation or as a content driven treetable as described in U.S. Pat. No. 7 120 622 issued Oct. 10 2006 to Zellweger et al. titled Authoring Tools Including Content Driven Treetables for Fluid Text the disclosures of which are incorporated by reference.

An embodiment provides a system and method for clustering nodes of a tree structure. A plurality of messages is maintained. Each message is represented as a node in a tree structure. A word vector is assigned to each message. Pairs of the nodes are identified based on relationships in the tree structure. The nodes of one or more of the pall s are combined into clusters. Boundaries of each cluster are adjusted including at least one of placing a root node into one such cluster having a closest related child node separating children nodes into distinct groups and retaining a relationship between a parent node and one such group including a nearest child node and transferring a parent node to one such cluster having all children of the parent node. A digest of the messages including one or more of the clusters is formed.

A further embodiment provides a system and method for normalizing quoting styles. A plurality of parent and child messages is received. Each message includes at least one of quoted and unquoted text. Quoted pairs of the messages are identified. Each pair includes one such parent message and one such child message. The quoted text that covers all of the parent message is removed from the child message. At least a part of the unquoted text of the parent message is added to the child message when the part of the unquoted text describes a common issue of the child message. Each message is represented as a node in a tree structure. A word vector is determined for each node including at least one of processing the quoted and unquoted text in each message by performing word stemming removing stop words and expressing the word vectors as an inverse document frequency and applying probabilistic latent semantic indexing to the quoted and unquoted text in each message to determine the word vector. Cluster pairs of the nodes are identified. Each cluster pair is based on at least one of a parent child and sibling relationship determined by the tree structure. A node distance is assigned to each cluster pair based on the word vector for each node including at least one of determining a cosine distance for those of the words vectors including one of raw and weighted counts and determining a Hellinger similarity for those of the word vectors including the probabilistic latent semantic indexing. The cluster pairs that are closely related are grouped into clusters.

While the present invention will be described in connection with a preferred embodiment and method of use it will be understood that it is not intended to limit the invention to that embodiment and procedure. On the contrary it is intended to cover all alternatives modifications and equivalents as may be included within the spirit and scope of the invention as defined by the appended claims.

Turning now to the figures this embodiment of the invention presents a discussion list review tool using overviews summaries and segmented treetable visualizations for the exploration of long discussions. illustrate some summary and overview material produced by the methods making up the invention. The texts underlying these figures represent messages of the Usenet rec.motorcycles newsgroup. illustrate aspects of the segmented treetable visualization. The visualizations are obtained by submitting display specifications to a display processor. In this case an Internet Explorer browser was utilized. However the methods of the invention can be used to create specifications for many kinds of display processors such as those embedded within graphic user interface GUI toolkits associated with many programming languages. illustrate the methods used to develop the overview summary and segmented treetable outputs.

It should also be noted that although this particular embodiment is directed to a review tool for a stored discussion the methods of this invention could be used in whole or in part to analyze and present other types of tree structured texts in particular the content of tree structured websites and other tree structured hypertext documents.

Group overview comprises a group header and a collection of node overview strings and . Group header identifies the group by 

The group header is linked to a display of a segmented treetable an example of which is illustrated in which shows the tree as d whole in the upper frame and an expanded view of a group or the first segment of a group in the lower frame.

The node overview strings and each represent a different node selected from the group for representation in the overview. It should be noted that overview strings for only a portion of the nodes that might be selected to represent the associated group are shown in . This is for illustrative purposes only and in practice more overview strings might be included and viewable although some scrolling may be necessary. Each node overview string comprises one or more sentences selected from the node associated text. If the entire text is not included in the node overview string gap indicators such as ellipsis symbols . . . are used to indicate omitted sentences. In all overviews and summaries associated with this invention strings representing individual nodes are organized to reflect the tree structure of the subtree or subtrees associated with the group. In this example the structure is reflected by an adaptation of reduced width trees introduced in U.S. Pat. No. 6 683 632 issued Jan. 27 2004 to Newman titled Method and System for Presenting Serai Linear Hierarchy the disclosure of which is incorporated by reference. In the adaptation a string representing a node that has no predecessors in the group is represented unindented and prefixed by an initial indicator chosen in this example to be a solid bullet. If a selected node has selected descendants along only one path the node overview string associated with the nearest such descendant is listed under the node overview string for node n unindented and prefixed by a no sibling indicator chosen in this example to be an outline bullet. All other strings are prefixed by a sibling indicator in this example a solid bullet and indented under the strings representing their closest selected parent in the group. Thus the nodes associated with node overview strings and all have the initial node as their closest parent represented in the group. The node associated with node overview string is the single selected descendant of the node associated with node overview string and node overview string bears the same relationship to the node associated with node overview string .

Group summary comprises group header a set of text summary strings and and a gap indicator . The text summary strings are slightly different in structure from the message overview strings of in that they include the text author for example text author . However this is an arbitrary difference either type of text representation string could include or not include a text author or other text identifier. The text summary strings are also organized slightly differently from the text overview strings of in that a simple indented tree is used to portray the tree structure. In the indented tree a summary string for a text is indented under the summary string for the nearest parent node that is represented in the summary. Gap indicators such as gap indicator indicate texts in the group not represented in the summary and occurring in a tree path between the start of the group and some represented message or between two represented texts. It should be noted that the two methods of organizing a set of text representation strings namely via the reduced width trees of and or the indented trees used in can be used interchangeably for overviews and summaries alike. The reduced width trees are useful for limiting the width of the digests when the text representation strings are deeply nested and allow convenient down the page reading. The indented trees are a more familiar form that may be desirable in certain applications.

Now moving to the methods for developing the subtopic groupings overviews summaries and segmented treetable visualizations. describes the interactions among the major processes in one embodiment of this invention. The control routine having received a request for an overview summary or segmented treetable presentation of tree structured texts enters at box where it accesses the text tree and associated information from data storage . Data storage can be part of the main memory of the processing node or a local or shared storage device accessible from the processing node or a storage device accessed by request to another processing node across a network. The control routine then moves to decision box where it checks whether the associated information includes clustering information. If so the control routine moves to decision box . Otherwise the control routine moves to box described in more detail with respect to to obtain the primary clusters and secondary collections for the tree. The control routine then moves to box where it stores the clustering result information and then moves to decision box .

At decision box the control routine checks the type of input request. If the request is for a tree summary it moves to box where it sets digesting parameters for a summary of the primary clusters and then moves to box . If the request is for a tree overview the control routine moves to box where it sets digesting parameter s for an overview of primary clusters and then moves to box . If the request is for a segmented treetable linking to digests of all regions the control routine moves to box where it sets digesting parameters for an overview of all clusters both primary clusters and the secondary collections also represented in the treetable and then the control routine moves to box .

At box described in detail in conjunction with the control routine forms a digest of the desired type. It then moves to box to check if the request was for a segmented treetable. If not the control routine returns at box . Otherwise the control routine moves to box described in more detail with respect to where it forms the treetable and links it to the full overview and then returns at box .

After computing word vectors for each text the control routine moves to box where it finds the node pairs related in either a parent child or sibling relationship in the tree. It then moves to box where it computes the lexical distance between the texts of each such node pair. If the word vectors for the texts contain raw or weighted counts the distance measure used is the standard cosine distance. If the word vectors for the texts contain probabilities obtained by PLSA processing the distance measure used in one embodiment is the Hellinger similarity namely the sum of the square roots of the products of the positionally matching vector elements

The control routine them moves to box discussed in more detail herein below with respect to where it obtains primary clusters representing groupings of more closely related nodes that may be used in a digest and if needed secondary clusters of less closely related nodes mat may be used for groupings within other tree visualizations. The control routine then moves to box where it may make some minor adjustments at cluster boundaries based on structural considerations involving nodes with many children. In particular 

After finding the most similar cluster pair the control routine moves to box . At box discussed in more detail with respect to the control routine determines the action to be taken for clusters c and c and moves to decision box . At box the control routine checks what action has been determined. It no action is to be taken the control routine moves directly to decision box . If the required action is combine the control routine moves to box where it combines clusters c and c and moves to decision box . If the required action is combine and close the control routine moves to box where it combines clusters c and c and moves to box . If the required action is to just close the primary clusters the control routine moves directly to box . At box the control routine examines the current set of clusters and identifies as primary for use in constructing digests all current clusters larger than a given minimum size and identifies the remaining clusters as secondary. In this embodiment the minimum size for primary clusters is 5 texts but it could equally well be set as a function of the number of texts in the tree. After closing primary clusters at box the control routine moves to box . At box the control routine may combine all adjacent secondary clusters and when all adjacent secondary clusters are combined may also combine very small secondary clusters with adjacent primary clusters. This is done for example to permit the visualization of the tree within a treetable as divided between groups representing primary clusters and other collections of less closely related nodes. After possibly combining secondary clusters at box the control routine moves to box .

At decision box the control routine determines whether there are clusters that have not yet been closed. If so it moves to box where it gets the next most similar cluster pair and moves to box to continue iterating. If not the control routine moves to box . At box the control routine checks whether primary clusters have been identified as yet and if not marks as primary all current clusters larger than a given minimum size and moves to box .

The control routine then moves to box described in more detail with respect to where it finds the quoting interactions to be used in extracting sentences for the cluster overview. Specifically it finds a quoted set QD of quoted nodes and associated quoted sentences and a quoting set QG of quoting nodes and quoting sentences such that the quoting sentences in quoting set QG match quoted sentences in quoted set QD. The eventual overview construction method will use this information to create extracted sequences of quoted sentences and responses to those sentences in the summary. After finding quoting interactions in box the control routine moves to box where it gets a node n in extraction set EN and moves to box . At box described in more detail with respect to the control routine obtains the string to be used to represent node n in the overview and moves to decision box where it checks whether there are more nodes in extraction set EN to be processed. If so the control routine moves to box where it gets another node n in extraction set EN and moves to box . Otherwise the control routine moves to box described in more detail with respect to where it combines and formats the node representation strings obtained for the nodes in extraction set EN into a single overview digest for the cluster and then to box where it returns that digest.

At decision box the control routine checks whether more representation is to be given to early nodes in the cluster and if not moves to box . Otherwise it moves to box where if the tree root is part of the cluster it is added to the set of central nodes CN and the control routine moves to box . At box the control routine determines whether any children of the overall tree root are also part of the cluster and if so adds a proportion of them to the set of central nodes GN and moves to box . At box the control routine returns the set of central nodes CN.

At box entered for central nodes the control routine adds more sentences to sentence set S specifically sentences following important quoting passages that is sentences immediately following quoting passages node n selective quote q recorded in quoting set QG if a sentence s to be added is very short then one or more sentences following s in node text nt are added as well. If a sentence to be added is very long it may be truncated. After adding sentences following quoting passages if any at box the control routine moves to decision box . At decision box the control routine checks if any sentences have yet been added to sentence set S. If sentence set S contains some sentences the control routine moves to box . Otherwise the control routine moves to box where it adds to sentence set S either the first sentence in node text nt or the sentence in node text nt having a word vector that is closest to the word vector for node text nt as whole and then the control routine moves to box .

At decision box entered for non central auxiliary nodes the control routine checks whether sentence set S is still empty. If so it moves to box where it adds the last sentence of node text nt to S making the assumption that if there are no explicit quotes of node n then responses to node n probably relate to the last sentence. If the last sentence s of node text nt is very short then one or more sentences preceding sentence s in node text nt are added as well if sentence s is very long it may be truncated. After the last sentence or sentences of node text nt have been added to S at box the control routine moves to box .

At box the control routine sorts the sentences in sentence set S by their position in node text nt and eliminates duplicates and then moves to box . At box the control routine concatenates the sentences in sentence set S to form the string representing node n in the overview. Sequences of sentences in node text nt but not in sentence set S are represented in the string by gap markings such as ellipsis symbols . . . . The control routine then returns the overview string for node n at box .

Quoted set shows the quoted set QD obtained after analyzing the quote interactions of the cluster. It contains two pairs and indicating when extracting sentences for use in representing node sentence S will be included and that when extracting sentences representing node sentence S will be included. Similarly the quoting set shows the quoting set QG after analyzing the quote interactions. It contains the two pairs and indicating that quote Q of node and quote Q of node are considered to be important quotes and that sentences following them in their containing nodes might although not necessarily be included in the overview.

The overview schematic shows the overview that would result from the central and auxiliary node identification together with quote interaction analysis. The schematic lists the sentences that would be included in the overview the nodes from which they are extracted and a brief rationale for their inclusion. As in an actual overview sentences are concatenated into strings representing their source nodes with ellipsis symbols . . . indicating gaps and the strings are arranged in an indented tree reflecting the structure of the cluster. Thus node which is a central node is represented in the overview by two sentences S and S. The first sentence S is used because is a central node and there is no entry for in quoting set QG. Sentence S is used because it is represented in quoted set QD. Node which is an auxiliary node is represented in the overview by sentence S which is represented in quoted set QD. And node which is a central node is represented by sentence S because it follows a quote represented. In quoting set QG.

The control routine enters at box where it builds a reduced tree for the cluster containing only the nodes to be represented in the digest. In the reduced tree 

The control routine then moves to box where it initializes the indent level to 1 and the digest to empty. The control routine then moves to decision box where it checks whether the cluster has a dummy root node. If so it moves to decision box . Otherwise it moves to box described in more detail with respect to where it formats the digest for the subtree rooted in the subtree root and then moves to box .

At decision box the control routine checks whether the dummy subtree root node has any remaining unprocessed children in the reduced tree. If not it moves to box . Otherwise it moves to box where it gets an unprocessed child and moves to box . At box described in more detail with respect to the control routine formats the digest for the subtree rooted in the unprocessed child and adds it to the cluster digest and then moves to box .

At box the control routine adds the node representation string to the digest indenting some multiple of the new indent level and moves to decision box . At decision box the control routine checks whether the current node has any unprocessed children in the reduced tree and if not moves to box where it returns. Otherwise the control routine moves to box where it gets an unprocessed child of the current node and moves to box . At box the control routine formats the part of the digest for the subtree headed by the unprocessed child node recursively invoking the current process from box . When the recursively invoked execution of the current process returns the control routine moves to box .

After obtaining sentence vectors for each sentence in the cluster in box the control routine moves to box where it obtains the centroid of the sentence vectors for the cluster that is a vector where each position contains the average of the values in that position across the cluster. The control routine then moves to box where it gets a sentence in the cluster and moves to box . At box described in more detail with respect to the control routine assigns an intrinsic score to the sentence reflecting lexical centrality and position features and then moves to box where it checks whether there are any more sentences in the cluster. If so the control routine moves to box where it gets another sentence and then moves to box . Otherwise the control routine moves to box .

At box the control routine adds the sentence with the highest intrinsic score to the summary and moves to box . At box the control routine determines the number of sentences to be used in the summary. This is computed using an assumed percentage usually 10 and then using the larger of that percentage of the number of sentences in the cluster as a whole and that percentage of the number of texts in the cluster times a nominal standard text size whichever is greater. The control routine then moves to box .

At box the control routine determines whether the summary contains the desired number of sentences. If so it moves to box . If not the control routine moves to box described in more detail with respect to where it gets the sentence not already in the summary with the highest extract score a score that combines the intrinsic score with features relating the candidate sentence to sentences already in the summary. The control routine then moves to box where it adds the sentence with the highest extract score to the summary and then moves to box .

At box described in more detail with respect to the control routine formats the summary for the cluster and then moves to box where it returns the summary for the cluster.

The control routine then moves to box where it computes a centroid similarity score csim for the sentence measuring its similarity to the cluster centroid. This is computed differently depending on whether the sentence vectors are simple word vectors or PLSA based class probabilities. In the former case the similarities are 1 distance where the distance is the absolute value of the cosine of the angle between the word vector and the lexical centroid for the cluster. In the case where the vectors represent PLSA class probabilities the similarity is the Hellinger similarity between vectors. The control routine then moves to box where it computes the overall intrinsic score is s for the sentence s as the weighted sum of the overall position score pos and the centroid similarity score csim using is s pos 1 sim where is between 0 and 1. Then control routine then moves to box where it associates the computed intrinsic score with the sentence and then moves to box where it returns.

Box describes input to the process when entered when the outline treetable has already been developed and a particular segment is to be displayed in conjunction with the outline table probably because of a link from the outline table. The input comprises the outline treetable and an indication of the detail segment to be displayed. The control routine when entered to obtain a detail segment table associated with an existing outline table enters at box . At box the control routine builds a treetable for that portion of the tree composed of nodes in the specified detail segment plus possibly one additional node for any segment containing children of nodes in the specified detail segment. The treetable is built using essentially the same method as that used to build a full treetable as described in the U.S. Pat. No. 6 976 212 issued Dec. 13 2005 to Card et al. titled Method and Apparatus for the Construction and Use of Table Like Visualizations of Hierarchic Material the disclosure of which is incorporated by reference differing in that the background of the detail segment treetable is set to the same background as that used for the segment in the outline treetable. An example of the result is illustrated in . After building a detail segment treetable in box the control routine moves to box where it constructs a two frame display with the upper half containing the outline treetable and the lower half the detail segment treetable and then moves to box where it returns.

At box the control routine combines the current node n with the content of any open segments. If node n has no children the width of the resulting segment is 1 and its height is 1. If there are open child segments the width of the resulting segment is a proportion of the number of its closed child segments plus the widths of remaining open segments and its height is the maximum of the heights of the remaining open segments plus one. The control routine then moves to decision box . At decision box the control routine checks whether the new segment exceeds the maximum dimensions for a segment. If not the control routine moves to decision box . Otherwise the control routine moves to box where it closes the new segment unless doing so would foster some very small segments. Two such cases are 1 where the height dimension has been reached and there are very few nodes in the same cluster above the current one in the tree and 2 where the width dimension has been reached but the current node has siblings in the same cluster. In the latter case the decision of whether to close the current segment is left to processing at higher node levels. The control routine then moves to decision box .

At box the control routine checks whether there are more nodes in the bottom up ordering of the tree. If not the control routine returns at box . Otherwise the control routine moves to box where it gets the next node n in the ordering and moves to box .

At box the control routine checks if there are more cells in the current row of the layout. If so it moves to box where it gets the next cell in the current row and moves to box . Otherwise it moves to box where it generates a tiny spacer cell representing part of the vertical margin for the region and a row end indicator and moves to decision box . At decision box the control routine checks whether there are any more rows in the layout after the current row. If not it moves to box where it generates a table end indicator and then to box . If however at decision box the control routine determines that there are more rows in the layout it moves to box where it gets the next outline row and then to box .

At box described in detail with respect to the control routine recursively constructs an outline treetable for the layout cell cluster and moves to box . At box the control routine adds a cell to the current treetable whose width equals the column count cc and which contains the recursively constructed outline treetable and moves to box .

If however at decision box the control routine finds that the input layout cell is associated with the current cluster it moves to box . At box the control routine checks whether the input layout cell is a spacer cell that is one representing part of the empty space in the treetable. If so it moves to box where it fills a table cell having the same width as that of the layout cell with the table background and moves to box . However if at decision box the control routine finds that the layout cell is not a spacer cell it moves to box . At box if the tree has been clustered and the outline layout cell is in the first row of the treetable representing the cluster the control routine indicates that a link to an overview segment for the cluster is to be inserted into the new cell and then the control routine moves to box . At box the control routine produces a new treetable cell having the same width in columns as the input layout cell a background that has been identified for the segment associated with the layout cell a labeled link to the detail segment treetable for the segment and if a link to an overview segment is to be inserted a labeled link to the overview as well. The control routine then moves to box .

