---

title: Multi-modal interaction for a screen magnifier
abstract: A multi-model magnification system is described that can be used with multiple forms of input, including natural input such as touch-based devices. Users can zoom in/out and pan with their preferred mode of interaction, including mouse, keyboard, pen, and touch interactions. The system provides dedicated features for some modes, such as pinch/scroll gestures for touch input, that allow users to easily zoom in/out and pan the magnified area (e.g., on a touch laptop). The system provides an interactive panning mode in which the user the user can interact with the desktop or applications (e.g., clicking on icons) and pan using special gestures. When the system is in the panning mode, the system consumes received gestures or other input, otherwise the system passes received input to a magnified application.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08176438&OS=08176438&RS=08176438
owner: Microsoft Corporation
number: 08176438
owner_city: Redmond
owner_country: US
publication_date: 20080926
---
Screen magnifiers are a type of assistive technology used by visually impaired people with some functional vision. By magnifying areas of the screen the screen magnifier allows people that would otherwise not be able to see areas of the screen that are too small to enlarge these areas. Screen magnifiers are software applications that present a computer s graphical output in an enlarged form. Many screen magnifiers act similar to a physical magnifying glass that a user can move around over the screen to magnify a specific area except rather than a physical object the screen magnifier is software and the user moves the displayed glass or lens with the mouse or other input device. The most common method of magnification is to present an enlarged view of a portion of the original screen content that covers a portion of or the entire screen. The enlarged view often tracks the pointer or cursor as the user moves a mouse or other input device around the screen so that the user can magnify different areas. Screen magnifiers may work with a single application or across multiple applications at the operating system level. For example Microsoft Windows Vista includes Magnifier an application for magnifying the entire desktop and any applications displayed on it.

Because the view is enlarged screen magnifiers provide a way to move the lens or magnified area to different areas of the desktop or application. For example at a magnification factor of 4 times 4 only one eighth of the desktop can be shown in a full screen magnifier at a time. Thus to see the other three fourths of the desktop a user moves the magnified area around in a process called panning. Although panning often refers only to horizontal movement and scrolling or other terms refer to vertical movement panning and movement as used herein refer to movement of the magnified view in any direction whether horizontally vertically or diagonally.

A tablet PC or pen computer is a notebook or slate shaped mobile computer equipped with a touch screen or graphics tablet screen hybrid technology that allows the user to operate the computer with a stylus digital pen or fingertip instead of a keyboard or mouse. Tablet PCs offer a more natural form of input as sketching and handwriting are a much more familiar form of input than a keyboard and mouse especially for people who are new to computers. Tablet PCs can also be more accessible because those who are physically unable to type can utilize the additional features of a tablet PC to be able to interact with the electronic world. Applications often do not know they are running on a tablet PC and the operating system may attempt to provide input to applications that appears similar to mouse input. This can cause several problems for screen magnifiers used in conjunction with tablet PCs or other touch based interface devices.

One problem is that most screen magnifiers do not handle touch or other natural input in any special way. For example the screen magnifier may receive notifications from the operating system about natural input operations that are similar to mouse input e.g. click hover move left . This means that at best the natural input functions on par with previous forms of input with the screen magnifier and possibly introduces new and awkward difficulties with interacting with the screen magnifier. For example unlike a mouse touch based interface devices may not distinguish between setting the pen down to move it e.g. panning a magnification area and tapping the screen to click an object e.g. selecting an icon .

To resolve this ambiguity some applications have an exclusive panning mode e.g. often represented by a hand icon that informs the application to interpret movements of the pen or other device as panning movements when selected. In this mode the application locks the display area to the cursor position and moves the display area as the user moves the cursor to perform panning. However this type of panning mode prevents the user from performing activities other than panning such as clicking on or interacting with user interface elements until the user leaves the exclusive panning mode. In addition applications that are magnified often are designed to provide special benefits to touch based users such as pen gestures that the user can make to perform special functions. It is ambiguous when a user makes one of these gestures in the screen magnifier whether the user is intending to interact with the application or the screen magnifier.

A multi model magnification system is described that can be used with multiple forms of input including natural input such as touch based devices. Users can zoom in out and pan with their preferred mode of interaction including mouse keyboard pen and touch interactions. The system provides dedicated features for some modes such as pinch scroll gestures for touch input that allow users to easily zoom in out and pan the magnified area e.g. on a touch laptop . The user can pan the magnified desktop in a manner similar to traditional panning. The user can scroll the desktop by dragging the visible surface using the stylus or mouse. The system provides an interactive panning mode in which the user the user can interact with the desktop or applications e.g. clicking on icons and pan using special gestures. When the system is in the panning mode the system consumes received gestures or other input otherwise the system passes received input to a magnified application.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

A multi model magnification system is described that can be used with multiple forms of input including natural input such as touch based devices. Users can zoom in out and pan with their preferred mode of interaction including mouse keyboard pen and touch interactions. The system provides dedicated features for some modes such as pinch scroll gestures with touch that allow users to easily zoom in out and pan the magnified area e.g. on a touch laptop . The user can pan the magnified desktop in a manner similar to traditional panning. The user can scroll the desktop by simply dragging the visible surface using the stylus or mouse. When the user touches the stylus to the screen and drags the pen or clicks the mouse button and drags the mouse or touches the screen and drags the finger the system scrolls the desktop by the amount the cursor moves. In some embodiments the system provides an interactive panning mode in which the user the user can interact with the desktop or applications e.g. clicking on icons and modify behavior of the magnification system using special gestures. The user can drag the desktop vertically horizontally or in a varied diagonal fashion if there is content to scroll to in that direction. By grabbing and dragging up the desktop moves up similar to scrolling down . By grabbing and dragging down the desktop moves down and the contents at the top are visible similar to scrolling up . This works similarly for horizontal and diagonal panning. Pinch gestures work for zoom in out and double finger panning works for panning the magnified contents.

The input device receives input from a user and communicates the input to an operating system. The input device can be a variety of devices such as a stylus digital pen mouse or even the user s finger moving over a touch screen. When the system receives a mouse message e.g. WM LBUTTONDOWN it may call the Win32 Application Programming Interface API called GetMessageExtraInfo to evaluate whether the message originated from a pen or a mouse device. The Win32 API provides a macro IsPenEvent that masks the value returned from GetMessageExtraInfo to determine the type of input received. If the macro returns true then a pen or touch screen generated the message. Otherwise a mouse device generated the message. The lower 8 bits returned from GetMessageExtraInfo are variable. Of those bits the API uses seven to represent the cursor ID zero for the mouse or a variable value for the pen ID. Additionally in Microsoft Windows Vista the API uses the eighth bit to differentiate touch input from pen input 0 pen 1 touch . In this way the system provides appropriate input paradigms for each type of input device.

The input detection component converts the received input into coordinates of a displayed cursor. When a user moves the input device the input detection component moves the displayed cursor. The location identification component identifies one or more user interface elements present at a current location of the displayed cursor. For example the location identification component may determine that the current location of the cursor is over a button that the user can press with the input device . As another example the location identification component may determine that the current location of the cursor is not over any user interface elements such as when the cursor is over an empty portion of the desktop or a blank area of a document.

The mode selection component selects between an interaction mode and a panning mode based on a user interface setting toggled by the user. The mode selection component determines how the system will interpret subsequent actions of the user and resolves the ambiguity of whether the user intends for an application or the multi modal magnification system to receive gestures. For example if the mode selection component selects the interaction mode and the user inputs a touch gesture then the system forwards the gesture to the magnified application or the operating system in the case of the desktop . If the mode selection component selects the panning mode then the system interprets the touch gesture such as dragging the input device to a new location as input to the magnifier window and updates the magnified area of the display accordingly.

The panning component processes received input on behalf of the magnifier application. For example if the received input is a touch based gesture that indicates that the user wants to pan an area of the display that the multi modal magnification system is magnifying then the panning component pans the display. The panning component stores the coordinates of the display area that the system is currently magnifying and modifies the coordinates based on movement of the input device to pan the magnified area. The panning component may apply scaling based on a magnification factor so that the user s movement within the magnified area does not pan the display faster than typically expected by the user. For example if the magnification factor is set at 16 times magnification then the mouse cursor on screen may appear to move much faster than the user would want to pan. The panning component may handle other received user input such as requests to zoom the magnified area in or out and requests to move the magnified view i.e. lens to a different location on the screen.

The forwarding component passes received user input to the identified user interface elements when the mode selection component selects the interaction mode. For example the forwarding component may pass along clicks of a mouse taps of a stylus or touch gestures to buttons or other user interface elements. The forwarding component may pass these messages as standard messages familiar to the application such as a mouse button down message e.g. WM LBUTTONDOWN on Microsoft Windows or as a gesture message e.g. ISG TAP .

The display device displays a graphical representation of one or more applications and a magnified view of at least a portion of the graphical representation. For example the display may display a desktop of the operating system and applications that are currently running as windows on the desktop. The user may select an area of the graphical representation that the system will magnify by panning the magnified area. The magnification component generates the magnified view from a selected area of the graphical representation. When the user pans the magnified area the panning component provides the coordinates of the new area to be magnified to the magnification component and the magnification component performs standard graphical operations such as a stretch blit to display a larger than usual view of the selected area.

The configuration component receives configuration information from the user. For example the user may turn off the interactive panning mode so that the mode selection component does not do any panning but rather allows the user to interact with an application in a traditional way. When the user turns the interactive panning mode back on the mode selection component behaves as described herein.

The computing device on which the system is implemented may include a central processing unit memory input devices e.g. keyboard and pointing devices output devices e.g. display devices and storage devices e.g. disk drives . The memory and storage devices are computer readable media that may be encoded with computer executable instructions that implement the system which means a computer readable medium that contains the instructions. In addition the data structures and message structures may be stored or transmitted via a data transmission medium such as a signal on a communication link. Various communication links may be used such as the Internet a local area network a wide area network a point to point dial up connection a cell phone network and so on.

Embodiments of the system may be implemented in various operating environments that include personal computers server computers handheld or laptop devices multiprocessor systems microprocessor based systems programmable consumer electronics digital cameras network PCs minicomputers mainframe computers distributed computing environments that include any of the above systems or devices and so on. The computer systems may be cell phones personal digital assistants smart phones personal computers programmable consumer electronics digital cameras and so on.

The system may be described in the general context of computer executable instructions such as program modules executed by one or more computers or other devices. Generally program modules include routines programs objects components data structures and so on that perform particular tasks or implement particular abstract data types. Typically the functionality of the program modules may be combined or distributed as desired in various embodiments.

The dynamic link library magnification.dll provides an application programming interface API exposed to internal and external magnification controllers. The executable file magnify.exe and other applications call this API to request various magnification services. The dynamic link library acts as a proxy between the magnification controller the kernel mode state for the magnification context and the desktop compositor.

Win32k.sys is a kernel mode driver that handles the bulk of the Win32 API on Microsoft Windows. Win32k.sys includes a Raw Input Thread RIT that handles input processing for the multi modal magnification system. Win32k.sys also handles security and context control. Dwm.exe provides the DWM process that keeps track of application and other windows. Dwm.exe handles the output compositing and magnification for the multi modal magnification system. Wisptis.exe is responsible for input to a tablet via a stylus or touch and consumes input transformation functions provided by Win32k.sys to transform absolute clicking to work in magnified contexts e.g. what you see is what you click .

In decision block if the system is in the panning mode then the system continues at block else the system continues at block . In block the system consumes the user input and does not pass it along to the underlying application or desktop as described further with reference to . For example if the system is in the panning mode and the user pinches a touch display then the system zooms the magnified view e.g. by modifying a magnification factor . In block the system forwards the input to the underlying application or desktop. For example if the user clicked on a button then the system forwards the click to the button for processing. In decision block if the system receives more input then the system loops to block to process the input else the system loops to block to wait for more input. After block these steps conclude.

In block if the gesture is a multi finger slide then the system continues at block else the system continues at block . In block the system pans the magnified area. In block the system handles other gestures. For example if the gesture is unrecognized then the system may ignore the gesture or display an error indication to the user. The system may provide dedicated input handling for each particular mode of input. For example if there is something that is more natural with a pen that the user cannot as easily do with the mouse then the system may process pen input in a dedicated manner similar to that shown for touch based gesture input. After block these steps conclude.

In some embodiments the multi modal magnification system stores configuration information that a user can modify to alter the behavior of the system. For example the user may be able to select the conditions under which the system switches modes e.g. always in panning mode or always consume gestures . As another example the user may be able to configure the gestures to which the system responds by default. The system may also allow the user to turn off dedicated handling for a particular type of input such as touch input so that the type of input responds as other types of input.

In some embodiments an application is unaware of the multi modal magnification system s actions to pan or forward along user input information. For example when the system determines that the user wants to pan the system may pass the application a standard drag message or not inform the application at all. On the other hand when the system determines that the user wants to interact with an element of the application then the system may forward a message such as a standard mouse button down message to the application that looks to the application like a standard mouse click. In this way the application receives familiar indications such as mouse clicks of the user s actions and is unaware that the multi modal magnification system is intercepting messages and providing additional or modified functionality before the messages reach the application.

In some embodiment the multi modal magnification system may display a special cursor to indicate the current mode to the user so that the system informs the user about how the system will process input. For example the system may display the common panning hand or another icon when the system is in the panning mode and a standard mouse cursor when the user is in the interaction mode. When the user makes a panning gesture the system may show a gripping panning hand to convey to the user that the user has grabbed the magnified view s contents and can move the contents by moving the input device in a particular direction. When the system is in the interaction mode the system displays whatever cursor the application or operating system has requested to display such as the common arrow or a text insertion cursor.

In some embodiments the multi modal magnification system accelerates and decelerates the movement of the magnified view. For example if a user requests panning and swings the pen in one direction the magnified view may continue moving in that direction once the user lifts the pen from the screen s surface and then slowly roll while decelerating to a complete stop. The system takes the speed at which the pen leaves the screen and the total length of the dragging motion into consideration when determining the length and time of the continued rolling or if rolling will occur at all. In some embodiments the system calculates the speed used to determine rolling as 0.6 times the speed between the last two points plus 0.4 times the previous speed. Thus the system considers previous points but weights the most recent points more heavily. In some embodiments if the user performs the panning motion below a certain velocity rolling will not occur. For example if the speed of pan motion is 100 pixels per second or less rolling will not result when the user lifts the pen. Note that the length of the user s stroke may not matter whereas the speed of the stroke affects the speed and distance the page rolls once the user lifts the pen or other input device. The system may cap the total rolling time to a certain value e.g. 500 ms .

From the foregoing it will be appreciated that specific embodiments of the multi modal magnification system have been described herein for purposes of illustration but that various modifications may be made without deviating from the spirit and scope of the invention. For example although a screen magnifier is described application authors can use the techniques described herein for multi modal input in other types of applications such as an Internet browser. Accordingly the invention is not limited except as by the appended claims.

