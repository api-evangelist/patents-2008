---

title: Packet network telecommunication system
abstract: Packet network telecommunication systems, especially Internet Protocol (IP) telephony removes the need of explicit installing of TSP (TAPI service provider) software or other telephony software at each workstation. Application server software or corresponding control software is arranged to take care of all call control actions on behalf of the phone client software so that the phone client software only needs to receive and transmit speech data streams, and to communicate all control messaging from and to the particular phone client software via the communication link between the control software and the phone client software. Since modern operating systems include support for the user interface devices as well as transmitting and receiving real-time data streams, the phone client software does not require any specific interfacing software to be installed on the client workstation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07855965&OS=07855965&RS=07855965
owner: SAP AG
number: 07855965
owner_city: Walldorf
owner_country: DE
publication_date: 20080122
---
This application is a division of application Ser. No. 10 495 999 filed on May 19 2004 as the 35 USC 371 national stage of international application PCT FI01 00158 filed on Feb. 19 2001 which designated the United States of America and claimed priority to Finnish application 20000362 filed on Feb. 17 2000. The content of each of these above referenced applications is hereby expressly incorporated by reference.

The invention relates to Internet Protocol IP telephony and communication systems. Especially the invention is related to such a system as specified in the preamble of the independent system claim.

At the time of writing this application the trend in development of VOIP Voice over IP technology is towards integration of all communication technologies within workstations of users i.e. using conventional personal computers as a terminal for voice and video communication as well as email and fax communication. One important development is the production of the Telephony Application Program Interface TAPI for personal computers which allows developers to use a simple API application program inter face for adding communication capabilities to their application programs. A typical configuration for a user workstation comprises an application program used for communication such as for example an IP phone program or a video conferencing program and a TAPI Service Provider TSP program for interfacing the application program to the VOIP network. The TSP program provides the TAPI which the application program uses and communicates with the VOIP network elements according to H.323 standard and other related standards.

In a typical installation a server unit controls and provides services to a large number of client units . For the sake of clarity shows only one client unit .

However this configuration has drawbacks. While the TSP program provides a standardized API for other programs such as the application server or the virtual phone to use therefore making it easy to program such other programs and facilitating the use of programs from different manufacturers the TSP program needs to be installed in each device used to access the VOIP network. This is a large drawback in large organizations where the TSP needs to be installed to hundreds or even thousands of workstations.

An object of the invention is to realize a packet network telecommunication system which avoids the problems of prior art. A further object of the invention is to realize a telecommunication system which allows packet network telephony to be used without need for an explicit installation of preferable any software especially that of TSP software on the workstation of each user.

The objects are reached by arranging the application server software or corresponding control software to take care of all call control actions on behalf of the phone client software so that the phone client software only needs to receive and transmit speech data streams all control messaging from and to the particular phone client software are communicated via the communication link between the control software and the phone client software.

Such an arrangement removes the need of installation of TSP software and advantageously the need of installation of other telephony software at each client workstation. Since modern operating systems include support for the user interface devices as well as transmitting and receiving real time data streams the phone client software does not require any specific interfacing software to be installed on the client workstation. Furthermore the phone client software can advantageously be realized using platform independent tools such as the Java programming language whereby the phone client software can be constructed to be loadable to the client workstation always when the need for using the phone arises. In a particularly attractive embodiment of the invention the phone client software is realized using Java programming language and constructed to be executable by internet browser programs whereby a user of a workstation can start to use the IP phone simply by accessing a specific company intranet or public internet page whereby no explicit installation by computer support personnel is needed at the workstation.

The system for real time packet network telecommunication according to the invention is characterized by that which is specified in the characterizing part of the independent claim directed to a system for real time packet network telecommunication. The server unit according to the invention is characterized by that which is specified in the characterizing part of the independent claim directed to a server unit. The computer program product according to the invention is characterized by that which is specified in the characterizing part of the independent claim directed to a computer program product. The dependent claims describe further advantageous embodiments of the invention. The features specified in one dependent claim may be combined with features specified in another dependent claim to produce further embodiments of the invention.

A description of was given earlier in connection with the description of the state of the art. Same reference numerals are used for similar entities in the figures.

In voice over IP schemes typical at the time of writing this patent application the network employs the H.323 protocol and related protocols for controlling the real time communications such as voice and or video transmissions. In the H.323 protocol suite real time data streams are transferred using the real time protocol RTP while real time control protocol RTCP is used for managing existing RTP streams. Therefore in a preferred embodiment of the invention the client software only needs to interact directly with the network only via RTP and RTCP protocols.

In a preferred embodiment of the invention the phone client software uses the interfaces provided by the operating system of the client workstation for using the user interface such as the loudspeakers and the microphone and for transmission and reception of RTP traffic. However it is clear for a man skilled in the art that additional interface programs can be used between the operating system interfaces and the phone client software without departing from the spirit of the invention. In a preferred embodiment of the invention no such additional interface programs are used since many widely used operating system already provide the needed interfaces for the user interface as well as for transmission and reception of RTP traffic. For example at the time of writing this patent application current versions of the Windows NT and Windows 2000 operating systems provide support of a microphone and loudspeakers in the form of an API.

Although illustrates call control and audio streams between the control program and the interfacing program use of audio streams at the server end is not necessary in all embodiments of the invention.

Further in an advantageous embodiment of the invention the client software provides an interface C for call control which can then be used by separate call control modules. The client software then communicates the call control messages from interface C to the control unit and the reply messages in the opposite direction. Such a public call control interface allows third party developers to produce call control software which are compatible with the client software . For example the user may wish to use a different user interface for call control than the one provided by the client software . Further in such an embodiment it is not necessary for the client software to comprise a call control user interface if all such client workstations where that particular version of client software is installed have the external call control software module .

In a further advantageous embodiment the client software is arranged to forward messages of any kind between the control unit and other software modules at the client workstation. To this end the control unit and the client software have in this embodiment a communication channel in the interface D between the control unit and the client software for transferring of free format messages. The client software merely forwards any messages from the channel to a specific interface for other software modules and vice versa. Such an arrangement can be used for creating new services on top of the real time telecommunication system.

The inventive arrangement allows an easy deployment of real time packet network telecommunications technology within an organization. One workstation used as the telecommunications server needs to be fitted with software for a control unit and in the case that the control unit uses the TAPI interface the workstation is also fitted with a TSP program . Since call control messages are communicated to and from the clients via the application server the client does not need to communicate directly with the network other than with the real time data streams wherefore no TSP program is needed.

According to a further aspect of the invention a system for real time packet network telecommunication having a server unit is provided which server unit has a control unit and an interfacing unit said interfacing unit providing an application program interface for use by other programs which system has a client unit which client unit has a computer program product for real time telecommunication. According to an advantageous embodiment of the invention the system comprises at least

The real time data stream is advantageously an audio or a video data stream. In a further advantageous embodiment of the invention the means for receiving and transmitting a real time data stream is arranged to receive and transmit a plurality of real time data streams. For example the means can receive and transmit an audio and a video data stream for a video conferencing session.

According to a further aspect of the invention a server unit for a real time packet network telecommunication system is provided which server unit has a control unit for controlling of client applications and an interfacing unit for connection to a real time packet telecommunication network and for providing an application program interface for use by other programs. According to an advantageous embodiment of the invention the server unit comprises

According to a further aspect of the invention a computer program product for a client unit of real time packet network telecommunication system is provided. According to an advantageous embodiment of the invention the computer program product comprises at least

computer program code means for receiving and transmitting a real time data stream using the real time protocol 

According to a further advantageous embodiment of the invention the computer program product further comprises at least computer program code means for receiving control messages from said control unit and for transmitting said control messages to a second client program .

According to a further advantageous embodiment of the invention the computer program product is downloadable and executable by a browser program .

According to a further advantageous embodiment of the invention the computer program product is realized using the Java programming language.

According to a further advantageous embodiment of the invention the computer program product is embodied on a computer readable medium. The computer readable medium can be for example a magnetic or magneto optical mass storage media such as a diskette a hard disk a CD ROM disc or for example a DVD disc. The computer readable medium can as well be an electronic media such as a flash memory or for example the random access memory RAM of the client workstation or another computer. As a man skilled in the art computer program products can be stored on many different types of media wherefore the invention is not limited to the product being stored on any specific media or a set of specific types of media and the aforementioned types of media are only meant as examples of storage media widely used at the time of writing this patent application.

According to a further advantageous embodiment of the invention the computer program product further comprises at least computer program code means for providing an application program interface for other computer program products.

According to a further advantageous embodiment of the invention the computer program product it comprises computer program code means for providing an application program interface for call control software.

On the application side there is an Application Control Protocol ACP which typically comprises a number of control messages. These control messages are typically generated and processed by Telephony Applications block which are the control applications in packet network telecommunication systems according to the third advantageous embodiment of the invention and by the User Interface . Telephony applications reside typically on a server in a packet data telecommunication network. The User Interface UI is an interface to control the Telephony Applications and it usually resides on a workstation. Advantageously a User Interface and a Telephony Application communicate using an Application Control Protocol.

In this third advantageous embodiment of the invention the External System Gateways and External System Gatekeepers may be any standard gateways and gatekeepers. The TSP Adaptation Server the Application Server and the Client are network elements where the present invention is applied. It is possible that an External System Gatekeeper which has TSP software providing TAPI is modified so that it contains the TSP Adaptation Layer and Call Control Protocol entity . In other words it is possible that the ESGK and TAS are implemented as a single network element.

In a packet network telecommunication system according to the fifth advantageous embodiment all network elements i.e. SGW CD AS and Client communicate with each other using either Call Control Protocol or Application Control Protocol.

In a packet network telecommunication system according to the invention an Application Server acts on the Clients behalf. To the rest of the packet network telecommunication system the Application Server appears to be the originator or the destination of call control messages. This means that only an Application Server exchanges Call Control Messages with a Client. On the other hand as described above the data streams to or from an external network for example RTP streams are usually transmitted between a Client and a gateway element or between two or more if the call is a conference call Clients . An application server is typically not involved in processing audio and video data streams. If Client establishes a connection to another client which is attached to the same application server the data streams between these two clients are transmitted directly.

The functionality of a Telephony Application depends on the type of the application. Some examples of Telephony Applications advantageously implemented using a packet network telecommunication system according to the invention are a switchboard an Interactive Voice Response IVR and or a call center. The functionalities of these are known to a man skilled in the art and they are therefore not discussed here in more detail.

The Application Control Protocol and advantageously also the Call Control Protocol which forms a part of the Application Control Protocol is advantageously a string based statefull protocol. The Call Control Protocol comprises messages relating to call control commands and events occurring in calls. The Application Control Protocol typically comprises all the call control messages of the Call Control Protocol and in addition application control messages which typically relate to interaction between the User Interface and the Telephony Application carried out to control the Telephony Applications. Some examples of controlling a Telephony Application are inlogging to a system change of a password or change of profile information. Profile information is a concept known to a man skilled in the art and it may specify for example which calls are accepted where to forward calls or which tones are related to which callers.

Advantageously the Call Control Protocol messages are string based and comprise a number of pairs each pair indicating a key word and its value. If there are messages corresponding to commands and events there advantageously is in each call control message either a certain key word indicating that the message is a command message or a certain other key word indicating that the message is an event message. The value issued to the key word then defines which call control command or which event the call control message represents.

In addition to these keywords indicating the type of a call control message there may be various parameter value pairs in call control messages. As call control messages typically relate to a certain call each call control message typically comprises a call identifier parameter and a value for this parameter. There may be two kinds of call identifier parameters each call handled in a packet network telecommunication system is assigned a first call identifier and those calls whose other or one if the call is a conference call endpoint is outside a packet network telecommunication system according to the invention are given second call identifiers for example in a gateway element or by a Call Dispatcher. Typically an Application Server binds the first identifiers with the calls. A further example of a parameter typically comprised in each call control message is an identifier of a gatekeeper element CD EGK or of a gateway element. The gatekeeper identifier is usually relevant to call control commands and the gateway identifier to events.

Some examples of call control messages relating to call control commands are messages corresponding to a client accepting a call a client rejecting a call connecting a call redirecting a call putting a call on hold releasing a call from hold and disconnecting a call. Various other call control commands very well known to a man skilled in the art can also be implemented as call control messages. The relevant parameters for these command messages vary. Some examples in addition to the ones presented above are the following parameters caller number number to be called packet network address e.g IP address and port for a RTP data stream codec used in a call.

Some examples of call control messages relating to events are messages indicating that a call is coming a call is connected a call is disconnected or a call rejected. Furthermore as a call has states there advantageously are call control messages indicating also a call states. Examples of call states are idle accepted proceeding onhold and unheld.

If the Telephony Applications involves Dial Tone Multiple Frequency DTMF and or IVR functionality there typically are specific call control commands and specific parameters relating to these functionalities.

Advantageously the call control messages comprise also messages using which a RTP data stream or other packet data stream is opened and closed. These messages typically comprise the following parameters first or second call identifier IP address port number compression information and codec information. When RTP data stream is controlled using call control messages it is possible to have a system where the Real Time Control Protocol is not needed. This simplifies the functionality of a Client . In general it is possible to control RTP data stream using call control commands and or RTCP.

Using string based call control messages each of which comprises typically one keyword value pair and a keyword value dependent number of parameter value pairs has a number of advantages. One of them is that string based messages are flexible and easy to modify. In a packet network telecommunication system presented in the call control messages are typically transmitted between Client and Application Server and between Application Server and TSP Adaptation Server or Call Dispatcher and between Call Dispatcher and SGW . As the call control message proceeds each network node may easily add more parameters to the message see example below for more details . A second advantage is that it is easy to enhance the Call Control Protocol. If there is need to specify new messages this can be done easily by defining new values for keywords. New types of messages can be defined by defining new keywords. New parameters and parameter values are similarly easy to define. Furthermore interoperability between old and new versions when old and new versions are for example used heterogeneously in large systems of above described Call Control Protocol or Application Control protocol is easy a receiver may simply ignore unsupported parameters or messages types and act according to the parameters or messages it recognizes.

Thereafter the Gateway sends an UPDATE Call ID CID call control message to the Call Dispatcher. This message typically has a Call ID parameter the first call identifier assigned by the AS and a CID parameter second call identifier assigned by the GW . The Call Dispatcher uses this message to link together the first and second call identifiers. The Gateway starts signaling to connect the call to the called number and as the signaling proceeds it informs the CD with a PROCEEDING CID call control message . The CD changes the CID parameter to Call ID parameter and transmits the PROCEEDING Call ID call control message to AS . It typically transmits the PROCEEDING Call ID call control message further to the Client. When a call is established to the SGW the SGW sends a RTP PLAY CID IP address Port Codec QoS call control message to CD . QoS parameter refers to Quality of Service. The IP address and port number refer to those of the Gateway. This information is forwarded to the Client so that is knows where to send packet data streams relating to this connection. The CD sends RTP PLAY Call ID IP address Port Codec QoS call control message to the AS which in turn forwards it to the Client. After receiving this message the Client prepares itself to receive RTP stream at the port specified in the CALL OUT message . This port may have a default value so that the Client knows it automatically or the AS for example may select this port and inform both the Client and the CD about the number of the port using for example messages and If the packet data network system support other media it is possible that RTP stream carries multimedia data stream.

When RTP session is established the SGW sends a CALL CONNECTED CID call control message to the CD which changes the second call identifier parameter to the first call identifier parameter and forwards the CALL CONNECTED Call ID call control message to the AS . The AS forwards to the message to the Client .

A call or connection between two Clients which are both communicating with a certain Application Server using ACP is typically handled in a similar manner as presented in but the signaling between the CD and SGW is omitted as the SGW is not involved in the call connection. If a first Client is communicating with a first AS using ACP and a second Client is communicating with a second AS using ACP the call control messages and or corresponding messages are typically transmitted between the first and second Applications Servers via a CD. It is possible that a plurality of packet network telecommunication systems according to the invention each of which typically has one Call Dispatcher are connected together directly or with intermediate gateways such as SGW see . In this case there may be more than one Call Dispatcher involved in the signaling.

The names and order of the call control messages illustrated in are examples. The parameters of the call control messages may be different from those presented in connection with .

The examples presented in correspond to the system presented in . Using these examples a man skilled in the art is capable to determine proper signaling for a system presented in .

In view of the foregoing description it will be evident to a person skilled in the art that various modifications may be made within the scope of the invention. While certain preferred embodiments of the invention have been described in detail it should be apparent that many modifications and variations thereto are possible all of which fall within the true spirit and scope of the invention.

