---

title: Methods and apparatus for controlling respective load currents of multiple series-connected loads
abstract: A lighting apparatus () includes one or more first LEDs () for generating a first spectrum of radiation (), and one or more second LEDs () for generating a second different spectrum radiation (). The first and second LEDs are electrically connected in series between a first node (A) and a second node (B), between which a series current () flows with the application of an operating voltage () across the nodes. A controllable current path () is connected in parallel with one or both of the first and second LEDs so as to at least partially divert the series current, such that a first current () through the first LED(s) and a second current () through the second LED(s) are different. Such current diversion techniques may be employed to compensate for shifts in color or color temperature of generated light during thermal transients, due to different temperature-dependent current-to-flux relationships for different types of LEDs.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08736197&OS=08736197&RS=08736197
owner: Koninklijke Philips N.V.
number: 08736197
owner_city: Eindhoven
owner_country: NL
publication_date: 20081008
---
The present application claims the benefit of U.S. Provisional Application Ser. No. 60 978 612 entitled Integrated LED Based Luminaire for General Lighting filed on Oct. 9 2007 which is incorporated herein by reference in its entirety.

This invention was made with governmental support under grant number DE DE FC26 06NT42932 awarded by the U.S. Department of Energy. The U.S. Government has certain rights in the invention.

Series connected loads i.e. multiple electrically conducting devices connected so as to receive the electric current in series have found recent applicability in the solid state lighting. Light emitting diodes LEDs are semiconductor based light sources often employed in low power instrumentation and appliance applications for indication purposes. LEDs conventionally are available in a variety of colors e.g. red green yellow blue white based on the types of materials used in their fabrication. This color variety of LEDs coupled with advances in the development and improvements of the luminous flux of light emitting devices recently has been exploited to create novel LED based light sources having sufficient light output for new space illumination applications.

For example U.S. Pat. No. 6 777 891 contemplates arranging a plurality of LED based lighting units as a computer controllable light string wherein each lighting unit constitutes an individually controllable node of the light string. Applications suitable for such light strings include decorative and entertainment oriented lighting applications e.g. Christmas tree lights display lights theme park lighting video and other game arcade lighting etc. . Via computer control one or more such light strings provide a variety of complex temporal and color changing lighting effects. In many implementations lighting data is communicated to one or more nodes of a given light string in a serial manner according to a variety of different data transmission and processing schemes while power is provided in parallel to respective lighting units of the string e.g. from a rectified high voltage source in some instances with a substantial ripple voltage .

The operating voltage required by each lighting unit as well as the string due to the parallel power interconnection of lighting units typically is related to the forward voltage of the LEDs in each lighting unit e.g. from approximately 2 to 3.5 Volts depending on the type color of LED how many LEDs are employed for each color channel of the lighting unit and how they are interconnected and how respective color channels are organized to receive power from a power source. For example the operating voltage for a lighting unit having a parallel arrangement of respective color channels to receive power each channel including one LED having a forward voltage on the order of 3 Volts and corresponding circuitry to provide current to the channel may be on the order of 4 to 5 Volts which is applied in parallel to all channels to accommodate the one LED and current circuitry in each channel. Accordingly in many applications some type of voltage conversion device is desirable in order to provide a generally lower operating voltage to one or more LED based lighting units from more commonly available higher power supply voltages e.g. 12 VDC 15 VDC 24 VDC a rectified line voltage etc. .

One impediment to widespread adoption of low voltage LEDs and low voltage LED based lighting units as light sources in applications in which generally higher power supply voltages are readily available is the need to convert energy from one voltage to another which in many instances results in conversion inefficiency and wasted energy. Furthermore energy conversion typically involves power management components of a type and size that generally impede integration. Conventionally LEDs are provided as single LED packages or multiple LEDs connected in series or parallel in one package. One significant barrier to the integration of LEDs and power conversion circuitry relates to the type and size of power management components needed to convert energy to the relatively lower voltage levels typically required to drive LEDs.

In view of the foregoing other recent applications involving LEDs as discussed for example in U.S. Patent Application Publication No. 2008 0122376 A1 are directed to a series interconnection of multiple LEDs to permit the use of operating voltages that are significantly higher than typical LED forward voltages and also allow operation of multiple LEDs or LED based lighting units without requiring a transformer between a source of power e.g. wall power or line voltage such as 120 VAC or 240 VAC and the loads i.e. multiple series connected loads may be operated directly from a line voltage .

Applicants have recognized and appreciated that control of multiple series connected loads such as LED light sources enables a number of lighting applications in which highly efficient and particularly tailored power supplies may be integrated with light sources in a luminaire configured to provide variable colored or essentially white light. Applicants have also recognized and appreciated that specific control aspects especially control of current to respective ones of multiple series connected loads can facilitate various operating characteristics of such luminaires and in particular compensation for drifts in color or color temperature of generated light as a function of thermal transients.

Accordingly one aspect of the present invention is directed to a lighting apparatus including at least one first LED for generating first radiation having a first spectrum and at least one second LED for generating second radiation having a second spectrum different from the first spectrum. The at least one first LED and the at least one second LED are electrically connected in series between a first node and a second node. A series current flows between the first node and the second node when an operating voltage is applied across the first node and the second node. A switching power supply provides power factor correction and the operating voltage. The switching power supply controls at least one controllable current path connected in parallel with one of the at least one first LED and the at least one second LED so as to at least partially divert the series current around the one of the at least one first LED and the at least one second LED such that a first current through the at least one first LED and a second current through the at least one second LED are different.

Another aspect of the present invention is directed to a method for controlling a color temperature of white light generated by an LED based lighting apparatus during a thermal transient. The LED based lighting apparatus includes at least one first LED for generating first radiation having a first spectrum and at least one second LED for generating second radiation having a second spectrum different from the first spectrum wherein the white light results from a mixture of the first radiation and the second radiation. The at least one first LED and the at least one second LED are electrically connected in series between a first node and a second node and a series current flows between the first node and the second node when an operating voltage is applied across the first node and the second node. The method includes the steps of generating a temperature signal representing a temperature proximate to the at least one first LED and the at least one second LED and controlling based on the temperature signal at least one controllable current path connected in parallel with one of the at least one first LED and the at least one second LED so as to at least partially divert the series current around the one of the at least one first LED and the at least one second LED such that a first current through the at least one first LED and a second current through the at least one second LED are different.

Another aspect of the present invention is directed to an apparatus for controlling a color temperature of white light generated by an LED based light source during a thermal transient. The LED based light source is mounted to a thermally conductive substrate and the thermally conductive substrate has a recess formed therein proximate to the LED based light source. The apparatus includes a printed circuit board having a tab for insertion into the recess formed in the thermally conductive substrate. The apparatus further comprises a temperature sensor disposed on the tab of the printed circuit board such that when the printed circuit board is inserted into the recess formed in the thermally conductive substrate the temperature sensor is essentially embedded in the thermally conductive substrate proximate to the LED based light source. The apparatus further comprises a plurality of components disposed on the printed circuit board and constituting a switching power supply for providing power factor correction and an operating voltage for the LED based light source the switching power supply comprising at least one integrated circuit IC controller.

As used herein for purposes of the present disclosure the term LED should be understood to include any electroluminescent diode or other type of carrier injection junction based system that is capable of generating radiation in response to an electric signal. Thus the term LED includes but is not limited to various semiconductor based structures that emit light in response to current light emitting polymers organic light emitting diodes OLEDs electroluminescent strips and the like.

In particular the term LED refers to light emitting diodes of all types including semiconductor and organic light emitting diodes that may be configured to generate radiation in one or more of the infrared spectrum ultraviolet spectrum and various portions of the visible spectrum generally including radiation wavelengths from approximately 400 nanometers to approximately 700 nanometers . Some examples of LEDs include but are not limited to various types of infrared LEDs ultraviolet LEDs red LEDs blue LEDs green LEDs yellow LEDs amber LEDs orange LEDs and white LEDs discussed further below . It also should be appreciated that LEDs may be configured and or controlled to generate radiation having various bandwidths e.g. full widths at half maximum or FWHM for a given spectrum e.g. narrow bandwidth broad bandwidth and a variety of dominant wavelengths within a given general color categorization.

The term spectrum should be understood to refer to any one or more frequencies or wavelengths of radiation produced by one or more light sources. Accordingly the term spectrum refers to frequencies or wavelengths not only in the visible range but also frequencies or wavelengths in the infrared ultraviolet and other areas of the overall electromagnetic spectrum. Also a given spectrum may have a relatively narrow bandwidth e.g. a FWHM having essentially few frequency or wavelength components or a relatively wide bandwidth several frequency or wavelength components having various relative strengths . It should also be appreciated that a given spectrum may be the result of a mixing of two or more other spectra e.g. mixing radiation respectively emitted from multiple light sources . For purposes of this disclosure the term color is used interchangeably with the term spectrum. However the term color generally is used to refer primarily to a property of radiation that is perceivable by an observer although this usage is not intended to limit the scope of this term . Accordingly the terms different colors implicitly refer to multiple spectra having different wavelength components and or bandwidths. It also should be appreciated that the term color may be used in connection with both white and non white light.

The term color temperature generally is used herein in connection with white light although this usage is not intended to limit the scope of this term. Color temperature essentially refers to a particular color content or shade e.g. reddish bluish of white light. The color temperature of a given radiation sample conventionally is characterized according to the temperature in degrees Kelvin K of a black body radiator that radiates essentially the same spectrum as the radiation sample in question. Black body radiator color temperatures generally fall within a range of from approximately 700 degrees K typically considered the first visible to the human eye to over 10 000 degrees K white light generally is perceived at color temperatures above 1500 2000 degrees K.

Lower color temperatures generally indicate white light having a more significant red component or a warmer feel while higher color temperatures generally indicate white light having a more significant blue component or a cooler feel. By way of example fire has a color temperature of approximately 1 800 degrees K a conventional incandescent bulb has a color temperature of approximately 2848 degrees K early morning daylight has a color temperature of approximately 3 000 degrees K and overcast midday skies have a color temperature of approximately 10 000 degrees K. A color image viewed under white light having a color temperature of approximately 3 000 degree K has a relatively reddish tone whereas the same color image viewed under white light having a color temperature of approximately 10 000 degrees K has a relatively bluish tone.

The term controller is used herein generally to describe various apparatus relating to the operation of one or more light sources. A controller can be implemented in numerous ways e.g. such as with dedicated hardware to perform various functions discussed herein. A processor is one example of a controller which employs one or more microprocessors that may be programmed using software e.g. microcode to perform various functions discussed herein. A controller may be implemented with or without employing a processor and also may be implemented as a combination of dedicated hardware to perform some functions and a processor e.g. one or more programmed microprocessors and associated circuitry to perform other functions. Examples of controller components that may be employed in various embodiments of the present disclosure include but are not limited to conventional microprocessors application specific integrated circuits ASICs and field programmable gate arrays FPGAs .

In various implementations a processor or controller may be associated with one or more storage media generically referred to herein as memory e.g. volatile and non volatile computer memory such as RAM PROM EPROM and 5PROM floppy disks compact disks optical disks magnetic tape etc. . In some implementations the storage media may be encoded with one or more programs that when executed on one or more processors and or controllers perform at least some of the functions discussed herein. Various storage media may be fixed within a processor or controller or may be transportable such that the one or more programs stored thereon can be loaded into a processor or controller so as to implement various aspects of the present disclosure discussed herein. The terms program or computer program are used herein in a generic sense to refer to any type of computer code e.g. software or microcode that can be employed to program one or more processors or controllers.

It should be appreciated that all combinations of the foregoing concepts and additional concepts discussed in greater detail below provided such concepts are not mutually exclusive are contemplated as being part of the inventive subject matter disclosed herein. It should also be appreciated that terminology explicitly employed herein that also may appear in any disclosure incorporated by reference should be accorded a meaning most consistent with the particular concepts disclosed herein.

As shown in the apparatus as exemplified by a luminaire employing multiple LED light sources includes a power supply and control electronics that receives an A.C. input voltage and provides an operating voltage for the LED light sources. In two different types of LED light sources are shown constituting multiple series connected loads namely one or more first LEDs for generating first radiation having a first spectrum and one or more second LEDs for generating second radiation having a second spectrum different from the first spectrum for simplicity in the one or more first LEDs are shown in a block labeled L and the one or more second LEDs are shown in a block labeled L .

In one non limiting exemplary implementation the first LED s may include one or more red LEDs for generating a first spectrum of radiation including essentially monochromatic red light and the second LED s may include one or more white LEDs e.g. a blue LED irradiating a phosphor for generating a second spectrum of radiation including relatively broadband white light. Light generated by the luminaire results from a mixture of the first radiation and the second radiation when both are present. In one specific example a relatively smaller number of red LEDs e.g. six are employed with a relatively larger number of white LEDs e.g. twenty in the luminaire to provide a particular correlated color temperature of white light e.g. approximately 2800 to 3000 Kelvin and a relatively high color rendering index e.g. CRI of approximately 85 90 .

In the first LED s and the second LED s are electrically connected in series between a first node A and a second node B. When the power supply provides the operating voltage a series current I flows between the first node and the second node.

As shown in the block diagram of the power supply and control electronics hereinafter power supply may be a multi stage switching power supply for providing both power factor correction and the operating voltage . More specifically the power supply may include a power factor correction stage for receiving the A.C. input voltage via a bridge rectifier and providing the power factor correction and the operating voltage . Due to the high power factor correction provided by the power factor correction stage the luminaire apparatus appears as an essentially resistive element to the applied input voltage .

The power supply may also include a load control stage to control a flow of the series current between the nodes A and B. In particular as illustrated in the load control stage includes a controllable current path including switch coupled to a node between the first LED s and the second LED s and connected in parallel with the second LED s so as to at least partially divert the series current around the second LED s . In one aspect the current path may be controlled such that a first current I through the first LED s and a second current I through the second LED s are different. Such control of the respective currents Iand Ithrough the first LED s and the second LED s facilitates setting and adjusting a color or color temperature of the light generated by the luminaire. In one aspect of an exemplary implementation discussed in detail below a portion of the second current that is diverted from the second LED s may be recycled and added to the first current.

While specifically illustrates the controllable current path of the load control stage in parallel with the second LED s it should be nonetheless appreciated that one or more controllable current paths may be employed in the load control stage parallel to either or both of the first LED s and the second LED s for diverting at least a portion of the series current around either or both of the first LED s and the second LED s . As also shown in the load control stage may receive from the power factor correction stage a voltage different than the operating voltage for facilitating control of the switch in the controllable current path as well as other components in the load control stage as discussed further below.

In another aspect of the embodiment shown in the apparatus luminaire may further include one or more temperature sensors TS disposed proximate to and in thermal communication with the first LED s and the second LED s . Additionally the power supply may include a controller associated with at least the load control stage for receiving a temperature signal provided by the temperature sensor s . As also shown in the controller may receive one or more external signals instead of or in addition to the temperature signal . In one aspect the controller provides a control signal to the load control stage for controlling the controllable current path i.e. controlling the switch based at least in part on the temperature signal and or the external signal . In this manner control over one or both of the first current through the first LED s and the second current through the second LED s may be a function of temperature changes over time in the vicinity of the LED sources via the temperature signal and or any number of external parameters via the external signal . As discussed in greater detail below in connection with the ability to vary one or both of the first and second currents as a function of LED temperature significantly mitigates undesirable variations in color or color temperature of light provided by the luminaire during thermal transients e.g. as the LEDs warm up over some period of time to a thermal steady state following power on of the luminaire .

In yet another aspect of the embodiment shown in the power supply may include a second controller coupled to the power factor correction stage . The controller provides a control signal to the power factor correction stage so as to control the operating voltage and or a power provided by the power factor correction stage based on any of a variety of parameters. To this end the controller may receive as inputs a first signal representing at least one voltage or current associated with the power factor correction stage a second signal representing a frequency of the A.C. input voltage or an external signal . In particular internal timing of the controller may be line driven via the second signal allowing accurate timing features through the use of a 50 Hz or 60 Hz A.C. line voltage reference .

It should be appreciated that while both a controller associated with the power factor correction stage and a controller associated with the load control stage are shown in the power supply of one or both of the controllers and constitute optional features that need not be present in various implementations of the apparatus luminaire according to the present disclosure. Additionally in some inventive embodiments a single controller may be employed to provide one or more control signals to both the power factor correction stage and the load control stage so as to implement the various functionalities discussed herein in connection with these respective stages.

More specifically the power factor correction stage employs a power factor correction controller exemplified by the ST Microelectronics L6562 controller. In some conventional applications the L6562 controller and the related ST Microelectronics L6561 controller utilize a transition mode TM technique i.e. operating around a boundary between continuous and discontinuous modes commonly employed for power factor correction in relatively low power applications. Details of the L6561 controller and the transition mode technique are discussed in ST Microelectronics Application Note AN966 L6561 Enhanced Transition Mode Power Factor Corrector by Claudio Adragna March 2003 available at http www.st.com and incorporated herein by reference. Differences between the L6561 and L6562 controllers are discussed in ST Microelectronics Application Note AN1757 Switching from the L6561 to the L6562 by Luca Salati April 2004 also available at http www.st.com and incorporated herein by reference. For purposes of the present disclosure these two controllers generally are discussed as having similar functionality.

In addition to facilitating power factor correction the ST Microelectronics L6561 and L6562 controllers may be alternatively employed in a non standard configuration as a controller in a flyback DC DC converter implementation. Details of this and related alternative applications of the L6561 L6562 controllers are discussed in ST Microelectronics Application Note AN1060 Flyback Converters with the L6561 PFC Controller by C. Adragna and G. Garravarik January 2003 ST Microelectronics Application Note AN1059 Design Equations of High Power Factor Flyback Converters based on the L6561 by Claudio Adragna September and ST Microelectronics Application Note AN1007 L6561 based Switcher Replaces Mag Amps in Silver Boxes by Claudio Adragna October 2003 each of which is available at http www.st.com and incorporated herein by reference.

Specifically Application Notes AN1059 and AN1060 discuss one exemplary configuration for an L6561 based flyback converter High PF flyback configuration that operates in transition mode and exploits the aptitude of the L6561 controller for performing power factor correction thereby providing a high power factor single switching stage DC DC converter for relatively low load power requirements e.g. up to approximately 30 Watts . The flyback converter configuration requires a voltage regulation feedback control loop which receives as an input a sample of the DC output voltage provided by the converter and provides as feedback an error signal which is applied to the INV input of the L6561 controller.

ST Microelectronics Application Note AN1792 entitled Design of Fixed Off Time Controlled PFC Pre regulators with the L6562 by Claudio Andragna November 2003 available at http www.st.com and incorporated herein by reference discloses another approach for controlling a power factor corrector pre regulator as an alternative to the transition mode method and the fixed frequency continuous conduction mode method. Specifically a fixed off time FOT control method may be employed with the L6562 controller for example in which only the on time of a pulse width modulated signal is modulated and the off time is kept constant leading to a modulation in switching frequency . Like the transition mode approach the fixed off time FOT control method conventionally contemplated using the L6562 controller similarly requires a voltage regulation feedback control loop.

As can be seen from unlike the conventional applications for the L6561 and L6562 controller discussed above the power factor correction stage does not require any feedback control loop to regulate the operating voltage thereby simplifying the circuit design as compared to conventional implementations. In particular Applicants have recognized and appreciated that for implementations involving essentially fixed stable load power requirements a voltage regulation feedback control loop is not necessary to achieve effective operation. Specifically loads involving light emitting diodes LEDs themselves are essentially voltage regulation devices in that a single LED or multiple LEDs interconnected in various series parallel or series parallel configurations dictates a particular voltage across the load. Hence the power factor correction stage may be reliably configured to provide an appropriately stable operating voltage and power to the LED load without requiring a feedback control loop.

In the circuit diagram of the power factor correction stage is based on a buck type DC DC converter configuration in which the power factor correction controller controls a switch implemented by transistor Q which in turn dictates an energy storage and release cycle for an inductor provided by one of the windings of transformer T . More specifically during the intervals in which the transistor switch is on or closed i.e. applying a voltage across the transformer winding serving as the inductor current flows through the inductor based on the applied voltage and the inductor stores energy in its magnetic field. When the switch is turned off or opened i.e. voltage is removed from the inductor the energy stored in the inductor is transferred via diode D to a filter capacitor C across which is provided the operating voltage i.e. the capacitor provides essentially continuous energy between inductor energy storage cycles .

The power factor correction stage may be configured for a variety of different input voltages operating voltages and load series current I based on an appropriate selection of various circuit components. In particular the resistor divider network formed by R and R substantially determines the series current through the load given that the type and number of series connected LEDs constituting the load essentially determines the target operating voltage. In the particular circuit example shown in the circuit is configured to accept an input voltage of 120 Volts RMS and provide an operating voltage on the order of 80 Volts with a series current on the order of 150 milliamperes. In one aspect of the circuit shown in the power factor correction controller is configured to employ the fixed off time FOT control technique to control the switch Q . The FOT control technique permits the use of a relatively smaller transformer T for the buck configuration. This allows the transformer to be operated at a more constant frequency which in turn delivers higher power to the load for a given core size.

In some exemplary implementations the A.C. input voltage may be derived from an output of an A.C. dimmer which in turn receives as an input an A.C. line voltage . In various aspects the voltage provided by the A.C. dimmer may be a voltage amplitude controlled or duty cycle phase controlled A.C. voltage for example. In one exemplary implementation by varying an RMS value of the A.C. voltage applied to the power supply via the A.C. dimmer the operating voltage and in turn the series current may be similarly varied thus the A.C. dimmer may be employed to vary an overall brightness of light generated by the luminaire.

With respect to parameters in response to which the controller may vary the control signal as shown in the controller may receive one or more inputs representing at least one voltage or current associated with the power factor correction stage e.g. pin of the IC U is coupled to receive the signal controlling the switch Q and pins and of U are coupled to a voltage associated with the resistor divider network . In this manner the controller may serve a feedback control function and provide the control signal in response to any one of a number of monitored circuit parameters associated with the power factor correction stage .

The controller also may receive a signal representing a frequency of the A.C. input voltage applied to pin of IC U via the resistor divider network formed by R R and R . In particular internal timing of the controller may be line driven via the signal allowing accurate timing features through the use of a 50 Hz or 60 Hz A.C. line voltage reference. In one exemplary application the controller may maintain a cycle count e.g. monitor zero crossings of the A.C. input voltage via the signal as a metric for time in operation of the LED light sources constituting the load. In turn the controller may adjust operating parameters of the power factor correction stage via the control signal based on the time of operation to compensate for aging effects associated with LEDs e.g. increasing the operating voltage and or the series current to compensate for lower efficiency reduced flux of aging LEDs . Alternatively or in addition to adjusting operating parameters of the power factor correction stage to compensate for aging effects the controller may use the information associated with time in operation of the LED light sources to provide some indication of lamp life remaining. For example the controller may provide a control signal that modulates the power provided to the LED load to visibly affect the generated light e.g. intentionally blink or modulate light brightness so as to provide information relating to some condition e.g. lamp age via the intentionally modulated light.

Additionally the controller may receive one or more external signals e.g. applied to pin of IC U in the example of so that control of the power factor correction stage may be based on any of a wide variety of external conditions e.g. temperature conditions ambient lighting conditions other environmental conditions overvoltage or load failure conditions emergency conditions motion etc. . In response to one or more such external signals the controller may provide a control signal that adjusts one or more operating parameters of the power factor correction stage and or may modulate the power provided to the LED load so as to provide information relating to some condition represented by the external signal s via the intentionally modulated light.

As discussed above in connection with in the first LED s and the second LED s are connected in series between the nodes A and B across which the operating voltage is provided. The controllable current path is coupled to the node between the series connected first LED s and second LED s . While only a single LED is shown for purposes of illustration in for each of the series connected LED loads as discussed above it should be appreciated that each of the LED loads and may include multiple LED light sources connected in any of a variety of series parallel or series parallel arrangements and may have different numbers of a given type of LED. In one exemplary implementation discussed herein the first LED s may include on the order of six series connected red LEDs and the second LED s may include on the order of 20 series connected white LEDs. Given a forward operating voltage for a red LED on the order of 3.3 Volts and a forward operating voltage for a white LED on the order of 3 Volts an appropriate operating voltage applied across the nodes A and B in this example would be on the order of 80 Volts i.e. 3.3 Volts 6 3 Volts 20 .

Via control of the switch and in turn the current path the load control stage of controls a flow of the series current between the nodes A and B. In particular via operation of the switch the series current may be at least partially diverted around the second LED s such that the first current I through the first LED s and the second current I through the second LED s are different specifically when the switch is on or conducting the inductor L is connected to a ground potential via resistor R thereby providing an alternate current path between the nodes A and B and allowing at least some of the series current to be diverted around the second LED s . In the circuit of a duty cycle of the switch as controlled by the IC controller and hence the difference between the first current and the second current is set by the resistor divider network constituted by R and R. In the particular example illustrated in with R at 10 K Ohms and R at 20 K Ohms and based on an operating voltage of approximately 80 Volts and a series current of approximately 150 milliamperes the first current is on the order of 180 milliamperes and the second current is on the order of 120 milliamperes. The foregoing illustrates that the portion of the series current that is diverted from the second LED s is not lost but recycled in that it is diverted to the storage element inductor L and dumped on the next half of the cycle back into the first LED s with minimal losses e.g. 30 milliamperes is deducted from the second current and added to the first current .

The first current and the second current generally determine respective amounts luminous flux of the first radiation and the second radiation generated by the first LED s and the second LED s . Accordingly by appropriate selection of the values of resistors R and R in and based on the type and number of LEDs employed for each of the first LED s and the second LED s a color or color temperature of generated light based on a mixture of the first radiation and the second radiation may be set.

Notwithstanding the foregoing Applicants have recognized and appreciated that the current to flux relationship for different types of LEDs varies differently as a function of temperature. This phenomenon may be problematic for some applications involving multiple different types of LEDs in which thermal transients are expected. For example a system initially at some ambient temperature that is then powered up for operation warms up over some thermal transient period during which current begins and continues to flow through the LEDs. Based on an illustrative implementation involving both red LEDs and white LEDs for the respective series connected loads as the system continues to warm up to some thermal steady state the flux from the red LED s changes at a different rate than the flux from the white LED s as a function of temperature causing a noticeable shift in the color temperature of generated light during the thermal transient period more specifically at constant respective values for the first and second currents as the system warms up the flux from the red LED s decreases at a rate faster than the flux from the white LED s . By way of example over an approximately twenty minute thermal transient period following initial power up the color temperature of generated light may shift e.g. increase by as much as 100 Kelvin due to a decrease in the flux from the red LED s as compared to the white LED s . For some applications this effect is undesirable especially at lower nominal color temperatures at which the human eye is more sensitive to color shifts.

In view of the foregoing another embodiment of the present invention is directed to methods and apparatus for compensating color and or color temperature shifts arising from thermal transients in a lighting apparatus that includes multiple series connected LED light sources of different types.

To this end is a circuit diagram illustrating the load control stage of the power supply shown in together with an associated controller according to another embodiment of the present invention. In one aspect of this embodiment the controller controls the load control stage in response to a temperature signal received from a temperature sensor disposed proximate to and in thermal communication with the first LED s and the second LED s so as to provide the thermal compensation functionality noted above. It should be appreciated however that this thermal compensation functionality constitutes merely one example of how the controller may be implemented to control various aspects of the load control stage and that parameters or conditions other than the temperature proximate to the LED light sources may be input to and utilized by the controller to affect control of the load control stage e.g. refer to the discussion above in connection with the external signal shown in .

As shown in in one exemplary implementation the controller includes an integrated circuit microcontroller U that receives operating power from an integrated circuit voltage regulator U. With respect to compensation for thermal transients the microcontroller U also receives as an input the temperature signal output by the temperature sensor U and provides as an output a control signal that is applied to resistor network filter of the load control stage . In one exemplary implementation the temperature sensor may be a low power linear active thermistor integrated circuit examples of which include the MCP9700 9700A and MCP9701 9701A family of integrated circuits available from Microchip Technology Inc.

In one exemplary implementation the controller may provide the control signal to the load control stage in the form of a pulse width modulated PWM control signal the duty cycle of which affects the voltages established by the resistor network filter of the load control stage . Hence by varying the duty cycle of a PWM control signal the controller may in turn vary a difference between the first current through the first LED s and the second current through the second LED s and thereby alter the respective fluxes generated by the different LED types. By controlling the duty cycle of the PWM control signal in response to the temperature signal the controller may effectively provide compensation for shifts in color or color temperature of generated light during thermal transients e.g. due to different temperature dependent current to flux relationships for different types of LEDs .

With respect to the relationship in block that specifies duty cycle as a function of temperature for the PWM control signal this relationship may be empirically determined during a calibration procedure an example of which is discussed in detail below. Such a relationship may be modeled as a linear piece wise linear or nonlinear relationship depending at least in part on the degree of compensation desired for a given application. In one exemplary model the relationship is dictated by a linear equation in which various parameters of the equation are determined empirically given by PWM Duty Cycle Ambient Temp Duty Cycle Temp Reading Ambient Temp Slope . Eq. 1 

In Eq. 1 PWM Duty Cycle refers to the duty cycle of the control signal calculated in block of the Ambient Temp Duty Cycle is the duty cycle of the control signal at which the first and second currents provide a desired target color temperature for the generated light when the LEDs and are at ambient temperature the Temp Reading is the temperature represented by the temperature signal as acquired in block of the Ambient Temp is the ambient temperature e.g. prior to power on and the Slope is the change in duty cycle per change in temperature.

In one exemplary implementation all of the values represented in Eq. 1 are converted to a binary value between 0 and 255 so that they each may be processed by the microcontroller U of the controller as an 8 bit data word . With respect to the duty cycle values a binary value of 255 represents 100 i.e. a binary value of 128 represents an approximately 50 duty cycle . With respect to the Temp Reading and Ambient Temp parameters in one example temperature in degrees Celsius is converted according to floor Temperature C. 0.01 0.414 5 255 .

In an exemplary calibration procedure to facilitate determination of the various parameters of Eq. 1 one aspect of the procedure involves varying the duty cycle of the PWM control signal over some exemplary range and measuring the first current and the second current . Table 1 below provides and example of such measurements.

Another aspect of the calibration procedure involves measuring the color temperature of generated light as a function of various first and second currents applied to the respective first and second LEDs. This process involves a sequence of instant on photometric tests in which two separate known current sources are respectively connected to the first LED s and the second LEDs for a relatively short period of time and the color temperature of generated light is measured within a few seconds of the currents being applied. The currents are then immediately turned off long enough so that the LEDs are maintained at an ambient thermal steady state before applying another pair of currents. In one exemplary implementation in which red LED s are employed as the first LED s and white LED s are employed as the second LED s it may be assumed that the red flux varies more than the white flux and hence a nominal value may be chosen for the second current while the first current is varied. Table 2 below provides one example of such a measurement process.

Based on the measurement process exemplified in Table 2 a nominal target operating color temperature may be selected for the generated light. Based on this target color temperature the corresponding first and second currents required from Table 2 are matched to similar first and second currents in Table 1 to determine the Ambient Temp Duty Cycle for Eq. 1 . For example if the target color temperature is 3000 Kelvin from Table 2 this corresponds to a first current of 150 mA and a second current of 130 mA at ambient temperature which from Table 1 in turn corresponds to a duty cycle for the PWM control signal of 62.5 . Thus the Ambient Temp Duty Cycle in this example for Eq. 1 would have a binary value of 62.5 255 159.

A final aspect of the calibration procedure to facilitate determination of the various parameters in Eq. 1 involves a determination of the Slope term. Again the Slope term represents the change in duty cycle per change in temperature required to maintain a sufficiently stable color and or color temperature of generated light during a thermal transient such as a warm up period following power on. In one example a determination of an appropriate slope term may include choosing an initial seed value for the Slope term iterating the method over an estimated thermal transient period e.g. twenty to thirty minutes making periodic measurements e.g. every thirty seconds of the color temperature of generated light and plotting these color temperature measurements vs. time. This process may be repeated using a different value for the Slope term until an appropriate value is found that results in the flattest color temperature vs. time plot.

It should be appreciated that the general outline of the foregoing calibration procedure may be applied to other types of LED sources and or other color temperature ranges of interest to effectively implement the temperature compensation functionality of the controller shown in . In particular it should be appreciated that in some instances using exactly the same hardware two identical luminaires may be configured to provide significantly different colors and or color temperatures of white light merely by selecting a different value for the Ambient Temp Duty Cycle term in Eq. 1 above. Additionally the Ambient Temp Duty Cycle term in Eq. 1 may in some implementations be a predetermined function of time e.g. to compensate for gradual aging of the LEDs and flux depreciation over time . Furthermore as noted above the particular relationship employed in block of the method shown in may be modeled as a linear relationship as in Eq. 1 above or alternatively as a piece wise linear or nonlinear relationship depending at least in part on the degree of compensation desired for a given application .

While various inventive embodiments have been described and illustrated herein those of ordinary skill in the art will readily envision a variety of other means and or structures for performing the function and or obtaining the results and or one or more of the advantages described herein and each of such variations and or modifications is deemed to be within the scope of the inventive embodiments described herein. More generally those skilled in the art will readily appreciate that all parameters dimensions materials and configurations described herein are meant to be exemplary and that the actual parameters dimensions materials and or configurations will depend upon the specific application or applications for which the inventive teachings is are used. Those skilled in the art will recognize or be able to ascertain using no more than routine experimentation many equivalents to the specific inventive embodiments described herein. It is therefore to be understood that the foregoing embodiments are presented by way of example only and that within the scope of the appended claims and equivalents thereto inventive embodiments may be practiced otherwise than as specifically described and claimed. Inventive embodiments of the present disclosure are directed to each individual feature system article material kit and or method described herein. In addition any combination of two or more such features systems articles materials kits and or methods if such features systems articles materials kits and or methods are not mutually inconsistent is included within the inventive scope of the present disclosure.

All definitions as defined and used herein should be understood to control over dictionary definitions definitions in documents incorporated by reference and or ordinary meanings of the defined terms.

The indefinite articles a and an as used herein in the specification and in the claims unless clearly indicated to the contrary should be understood to mean at least one. 

The phrase and or as used herein in the specification and in the claims should be understood to mean either or both of the elements so conjoined i.e. elements that are conjunctively present in some cases and disjunctively present in other cases. Multiple elements listed with and or should be construed in the same fashion i.e. one or more of the elements so conjoined. Other elements may optionally be present other than the elements specifically identified by the and or clause whether related or unrelated to those elements specifically identified. Thus as a non limiting example a reference to A and or B when used in conjunction with open ended language such as comprising can refer in one embodiment to A only optionally including elements other than B in another embodiment to B only optionally including elements other than A in yet another embodiment to both A and B optionally including other elements etc.

As used herein in the specification and in the claims or should be understood to have the same meaning as and or as defined above. For example when separating items in a list or or and or shall be interpreted as being inclusive i.e. the inclusion of at least one but also including more than one of a number or list of elements and optionally additional unlisted items. Only terms clearly indicated to the contrary such as only one of or exactly one of or when used in the claims consisting of will refer to the inclusion of exactly one element of a number or list of elements. In general the term or as used herein shall only be interpreted as indicating exclusive alternatives i.e. one or the other but not both when preceded by terms of exclusivity such as either one of only one of or exactly one of. Consisting essentially of when used in the claims shall have its ordinary meaning as used in the field of patent law.

As used herein in the specification and in the claims the phrase at least one in reference to a list of one or more elements should be understood to mean at least one element selected from any one or more of the elements in the list of elements but not necessarily including at least one of each and every element specifically listed within the list of elements and not excluding any combinations of elements in the list of elements. This definition also allows that elements may optionally be present other than the elements specifically identified within the list of elements to which the phrase at least one refers whether related or unrelated to those elements specifically identified. Thus as a non limiting example at least one of A and B or equivalently at least one of A or B or equivalently at least one of A and or B can refer in one embodiment to at least one optionally including more than one A with no B present and optionally including elements other than B in another embodiment to at least one optionally including more than one B with no A present and optionally including elements other than A in yet another embodiment to at least one optionally including more than one A and at least one optionally including more than one B and optionally including other elements etc.

It should also be understood that unless clearly indicated to the contrary in any methods claimed herein that include more than one step or act the order of the steps or acts of the method is not necessarily limited to the order in which the steps or acts of the method are recited.

In the claims as well as in the specification above all transitional phrases such as comprising including carrying having containing involving holding composed of and the like are to be understood to be open ended i.e. to mean including but not limited to. Only the transitional phrases consisting of and consisting essentially of shall be closed or semi closed transitional phrases respectively as set forth in the Manual of Patent Examining Procedures Section 2111.03 issued by the United States Patent Office.

