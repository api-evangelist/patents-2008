---

title: Workflow engine for execution of web mashups
abstract: A software-implemented workflow engine is described that executes a Web mashup within the context of a Web browser running on a computer. The workflow engine is configured to parse a Web mashup definition obtained from a remote server to identify distinct units of execution within the Web mashup, referred to as components. The workflow engine is further configured to obtain programming logic and metadata associated with each type of component identified in the Web mashup definition from the remote server and to use such information to generate executable versions of the identified components. Finally, the workflow engine is configured to run each of the executable components, thereby executing the Web mashup. The workflow engine is configured to manage the order of execution of each of the executable components so that the Web mashup runs in an optimized and reliable fashion.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08875098&OS=08875098&RS=08875098
owner: Microsoft Corporation
number: 08875098
owner_city: Redmond
owner_country: US
publication_date: 20081118
---
In Web development the term Web mashup is often used to describe a Web application that combines content from multiple sources to provide a new and distinct service to a user. Content used in mashups is often sourced from third party Web services via an application programming interface API or other interface. The entities involved in executing a mashup typically include 1 content providers such as third party Web service providers that make content available 2 a Web site the mashup site that facilitates access to a mashup that combines content obtained from the third party Web service providers and 3 a client Web browser that acts as a user interface to the mashup and that may actually execute the mashup using a client side Web language such as Javascript. Web mashups are also sometimes referred to as Web application hybrids.

Many Web mashups are structured such that content obtained from at least one third party Web service is provided as input to at least another third party Web service or such that content obtained from two or more third party Web services must be combined prior to further processing or presentation of results to a user. In fact numerous such content dependencies can exist within a single Web mashup. The existence of these content dependencies can make mashups extremely difficult to program and improper handling of such content dependencies during development can lead to unreliable performance at runtime. Furthermore since it is impossible to predict during development how long it will take to obtain content from any particular Web service at runtime the sequence in which Web service calls are executed by a Web mashup cannot be optimized to improve performance.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

A method is described herein for executing an application such as a Web mashup on a computer. In accordance with the method an application definition is obtained. The application definition is parsed to identify components wherein each component comprises a distinct unit of execution within the application. Programming logic and metadata associated with each type of component identified in the application definition is then obtained. Executable versions of the identified components are then generated using at least the programming logic and metadata obtained for the corresponding component type. Execution of each of the executable components is then managed.

Managing execution of each of the executable components may include executing of one or more of the executable components asynchronously. Initiating execution of one or more of the executable components asynchronously may include identifying one or more executable components that are not dependent on any other executable component for input based on information in the application definition and initiating execution of the identified executable component s .

Managing execution of each of the executable components may also include determining that a first executable component is dependent on one or more other executable components for input based on information in the application definition and initiating execution of the first executable component only after the one or more other executable components are determined to be in a completed state.

Managing execution of each of the executable components may further include initiating execution of at least one of the executable components responsive to determining that only a portion of the total input to be provided to the executable component is available.

A computer program product is also described herein. The computer program product comprises a computer readable medium having computer program logic recorded thereon for enabling a processing unit to execute an application such as a Web mashup. The computer program logic includes first means second means third means fourth means and fifth means. The first means are for enabling the processing unit to obtain an application definition. The second means are for enabling the processing unit to parse the application definition to identify components wherein each component comprises a distinct unit of execution within the application. The third means are for enabling the processing unit to obtain programming logic and metadata associated with each type of component identified in the application definition. The fourth means are for enabling the processing unit to generate executable versions of the identified components using at least the programming logic and metadata obtained for the corresponding component type. The fifth means are for enabling the processing unit to manage execution of each of the executable components.

The fifth means may include means for enabling the processing unit to initiate execution of one or more of the executable components asynchronously. Such means may comprise for example means for enabling the processing unit to identify one or more executable components that are not dependent on any other executable component for input based on information in the application definition and to initiate execution of the identified executable component s .

The fifth means may also include means for enabling the processing unit to determine that a first executable component is dependent on one or more other executable components for input based on information in the application definition and to initiate execution of the first executable component only after the one or more other executable components are determined to be in a completed state.

The fifth means may further include means for enabling the processing unit to initiate execution of at least one of the executable components responsive to determining that only a portion of the total input to be provided to the executable component is available.

A method for executing a Web mashup on a computer is also described herein. In accordance with the method a plurality of executable components is generated wherein each component comprises a distinct unit of execution within the Web mashup and wherein at least one executable component includes a request to a Web service. An order of execution of each of the plurality of executable components is then managed at runtime in accordance with identified input output dependencies between the executable components.

Further features and advantages of the invention as well as the structure and operation of various embodiments of the invention are described in detail below with reference to the accompanying drawings. It is noted that the invention is not limited to the specific embodiments described herein. Such embodiments are presented herein for illustrative purposes only. Additional embodiments will be apparent to persons skilled in the relevant art s based on the teachings contained herein.

The features and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify corresponding elements throughout. In the drawings like reference numbers generally indicate identical functionally similar and or structurally similar elements. The drawing in which an element first appears is indicated by the leftmost digit s in the corresponding reference number.

A software implemented workflow engine is described herein that executes a Web mashup within the context of a Web browser running on a client computer. The workflow engine is configured to parse a Web mashup definition obtained from a remote server to identify distinct units of execution within the Web mashup referred to herein as components. The workflow engine is further configured to obtain programming logic and metadata associated with each type of component identified in the Web mashup definition from the remote server and to use such information to generate executable versions of the identified components. Finally the workflow engine is configured to run each of the executable components thereby executing the Web mashup.

As will be described in more detail herein the workflow engine is advantageously configured to manage the order of execution of each of the executable components so that the Web mashup runs in an optimized and reliable fashion. For example the workflow engine can initiate multiple executable components asynchronously while also managing the execution sequence to ensure that content dependencies between the executable components are properly resolved. The workflow engine can also run certain executable components in an incremental fashion such that input to those executable components can be processed as soon as it becomes available.

Although embodiments of the present invention are described herein as being applicable to the execution of Web mashups persons skilled in the relevant art s will readily appreciate that the systems and methods described herein can generally be applied to the execution of any type of software based application or service that can be defined as or organized into a collection of distinct units of execution. Furthermore although embodiments of the present invention are describe as operating within the environment of a Web browser running on a client computer persons skilled in the relevant art s will readily appreciate that embodiments of the invention may operate in other environments suitably configured to execute software based applications or services.

As will be described in more detail herein an embodiment of the present invention comprises a workflow engine that executes a Web mashup within the context of a Web browser running on a client computer. However before describing this embodiment one manner in which such a Web mashup may be developed will first be described in reference to . In particular is a block diagram of an example system for developing a Web mashup that may subsequently be executed by an embodiment of the present invention. As shown in system includes a Web browser executing on a client computer and a development environment hosted within Web browser .

Web browser comprises a software application that enables a user to display content and interact with applications that are accessible via the Internet or some other network. Web browser may comprise for example any commercially available or publicly available Web browser including but not limited Internet Explorer published by Microsoft Corporation of Redmond Wash. Mozilla Firefox published by Mozilla Corporation of Mountainview Calif. or Safari published by Apple Computer of Cupertino Calif. . However these examples are not intended to be limiting. Client computer may comprise a personal computer or any other processor based system or device capable of running a Web browser.

Development environment represents programming logic that has been downloaded from a remote server by Web browser for execution within the context of Web browser . When executed development environment provides a means by which a user can create edit run and save Web mashups via Web browser . In one embodiment development environment comprises programming logic developed by Microsoft Corporation of Redmond Wash. and made accessible to users via the Microsoft Popfly Website http www.popfly.com although the invention is not so limited.

In an embodiment development environment allows a user to create a Web mashup by selectively combining distinct units of execution referred to herein as components. For example a user may combine components by interacting with graphic representations of the components e.g. icons within the context of a graphical user interface GUI provided by development environment . Interacting with the graphic representations of the components may comprise for example placing graphic representations of the components onto a design surface of the GUI and selectively connecting input and output nodes associated with the graphic representations so placed. The connection of the output node of a first component to the input node of a second component may be used to indicate that one or more values output from the first component should be provided as an input to the second component.

A component may comprise for example a call to a third party Web service as well as wrapper logic for managing the manner in which the Web service is called and for properly formatting data returned therefrom. A component may alternatively comprise data processing logic or logic for displaying mashup results to a user such as via a GUI.

Depending upon the implementation development environment may allow the user to select from among a plurality of basic component types wherein each component type is represented by a default component having certain default settings or parameters. The user may then customize the default component to generate a customized component by for example selectively altering the default settings or parameters. Altering the default settings or parameters may include for example specifying or modifying an operation to be performed by a component specifying or modifying one or more values to be input to a component wherein such values may be provided from another component or specified by the user or specifying or modifying one or more properties relating to how output is to be presented by a component. A single basic component type can thus be used to create a plurality of customized components within a mashup.

As further shown in system also includes a browser abstraction layer and base classes . Browser abstraction layer comprises programming logic that interprets function calls generated by development environment such that the function calls are received in a format that is suitable for execution by Web browser . This ensures that development environment will operate in a consistent and reliable manner across a variety of different Web browser types and also makes development easier by not requiring a developer to be concerned with Web browser specific implementation details. Base classes comprise functions that may be called by development environment to perform certain useful operations such as for example making Web requests or processing strings or arrays.

In addition to certain functions described above development environment further allows a user to save a mashup after it has been created or updated. The mashup may be saved for example to a remote server for subsequent access by the user or other users. As further shown in a saved mashup comprises a number of different elements . Elements include a mashup definition file component code files and component description files . Elements may also optionally include component resources .

Mashup definition file is a file that includes information that identifies each of the components that comprise the mashup. Mashup definition file may also include additional information associated with each identified component including for example an operation to be performed by a component one or more values to be input to a component one or more properties relating to how output is to be presented by a component and information indicating whether one or more values output from a component should be used as an input to another component. In one embodiment the information in mashup definition file is formatted in accordance with a markup language such as XML Extensible Markup Language although this is only an example.

Component code files comprise files that include actual programming logic used to execute each type of component included within the Web mashup. In one embodiment the programming logic is implemented using a scripting language such as Javascript although this example is not intended to be limiting.

Component description files comprise files that include metadata associated with each type of component included within the Web mashup. In one embodiment at least two kinds of metadata are stored within each component description file input output format metadata and descriptive metadata. Input output format metadata defines a specific set of input output formats that can be used with a particular component type. Input output format metadata may be used to ensure that data output from a first component for input to a second component is in a format that is compatible with the second component or to perform a conversion function when an incompatibility is detected. An example of incompatible input output formats includes strings and arrays. Input output format metadata may also be used for enforcing constraints e.g. ensuring a value is within a range is present when required is non zero is positive and or many others setting default values and the like.

Descriptive metadata may comprise data that is used by development environment to provide high level guidance to programming logic within development environment and or to a user about the kinds of things that a particular type of component is capable of doing. For example descriptive metadata may include a list of operations that a particular type of component can perform a brief description of code that may be used to automatically generate documentation or a set of default values that development environment will load when a particular type of component is called.

In one embodiment the information stored in each component description file is formatted in accordance with a markup language such as XML although the invention is not so limited.

Component resources comprise other resources such as images logos or the like that may optionally be associated with a particular type of component. Such resources may be used for example to graphically represent a component type in a GUI provided by development environment .

The foregoing is merely an example of one development environment that may be used to develop a Web Mashup that may be executed in accordance with embodiments to be described herein. However this example is not intended to be limiting and other development environments including more code driven development environments may be used to develop the Web mashup.

As shown in system includes a Web browser executing on a client computer and a workflow engine hosted within Web browser . Like Web browser described above in reference to Web browser comprises a software application that enables a user to display content and interact with applications that are accessible via the Internet or some other network and may comprise for example any commercially available or publicly available Web browser. Client computer may comprise a personal computer or any other processor based system or device capable of running a Web browser.

Workflow engine represents programming logic that has been downloaded from a remote server by Web browser for execution within the context of Web browser . Workflow engine may comprise for example Javascript programming logic although the invention is not so limited. When executed workflow engine operates to execute a Web mashup in a manner that will be described in more detail herein. In one embodiment workflow engine comprises programming logic developed by Microsoft Corporation of Redmond Wash. and made accessible to users via for example the Microsoft Popfly Website http www.popfly.com although the invention is not so limited.

As further shown in system also includes a browser abstraction layer and base classes . Similar to browser abstraction layer described above in reference to browser abstraction layer comprises programming logic that interprets function calls generated by workflow engine such that the function calls are received in a format that is suitable for execution by Web browser . Like base classes described above in reference to base classes comprise functions that may be called by workflow engine to perform certain useful operations such as for example making Web requests or processing strings or arrays.

To execute a Web mashup certain inputs must be provided to workflow engine . As shown in these inputs include at least a mashup definition file component code files and component description files . These files are analogous to mashup definition file component code files and component description files as described above in reference to . As will be described in more detail herein workflow engine obtains these files from a remote server as part of the process of executing the Web mashup.

The manner in which system executes a Web mashup will now be described in detail with reference to flowchart of . Although the method of flowchart will be described herein in reference to the elements of system the method is not limited to that embodiment.

As shown in the method of flowchart begins at step in which workflow engine executing within the context of Web browser obtains mashup definition file . This step may encompass passing a request for mashup definition file from workflow engine to a remote server and receiving the file back from the remote server after the request has been processed. The mashup definition file may be received and loaded as an object by the workflow engine. Although reference is made herein to a mashup definition file persons skilled in the relevant art s will appreciate that depending upon the implementation a mashup definition may be obtained by workflow engine in a form other than a file e.g. as a stream of information or in some other form .

At step workflow engine parses mashup definition file to identify unique components within the file. As noted above a component may be thought of as a distinct unit of execution within the Web mashup. In addition to identifying unique components within mashup definition file step may also include parsing mashup definition file to identify content dependencies between identified components. A content dependency exists when a first component requires as input data that is output from one or more other components. Step may further include parsing mashup definition file to identify certain parameters that will be used to generate an executable version of each component. Such parameters may include for example an operation to be performed by a component one or more values to be input to a component and one or more properties relating to how output is to be presented to a user by a component.

At step for each type of component identified in step workflow engine obtains component code and component metadata. As discussed above in an embodiment of the present invention multiple components may each be based on the same basic component type. Thus although multiple components may be identified in step a plurality of the identified components may be associated with only a single component type.

Component code is obtained by loading a component code file associated with each component type while component metadata is obtained by loading a component description file associated with each component type. Thus this step may encompass passing a request for component code files and component description files from workflow engine to a remote server and receiving the appropriate files back from the remote server after the request has been processed. Depending upon the implementation the request may comprise a single request or multiple requests. Also although reference is made herein to component code files and component description files persons skilled in the relevant art s will readily appreciate that depending upon the implementation component code and component metadata may be obtained by workflow engine in a form other than a file e.g. as a stream of information or in some other form .

At step workflow engine creates a factory for each component type. In an embodiment creating a factory for a component type comprises creating or configuring programming logic that is capable of generating one or more executable components based on a component type.

At step workflow engine uses each factory created in step to generate executable components corresponding to the components identified in step . In one embodiment generation of an executable component includes modifying and or adding programming logic to the code associated with a basic component type to account for certain parameters associated with a component identified during step as discussed above. Generation of an executable component may also include generating programming logic that formats data output from one executable component for input to another executable component in accordance with input output format metadata associated with one or both components.

During steps and workflow engine executes each of the executable components generated during step . In performing these steps workflow engine manages the order of execution of each of the executable components so that the Web mashup runs in an optimized and reliable fashion. For example workflow engine can initiate the execution of multiple executable components asynchronously while also managing the execution sequence to ensure that content dependencies between the executable components are properly resolved. Details concerning each of these steps will now be provided.

At step workflow engine executes all executable components that do not have any parents. A parent of an executable component is any other executable component that outputs content that is used as input by the executable component. If an executable component does not have any parents then it is not dependent on any other executable components for input and thus may be executed irrespective of the state of any other executable components. As discussed above content dependencies between components may be determined by workflow engine during step .

At shown at step when the execution of an executable component has completed workflow engine checks each of the children of the executable component. A child of an executable component is any other executable component that uses as input content that is output by the executable component. As shown at step if all of a child s parents are in a completed state then workflow engine executes the child. This is because all the content produced by the parents is available as input to the child. Otherwise if even one of a child s parents is not in a completed state the child remains pending in an unexecuted state.

As shown at step if the execution of an executable component has completed and the component has no children workflow engine calls an output function with the results of the executable component. The output function may be for example a function that displays the results of the executable component in a certain format to a display area provided by Web browser . This output function is not limited to direct display of the results. Such a function could also perform any action utilizing the results such as changing the channel of a television.

As shown at step once all of the executable blocks have executed and are in a completed state execution of the Web mashup by workflow engine is complete.

As noted above workflow engine is advantageously configured to manage the order of execution of each of the executable components in a Web mashup so that the Web mashup runs in an optimized and reliable fashion. To achieve optimized execution workflow engine is also configured to run certain executable components in an incremental fashion such that input to those executable components can be processed as soon as it becomes available. This aspect of workflow engine will now be further described in reference to flowchart of .

In particular depicts a flowchart of a method for incrementally executing a component within a Web mashup in accordance with an embodiment of the present invention. Although the method of flowchart will be described herein in reference to the elements of system the method is not limited to that embodiment.

As shown in the method of flowchart begins at step in which workflow engine determines that an executable component is capable of being executed incrementally. An executable component is capable of being executed incrementally if it is capable of operating on only a portion of the total input expected by the executable component to produce some corresponding output or perform some corresponding function. An executable component may be capable of being executed incrementally for example if the executable component can operate on a row of expected input data instead of an entire array of expected input data. An executable component may be capable of being executed incrementally if it includes a call to a Web service that can be called incrementally. For example an executable component that can be executed incrementally may include a call to a geocoding service that converts input locations to geographic coordinates wherein the geocoding service can be called incrementally for each location received as input as opposed to placing a single call only when all input locations have been received.

Workflow engine may determine that an executable component is capable of incremental execution based on information associated with the component in mashup definition file or based on metadata associated with a corresponding component type.

At step workflow engine receives a portion of the output data that will be produced by a parent of the executable component. It is assumed for the purposes of this example that the portion of the output data produced by the parent comprises an incremental portion of data that can be processed by the executable component. Thus with continued reference to the examples provided above the output produced by the parent may include a single row in an array of input data or a location in a set of locations to be provided as input to a geocoding service.

At step workflow engine provides the portion of output data received from the parent as input for processing by the executable component that is capable of incremental execution. The executable component can then process the input in an incremental fashion. Thus with continued reference to the examples provided above the executable component can process a single row in an array of input data or single location in a set of locations to be provided as input to a geocoding service.

By incrementally executing components that are so capable workflow engine can advantageously increase the speed of execution of a Web mashup by mitigating the effects of components that produce data for downstream consumption by other components in a slow and or intermittent fashion.

To illustrate some of the advantages of the foregoing methods depicts an example Web mashup comprising a plurality of executable components that may be executed by a workflow engine in accordance with an embodiment of the present invention. As shown in Web mashup comprises an executable component that obtains content from a Web service denoted ImageServiceA an executable component that obtains content from a Web service denoted ImageServiceB an executable component that provides content e.g. location information from executable components and to a Web service denoted GeocodingServiceC and obtains corresponding content e.g. geographic coordinates therefrom and an executable component that performs a display function denoted DisplayD based on the content obtained from executable component e.g. placing pushpins on a map based on the geographic coordinates returned from executable component .

In accordance with the foregoing methods workflow engine can initiate execution of executable components and simultaneously since neither component is dependent on another component for input. Furthermore assuming that executable component is capable of incremental execution workflow engine can incrementally and individually pipeline output from executable components and through executable component irrespective of the progress of either executable component or . Any output produced by executable component can immediately be processed for display by executable component .

As shown in computer system includes a processing unit a system memory and a bus that couples various system components including system memory to processing unit . Bus represents one or more of any of several types of bus structures including a memory bus or memory controller a peripheral bus an accelerated graphics port and a processor or local bus using any of a variety of bus architectures. System memory includes read only memory ROM and random access memory RAM . A basic input output system BIOS is stored in ROM .

Computer system also has one or more of the following drives a hard disk drive for reading from and writing to a hard disk a magnetic disk drive for reading from or writing to a removable magnetic disk and an optical disk drive for reading from or writing to a removable optical disk such as a CD ROM DVD ROM or other optical media. Hard disk drive magnetic disk drive and optical disk drive are connected to bus by a hard disk drive interface a magnetic disk drive interface and an optical drive interface respectively. The drives and their associated computer readable media provide nonvolatile storage of computer readable instructions data structures program modules and other data for the server computer. Although a hard disk a removable magnetic disk and a removable optical disk are described other types of computer readable media can be used to store data such as flash memory cards digital video disks random access memories RAMs read only memories ROM and the like.

A number of program modules may be stored on the hard disk magnetic disk optical disk ROM or RAM. These programs include an operating system one or more application programs other program modules and program data . Application programs or program modules may include for example any of the various software implemented elements depicted in . Application programs or program modules may also include for example logic for implementing one or more of the steps of the flowcharts depicted in . Thus each step illustrated in those figures may also be thought of as program logic configured to perform the function described by that step.

A user may enter commands and information into computer through input devices such as keyboard and pointing device . Other input devices not shown may include a microphone joystick game pad satellite dish scanner or the like. These and other input devices are often connected to the processing unit through a serial port interface that is coupled to bus but may be connected by other interfaces such as a parallel port game port or a universal serial bus USB .

A monitor or other type of display device is also connected to bus via an interface such as a video adapter . Monitor is used to present a GUI that assists a user operator in configuring and controlling computer . In addition to the monitor computer may include other peripheral output devices not shown such as speakers and printers.

Computer is connected to a network e.g. a WAN such as the Internet or a LAN through a network interface a modem or other means for establishing communications over the network. Modem which may be internal or external is connected to bus via serial port interface .

As used herein the terms computer program medium and computer readable medium are used to generally refer to media such as the hard disk associated with hard disk drive removable magnetic disk removable optical disk as well as other media such as flash memory cards digital video disks random access memories RAMs read only memories ROM and the like.

As noted above computer programs including application programs and other program modules may be stored on the hard disk magnetic disk optical disk ROM or RAM. Such computer programs may also be received via network interface or serial port interface . Such computer programs when executed enable computer to implement features of the present invention discussed herein. Accordingly such computer programs represent controllers of computer .

The invention is also directed to computer program products comprising software stored on any computer useable medium. Such software when executed in one or more data processing devices causes a data processing device s to operate as described herein. Embodiments of the present invention employ any computer useable or computer readable medium known now or in the future. Examples of computer readable mediums include but are not limited to storage devices such as RAM hard drives floppy disks CD ROMs DVD ROMs zip disks tapes magnetic storage devices optical storage devices MEMs nanotechnology based storage devices and the like.

While various embodiments of the present invention have been described above it should be understood that they have been presented by way of example only and not limitation. It will be understood by those skilled in the relevant art s that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined in the appended claims. Accordingly the breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

