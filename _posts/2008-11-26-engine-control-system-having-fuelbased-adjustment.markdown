---

title: Engine control system having fuel-based adjustment
abstract: A control system for an engine having a cylinder is disclosed having an engine valve configured to affect a fluid flow of the cylinder, an actuator configured to move the engine valve, and an in-cylinder sensor configured to generate a signal indicative of a characteristic of fuel entering the cylinder. The control system also has a controller in communication with the actuator and the sensor. The controller is configured to determine the characteristic of the fuel based on the signal and selectively regulate the actuator to adjust a timing of the engine valve based on the characteristic of the fuel.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07905206&OS=07905206&RS=07905206
owner: Caterpillar Inc
number: 07905206
owner_city: Peoria
owner_country: US
publication_date: 20081126
---
This invention was made with Government support under Contract No. DE FC02 01CH11079 awarded by the Department of Energy. The Government may have certain rights in this invention.

The present disclosure is directed to an engine control system and more particularly to an engine control system having fuel based adjustment.

Combustion engines are often used for power generation applications. These engines can be gaseous fuel driven and implement lean burn during which air fuel ratios are higher than in conventional engines. For example these gas engines can admit about 75 more air than is theoretically needed for stoichiometric combustion. Lean burn engines increase fuel efficiency because they utilize homogeneous mixing to burn less fuel than a conventional engine and produce the same power output.

One shortcoming of heavy duty natural gas engines is that they may not be able to operate using a wide range of fuel variants such as for example fuels having a wide range of varying methane numbers. Engine parameters such as for example compression ratio may limit the range of fuel that heavy duty natural gas engines may use thereby limiting the applications for which a given engine may be used.

A natural gas engine system is described in European patent application publication EP 0 945 606 A2 the 606 publication by Kawamura. The 606 publication discloses an engine system having a turbocharger and valve controllers for varying a timing of intake valves of an engine cylinder to vary an effective compression ratio. The 606 publication also discloses temperature sensors for sensing a temperature of the intake air and combustion chamber walls. A controller unit controls the valve controllers based on input from the temperature sensors.

Although the engine system of the 606 publication may vary intake valve timing based on a sensed temperature it fails to adjust engine operation based on fuel composition. Therefore the engine system of the 606 publication may fail to increase the range of fuel variants that can be used in the engine.

The present disclosure is directed to overcoming one or more of the shortcomings set forth above and or other deficiencies in existing technology.

In accordance with one aspect the present disclosure is directed toward a control system for an engine having a cylinder. The control system includes an engine valve configured to affect a fluid flow of the cylinder an actuator configured to move the engine valve and an in cylinder sensor configured to generate a signal indicative of a characteristic of fuel entering the cylinder. The control system also includes a controller in communication with the actuator and the sensor. The controller is configured to determine the characteristic of the fuel based on the signal and selectively regulate the actuator to adjust a timing of the engine valve based on the characteristic of the fuel.

According to another aspect the present disclosure is directed toward a method of operating an engine. The method includes directing a premixed air fuel mixture into a cylinder of the engine and sensing a parameter indicative of a characteristic of a fuel within the premixed air fuel mixture as the premixed air fuel mixture enters the cylinder. The method also includes selectively adjusting engine valve timing of the engine based on the characteristic.

Prime mover may include an engine system as illustrated in . Engine system may include an engine a variable valve actuation system an intake system an exhaust system and a control system . Intake system may deliver air and or fuel to engine while exhaust system may direct combustion gases from engine to the atmosphere. Variable valve actuation system may vary a valve timing of engine to affect fluid flow of engine . Control system may control an operation of variable valve actuation system intake system and or exhaust system .

Engine may be a four stroke diesel gasoline or gaseous fuel powered engine. As such engine may include an engine block at least partially defining a plurality of cylinders only one shown in . In the illustrated embodiment of engine is shown to include six cylinders . However it is contemplated that engine may include a greater or lesser number of cylinders and that cylinders may be disposed in an in line configuration a V configuration or in any other suitable configuration.

A piston may be slidably disposed within each cylinder so as to reciprocate between a top dead center TDC position and a bottom dead center BDC position during an intake stroke a compression stroke a combustion or power stroke and an exhaust stroke. Returning to pistons may be operatively connected to a crankshaft via a plurality of connecting rods . Crankshaft may be rotatably disposed within engine block and connecting rods may connect each piston to crankshaft so that a reciprocating motion of each piston results in a rotation of crankshaft . Similarly a rotation of crankshaft may result in a sliding motion of each piston between the TDC and BDC positions. As shown in the lower portion of the graph of piston may move through the intake stroke from the TDC position crank angle of about 0 degrees to the BDC position crank angle of about 180 degrees to draw air and or fuel into the respective cylinder . Piston may then return to the TDC position crank angle of about 360 degrees thereby compressing the air fuel mixture during the compression stroke. The compressed air fuel mixture may ignite causing piston to move back to the BDC position crank angle of about 540 degrees during the power stroke. Piston may then return to the TDC position crank angle of about 720 degrees to push exhaust gas from cylinder during the exhaust stroke.

One or more cylinder heads may be connected to engine block to form a plurality of combustion chambers . As shown in cylinder head may include a plurality of intake passages and exhaust passages integrally formed therein. One or more intake valves may be associated with each cylinder and movable to selectively inhibit flow between intake passages and combustion chambers . One or more exhaust valves may also be associated with each cylinder and movable to selectively inhibit flow between combustion chambers and exhaust passages . Additional engine components may be disposed in cylinder head such as for example a plurality of sparkplugs that ignite an air fuel mixture in combustion chambers .

Combustion pressures may vary between different cylinders and between different combustion cycles of a single cylinder during engine operation. Combustion pressures may vary between cylinders for example because of an uneven distribution of the air fuel mixture delivered to the plurality of cylinders via intake valve . Combustion pressures may vary between combustion cycles of the same cylinder for example because varying amounts of the delivered air fuel mixture may be combusted in a given combustion cycle thereby leaving some of the air fuel mixture behind within cylinder . This residual air fuel mixture may affect the combustion pressure of a subsequent combustion cycle. For example variation between combustion cycles may occur because of strong or weak combustion events.

A strong combustion event may occur within a given cylinder when substantially all of the air fuel mixture trapped within cylinder is fully combusted resulting in a combustion pressure that may be higher than an average peak cylinder pressure. But because substantially all of the air fuel mixture within that cylinder may be combusted during the strong combustion event the combustion cycle immediately following the strong combustion event may be relatively weak within the same cylinder . That is because there may be less residual air fuel mixture than in a typical combustion cycle the cylinder pressure within that cylinder during the subsequent combustion cycle may have a pressure lower than the average peak cylinder pressure varying significantly from the high combustion pressure of the previous cycle.

A weak combustion event may have an opposite effect but also cause a significant pressure variation between combustion cycles. Specifically during a weak combustion event there may be significant pockets of the air fuel mixture within cylinder that do not combust resulting in a combustion pressure that may be lower than an average peak cylinder pressure. Because there may be a significant amount of residual air fuel mixture within cylinder from the previous cycle when additional air fuel mixture is normally admitted for the subsequent cycle there may be much more of the air fuel mixture trapped within cylinder than desired. As a result the combustion pressure during the subsequent combustion cycle may be higher than the average peak cylinder pressure resulting in a significant pressure variation between combustion cycles.

Detonation i.e. knock is an abnormal form of combustion that may be caused by cycle to cycle pressure variations. Detonation may cause components of engine to fail such as for example a head gasket. Detonation may occur when excessive pressure within cylinder e.g. during a combustion cycle following a weak combustion event causes the air fuel mixture to autoignite. Autoignition may result in multiple pockets of simultaneous combustion within combustion chamber instead of singular combustion. The multiple pockets of combustion can collide with each other with significant force causing a rapid rise in cylinder pressure and a metallic pinging i.e. knocking . The detonation forces may subject engine components to overloading and continued detonation may reduce a service life of engine .

Engine may include a plurality of valve actuation assemblies that affect movement of intake valves and or exhaust valves to help minimize engine knock. Each cylinder may have an associated valve actuation assembly . Referring back to each valve actuation assembly may include a rocker arm connected to move a pair of intake and or exhaust valves via a bridge . Rocker arm may be mounted to cylinder head at a pivot point and connected to a rotating camshaft by way of a push rod . Camshaft may be operatively driven by crankshaft and may include a plurality of cams that engage and move push rods .

As pistons move through the four stokes of the combustion cycle i.e. intake compression power and exhaust crankshaft may cyclically drive each valve actuation assembly to move intake valves and or exhaust valves . As shown in valve actuation assembly may cause intake valves to open during the intake stroke of piston . Actuation of intake valves may generally follow profile shown in the upper portion of the graph of . Intake valve may open during the intake stroke for example at a crank angle of about 690 to about 0 and may close at a crank angle of about 210 . Intake valves may displace from a closed position to a maximum open position during which the air fuel mixture may be admitted into combustion chamber .

A pressure profile of cylinder may substantially match a desired profile during typical combustion events as shown in the lower portion of the graph of . During a typical combustion event a pressure within cylinder may reach a peak at a crank angle of between about 360 to about 375 i.e. at the end of the compression and beginning of the power strokes . Also during the compression stroke of a typical combustion event a rate of the pressure rise within cylinder i.e. a rise rate of the pressure may substantially match the slope of desired profile i.e. when a strong or weak combustion event does not occur . Desired profile illustrates a desired combustion state free from significant detonation where there is singular combustion of a desired magnitude.

An undesired profile shown in illustrates a combustion state in which multiple pockets of combustion occur and or the pressure rise rate is greater than desired and detonation is likely. The peak cylinder pressure during detonation may be reached earlier than TDC i.e. during the compression stroke which is undesirable for maximum efficiency and have a peak higher than desired. Another undesired profile shown in illustrates a combustion state in which weak combustion occurs. Weak combustion may occur when a pressure rise rate within cylinder is less than a desired pressure rise rate i.e. less than that of profile and or a peak thereof is lower than desired. Profiles and are illustrative only and may vary based on engine operation such as for example based on valve timing.

Varying a closing of intake valve may change the pressure profile within cylinder i.e. a rise rate and or a magnitude of the pressure . As shown by a family of curves in a closing of intake valve may be selectively varied during the intake and or the compression strokes by any appropriate amount. When intake valve is closed within the family of curves intake valve may be selectively advanced and or retarded. When intake valve is advanced within the family of curves i.e. the closing is adjusted to be further away from profile less air fuel mixture may be trapped within cylinder resulting in a decrease in pressure rise rate and or pressure magnitude within cylinder . When intake valve is retarded within the family of curves i.e. the closing is adjusted toward profile more air fuel mixture may be trapped within cylinder resulting in an increase in pressure rise rate and or pressure magnitude within cylinder . Intake valve may also be selectively varied during the intake and or the compression strokes by any appropriate amount within a family of curves shown in . When intake valve is closed within the family of curves the closing may be selectively advanced and or retarded. When intake valve is retarded within the family of curves i.e. the closing moves further away from profile less air fuel mixture may be trapped within cylinder resulting in a decrease in pressure rise rate and or pressure magnitude within cylinder . When intake valve is advanced within the family of curves i.e. the closing moves toward profile more air fuel mixture may be trapped within cylinder resulting in an increase in pressure rise rate and or pressure magnitude within cylinder . Intake valve may be varied by an amount that substantially correlates to a comparison of an actual or anticipated pressure profile with the desired profile . Intake valve may be varied by a greater or lesser amount as required to regulate the fluid flow to cylinder and thereby bring the combustion profile within cylinder toward the desired profile .

For example when profile is detected within cylinder the closing of intake valve may be advanced within the family of curves or retarded within the family of curves to decrease the magnitude and pressure rise rate within cylinder toward desired profile . The closing of intake valve may thereby be adjusted away from a profile of intake valve having a timing that has not been varied i.e. away from unadjusted profile when the pressure within cylinder is higher than a desired pressure. In contrast when profile is detected within cylinder the closing of intake valve may be retarded within the family of curves or advanced within the family of curves to increase the magnitude and pressure rise rate within cylinder toward desired profile . The closing of intake valve may thereby be adjusted toward a profile of intake valve having a timing that has not been varied i.e. toward unadjusted profile when the pressure within cylinder is lower than a desired pressure.

The timing of intake valve may be adjusted based on detonation detection a strong combustion detection and or a weak combustion detection i.e. based on a measured rise rate a number of combustion pressure peaks a magnitude of the peak and or an angular location of the peak . As shown in profile of detonation caused by autoignition may cause a slope of the pressure rise rate in cylinder to increase sharply and the peak cylinder pressure may be reached before TDC of the compression stroke. Similarly detonation caused by multiple combustion pockets may be observed as a plurality of sharp rises and or drops in the pressure rise rate. In profile the pressure rise rate may sharply increase and or decrease in an irregular pattern. The closing of intake valve may be adjusted to reduce the likelihood and or magnitude of detonation and to create a balance between strong and weak combustion events. The timing of intake valve may also be adjusted based on a detection of fuel quality. A low fuel quality i.e. a fuel having a low methane number may be more prone to detonation i.e. profile requiring valve timing to be adjusted. A high quality fuel such as for example a detonation resistant pipeline gas may also require valve timing to be adjusted. It is also contemplated that the timing of intake valve may be adjusted based on other parameters such as for example ambient air conditions including humidity and altitude.

It is contemplated that an opening of exhaust valve may also or alternatively be advanced or retarded by variable valve actuation device . As illustrated in an opening of exhaust valve may be selectively advanced or additionally opened during portions of the compression and or power strokes. Because more air fuel mixture may escape from cylinder during the compression and or power strokes when the opening of exhaust valve is advanced or during an additional opening the amount of trapped mass within cylinder may decrease thereby decreasing a combustion pressure or a rise rate and or the angular location of peaks within cylinder may shift. The opening of exhaust valve may also be selectively retarded during portions of the compression and or power strokes. Because less air fuel mixture may escape from cylinder when the opening of exhaust valve is retarded the amount of trapped mass within cylinder may increase thereby increasing a combustion pressure a rise rate and or shifting the angular location of peaks within cylinder .

Variable valve actuation system may include a plurality of variable valve actuation devices configured to adjust timings of intake valves and or exhaust valves to reduce effects of detonation strong combustion events and or weak combustion events. As shown in variable valve actuation device may be attached to and or enclosed by a valve housing of engine . Each cylinder may have an associated variable valve actuation device . Variable valve actuation device may selectively adjust an opening timing closing timing and or lift magnitude of intake valves and or exhaust valves . Variable valve actuation device may be any suitable device for varying a valve timing such as for example a hydraulic pneumatic or mechanical device.

In one example variable valve actuation device may be operatively connected to rocker arm intake valve and or exhaust valve to selectively disconnect a movement of intake and or exhaust valves from a movement of rocker arm . For example variable valve actuation device may be selectively operated to supply hydraulic fluid for example at a low or a high pressure in a manner to resist closing of intake and or exhaust valves . That is after valve actuation assembly is no longer holding intake valve and or exhaust valve open the hydraulic fluid in variable valve actuation device may hold intake valve and or exhaust valve open for a desired period. Similarly the hydraulic fluid may be used to advance a closing of intake valve and or exhaust valve so that intake valve and or exhaust valve closes earlier than the timing affected by valve actuation assembly . Alternatively intake and or exhaust valves may be moved solely by variable valve actuation device without the use of cams and or rocker arms if desired.

Variable valve actuation device may selectively advance or retard a closing of intake and or exhaust valves during the different strokes of engine . Intake valve may be closed early for example at a crank angle of between about 180 and about 210 . Control system may also control variable valve actuation device to retard a closing of intake valve . Intake valve may be closed for example at a crank angle of between about 210 and about 300 . Exhaust valve may be varied to open at a crank angle of between about 510 and about 570 and may be varied to close at a crank angle of between about 700 and about 60 . Exhaust valve may also be opened at a crank angle of about 330 and closed at a crank angle of about 390 . Control system may control each variable valve actuation device to vary the valve timing of each cylinder independently of the valve timing of any other cylinder . Control system may thereby independently control a throttling of each cylinder solely by varying a timing of intake valves and or exhaust valves .

Referring back to intake system may direct air and or fuel into combustion chambers and may include a single fuel injector a compressor and an intake manifold . Compressor may compress and deliver an air fuel mixture from fuel injector to intake manifold .

Compressor may draw ambient air into intake system via a conduit compress the air and deliver the compressed air to intake manifold via a conduit . This delivery of compressed air may help to overcome a natural limitation of combustion engines by eliminating an area of low pressure within cylinders created by a downward stroke of pistons . Therefore compressor may increase the volumetric efficiency within cylinders allowing more air fuel mixture to be burned resulting in a larger power output from engine . It is contemplated that a cooler for further increasing the density of the air fuel mixture may be associated with compressor if desired.

Fuel injector may inject fuel at a low pressure into conduit upstream of compressor to form an air fuel mixture. Fuel injector may be selectively controlled by control system to inject an amount of fuel into intake system to substantially achieve a desired air to fuel ratio of the air fuel mixture. Variable valve actuation device may vary a timing of intake valves and or exhaust valves to control an amount of air fuel mixture that is delivered to cylinders .

Exhaust system may direct exhaust gases from engine to the atmosphere. Exhaust system may include a turbine connected to exhaust passages of cylinder head via a conduit . Exhaust gas flowing through turbine may cause turbine to rotate. Turbine may then transfer this mechanical energy to drive compressor where compressor and turbine form a turbocharger . In one embodiment turbine may include a variable geometry arrangement such as for example variable position vanes or a movable nozzle ring. Variable geometry arrangement may be adjusted to affect the pressure of air fuel mixture delivered by compressor to intake manifold . Turbine may be connected to an exhaust outlet via a conduit . It is also contemplated that turbocharger may be replaced by any other suitable forced induction system known in the art such as for example a supercharger if desired.

Control system may include a controller configured to control the function of the various components of engine system in response to input from one or more sensors . Sensors may be configured to monitor an engine parameter indicative of a pressure within cylinders i.e. robustness pressure and or temperature of a combustion event . Each sensor may be disposed within an associated cylinder i.e. in fluid contact with a respective one of combustion chambers and may be electrically connected to controller . Sensor may be any suitable sensing device for sensing an in cylinder pressure such as for example a piezoelectric crystal sensor or a piezoresistive pressure sensor. Sensors may measure a pressure within cylinders during for example the compression stroke and or the power stroke and may generate a corresponding signal. Sensors may transfer signals that are indicative of the pressures within cylinders to controller .

Based on the signals controller may determine a combustion profile for each cylinder . The combustion profile may be a measurement of how the combustion pressure within cylinder changes during a combustion cycle and from cycle to cycle. The combustion profile may be a continuous indication of combustion pressure within each cylinder and may be used to predict for example whether strong weak or normal combustion will occur in a subsequent combustion event. Controller may monitor the signals over time to determine a pressure rise rate within cylinder a number of pressure peaks during a single cycle a magnitude of the peaks and or an angular location of the peaks. Controller may then relate this information to the amount of the air fuel mixture in cylinder at any given time to thereby determine a combustion pressure profile of cylinder .

Controller may then compare the pressure profiles of each cylinder to a desired profile. In one example the desired profile may be a profile that is predetermined such that balancing between cylinders may be achieved. That is the profile of one cylinder may be compared with the profile of other cylinders of engine . In another example the desired profile may be a fixed base profile that may correspond to a given engine rating. In one embodiment the desired profiles may be stored within a map of controller . Based on a comparison of the monitored profile with the desired profile controller may make adjustments to the timings of valves .

For example controller may compare the pressure rise rate of one cylinder to profiles . If the monitored pressure rise rate substantially matches that of profile then controller may determine that cylinder has a desired combustion profile. If the pressure rise rate substantially matches that of profile then controller may determine that cylinder has a combustion profile with a rapid pressure rise rate and or multiple combustion pockets indicating the possibility of detonation.

Controller may also utilize the signal input from sensors to determine an amount of air fuel mixture remaining in cylinders . For example controller may determine based on the monitored combustion profile that a strong or weak combustion event has occurred in a given cylinder during a given combustion cycle. A combustion profile indicating strong combustion may be a profile having a higher average pressure peak pressure or rise rate than that of profile i.e. profile . A strong combustion cycle may indicate to controller that there is less residual air fuel mixture remaining in cylinder than desired. A combustion profile indicating weak combustion i.e. profile may have an average pressure peak pressure or pressure rise rate that is substantially lower than that of profile . A weak combustion cycle may indicate to controller that there is more residual air fuel mixture remaining in cylinder than desired.

Controller may also relate the signal from sensors to a characteristic of a fuel such as fuel type and or fuel quality. Controller may input the signal from sensors as data into an algorithm that determines fuel type and or fuel quality as a function of cylinder pressure. Using the algorithm controller may determine fuel attributes such as methane number. Methane number is indicative of a detonation resistance of a fuel and is thereby indicative of fuel type and or fuel quality. Engine may be configured to operate using a desired fuel composition having a desired fuel type and or quality and a corresponding desired methane number that results in desired combustion i.e. profile . Controller may relate the signal from sensors to the desired cylinder pressure i.e. profile associated with the desired fuel type and or fuel quality. It is also contemplated as an alternative to the pressure measurement of step that the fuel type and or quality may be provided to controller as a preprogrammed value or as an input provided by an operator.

Based on the determined fuel type and or quality controller may make an appropriate adjustment to engine . Specifically controller may control variable valve actuation device to selectively advance and or retard intake and or exhaust valves of cylinders . For example controller may advance a closing of intake valves and or retard an opening of exhaust valves when the fuel quality is higher than the desired fuel quality. Controller may retard a closing of intake valves and or advance an opening of exhaust valves when the fuel quality is lower than the desired fuel quality. Controller may selectively advance and or retard intake valves during for example an intake stroke and or selectively advance or retard exhaust valve during the compression and or power strokes. Controller may selectively advance and or retard intake and or exhaust valves based on for example sensor input measured during a stroke of a subsequent engine cycle or sensor input measured during the same stroke as the advancing and or retarding.

Controller may be any type of programmable logic controller known in the art for automating machine processes such as a switch a process logic controller or a digital circuit. Controller may serve to control the various components of engine system . Controller may be electrically connected to the plurality of variable valve actuation devices via a plurality of electrical lines . Controller may also be electrically connected to the plurality of sensors via a plurality of electrical lines . Controller may be electrically connected to variable geometry arrangement via an electrical line . It is also contemplated that controller may be electrically connected to additional components and sensors of engine system such as for example an actuator of fuel injector if desired.

Controller may include input arrangements that allow it to monitor signals from the various components of engine system such as sensors . Controller may rely upon digital or analog processing of input received from components of engine system such as for example sensors and an operator interface. Controller may utilize the input to create output for controlling engine system . Controller may include output arrangements that allow it to send output commands to the various components of engine system such as variable valve actuation devices variable geometry arrangement fuel injector and or an operator interface.

Controller may have stored in memory one or more engine maps and or algorithms. Controller may include one or more maps stored within an internal memory and may reference these maps to determine a required change in engine operation a modification of an engine parameter required to affect the required change in engine operation and or a capacity of engine for the modification. Each of these maps may include a collection of data in the form of tables graphs and or equations.

Controller may have stored in memory algorithms associated with determining required changes in engine operation based on engine parameters such as for example combustion pressure. For example controller may include an algorithm that performs a statistical analysis of the combustion pressures within the plurality of cylinders from combustion cycle to combustion cycle. Based on input received from sensors the algorithm determines an average cylinder pressure per combustion cycle. The algorithm may then determine the statistical deviation of the combustion pressure of each cylinder from the average combustion pressure. Using the statistical deviation the algorithm may identify which cylinder pressures are required to be increased or decreased to reduce the variation in pressure. The algorithm may perform a similar statistical analysis of pressure variation between combustion cycles i.e. as a function of time to identify which cylinders have combustion pressures that should be increased or decreased in subsequent combustion cycles.

The disclosed engine control system may be used in any machine having a combustion engine where consistent operation thereof is a requirement. For example the engine control system may be particularly applicable to gaseous fuel driven engines utilized in electrical power generation applications. Operation of genset will now be described.

Engine may combust fuel of a desired fuel quality having a desired methane number which may result in normal combustion i.e. profile in the lower portion of . During normal combustion events pistons may move through the four strokes of the combustion cycle. The movement of pistons drives the actuation of intake valves and exhaust valves via valve actuation assembly . Profile shown in the lower portion of may occur during normal combustion within cylinder .

Engine may also combust fuel having a quality that is higher than the desired fuel quality i.e. fuel having a methane number that is higher than the desired methane number . When the fuel quality is higher than the desired fuel quality the closing of intake valve may be retarded within the family of curves or advanced within the family of curves to increase an amount of trapped mass within cylinder i.e. adjusted toward unadjusted profile of intake valve having a timing that has not been varied . Controller may simultaneously control variable geometry arrangement to increase an orifice size of turbine . The increased orifice size reduces a speed of rotation of turbine which decreases a pressure of the charge air i.e. the amount of boost provided by compressor to intake manifold . Controller may thereby control intake valve and turbocharger to substantially maintain an effective compression ratio of cylinder when fuel quality is higher than the desired fuel quality.

Engine may also combust fuel having a quality that is lower than the desired fuel quality i.e. having a methane number that is lower than the desired methane number . When the fuel quality is lower than the desired fuel quality the closing of intake valve may be advanced within the family of curves or retarded within the family of curves to decrease an amount of trapped mass within cylinder i.e. adjusted away from unadjusted profile of intake valve having a timing that has not been varied . Controller may simultaneously control variable geometry arrangement to decrease an orifice size of turbine . The decreased orifice size increases a speed of rotation of turbine which increases a pressure of the charge air i.e. the amount of boost provided by compressor to intake manifold . Controller may thereby control intake valve and turbocharger to lower an effective compression ratio of cylinder when fuel quality is lower than the desired fuel quality.

Engine system may adjust the operation of engine based on fuel composition. Controller may control a closing of intake valve and an operation of turbocharger to adjust the effective compression ratio of cylinders . Engine system may thereby increase the range of varying compositions of fuel that can be used in engine allowing engine to be readily adaptable to various applications requiring fuel compositions of varying quality.

It will be apparent to those skilled in the art that various modifications and variations can be made to the disclosed method and apparatus. Other embodiments will be apparent to those skilled in the art from consideration of the specification and practice of the disclosed method and apparatus. It is intended that the specification and examples be considered as exemplary only with a true scope being indicated by the following claims and their equivalents.

