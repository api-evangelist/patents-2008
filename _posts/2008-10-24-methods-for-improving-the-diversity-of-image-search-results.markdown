---

title: Methods for improving the diversity of image search results
abstract: Techniques are described to increase the diversity or focus of image search results. A user submits an original query to search for images. A server generates a first results set by executing the original query using metadata associated with each image. The server selects, from the first results set, a specified number of results ranked highest and generates a list of terms from the metadata of each of the results selected. The terms may be only the tags of the results. The server generates an updated query using terms in the list that may be weighted based on the frequency of the term in the list or include only a specified number of the highest occurring terms in the list. The server generates a second results set by executing the updated query using metadata associated with each image. The second results set is then stored and displayed to the user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08171043&OS=08171043&RS=08171043
owner: Yahoo! Inc.
number: 08171043
owner_city: Sunnyvale
owner_country: US
publication_date: 20081024
---
The approaches described in this section are approaches that could be pursued but not necessarily approaches that have been previously conceived or pursued. Therefore unless otherwise indicated it should not be assumed that any of the approaches described in this section qualify as prior art merely by virtue of their inclusion in this section.

Search engines help a user to locate information. Using a search engine a user may enter one or more search query terms and obtain a list of resources that contain or are associated with subject matter that matches those search query terms. To find the most relevant files search engines typically attempt to select from among a plurality of files files that include many or all of the words that a user entered into a search request. This works well when the files searched contain a large quantity of text where relevance and context may be determined. Images however present problems because often the only way to determine the content and context of an image is through small snippets of text associated with the image.

As photo sharing services on the Internet have become more popular obtaining more effective search results of those images has become increasingly important. Photo sharing services allow users to upload and share digital images with family friends and the general public.

Users may be given the opportunity to provide annotations to each particular photo uploaded. These annotations which may also be referred to as user generated content may define a title description and a set of tags for the photo. The set of tags might contain keywords to indicate the subject matter of the image. The photo annotations provided are essential to making the photos retrievable by text based retrieval models and allow users to formulate keyword based queries against the photo collection.

Due to the rich nature of the image content and the limited expressiveness of keyword based query formulation it is often difficult for a user to precisely formulate his information request. One reason for this difficulty is that there is often little data associated with images. For example an image might have data that is annotated by a user about the image. This might include the title a description and tags regarding the image. However many more images lack even this rudimentary data. The data may also be noisy meaning that the data is not relevant to the subject of the image. For example a user might bulk upload hundreds of photos at the same time and annotate all of the photos with the same tag without regard to content.

In addition users often employ words in a query that may present ambiguities. Examples of word ambiguities are shown in . For example a user might enter the query word apple. In response the search engine might return image A and B. Image A shows apple as a fruit. Image B displays apple as a computer company logo. Unfortunately based upon only the query word it is not possible to determine whether the user s intent is to find results relating to the fruit or the company logo. This type of ambiguity is referred to herein as word sense ambiguity. In word sense ambiguity the dominant topic that the word may relate to is the primary sense and a secondary topic of the word is a secondary sense. For the query apple the primary sense might be corporate logo and the secondary sense might be fruit. 

In another example a user might enter the query word jaguar. In response the search engine might return image A and image B. Image A shows jaguar as an animal. Image B displays jaguar as an image of a car from the automotive manufacturer Jaguar. The intent of the user also may not be determined based upon the query word jaguar without determining more detailed context.

Different ambiguities may occur as well. A determination might be made that the user intended to find images for apple that are related to the computer company. Under this circumstance the images sought may refer to any one of the computer company s products logos or events. In this case the ambiguity is referred to as type specific ambiguity.

Due to the rich nature of the image content and the limited expressiveness of keyword based query formulation it is often difficult for a user to precisely formulate his information need. In the absence of disambiguating information the user should be presented with a diverse set of images that embodies many possible interpretations of the user s query. When presented with results reflecting multiple senses of the query the likelihood that the user s intention will be represented are greatly increased. While traditional information retrieval models focus on finding the most relevant document without consideration for diversity effective image search requires results that are both diverse and relevant. Thus methods that provide image search results that are both relevant and diverse are highly desirable.

Techniques are described to return image search results that are both diverse and relevant or on the contrary highly focused and relevant. In the following description for the purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the present invention. It will be apparent however that the present invention may be practiced without these specific details. In other instances well known structures and devices are shown in block diagram form in order to avoid unnecessarily obscuring the present invention.

Different methods may be employed to improve the diversity of image search. The goal is a method that does not harm precision for unambiguous queries while respecting the topical diversity of ambiguous queries. Methods may integrate the diversity of the search results directly into the retrieval strategy or be post processes. Examples of post processing are query expansion and results re ranking. In query expansion a user s original query is expanded to include additional words such as synonyms or different morphological forms of a word so that the search query matches additional documents. In results re ranking results are re ranked to enrich topic coverage in retrieval results.

Different types of language modeling for retrieval may also be employed. Examples of language modeling are query likelihood and relevance models. Query likelihood estimates the probability that a document was generated from the same distribution as the query. As used herein a document is metadata associated with an image. Relevance models estimate a model of the query from the distribution of relevant documents in the collection. A collection is the corpus of documents from which results are obtained. Relevance models effectively add terms to the query that are related to the relevant documents. For a query that is topically unambiguous the effect is to encourage relevant documents to be ranked higher. For topically ambiguous queries terms related to multiple senses of the query are included in the query model and therefore the resulting documents are more topically diverse.

Methods that return image search results that are both diverse and relevant are described herein. These methods are integrated directly into the retrieval strategy. A user initiates an image search request by submitting a query to a server that performs the search. The query comprises one or more keywords and may or may not contain ambiguous terms. The server generates a first results set by executing the original query relative to metadata associated with each image in an image corpus. In another embodiment the original query is executed relative to only tags associated with each image in the image corpus. The server selects from the first results set a specified number of results that are ranked the highest. The server generates a list of terms that are derived from the metadata from each of the selected results. In an embodiment the terms are limited to only tags from each of the selected results. The server then generates an updated query using terms from the generated list. In an embodiment all terms in the list are included in the updated query and each term in the updated query is weighted based upon the frequency of the occurrence of the term in the list. In another embodiment the updated query is restricted to a specified number of terms. The terms are ranked based upon the frequency of the term in the list. The terms placed in the updated query are the specified number of highest ranked terms. Based upon the updated query a search is performed relative to the metadata of the images to generate a second results set. The second results set is stored on a computer readable storage medium and then at least a subset of the second results set may be displayed to the user.

When a user wishes to search for an image he may enter one or more keywords with the intent to find images that are related to or embody concepts represented by the one or more keywords. The query is often not written in natural language such as in the form of a question. On occasion one or more of the keywords in the query may present ambiguities. Examples of words with word sense ambiguities are apple jaguar and shark. Apple may refer to an image of the computer company logo or a fruit. For jaguar the user might be searching for an image of the automobile or an animal. For sharks the user might be searching for an image of a type of fish or the logo of an NHL hockey team. It is simply not possible to determine the user s intent without further inquiry. Generating a diverse results set solves this quandary by presenting results that correspond to various different intents.

Once the query request is received from the user a server executes the search query request based upon metadata of the images. As used herein metadata is data that describes another set of data. Metadata may refer to user generated content such as title description and tags. A title is a descriptive heading or caption for the image and is usually about three terms long. A description is a short statement that describes the image. The description is often written in natural language. Tags are keywords that may indicate or refer to any aspect of the image.

Tags associated with an image resemble a query in character in that a tag set contains content terms not written in the sentence structure of a natural language. Tags are succinct and users often tag photos with sets of synonyms and related terms. A user may add tags to an image upon uploading to a photo sharing website. Other users may also add tags to particular images. For example a user browsing a photo sharing website might particularly enjoy an image and wish to tag the image with a unique keyword so that he and others can later find the image using the keyword. Tags are not limited to synonyms or related terms but may also refer to the genre or any aspect of the image. For example an image of an old barn might elicit such wide ranging tags as 

 barn old rural autumn the season the image was taken nikon the type of the camera used blackandwhite indicating a black white image and texas the site of the barn .

Tags may be added and rated by other users as well to provide better context. For example an image might have a set of seven tags but one tag might simply be the name of the camera like nikon. Under this circumstance a user browsing the image might feel that nikon does not reflect the content or subject matter of the image. Tags with higher ratings would be given greater importance than tags with lower ratings. Additionally a tag that has been associated with a particular image by many different users may be given greater weight relative to the particular image than that given to a tag that has been associated with that image by only a few users.

Metadata may also include data that is automatically generated. For example in the context of images metadata might include the date the image was taken and details of the camera settings lens focal length aperture . Data about the data file of the image may also be stored. Such data may include but is not limited to the size of the file the type of file and the date the file was created or modified.

The query may be executed based upon different combinations of the metadata. In an embodiment the query is executed based upon all metadata of images including tags . In another embodiment the query is executed based only on tags associated with images. In other embodiments the query is executed based on only user generated metadata rather than automatically generated metadata .

The server s execution of the query returns a first results set of images that are ranked based upon the relevance of the results to the query. In an embodiment the server selects from the first results set a specified number of results that are ranked the highest. The specified number of results may be determined in numerous ways. In an embodiment the specified number is a fixed number. The fixed number may be provided by an administrator and adjusted at any time. The number of results may be adjusted based upon results of previous searches. In another embodiment the specified number may be based upon the total number of results in the first results set. For example the specified number might vary based upon the number of results returned for a query. If up to 250 results are received then 30 results may be selected. If 250 to 500 results are received then 60 results may be selected. If more than 500 results are received then 100 results may be selected. Under these circumstances if a search yields 200 results in a result set then the top 30 results would be selected.

In another embodiment the specified number may also be determined based upon a percentage of the results in the first results set. The percentage may vary and may be specified by an administrator. For example the administrator might determine that the top 10 of results from the search result set should be selected. Based upon these circumstances if a search query yields a results set with 300 results then the top 30 results would be selected. In yet another embodiment the specified number is determined by the relevance score of a result. A relevance score is based on a calculation of how important the result is to the query. If a relevance score is determined to be above a particular threshold then the result is selected. The selection process may vary based upon the implementation and may include hybrids of methods. For example for up to 250 results in the first results set 30 results may be selected but for greater than 250 results in the first results set a percentage of the results may be selected. In an embodiment the number of results selected is less than the number of results in the first results set. In another embodiment the number of results selected is equal to the number of results in the first results set.

In an embodiment the server generates a list of terms that are derived from the metadata from each of the selected results and only the selected results . Metadata for images may vary and include both user generated content and content that is automatically generated. The server may request the metadata for each of the selected results. Once the metadata is collected each term in the metadata is placed in a list. In an embodiment all of the data in the metadata is used to generate the list of terms. In another embodiment only a subset of the metadata is used the generate the list of terms. In yet another embodiment the list is generated using only tags from each of the selected results. In another embodiment only user generated content in metadata is used to generate the list of terms.

The list contains many terms and many of the terms in the list may be duplicated. To show the frequency of duplicate terms in the list a histogram may be used. As used herein a histogram is a graphical display of tabulated frequencies for each term in the list. The contents of the list is then used to generate a updated query.

An updated query is then generated from the contents of the list. By including these additional terms in the updated query and executing the updated query the server derives a more diverse result set than the first results set which was based upon only the original query. In an embodiment all terms that comprise the list are used in the updated query. When all terms are included the terms within the updated query are weighted. The terms may be weighted based upon the frequency of a particular term in the list. For example the list might have a total of ten terms with four terms in the stated frequencies for the original query beetle insect 5 times car 3 times band 1 time comic 1 time . Each term is weighted by dividing the frequency of the term in the list by the total number of terms in the list. Thus for the term insect the weighting is calculated as 5 10 0.5. Under these circumstances the updated query would appear insect 0.5 car 0.3 band 0.1 comic 0.1 . Terms that appear more frequently in the list are given a greater weighting and more importance and influence in the query. In the case where only tags are used to generate the list then ratings of the tags and or the number of users that submitted those tags may also be taken into account when calculating weightings.

In an embodiment the updated query may be generated by taking a specified number of the most frequently occurring terms from the list. In an embodiment the number may be specified by an administrator and is a set number regardless of the number of unique terms in the list. In another embodiment the specified number is determined by a percentage of the number of unique terms in the list.

In an embodiment the updated query may be generated by taking terms from the list that occur at a frequency ratio that is above a threshold ratio. A frequency ratio is determined for each term in the list. Frequency ratio of a particular term is calculated by dividing the number of occurrences of the particular term by the total number of terms in the list. For example if the term apple appeared 50 times in the list and there were a total of 300 terms where each duplicate term is counted separately in the list then the frequency ration of apple would be 20 300 0.167. An administrator might specify that a threshold of a frequency ratio of 0.15 must be satisfied for a term to be included in the updated query. Thus each term with a frequency ratio equal to or greater than 0.15 would be included in the updated query.

When the updated query is generated the original query terms may or may not be present in the updated query. In an embodiment the original query keywords are included in the updated query. For example in such an embodiment if a user enters the original search query apple then apple would also always appear in the updated query generated. The original query keyword may be assigned a specified weighting to be used in the updated query. This weighting may be greater than the weighting of any other term in the updated query or may be a weighting lower than the weighting of any other term in the updated query. In another embodiment all original query keywords are excluded from the updated query. In yet another embodiment original query terms only appear in the updated query if the original query term appears sufficiently frequent in the list.

The server generates a second results set by executing the updated query. The results set produced by executing the updated query is ranked by relevance. In an embodiment the updated query is executed relative to all of the metadata of the images in the image corpus which may include images not in the first results set . In another embodiment the updated query is executed relative to only the tags of images in the image corpus. In yet another embodiment the updated query is executed relative only to metadata that is user generated for the images in the image corpus.

The second results set may be stored on volatile or non volatile computer readable storage medium. At least a portion of the second results set comprising a relevance ranked set of images with related metadata may then be displayed to the user as the results of the original query since the first results set is never shown to the user.

Using the retrieval methods detailed above the unit of retrieval to which the queries are executed may be varied to achieve a desired result in image search. The desired result may be increased diversity of the image search results set or more precision of the image result set. Particular results may provide a more diverse image search result based upon the unit of retrieval and other particular results may provide a more focused image search result if a different unit of retrieval is used. The unit of retrieval may also vary dual index approach where the original query uses a particular unit of retrieval and the updated query uses a different particular unit of retrieval. In an embodiment results are generated where the unit of retrieval is restricted to the tags of the metadata of the images in the image corpus. In an embodiment this may be used with any type of language model employed. For example the original query and updated query might be executed relative to the only the tags of the metadata of images. The contents of the list may also be restricted to only tags of the metadata.

In an embodiment a dual index system is employed. In a dual index system the original query is executed relative to only tags in the metadata of the images in the image corpus and the updated query is executed relative to all metadata of the images in the image corpus. In another embodiment of the dual index system the original query is executed relative to all metadata of the images in the image corpus and the updated query is executed relative to only tags of the metadata of the images in the image corpus. The contents of the list may be restricted to only tags of the metadata or encompass all metadata of the images.

Computer system may be coupled via bus to a display such as a cathode ray tube CRT for displaying information to a computer user. An input device including alphanumeric and other keys is coupled to bus for communicating information and command selections to processor . Another type of user input device is cursor control such as a mouse a trackball or cursor direction keys for communicating direction information and command selections to processor and for controlling cursor movement on display . This input device typically has two degrees of freedom in two axes a first axis e.g. x and a second axis e.g. y that allows the device to specify positions in a plane.

The invention is related to the use of computer system for implementing the techniques described herein. According to one embodiment of the invention those techniques are performed by computer system in response to processor executing one or more sequences of one or more instructions contained in main memory . Such instructions may be read into main memory from another machine readable medium such as storage device . Execution of the sequences of instructions contained in main memory causes processor to perform the process steps described herein. In alternative embodiments hard wired circuitry may be used in place of or in combination with software instructions to implement the invention. Thus embodiments of the invention are not limited to any specific combination of hardware circuitry and software.

The term machine readable medium as used herein refers to any medium that participates in providing data that causes a machine to operation in a specific fashion. In an embodiment implemented using computer system various machine readable media are involved for example in providing instructions to processor for execution. Such a medium may take many forms including but not limited to storage media and transmission media. Storage media includes both non volatile media and volatile media. Non volatile media includes for example optical or magnetic disks such as storage device . Volatile media includes dynamic memory such as main memory . Transmission media includes coaxial cables copper wire and fiber optics including the wires that comprise bus . Transmission media can also take the form of acoustic or light waves such as those generated during radio wave and infra red data communications. All such media must be tangible to enable the instructions carried by the media to be detected by a physical mechanism that reads the instructions into a machine.

Common forms of machine readable media include for example a floppy disk a flexible disk hard disk magnetic tape or any other magnetic medium a CD ROM any other optical medium punchcards papertape any other physical medium with patterns of holes a RAM a PROM and EPROM a FLASH EPROM any other memory chip or cartridge a carrier wave as described hereinafter or any other medium from which a computer can read.

Various forms of machine readable media may be involved in carrying one or more sequences of one or more instructions to processor for execution. For example the instructions may initially be carried on a magnetic disk of a remote computer. The remote computer can load the instructions into its dynamic memory and send the instructions over a telephone line using a modem. A modem local to computer system can receive the data on the telephone line and use an infra red transmitter to convert the data to an infra red signal. An infra red detector can receive the data carried in the infra red signal and appropriate circuitry can place the data on bus . Bus carries the data to main memory from which processor retrieves and executes the instructions. The instructions received by main memory may optionally be stored on storage device either before or after execution by processor .

Computer system also includes a communication interface coupled to bus . Communication interface provides a two way data communication coupling to a network link that is connected to a local network . For example communication interface may be an integrated services digital network ISDN card or a modem to provide a data communication connection to a corresponding type of telephone line. As another example communication interface may be a local area network LAN card to provide a data communication connection to a compatible LAN. Wireless links may also be implemented. In any such implementation communication interface sends and receives electrical electromagnetic or optical signals that carry digital data streams representing various types of information.

Network link typically provides data communication through one or more networks to other data devices. For example network link may provide a connection through local network to a host computer or to data equipment operated by an Internet Service Provider ISP . ISP in turn provides data communication services through the world wide packet data communication network now commonly referred to as the Internet . Local network and Internet both use electrical electromagnetic or optical signals that carry digital data streams. The signals through the various networks and the signals on network link and through communication interface which carry the digital data to and from computer system are exemplary forms of carrier waves transporting the information.

Computer system can send messages and receive data including program code through the network s network link and communication interface . In the Internet example a server might transmit a requested code for an application program through Internet ISP local network and communication interface .

The received code may be executed by processor as it is received and or stored in storage device or other non volatile storage for later execution. In this manner computer system may obtain application code in the form of a carrier wave. In the foregoing specification embodiments of the invention have been described with reference to numerous specific details that may vary from implementation to implementation. Thus the sole and exclusive indicator of what is the invention and is intended by the applicants to be the invention is the set of claims that issue from this application in the specific form in which such claims issue including any subsequent correction. Any definitions expressly set forth herein for terms contained in such claims shall govern the meaning of such terms as used in the claims. Hence no limitation element property feature advantage or attribute that is not expressly recited in a claim should limit the scope of such claim in any way. The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense.

