---

title: Accessing a network
abstract: An information handling system (IHS) includes a hypervisor and a plurality of virtual machines (VMs). The hypervisor includes hypervisor network information. Each of the VMs includes a virtual processor and a virtual memory that is coupled to the virtual processor. The virtual memory includes VM network information and computer readable instructions to synchronize the VM network information with the hypervisor network information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08261264&OS=08261264&RS=08261264
owner: Dell Products L.P.
number: 08261264
owner_city: Round Rock
owner_country: US
publication_date: 20080219
---
The present disclosure relates generally to information handling systems and more particularly to virtual machines accessing networks.

As the value and use of information continues to increase individuals and businesses seek additional ways to process and store information. One option is an information handling system IHS . An IHS generally processes compiles stores and or communicates information or data for business personal or other purposes. Because technology and information handling needs and requirements may vary between different applications IHSs may also vary regarding what information is handled how the information is handled how much information is processed stored or communicated and how quickly and efficiently the information may be processed stored or communicated. The variations in IHSs allow for IHSs to be general or configured for a specific user or specific use such as financial transaction processing airline reservations enterprise data storage or global communications. In addition IHSs may include a variety of hardware and software components that may be configured to process store and communicate information and may include one or more computer systems data storage systems and networking systems.

Some IHSs include virtual machines VMs connected to networks. In such an IHS the VMs may be connected to a single network yet each VM may be required to discover information about the network in order to use the network. This may cause wasted time and resources while each VM individually performs the discovery process.

Additionally in many environments VMs may be migrated between IHSs based upon power conservation performance load balancing and resource utilization needs. A consequence of such VM migrations is that they require the operating system OS of each VM to relearn network information associated with the new IHS environment before using the network. Until the network information is relearned each of the VMs cannot access the network and likewise any network services provided by the VMs cannot be utilized by remote client applications.

Accordingly it would be desirable to improve access to a network which avoids the problems set forth above.

According to one embodiment an information handling system IHS is provided. The IHS includes a hypervisor and a plurality of virtual machines VMs . The hypervisor includes hypervisor network information. Each of the VMs includes a virtual processor and a virtual memory that is coupled to the virtual processor. The virtual memory includes VM network information and computer readable instructions to synchronize the VM network information with the hypervisor network information.

For purposes of this disclosure an IHS may include any instrumentality or aggregate of instrumentalities operable to compute classify process transmit receive retrieve originate switch store display manifest detect record reproduce handle or utilize any form of information intelligence or data for business scientific control entertainment or other purposes. For example an IHS may be a personal computer a PDA a consumer electronic device a network server or storage device a switch router or other network communication device or any other suitable device and may vary in size shape performance functionality and price. The IHS may include memory one or more processing resources such as a central processing unit CPU or hardware or software control logic. Additional components of the IHS may include one or more storage devices one or more communications ports for communicating with external devices as well as various input and output I O devices such as a keyboard a mouse and a video display. The IHS may also include one or more buses operable to transmit communications between the various hardware components. In an embodiment an IHS may further include a hypervisor and a plurality of virtual machines VMs . A hypervisor may include software that provides virtual hardware e.g. virtual processors virtual memory to the plurality of virtual machines. Each of the plurality of virtual machines may be able to run an operating system OS concurrently.

Referring now to an embodiment of a system for accessing an IPv6 network is illustrated. The system includes an IHS coupled to a network . The network is a Transport Control Protocol Internet Protocol TCP IP network wherein the Internet Protocol version 6 IPv6 network layer protocol is supported. The IHS includes a network interface for communicating through the network . The IHS also includes additional hardware not shown such as for example processors memory and storage devices. Software of the IHS includes a hypervisor and a VM . The hypervisor includes a variety of network information relating to the network including a neighbor cache a prefix cache a router cache and a destination cache . Similarly the VM includes a variety of network information relating to the network including a neighbor cache a prefix cache a router cache and a destination cache . As described in further detail below the neighbor cache the prefix cache the router cache and the destination cache of the VM may be synchronized with the neighbor cache the prefix cache the router cache and the destination cache respectively of the hypervisor . The system further includes an IHS coupled to a network . The IHS functions in a manner similar to IHS and includes a network interface coupled to the network and a hypervisor . The hypervisor includes a neighbor cache a prefix cache a router cache and a destination cache . In an embodiment the VM may be migrated from the IHS to the IHS in order to use hardware of the IHS . The migration may be performed for example by a system administrator. After such a migration the neighbor cache the prefix cache the router cache and the destination cache of the VM may be synchronized with the neighbor cache the prefix cache the router cache and the destination cache respectively of the hypervisor as described in further detail below.

The network information may be used by one or more layers of a TCP IP stack e.g. a TCP IP stack included in software and virtual hardware of the VM to communicate through a network. A neighbor cache includes information about neighboring hosts on the local network such as for example link layer addresses IPv6 addresses router flags i.e. whether the neighboring host is a router and a reachability state i.e. whether the neighboring host is presently reachable . A prefix cache includes an address prefix of the local network and address prefixes of other accessible networks. A router cache includes information about a default router and any other routers on the local network. A destination cache includes information about routes to hosts i.e. non neighboring hosts and or neighboring hosts .

Referring now to an embodiment of a method to access an IPv6 network is illustrated. The method begins at block where the hypervisor discovers network information about the network . The network information is stored in caches such as the neighbor cache the prefix cache the router cache and the destination cache described above. The hypervisor may use various techniques and or protocols to discover the IPv6 network information such as for example neighbor discovery address autoconfiguration receiving network information from VMs of the IHS and or monitoring network packets that are sent to and from VMs of the IHS .

The method then proceeds to block where the hypervisor stores the network information. The network information may be stored in a storage area e.g. memory hard drive which may be private to the hypervisor or shared with one or more VMs of the IHS . In an embodiment the hypervisor may include a TCP IP stack which may use the network information in order to communicate through the network .

The method then proceeds to block where the VM begins a boot process. The boot process of the VM may be initiated by the hypervisor for example and may include initialization of virtual hardware and booting of an OS in the VM . In an alternative embodiment the VM may begin the boot process prior to the hypervisor discovering the network information.

The method then proceeds to block where the VM synchronizes its network information e.g. the neighbor cache the prefix cache the router cache and the destination cache with the IPv6 network information discovered by the hypervisor . The synchronizing of the network information may include the VM retrieving some or all of the network information from the hypervisor and creating or updating the neighbor cache the prefix cache the router cache and the destination cache accordingly. The retrieval of the network information from the hypervisor may be performed by using an interface e.g. an application programming interface API message passing or shared memory. In an embodiment the VM may synchronize the network information during initialization of a TCP IP stack and or an OS of the VM . In an embodiment the VM may periodically synchronize the network information with the hypervisor after the boot process of the VM has completed. In an embodiment the synchronization may occur in both directions so that for example the hypervisor may update the neighbor cache the prefix cache the router cache and the destination cache with network information retrieved from the VM and or vice versa. In an embodiment the hypervisor may support network information synchronization with a plurality of concurrently running VMs. The plurality of VMs may be running a variety of different OSs and may be connected to a variety of different networks. In an embodiment the synchronization may further include updating a link layer resolution table and or a routing table of the OS of the VM .

The method then proceeds to block where the VM uses the network information from the hypervisor to communicate through the network . For example the VM may use the neighbor cache to communicate with a neighbor host on a local network or may use the router cache and or the destination cache to communicate with a remote host on a remote network. In an embodiment any of the neighbor cache the prefix cache the router cache and the destination cache may be used by OS routing code and or various layers of the TCP IP stack of the VM such as link layer software e.g. a network device driver .

The method then proceeds to decision block where it is determined whether the VM should be migrated to the IHS . This determination may be made for example by a system administrator who desires that the VM be run on the hardware of the IHS instead of the hardware of the IHS . This may be made possible by the hypervisors and being flexible enough to allow VMs to be modularly moved from one system to another. If at decision block it is determined that the VM should not be migrated to the IHS the method ends at block .

If at decision block it is determined that the VM should be migrated to the IHS the method then proceeds to block where the VM is migrated to the IHS . The migration may be performed for example by the system administrator.

The method then proceeds to block where the hypervisor discovers network information about the network . The discovering may be performed in a fashion similar to as described above with reference to the hypervisor in block . The network information discovered by the hypervisor may include the neighbor cache the prefix cache the router cache and the destination cache . In an alternative embodiment the hypervisor may discover the network information prior to the VM being migrated to the IHS .

The method then proceeds to block where the hypervisor stores the network information. The storing may be performed similar to as described above with reference to the hypervisor in block .

The method then proceeds to block where the VM synchronizes its network information e.g. the neighbor cache the prefix cache the router cache and the destination cache with the IPv6 network information discovered by the hypervisor . The synchronization may be performed in a fashion similar to as described above with reference to block .

The method then proceeds to block where the VM uses the network information from the hypervisor to communicate through the network . The network information may be used in a fashion similar to as described above with reference to block . The method then ends at block .

It should be understood that the present invention is not limited to hypervisors and virtual machines. For example in an embodiment a server IHS may collect the network information and client IHSs may then synchronize network information in the client IHSs with the network information in the server IHS. Further it should be understood that network information is not strictly limited to neighbor caches prefix caches router caches and destination caches. One of skill in the art will recognize that a variety of types of network information may be used in accordance with the present invention. Additionally it should be understood that the present invention is not limited to IPv6 networks. One of skill in the art will recognize that a variety of other network protocols may be used.

Thus embodiments are provided for enabling a VM to access a network. A hypervisor discovers and stores network information about the network. The VM synchronizes network information of the VM with the network information of the hypervisor.

Although illustrative embodiments have been shown and described a wide range of modification change and substitution is contemplated in the foregoing disclosure and in some instances some features of the embodiments may employed without a corresponding use of other features. Accordingly it is appropriate that the appended claims be construed broadly and in a manner consistent with the scope of the embodiment discussed herein.

