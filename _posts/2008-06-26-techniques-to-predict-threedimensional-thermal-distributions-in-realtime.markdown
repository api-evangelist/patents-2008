---

title: Techniques to predict three-dimensional thermal distributions in real-time
abstract: Techniques for monitoring and predicting environmental operating conditions in a data center are provided. In one aspect, a method for real-time, three-dimensional analysis of environmental operating conditions in a data center includes the following steps. High spatial resolution three-dimensional measurements of one or more environmental variables in the data center made at a time tare obtained. Real-time measurements of the environmental variables in the data center made at a time t, wherein tis later in time than t, are obtained. The high spatial resolution three-dimensional measurements are combined with the real-time measurements to derive a model for the environmental variables in the data center at the time t. The model is used to predict three-dimensional distributions of the environmental variables in the data center at the time t. A base model can be created and used to derive the model for the data center at the time t.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08849630&OS=08849630&RS=08849630
owner: International Business Machines Corporation
number: 08849630
owner_city: Armonk
owner_country: US
publication_date: 20080626
---
This application is related to the commonly owned U.S. application Ser. No. 12 146 852 entitled Techniques for Thermal Modeling of Data Centers to Improve Energy Efficiency filed herewith on the same day of Jun. 26 2008 the contents of which are incorporated by reference herein.

The present invention relates to data centers and more particularly to techniques for monitoring and predicting environmental operating conditions in a data center.

The continuing rise of energy consumption of computing hardware systems installed in data centers combined with the cooling infrastructure required to provide operable conditions for this hardware has emerged as a key limitation for future growth in the field of information technology IT . As a result undesirable tradeoffs commonly must be made between energy cooling requirements space limitations and cost constraints on the one hand and increased IT performance on the other.

A key parameter used to assess environmental conditions in a data center is ambient temperature distribution. Ideally the ambient temperature would be continuously monitored throughout the entire data center. However due to the complex physical composition of a data center current monitoring and or complete computational fluid dynamics CFD modeling techniques can only either provide a one time snapshot of the entire data center or continuous measurements in a few locations. Making continuous measurements or continuous modeling of an entire data center using conventional techniques is impractical if at all possible from both an efficiency and cost standpoint.

Therefore techniques are needed to continuously monitor temperature conditions throughout an entire data center.

The present invention provides techniques for monitoring and predicting environmental operating conditions in a data center. In one aspect of the invention a method for real time three dimensional analysis of environmental operating conditions in a data center is provided. The method comprises the following steps. High spatial resolution three dimensional measurements of one or more environmental variables in the data center made at a time tare obtained. Real time measurements of the environmental variables in the data center made at a time t wherein tis later in time than t are obtained. The high spatial resolution three dimensional measurements are combined with the real time measurements to derive a model for the environmental variables in the data center at the time t. The model is used to predict three dimensional distributions of the environmental variables in the data center at the time t. The high spatial resolution three dimensional measurements can be used to create a base model and the base model can be combined with the real time measurements to derive the model for the environmental variables in the data center at the time t.

In another aspect of the invention a system for real time three dimensional analysis of environmental operating conditions in a data center is provided. The system comprises a mobile off line surveying system having a plurality of mobile off line sensors configured to make high spatial resolution three dimensional measurements of one or more environmental variables in the data center a real time sensing system having a plurality of real time sensors placed throughout the data center configured to make real time measurements of the environmental variables in the data center a first functional module configured to take the high spatial resolution three dimensional measurements from the mobile off line surveying system and derive a base model at a time tfor the environmental variables in the data center a second functional module configured to combine the base model with real time measurements from the real time sensing system at a given time tto derive a data center model for the environmental variables in the data center at the time t wherein tis later in time than t a third functional module configured to monitor and compare data output from the data center model and the real time sensing system and a fourth functional module configured to derive a set of update parameters for the data center model.

A more complete understanding of the present invention as well as further features and advantages of the present invention will be obtained by reference to the following detailed description and drawings.

Presented herein are techniques for continuously monitoring environmental operating conditions such as ambient temperature thermal distributions humidity air flow pressures and power distributions current consumption throughout an entire data center i.e. with high spatial resolution. Thus the present teachings provide a benefit over conventional data center monitoring techniques. As highlighted above the conventional techniques can provide only either a spatially dense one time snap shot measurement e.g. performed using a mobile off line surveying system MOSS such as mobile measurement technology MMT V1.0 as described in U.S. Pat. No. 7 366 632 issued to Hamann et al. entitled Method and Apparatus for Three Dimensional Measurements hereinafter U.S. Pat. No. 7 366 632 the contents of which are incorporated by reference herein or one time computational fluid dynamics CFD modeling results or spatially sparse continuous real time measurements e.g. by means of a real time sensing system RTSS as offered by SynapSense of Folsom Calif. .

When considering each one of these independent approaches however some opposing features and disadvantages become apparent. For example with the MOSS methodology a snap shot measurement of three dimensional thermal conditions in a data center can be acquired within a few hours with high spatial resolution. Similarly with a conventional data center CFD model it can easily take several hours to obtain a result with acceptable accuracy.

In contrast with a RTSS it is possible to monitor a data center environment continuously high time resolution but at significantly reduced spatial resolution which could only be improved by deploying a much larger number of real time sensor nodes at a much elevated cost.

In IT equipment racks use front to back cooling and are located on raised floor with sub floor beneath. Namely according to this scheme cooled air is drawn in through a front of each rack and warm air is exhausted out from a rear of each rack. The cooled air drawn into the front of the rack is supplied to air inlets of each IT equipment component servers for example therein. Space between raised floor and sub floor defines the sub floor plenum . The sub floor plenum serves as a conduit to transport e.g. cooled air from the ACUs to the racks. In a properly organized data center such as data center the IT equipment racks are arranged in a hot aisle cold aisle configuration i.e. having air inlets and exhaust outlets in alternating directions. Namely cooled air is blown through perforated floor tiles in raised floor from the sub floor plenum into the cold aisles. The cooled air is then drawn into IT equipment racks via the air inlets on an air inlet side of the racks and dumped via the exhaust outlets on an exhaust outlet side of the racks and into the hot aisles.

The ACUs typically receive chilled water from a refrigeration chiller plant not shown . The ACUs refrigeration chiller plant and various other related components and structures directed to cooling the data center make up a cooling infrastructure for the data center. Each ACU typically comprises a blower motor to circulate air through the ACU and to blow cooled air e.g. into the sub floor plenum. As such in most data centers the ACUs are simple heat exchangers consuming power needed to blow the cooled air into the sub floor plenum.

Typically one or more power distribution units PDUs not shown are present that distribute power to IT equipment racks . As will be described in detail below power consumption by the PDUs can be an important consideration in the present techniques. In general since the PDUs supply electrical power required by the IT equipment in a data center a total electrical power intake of the PDUs represents an important parameter in determining the energy efficiency of a data center.

Data center comprises one or more real time sensors not shown which are part of an RTSS. The placement of the real time sensors throughout the data center will be described in detail below. With the present techniques for example combined MOSS and RTSS technologies are employed to accurately model and analyze three dimensional thermal and heat distributions in a data center in real time.

The present techniques can be used to extend the corresponding capabilities of MMT V1.0. MMT V1.0 is a technology for optimizing data center infrastructures for improved energy and space efficiency which involves a combination of advanced metrology techniques for rapid measuring surveying data centers see for example U.S. Pat. No. 7 366 632 and physics based modeling techniques for optimizing a data center facility within a given thermal envelope for optimum space and most efficient energy utilization see for example U.S. application Ser. No. 11 750 325 filed by Claassen et al. entitled Techniques for Analyzing Data Center Energy Utilization Practices hereinafter Claassen the contents of which are incorporated by reference herein .

The static MMT measurements see for example U.S. Pat. No. 7 366 632 can provide essential data to build a base model of the respective data center see step described below . According to one exemplary embodiment the static MMT measurements comprise three dimensional thermal measurements as well as air flow measurements at various levels of the IT equipment racks e.g. IT equipment racks of data center . Additionally to determine total power consumption of a data center power measurements of the PDUs are desirable as well as a complete survey of operational parameters of the ACUs. The operational parameters of the ACUs can include but are not limited to inlet and outlet air flows of the ACUs and or air temperature differentials between the inlets and outlets of the ACUs. For example based on the three dimensional thermal air flow measurements and the operational parameters of the ACUs an estimate of total thermal energy produced in a data center can be inferred and compared with direct power usage measurements i.e. based on the fact that a total electrical energy consumed within the confines of a data center equates with the total thermal energy produced in that data center . In some cases a combination of the PDU power measurements and name plate data which may be available from data center asset databases together with corresponding power distribution wiring schematics can be used to determine power consumption of individual IT equipment components i.e. power distribution . This approach allows for the power consumption of IT equipment components IT equipment racks to be verified by comparing a spatial location of the components racks with related MMT based three dimensional thermal maps.

MMT V1.0 allows for measurement of the environmental variables of the data center with a high spatial resolution. MMT V1.0 for example is able to measure temperatures in a data center with a three dimensional spatial resolution of less than one cubic foot. Exemplary MMT measurements are shown illustrated for example in described below . See also Hamann et al. Rapid Three Dimensional Thermal Characterization of Large Scale Computing Facilities IEEE Transactions on Components and Packaging Technologies 2008 the contents of which are incorporated by reference herein. While MMT V1.0 is currently the only technology which can provide experimental insight into environmental variables such as temperatures in a data center at this uniquely high spatial resolution an MMT survey is still only a snapshot at a given point in time of the MMT service. Namely while MMT provides high spatial resolution it is typically temporally sparse e.g. performed once or twice a year for a given data center.

In step the static three dimensional measurements from MMT V1.0 are used to create a base model M for the one or more environmental variables in the data center i.e. M tilde over x t wherein is a vector of input parameters such as power flows spatial coordinates and or dimensions for the model. The derivation of a base model step and manipulation thereof steps described below are optional steps because as is described in detail below direct use of the static data from time t and real time data obtained at a time t wherein tis later in time than t i.e. t t can be used directly to model the data center.

In general the models described herein are used to predict describe and or represent the environmental variables in space and possibly time i.e. M E t wherein M is the particular model E is an environmental variable such as thermal conditions humidity air flow pressures and power distributions current consumption is a vector of input parameters for the model such as power flows spatial coordinates and or dimensions is a vector of dimensional variables x y z determining a location inside a data center and t is time.

In the base model there are a fixed set of input parameters and is not a function of time i.e. M tilde over x t E . By contrast in a subsequent model created at time t see below wherein t t also referred to herein as a dynamic model M tilde over x t E t the input parameters can change as a function of time and therefore are adjusted based on the latest sensor readings. and can have common elements but that is not required.

According to the present techniques one or more of the following types of base models may be derived a direct measurement model a statistical model i.e. fitting the MMT measurements to an analytical model a physics based model and a combination of at least one of the foregoing types of models. Suitable statistical models include but are not limited to Kriging techniques and interpolation schemes e.g. linear polynomial Hermite and cosine models and reduced order models such as proper orthogonal decomposition POD models see for example Y. Joshi et al. Reduced Modeling Based Robust Thermal Design of Energy Efficient Data Centers The Eighteenth International Symposium on Transport Phenomena Daejeon KOREA Aug. 27 30 2007 the contents of which are incorporated by reference herein . Suitable physics based models include but are not limited to zoning provisioning models and simplified heat convection conduction models. See for example U.S. application Ser. No. 12 146 852 entitled Techniques for Thermal Modeling of Data Centers to Improve Energy Efficiency filed on Jun. 26 2008 hereinafter U.S. Application Ser. No. 12 146 852 the contents of which are incorporated by reference herein. As an example the base model could also be constructed by the well known Navier Stokes CFD modeling as well. Navier Stokes CFD modeling is described for example in U.S. application Ser. No. 12 146 852. It is also notable that all information about the data center that is relevant to assess energy consumption of the data center such as the cooling system refrigeration chiller plant technologies refrigeration chiller plant coefficient of performance COP and outside temperatures PDUs and perforated floor tiles is included. Example 3 below provides an indication of how such infrastructure information can be used in the models.

The direct measurement model involves the direct use of the MMT measurements for example by arranging the MMT measurements in a data base where each entry represents location coordinates x y z and associated measurement value e.g. x y z value . With the use of a statistical model of the data center the thermal air flow measurements are represented as a function of one or more variables such as sensor location where the sensors can be part of a MOSS network base model and or an RTSS network dynamic model described below type of perforated floor tiles present and or positioning of cooling air inlets hot air outlets of an IT rack. Perforated floor tiles are typically characterized by their opening e.g. 25 percent or flow impedance or as herein by an amount of flow they provide. The opening is useful to calculate pressure under the data center floor. Compared to the zoning provisioning model see above for example the quality of the statistical model can benefit from a larger number of relevant input factors or data such as the data provided by real time sensors.

Kriging interpolation models are described in detail below. The term Kriging as described below refers to a known interpolation method to predict unknown values from data measured at known locations. Known Kriging models include ordinary Kriging and universal Kriging. Ordinary Kriging includes for example spherical circular exponential and linear methods and assumes that a spatial variation in z values is free of any structural component drift . On the other hand universal Kriging assumes that the spatial variation in z values is the sum of three components i.e. a structural component drift a random spatially correlated component and random noise representing residual errors. POD is a method to numerically predict velocity and temperature fields more efficiently than full field simulations. The velocity and temperature fields are expanded into basis functions or POD modes. It can be shown that the basis functions can be represented as a matrix where each column includes a complete velocity or temperature field data of an observation. These observations can come from measurements or CFD calculations.

For the physics based models such as the zoning provisioning model illustrated immediately below the MMT methodology yields modeling parameters for each of the IT equipment racks based on supplied air flow and temperature differentials as well as the resulting temperature fields that surround each rack. For example with the zoning provisioning model the data center is separated into different zones being fed by the individual ACUs. With this method a provisioning zone is assigned to each ACU within a data center i.e. this model assumes that cooling air supplied to each such zone is provided by the assigned ACU. The zone assignment can be done using air flow modeling with the base model. The MMT V1.0 air flow data is used to create zones wherein each zone corresponds to an ACU. For example if the discharge temperature of a particular ACU changes e.g. read via RTSS with a sensor at an air outlet of the ACU the corresponding zone temperatures change accordingly. Specifically air flow sinks and sources can be identified in the data center using MMT V1.0 and an air flow model created for example as described in U.S. application Ser. No. 12 146 852 another physics based model . Other zoning concepts may use air flow from the respective ACU in conjunction with total data center area by geometrically partitioning up the total area in accordance with flow and position of the ACU. A model in the form of a spatial thermal footprint of each individual IT equipment rack can be evaluated by taking a ratio between an average temperature of cooled air provided to the air inlets of the IT equipment components in each rack and known or interpolated temperatures of air surrounding the IT equipment components.

In general the category of physics based models also referred to herein as physics driven models includes for example the models described in U.S. application Ser. No. 12 146 852 which also provides a description of simplified convection conduction models that may be used herein as well as the presently described zoning provisioning models. Other suitable physics based models may also be implemented however Navier Stokes CFD models are generally excluded from use herein primarily because physics based models are simpler faster to run than Navier Stokes CFD models although standard CFD models may be used . With the zoning provisioning models what is first described is how to create zones and then how to use a provision concept.

In step measurements from the real time sensors made also at time t i.e. E t can be obtained to use in creating the base model. According to an exemplary embodiment the real time measurements are made using a RTSS that employs real time sensors placed throughout the data center that continuously monitor the environmental operating conditions. See for example the description of above. Implementing measurements from the real time sensors for the base model is particularly useful if the real time sensors do not align with the MOSS base survey measurements i.e. if is not a subset of and Eneeds to be referenced to E. In this case step is performed to calibrate the RTSS by adjusting the base model see step described below .

In step based on the real time sensor readings taken in step described above an altered base model M t 0 is created that includes both E t and E e.g. using sensor data fusion as described in detail below. Thus strictly speaking in step is different from in step . For example if sensor data fusion is used then there will be different spatial coordinates in step as compared to step . Like step described above steps and are also optional. For example the base model can be created from the MMT V1.0 measurements step but it is not always necessary to obtain measurements from the real time sensors at time tand or alter the base model steps and or respectively .

In step real time measurements of the environmental variables in the data center made at a time t wherein tis later in time than t i.e. t t are obtained. As in step above the real time measurements can be made using a RTSS that employs real time sensors placed throughout the data center that continuously monitor the environmental operating conditions.

The real time sensors can comprise any type of sensor which monitors a relevant physical quantity such as the environmental variables highlighted above namely thermal conditions i.e. ambient temperatures and or thermal distributions humidity air flow pressures and power distributions current consumption in real time. The sensors can be wired or wireless. In many instances these real time sensors are already present as part of a building monitoring system. The placement of the real time sensors is guided by which of the data center model s described above is being used. By way of reference to an exemplary embodiment wherein a Kriging model is used statistical sampling methods can also be used to determine both an optimum number and locations of real time sensors for a given data center. Other exemplary methods for placing real time sensors can involve use of Latin hypercube sampling techniques described below.

Additional and or existing real time sensors placed in the data center can also be used to verify the base model prediction if made and to determine whether any additional surveys with the MOSS i.e. MMT V1.0 need to be done. For example mean square error MSE can be determined between data obtained from the real time sensors at time tand corresponding predictions from the base model. In this case the MSE serves to indicate whether or not a new survey with the MOSS is required to readjust the base model for obtaining improved predictions. As highlighted above the creation of a base model is optional and embodiments are presented herein wherein a base model is not used in the data center analysis.

As compared to the MMT measurements the real time sensors provide relatively low spatial resolution i.e. the real time sensors are sparsely placed throughout the data center. This is due at least in part to the expense associated with the deployment use and continual operation of real time sensors. However as highlighted above the MMT measurements are temporally sparse e.g. performed once or twice a year for a given data center whereas the real time sensors can provide measurements in real time or near real time e.g. with measurement intervals on an order of seconds or minutes.

The MMT surveys and the real time sensors both provide measurements of one or more environmental variables E. The difference between the MMT surveys E and the real time sensor data E t is given by the spatial coordinates wherein is a vector with a sparse set of spatial coordinates while is a vector of a dense set of spatial coordinates. As highlighted above can be a subset of but that is not required. Further measurements are provided from the MMT surveys at t not in real time . In some embodiments presented herein the real time sensors are used to monitor one or more of the modeling input parameters such as changing power levels tilde over x t .

The measurements obtained from the real time sensors are used to adjust the data center model as a function of the differences in data if any from the time when the MMT measurements were taken to the present i.e. from time tto time t. This approach thus provides a real time or near real time analysis of the environmental operating conditions in the data center.

For example in step the base model is combined with the real time measurements from the RTSS i.e. combine M tilde over x t with E t to derive a dynamic model for the environmental operating conditions in the data center at time t i.e. M tilde over x t . This can be achieved for example by applying known methods of sensor data fusion i.e. by combining the real time sensor measurements and base model data such that the resulting model at time tproduces an output of better quality i.e. more accurate more complete and or more dependable modeling results than the base model alone. In general sources of data for the data fusion process can include measurements from one or more of a number of different types of sensors such as wireless sensors wired sensors or a combination thereof that can provide real time data. However any data representing a measure of the existing environmental status of the data center would be useful in providing accurate up to date models. Further any suitable data fusion techniques may be employed such as direct fusion indirect fusion and or fusion of outputs of the direct and indirect fusion. Direct fusion generally refers to fusion of sensor data from a set of real time heterogeneous multiple sensor sensors and historic i.e. MMT based sensor data while indirect fusion uses information sources like a priori knowledge about the environment and or human input. An example illustrating the derivation of a data center model wherein a base model is first created is provided in Example 2 described below.

However as described above the creation of the base model is optional. Thus alternatively in step the measurements from the MMT survey i.e. E see description of step above can be combined with measurements from the real time sensors i.e. E t using the data fusion processes described immediately above to derive a model for the data center at time t i.e. M tilde over x t . An example illustrating the derivation of a data center model without first creating a base model is provided in Example 1 described below.

Like the base model described above the dynamic model M tilde over x t can comprise one or more of a direct measurement model a statistical model a physics based model and a combination of at least one of the foregoing types of models. Suitable statistical models include but are not limited to Kriging techniques and interpolation schemes e.g. linear polynomial Hermite and cosine models and reduced order models such as POD models. Suitable physics based models include but are not limited to zoning provisioning models and simplified heat convection conduction models. Each of these model types were described in detail above.

Since the RTSS is continually monitoring the environmental operating conditions in the data center any changes in the environmental operating conditions measured by the RTSS and that are for example large enough to meet the above mentioned MSE criterion will change the dynamic model accordingly. By way of example only if external influences and or disturbances to the data center infrastructure occur such as the installation of new IT equipment any changes to the environmental operating conditions in the data center brought about by these influences and or disturbances will be detected by the real time sensors for example at time t wherein tis later in time than t and a corresponding change s to the dynamic model will occur. The result will be an updated data center model at time t i.e. M tilde over x t . This scenario is illustrated for example by arrow in indicating that steps and of methodology can be repeated in response to the continuous monitoring of influences and or disturbances by the real time sensors. The changing of the dynamic model in response to a change in the environmental operating conditions in the data center is described for example in conjunction with the description of step below.

Namely in step a set of update parameters is derived for the data center model M tilde over x t provided that the chosen MSE criterion indicates that such an update will be necessary. Thus whether or not a new set of update parameters needs to be derived depends on the error criterion for example besides the MSE such an error criterion can be the absolute error between measured and modeled quantities . Error absolute or MSE values below some defined threshold value do not lead to any update action. Some analytic details on this procedure are provided below.

A basic high level example is now provided that illustrates the update procedure of a temperature model using real time sensing and dynamic models. As an example consider the following simple method for combining real time temperature data T t right arrow over r measured at an actual time tat sensor locations right arrow over r x y z with corresponding data generated by an MMT based temperature model tilde over T t right arrow over r earlier validated at time tt e.g. by applying a simple superposition approach . This and more sophisticated approaches to fusion of real time data and corresponding historic models can be extended to environmental parameters other than temperature e.g. parameters such as humidity air flow pressures and power distributions current consumption.

In step the updated model in this example M tilde over x t is then used to predict a three dimensional distribution of the one or more environmental variables E in the data center at time t i.e. E t . Steps and of methodology can be repeated as indicated by arrow in to insure that the data center model is kept updated. Two examples illustrating the derivation of a data center model are provided in Example 1 and Example 2 described below.

Mobile off line sensors shown in are part of a MOSS . Mobile off line sensors can comprise any type of sensor which measures physical quantities such as thermal conditions i.e. ambient temperatures and or thermal distributions humidity air flow pressures and power distributions current consumption. Mobile off line sensors can be wired or wireless. According to an exemplary embodiment MOSS comprises MMT V1.0 having the mobile off line sensors associated therewith such that when MMT V1.0 is moved throughout data center readings can be taken. One or more of mobile off line sensors may also be temporarily or permanently mounted at a location s in the data center. Real time sensors are part of RTSS . The placement of the real time sensors will be described in detail below. For example as highlighted above Latin hypercube sampling techniques can be applied to place real time sensors in real time. Output from mobile off line sensors output labeled B and real time sensors output labeled C are fed into MOSS and RTSS respectively.

Measurements made by MOSS output labeled D are taken and used by functional module to derive a base model labeled BM at time tfor one or more environmental variables data center . Measurements from RTSS combined with data from the base model output labeled F are used by functional module to derive a dynamic data center model labeled DM for the one or more environmental variables in data center at time t wherein tis later in time than t i.e. t t. As described in detail in conjunction with the description of above the measurement data output from the RTSS output labeled E and the output of the dynamic model output labeled H are monitored and compared. According to an exemplary embodiment functional module performs the monitoring and comparing functions M C .

Due to an occurrence s of one or more changes to data center such as external influences and disturbances to the infrastructure of data center labeled A e.g. the installation of new IT equipment changes in the cooling infrastructure and or rebalancing of an operational load of the IT equipment a set of update parameters for the dynamic model are determined by functional module . As described in detail in conjunction with the description of above the set of update parameters labeled UP are used to adjust the dynamic model i.e. based on output from functional module output labeled I . The output of the dynamic model can also be used e.g. via a broker mechanism by any one of a number of data center applications output labeled J . See for example described below.

Like functional modules and described above MOSS and RTSS may also be thought of as functional modules of system . Namely MOSS functions in making static measurements of the environmental operating conditions in data center as described above. Similarly RTSS functions in making real time measurements of the environmental operating conditions in data center as described above.

According to an exemplary embodiment the functional modules further comprise appropriate interfaces that enable them to communicate with each other and with other components e.g. application software by means of a messaging protocol based on a publish subscribe principle. By way of example only real time sensors which are part of RTSS use such a protocol for example message queue telemetry transport MQTT protocol or its version for wireless sensors MQTT S . MQTT S is described for example in Stanford Clark et al. MQTT for Sensor Networks MQTTs Protocol Specification Version 1 October 2007 available at www.mqtt.org the contents of which are incorporated by reference herein. This message based method for communicating between system components has the advantage that application developers do not need to consider the intrinsic details of the various communication protocols and addressing schemes since a message broker e.g. a broker as shown in described below takes care of these functions.

Broker comprises one or more MQTT MQTT S gateways through which communication exchange can take place based on a publish subscribe protocol for wireless sensor networks. Namely RTSS wired sensors and or wireless sensors can communicate exchange data through the MQTT MQTT S gateways . Although the MQTT S protocol was designed for wireless sensors it is equally applicable to wired sensors thereby providing its advantages to both types of sensors. These advantages include modest memory requirements and low transmission overhead. Alternately wired sensors can also use the basic but more complex MQTT protocol.

As shown in a variety of wireless sensor network platforms can be employed e.g. for the plurality of sensor applications labeled SA in the wireless sensor network s of the RTSS. By way of example only Proprietary ZigBee and TinyOS are suitable wireless sensor network platforms that may be employed.

The RTSS wired sensor functional module can comprise application programming interfaces labeled API s and an MQTT MQTT S adapter which permits interface with MQTT MQTT S gateways . The MOSS functional module can comprise MOSS application MQTT client communication protocols i.e. transmission control protocol TCP internet protocol IP labeled TCP IP and MMT functional module . MOSS application is an off line software program which receives data from MMT functional module for post processing either directly via an MQTT client or a TCP IP network or both. Typically MOSS application consolidates MMT based measurement data and infrastructure information of a surveyed data center to produce suitable input for functional module BM .

According to the exemplary embodiment shown illustrated in base model functional module monitor compare and update parameter functional modules together with the dynamic model functional module act as both subscribers as well as publishers through the MQTT broker . In addition one or more published outputs of these functional modules can be accessed by one or more of data center application s via the broker provided that these application s are registered at the broker as subscribers to the particular outputs of interest. Exemplary data center applications which could benefit from this messaging approach include but are not limited to various kinds of asset and energy management software for data centers such as Maximo Maximo Spatial products and Active Energy Manager AEM .

Based on measurement data from the MOSS i.e. MMT V1.0 see for example step of described above statistical sampling methods can be used to determine both the optimum number of sensors e.g. using an ordinary Kriging model and the optimum sensor locations for a given data center. For example based on MMT V1.0 temperature data those locations within the data center can be identified where temperature values are either extremely high hot spots or extremely low over provisioned cooling . Sensors can then be placed at or in the vicinity of these locations to cover an entire range of expected temperatures. Further additional sensors can be placed in locations with large temperature gradients i.e. in locations where MMT V1.0 measurements indicate abrupt temperature changes . As indicated above in one exemplary embodiment MSE could be used between the real time measurement data and corresponding model predictions. Any real time sensor placement procedure should then try to minimize the resulting MSE for example by using the placement procedures above such as placing sensors at high low temperature spots. It should be noted that the MSE of an estimator e.g. in the present context the output of the dynamic model for a given data center is one of a number of different ways to quantify an amount by which an estimator differs from the true value of the quantity being estimated. For example it is well known that the MSE criterion measures an average expectation of the square of the prediction error wherein the prediction error is the amount by which the estimator is expected to differ from the quantity to be estimated. Often the root mean square error RMSE i.e. the square root of the MSE is estimated. Variations of the MSE RMSE estimator are also possible for example as provided in Y. C. Eldar et al. Robust mean squared error estimation in the presence of model uncertainties IEEE Transactions on Signal Processing vol. 53 Issue 1 pp. 168 181 January 2005 the contents of which are incorporated by reference herein.

As highlighted above as an alternate method for placing real time sensors Latin hypercube designs can be used to determine an optimum number of real time sensors and their placement in a data center. According to the present techniques space filling Latin hypercube designs are used i.e. designs that spread points evenly throughout an experimental region are often employed. One challenge however associated with using space filling designs in the context of a data center is that a data center generally yields an irregular experimental region. By way of example only is a diagram illustrating exemplary data center . As an example 17 sensors labeled 1 through 17 are shown placed throughout data center to illustrate the irregular experimental region data center yields for Latin hypercube design.

To accommodate an irregular experimental region the present techniques employ probability based Latin hypercube designs see for example . are diagrams illustrating the use of probability based Latin hypercube designs to determine the optimum number and placement of sensors in a data center. In a Latin hypercube grid is shown formed over irregular experimental region . According to an exemplary embodiment irregular experimental region is representative of a data center having rows of IT equipment therein. The grid contains a number of columns that intersect with rows . Eight real time sensors that are to be placed throughout the data center are shown at the bottom of .

Turning now to a block diagram is shown of an apparatus for real time three dimensional analysis of environmental operating conditions in a data center in accordance with one embodiment of the present invention. It should be understood that apparatus represents one embodiment for implementing methodology of .

Apparatus comprises a computer system and removable media . Computer system comprises a processor a network interface a memory a media interface and an optional display . Network interface allows computer system to connect to a network while media interface allows computer system to interact with media such as a hard drive or removable media .

As is known in the art the methods and apparatus discussed herein may be distributed as an article of manufacture that itself comprises a machine readable medium containing one or more programs which when executed implement embodiments of the present invention. For instance the machine readable medium may contain a program configured to obtain high spatial resolution three dimensional measurements of one or more environmental variables in the data center made at a time t obtain real time measurements of the environmental variables in the data center made at a time t wherein tis later in time than t combine the high spatial resolution three dimensional measurements with the real time measurements to derive a model for the environmental variables in the data center at the time t and use the model to predict three dimensional distributions of the environmental variables in the data center at the time t.

The machine readable medium may be a recordable medium e.g. floppy disks hard drive optical disks such as removable media or memory cards or may be a transmission medium e.g. a network comprising fiber optics the world wide web cables or a wireless channel using time division multiple access code division multiple access or other radio frequency channel . Any medium known or developed that can store information suitable for use with a computer system may be used.

Processor can be configured to implement the methods steps and functions disclosed herein. The memory could be distributed or local and the processor could be distributed or singular. The memory could be implemented as an electrical magnetic or optical memory or any combination of these or other types of storage devices. Moreover the term memory should be construed broadly enough to encompass any information able to be read from or written to an address in the addressable space accessed by processor . With this definition information on a network accessible through network interface is still within memory because the processor can retrieve the information from the network. It should be noted that each distributed processor that makes up processor generally contains its own addressable memory space. It should also be noted that some or all of computer system can be incorporated into an application specific or general use integrated circuit.

Optional video display is any type of video display suitable for interacting with a human user of apparatus . Generally video display is a computer monitor or other similar video display.

Thermal data E was obtained via MMT V1.0 at time t. Because MMT V1.0 provided such a dense data grid a base model was not constructed. The real time sensors were placed on the MMT V1.0 data grid and thus a sensor calibration was not required. New data was then gathered from the real time sensors at a time i.e. time t i.e. E t where no E is available see line 3 of example code below where value and x y and z coordinates are read from the sensors . The E t was then compared with the initial E at time t results at see line 12 of example code below where the initial values room.GTemp are compared with the latest readings at time t value . The difference between E t and E was then modeled using a griding function see line 15 of example code below . The model was then used to predict a complete temperature field at time t see line 19 of example code below where a new three dimensional temperature distribution is calculated . Whenever there was new real time data for example at time t i.e. E t available the above described steps were repeated i.e. called function mmt fillNewThermalData .

E was obtained using temperature results from CFD calculations. Because these calculations are too slow to be repeated in real time the data was represented and modeled by a simple model such as the Laplacian model approach as described in U.S. application Ser. No. 12 146 852 or a simple provisioning model create M tilde under tilde over x t . In the example using a Laplacian model approach the complete data center was described by the physical dimensions and locations of its infrastructure and equipment as well as by the power levels and the different air flow boundaries and or temperature boundaries see U.S. application Ser. No. 12 146 852 for a detailed discussion . Because the real time sensors were not on the same grid as the CFD model results compare with Example 1 described above the real time sensor data and the CFD model results had to be referenced to each other. In this example the real time data at time tE t was compared with the MOSS data E to obtain an updated base model M t which took the differences between RTSS and MOSS sensors into account. Updated real time data was then obtained at time t i.e. E . Some additional real time data was obtained such as PDU power consumption. The PDU power consumption can be related to the power consumption of each IT equipment component as highlighted above . An updated set of input parameters for the model was obtained i.e. t . Real time sensor readings at time t i.e. E t were then compared with the initial MOSS data from time t . A new model was then constructed with the updated parameters. For example the updated model contained the real time measurements of some of the input parameters at time t. The updated model was then used to predict the dense distribution of the environmental variable.

To demonstrate the effectiveness of the present real time three dimensional analysis techniques both MMT measurements and real time sensor measurements were obtained for a sample data center. is graph illustrating MMT measurements obtained from the sample data center wherein circles are the MMT measurements triangles indicate server inlets and outlets and plus symbols indicate sensors. Both the x axis and the y axis represent the data center dimensions measured in feet. As described above and as exemplified from graph the MMT V1.0 measurement data has high spatial resolution. As also described above however the MMT measurement data is temporally sparse since for any given data center such measurements are typically performed only once or twice a year. is graph illustrating real time sensor observations i.e. measurements from the sample data center with 30 minute average temperature measured in C. plotted as a function of observation time measured in terms of days d . As can be seen from graph data is provided from only seven locations throughout the data center. Therefore as described above the real time sensors provide data with low spatial resolution. The objectives of this example were to 1 fit a statistical model described above to incorporate time space as well as other various factors X such as open area of the perforated floor tile and distance to ACUs and 2 predict a future temperature distribution over the data center area.

To predict a future temperature distribution the MMT measurements for reasons of simplicity called yinstead of E and the real time sensor observations yare related to each other according to the following steps 0 Step 1 circumflex over circumflex over 0 Step 2 wherein f X t is some function depending on factors X and time t t 0 T and t 0 T represent time instances t and t respectively with T being a time interval over which real time sensor data are available X t is a Gaussian process with mean zero and covariance function with a Gaussian correlation function applied to . The quantity is an estimate of the real time temperature at some time t 0 T where the MMT measurements are available and both and are initially unknown coefficients. Similarly an estimate prediction of the temperature at a future time t T i.e. real time sensor data may not always be available exactly at time t T therefore one has to predict the temperature based on the existing model for time t T is given by the following expression circumflex over circumflex over Step 3 wherein circumflex over and circumflex over are estimates of initially unknown coefficients and respectively.

As highlighted above other factors X can be incorporated in the analysis. By way of example only the following factors X were used 

As indicated above the following description of a Kriging model is considered part of an exemplary embodiment of a modeling prediction scheme for three dimensional thermal distributions according to the present techniques. Well known extrapolation interpolation methodologies such as linear cubic spline or Kriging may be applied to data center areas not accessible during an MMT survey. While MMT measurements provide high spatial resolution see above they are typically temporally sparse e.g. performed once or twice a year for a given data center. Thus data obtained from real time sensors are compared to corresponding data generated by the three dimensional thermal distribution model that was originally derived from MMT measurements. Based on the differences found i.e. difference between what the base model predicts and the dynamic model predicts that may have occurred over time the models derived from high resolution MMT measurements can be adjusted if necessary as dictated by the chosen MSE criterion. One approach to accomplish this is to use Kriging techniques as described below. Here the term Kriging stands for a kind of interpolation method to predict unknown values from data points measured at known locations see above .

A universal Kriging model can be stated as follows. Assume that the true function y x x R is a realization from a stochastic process wherein x v x and Z x is a weak stationary stochastic process with mean zero and covariance function having vrepresent known functions and represent unknown parameters. The covariance function is defined as covY x h Y x h where the correlation function h is a positive semidefinite function with 0 1 and h h . But in practice an ordinary Kriging model is commonly used. Ordinary Kriging includes for example spherical circular exponential and linear methods and assumes that the variation in z values is free of any structural component drift while universal Kriging assumes that the spatial variation in z values is the sum of three components a structural component drift a random spatially correlated component and random noise representing residual errors. Ordinary Kriging is analytically defined by the following expression wherein is an unknown parameter.

There are however problems associated with these universal ordinary Kriging models. Namely the predication can be poor if there are some strong trends. See for example J. D. Martin et al. Use of Kriging Models to Approximate Deterministic Computer Models vol. 43 no. 4 pp. 853 863 April 2005 the contents of which are incorporated by reference herein. Also it is not easy to understand the effects of parameters and factors of these Kriging models just by looking at the predictor. Further the predictor is not robust to possible misspecifications in the correlation parameters. Therefore according to the present techniques a blind Kriging model is used as the preferred method to circumvent these problems. See for example V. R. Joseph et al. Blind Kriging A New Method for Developing Metamodels vol. 130 031102 March 2008 hereinafter Joseph 2008 the contents of which are incorporated by reference herein.

The blind Kriging model is analytically defined by the following expression wherein v x 1 v x . . . v x . . . and m are unknown. The v x terms of the functions are not assumed to be known. Instead the v x terms are identified through some data analytic procedure. Because the v x terms are unknown in this model it is called blind Kriging. 

The blind Kriging predictor is analytically defined by the following expression circumflex over circumflex over wherein V v x . . . v x and circumflex over V V V y. Note that the blind Kriging predictor has the same form as that of the universal Kriging predictor. An important step in blind Kriging is to identify the unknown v x terms of the functions which can be chosen from a set of candidate functions or variables using variable selection techniques. A variable selection technique related to the Kriging methodology is described for example in V. R. Joseph A Bayesian Approach to the Design and Analysis of Fractionated Experiments vol. 48 no. 2 pp. 219 229 2006 and in V. R. Joseph et al. Functionally Induced Priors for the Analysis of Experiments vol. 49 no. 1 pp. 1 11 2007 the contents of each of which are incorporated by reference herein and can be considered a Bayesian version of the forward selection strategy. The simplest data driven model building approach is called forward selection. In this approach one adds variables to the model one at a time. At each step each variable that is not already in the model is tested for inclusion in the model and the most significant of these variables is added to the model. The variable selection technique is described below. Additional details of this technique and examples can be found in Joseph 2008.

With the variable selection technique denote the candidate variables by u . . . u. Consider approximating y x by v u where 1. With prior distributions N 0 R a posterior can be calculated by 

Although illustrative embodiments of the present invention have been described herein it is to be understood that the invention is not limited to those precise embodiments and that various other changes and modifications may be made by one skilled in the art without departing from the scope of the invention.

