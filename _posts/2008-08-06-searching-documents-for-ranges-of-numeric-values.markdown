---

title: Searching documents for ranges of numeric values
abstract: Provided are a system and article of manufacture for searching documents for ranges of numeric values. A number of posting lists is generated, wherein each posting list is associated with a range of consecutive values within the set of values and includes document identifiers for documents including at least one value within the range of consecutive values associated with the posting list, and wherein each document identifier is associated with one value in the set of values included in the document identified by the document identifier. The generated posting lists are stored. A query on a query range of values within the set of values is received and a determination is made of a minimum number of posting lists associated with consecutive values that together include the query range of values. The determined posting lists are merged.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08346759&OS=08346759&RS=08346759
owner: International Business Machines Corporation
number: 08346759
owner_city: Armonk
owner_country: US
publication_date: 20080806
---
This patent application is a continuation of U.S. patent application Ser. No. 10 949 473 filed on Sep. 24 2004 which patent applications are incorporated herein by reference in their entirety.

The present invention relates to a method and article of manufacture for searching documents for ranges of numeric values.

In the current art a search engine such as an Internet search engine receives search request to locate all accessible documents such as web pages in a network such as an Internet or Intranet that satisfy a query. The search engine maintains posting lists for searchable words terms number etc. where the posting list for a word comprises the document identifiers docID of all documents that include the word associated with the posting list. At periodic intervals the search engine may execute web robots that search the Internet for documents. The robot determines the words in the document associated with posting lists and then adds the located document identifier i.e. docID to all posting lists associated with a word in the document.

When a user submits a request for multiple words the search engine locates the posting lists for each word included in the search request and then returns the union of all document IDs in the posting lists if the search request is a Boolean OR search. If the search is an AND request then the search engine returns the document IDs resulting from the intersection of the posting lists. Moreover the query can also be an arbitrary expression e.g. A and B or C and not D and function F G .

Provided are a method system and program for searching documents for ranges of numeric values. Document identifiers for documents are accessed wherein the documents include at least one value that is a member of a set of values. A number of posting lists are generated. Each posting list is associated with a range of consecutive values within the set of values and includes document identifiers for documents having values within the range of consecutive values associated with the posting list. Each document identifier is associated with one value in the set of values included in the document identified by the document identifier. The generated posting lists are stored.

In further embodiments document identifiers for documents are accessed including at least one value that is a member of a set of values. A number of posting lists associated with a first level are generated wherein each posting list is associated with a range of consecutive values within the set of values and includes document identifiers for documents having values within the range of consecutive values associated with the posting list. Each document identifier is associated with one value in the set of values included in the document identified by the document identifier. At least one iteration of generating posting lists for an additional level is performed wherein each posting list generated for the additional level is formed by merging at least two posting lists associated with a previous level. Each generated posting list at one additional level is associated with consecutive values in the set of values. A new additional level and posting lists associated therewith are generated with each iteration.

In the following description reference is made to the accompanying drawings which form a part hereof and which illustrate several embodiments of the present invention. It is understood that other embodiments may be utilized and structural and operational changes may be made without departing from the scope of the present invention.

The server further includes an index builder that builds the posting lists used by the search engine to execute queries received from the user systems .

The user systems may comprise any computing device capable of submitting queries i.e. search requests to the server including desktop computers notebook computers workstations hand held computers servers mainframes telephony devices etc. The user systems includes a browser program not shown such as a Hypertext Markup Language HTML web browser capable of requesting and accessing documents at network accessible systems and submitting search requests to the server . The network may comprise one or more networks known in the art such as a Wide Area Network WAN Local Area Network LAN Storage Area Network SAN wireless network the Internet and Intranet etc. The server may comprise one or more computational machines such as one or more servers suitable for handling search requests from the user systems . The number of servers used for the server depends on the anticipated network traffic from user systems .

The network accessible system comprises any computational device or storage system capable of storing documents and making such documents available to the user systems and server over the network . The network accessible systems includes a program to respond to document requests from the user systems and server over the network such as a Hypertext Transfer Protocol HTTP File Transfer Protocol FTP Network File System NFS etc. Certain network systems may function as both a user system and network accessible system serving documents . The documents may be implemented in different computer readable formats e.g. text HTML images video sound Portable Document Format PDF and include searchable text or searchable metadata that the server may access to index the documents in the posting lists . The search engine may periodically search for and access documents in the network accessible systems i.e. crawl the network and determine whether the content of an accessed the document in the body metadata or header of the document includes a term or numeric value that is associated with one of the posting lists. Document identifiers identifying documents having a term or value associated with a posting list are added as an entry to the associated posting list .

The server includes a search engine program. The search engine includes a crawler an indexer shown as index builder and a search server. The crawler collects documents from the network. The indexer extracts the searchable terms including numeric values from the documents and builds posting lists. The search server uses the posting lists to generate search results for the user s queries. The index builder component of the search engine generates the posting lists that the search engine queries to determine document identifiers identifying documents that satisfy the search request parameters which may include a numeric range words text etc. The numeric range may comprise price date etc.

In one embodiment the posting lists may be associated with a range of consecutive values determined by dividing the number of values N by the number of posting lists so that the N values in the set are equally distributed among the posting lists . The generated posting lists include entries having document identifiers for documents that include a value within the range of values associated with the posting list. Multiple entries in one generated posting list may have the same document identifier if the document identified by the document identifier includes multiple values in the range of values associated with the generated posting list . The generated posting lists are then stored at block in the storage .

The search engine then merges at block the determined posting lists which may include filtered posting lists to form a merged posting list including document identifiers of documents including values within the query range. The search engine returns at block the document identifiers in the merged posting list to the user system initiating the query. In returning the document identifiers the search engine may remove multiple instances of the document identifiers for different values within the range so that a document identifier is presented only once for all values in the range it may have. The document identifiers may be returned to the user system in a web page or search report in a format known in the art. In certain embodiments the document identifiers relevant to the numeric field are processed along with other query terms most often words to find documents relevant to the entire query. In this way the numeric range querying can be used with free text queries because queries often contain more than just a single numeric range.

The index builder then performs at block the operations at blocks in to generate a number of posting lists e.g. b associated with a first level. In alternative embodiments any of the parameters e.g. N F L and b used in calculating the number of posting lists to generate may be manually entered or determined based on empirical testing. Each posting list is associated with a range of consecutive values within the set of values and includes document identifiers for documents having values within the range of consecutive values associated with the posting list. The index builder performs at block one or more iterations of generating posting lists associated with an additional level. Each posting list associated with the additional level is formed by merging at least two posting lists associated with a previous level. Each generated posting list includes consecutive values within the set of values. In one embodiment posting lists may be generated for the L levels where L may be calculated according to the operations in block . Further the number of posting lists merged to form a posting list for an additional level following the first level may comprise the clustering factor c calculated according to the operations in block . At each increasing additional level the number of posting lists formed for that level decreases by a factor of the clustering factor c . The posting lists for all the different levels from one to L are stored in storage at block .

The search engine filters at block at least one of the determined posting lists at the first level if the determined posting lists at the first level include values outside of the query range of values. In one embodiment the number of determined posting lists may be just one or two. This filtering removes values from the posting lists at the first level that are not within the query range of values to form at least one filtered posting list only including values within the query range of values. In one embodiment this search engine may perform the operations in to filter posting lists at the first level including values outside of the first range. The filtering operation is not performed if any determined posting lists if there are any at the first level are not associated with values outside of the query range. The search engine then merges at block the determined posting lists including any filtered posting lists to form a merged posting list including document identifiers of documents including values within the query range. The merging operation may be implemented by performing the operations at blocks . At block the search engine accesses a document identifier associated with a lowest value from the determined posting lists encompassing the query range. The accessed document identifier is added at block to the merged posting list being formed. The search engine repeats at block the operations of accessing and adding the document identifier for a next lowest value from the determined posting lists until all the document identifiers which may be in posting list entry format in the determined posting lists have been added to the merged posting list being formed. The document identifiers in the merged posting list are sorted according to the values associated with the document identifiers. These document identifiers are then returned at block to the user system initiating the query. This merging operation at blocks may comprise a heap merge.

At certain intervals the server may update posting lists by crawling the web i.e. accessing network accessible systems for documents including values associated with posting lists and then perform the operations in or to regenerate the posting lists having ranges of values to use for queries on ranges of values. In this way the posting lists having the ranges of values to search on are regenerated at regular intervals to include newly located documents.

The user systems may submit queries that include both query ranges of numeric values as well as other query terms such as words terms etc. In such case when forming the merged posting lists the search engine may merge the merged posting list of the document identifiers associated with the query range of values with posting lists associated with other query terms such as words phrases etc. If the query involved an OR operation of the terms and query range then merging the posting lists for the query range involves forming a union of the document identifiers e.g. document IDs of all determined posting lists. If the query involved an AND operation then merging the posting lists for the query range involves determining an intersection of the document identifiers e.g. document IDs in all the determined posting lists.

The described operations may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof. The term article of manufacture as used herein refers to code or logic implemented in hardware logic e.g. an integrated circuit chip Programmable Gate Array PGA Application Specific Integrated Circuit ASIC etc. or a computer readable medium such as magnetic storage medium e.g. hard disk drives floppy disks tape etc. optical storage CD ROMs optical disks etc. volatile and non volatile memory devices e.g. EEPROMs ROMs PROMs RAMs DRAMs SRAMs firmware programmable logic etc. . Code in the computer readable medium is accessed and executed by a processor. The code in which preferred embodiments are implemented may further be accessible through a transmission media or from a file server over a network. In such cases the article of manufacture in which the code is implemented may comprise a transmission media such as a network transmission line wireless transmission media signals propagating through space radio waves infrared signals etc. Thus the article of manufacture may comprise the medium in which the code is embodied. Additionally the article of manufacture may comprise a combination of hardware and software components in which the code is embodied processed and executed. Of course those skilled in the art will recognize that many modifications may be made to this configuration without departing from the scope of the present invention and that the article of manufacture may comprise any information bearing medium known in the art.

The described operations may be performed by circuitry where circuitry refers to either hardware or software or a combination thereof. The circuitry for performing the operations of the described embodiments may comprise a hardware device such as an integrated circuit chip Programmable Gate Array PGA Application Specific Integrated Circuit ASIC etc. The circuitry may also comprise a processor component such as an integrated circuit and code in a computer readable medium such as memory wherein the code is executed by the processor to perform the operations of the described embodiments.

The illustrated operations of show certain events occurring in a certain order. In alternative embodiments certain operations may be performed in a different order modified or removed. Moreover steps may be added to the above described logic and still conform to the described embodiments. Further operations described herein may occur sequentially or certain operations may be processed in parallel. Yet further operations may be performed by a single processing unit or by distributed processing units.

The foregoing description of various embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto. The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended.

