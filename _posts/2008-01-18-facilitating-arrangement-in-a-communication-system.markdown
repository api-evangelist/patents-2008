---

title: Facilitating arrangement in a communication system
abstract: A method for determining the availability of at least one target user for a specific type of communication is described. The method comprises: retrieving contact information of at least one target user from a memory of a requesting user terminal; sending a request for communication status information of the at least one target user to a status network element, the status network element being arranged to provide the communication status information regarding the availability of the target user for the specific type of communication, wherein the request comprises at least a portion of the contact information of the at least one target user and identifies the specific type of communication; receiving, as a response to the request, a response message from the status network element, wherein the response message comprises the communication status information of the at least one target user; and modifying at least a portion of stored contact information when the received status information indicates that the target user is available for communication via the specific communication type, such that the modified contact information indicates on the requesting user terminal the current availability of the at least one user for communication via the specific communication type.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09191504&OS=09191504&RS=09191504
owner: Truphone Limited
number: 09191504
owner_city: 
owner_country: GB
publication_date: 20080118
---
This application claims priority to international application number PCT GB2008 000171 filed on Jan. 18 2008 which claims priority to Finnish patent application number 2007004.4 filed on Jan. 18 2007 the entire disclosures of which are hereby incorporated by reference.

The present invention relates in general to communication between user terminals and in particular to facilitating communication according to a specific communication type between the user terminals. More specifically the present invention relates to a method for and terminal for determining the availability of at least one target user for a specific type of network communication in an efficient manner.

In the past there was a clear distinction between telecommunication and data communication networks. Telecommunication networks such as Public Switched Telephone Networks PSTN and Public Land Mobile Networks PLMN carry voice and data over circuit switched connections where the circuit e.g. a time slot in a wireless connection or a digital transmission line is reserved for the voice or data call for the whole duration of the call even during idle periods i.e. when there is no voice or data to transmit.

Data communication networks on the other hand typically carry data over packet switched connections where network resources are reserved for a particular session only when there is data to be transmitted. When the session is idle network resources are allocated to carrying data for other active sessions. A vast majority of today s data communication networks are based on protocols that utilize the TCP IP protocol stack. An example of such network is the Internet which in today s language may refer to any one of a number of different networks implemented with different protocols such as the Wold Wide Web HTTP or Usenet NNTP .

Recently technical development has been leading towards convergence of telecommunication and data communication networks which means in general that both telecommunication and data communication applications use the same physical and or logical network for carrying voice and data. This trend has many advantages both from a network operator s and a consumer s point of view. For example a network operator needs to invest in and maintain only one physical network in stead of two parallel networks for telecommunication and data communication traffic respectively. This reduces capital operating and maintenance expenses that the operators incur which in turn should bring about lower call and data transfer rates for subscribers. In some countries this convergence of tele communication and data communication may be slowed down by pricing policies of the network operators which they may use to safeguard return on their past investments in telecommunication infrastructure.

In a network that is built to carry both telecommunication and data communication traffic arranging the communication according to a packet switched scheme is an advantageous design choice as at least in theory serving the same amount of subscribers requires less capacity in a packet switched network than in a circuit switched network. This is due to the above mentioned fact that in packet switched networks a session consumes network resources only when there are data packets to be transmitted and during idle periods the network resources are available for other sessions.

As already mentioned TCP IP based networks are nowadays the prevailing type of packet switched networks. Methods and protocols have been developed for carrying voice over IP networks so that the IP networks are capable of providing voice communication services. Schemes for carrying voice over IP networks are commonly referred to as Voice over IP or VoIP. With the advent of VoIP services and applications consumers have been able to use their home computers as voice communication devices and make phone calls over their Internet connections at relatively low flat rates.

VoIP calls are also available over Wireless Local Area Network WLAN connections and along with introduction of dual mode or multi mode mobile phones which are equipped with hardware and software for connecting the phone to a WLAN network the option for making a VoIP call perhaps at a lower rate as compared to that of e.g. a GSM call rate has become available also for mobile phone users.

Making a VoIP Internet call from a mobile phone at a flat rate may require that the call is a VoIP call end to end i.e. both parties of the call are available for a VoIP call. For example if a calling party is available for a VoIP service but the called party is not within a VoIP service area the call may e.g. be transmitted through a VoIP gateway to and terminate in a GSM network and the GSM leg of the call may be charged at a rate set by the GSM operator which may negate the benefit of the flat rate of the VoIP leg of the call.

It would therefore be useful if the calling party knew before making a VoIP call or initiating another type of connection whether the called party were available for the VoIP call or the other type of communication. Obviously the calling party could contact the called party by other means e.g. by making a telephone call through GSM or fixed line service before trying to make a VoIP call to check that the called party is actually within a VoIP service area but it is inconvenient to first make e.g. a GSM call and then the VoIP call possibly dialling both telephone numbers by means of the mobile phone keypad and at least one party of the call incurs the cost of the GSM call.

It is an object of the present invention to eliminate or at least alleviate the above described inconveniences.

According to a first aspect of the invention there is provided a method for determining the availability of at least one target user for a specific type of communication the method comprising retrieving contact information of at least one target user from a memory of a requesting user terminal sending a request for communication status information of the at least one target user to a status network element the status network element being arranged to provide the communication status information regarding the availability of the target user for the specific type of communication wherein the request comprises at least a portion of the contact information of the at least one target user and identifies the specific type of communication receiving as a response to the request a response message from the status network element wherein the response message comprises the communication status information of the at least one target user and modifying at least a portion of stored contact information when the received status information indicates that the target user is available for communication via the specific communication type such that the modified contact information indicates on the requesting user terminal the current availability of the at least one user for communication via the specific communication type.

The present invention has several advantages. For example the invention eliminates the need for checking by other means the availability of a called party for a VoIP call thereby eliminating the inconvenience and cost associated with the use of the other means. Furthermore the invention provides efficient management of VoIP contacts in a user terminal contact list by enabling automatic creation of and inclusion of VoIP contacts into one or more VoIP contact groups.

Preferably the method further comprises sensing the occurrence of a predetermined trigger event in the operation of the user terminal and sending the request for status information automatically as a response to the sensed trigger event. This is a highly advantageous aspect of the present invention in that it enables the updating of the stored contact information becomes an event which does not have to be specifically actioned by the requesting user. Also the update can be tailored to be driven by specific events which may necessitate knowledge of the current availability of a target user for example opening a contacts list option for example. In this case a request could be generated and sent at an early stage of looking at contact information which would mean the availability status information would be updated quicker than the conventional manner of getting to a specific contacts profile and then requesting the status information.

The sensing step can be sensing storing of new contact information into the memory of the user terminal as the trigger event Alternatively the sensing step can comprise sensing the commencing of a communication application for a specific communication type on the user terminal as the trigger event Both of these trigger events provide benefits outlined above.

Advantageously the method may further comprise creating a new contact group of users at the requesting user terminal and the adding step comprises adding the at least one target user to the new contact group of target users. Preferably the creating step and adding steps are implemented on a dynamic group where membership of the group is based upon the current communication availability status of each user. Dynamic groups are advantageous in that they provide the user with a selection of target users with whom communications can be achieved via a certain type of communications.

Advantageously the receiving step comprises receiving in the response message the at least one target user s current contact information for the specific communication type the current contact information being provided by the status network element. In this way new contact details are also provided which may not have been previously available to the requesting user terminal or which may have been outdated.

In an embodiment of the invention the specific communication type comprises Voice over IP VoIP . In another embodiment of the invention the specific communication type comprises instant messaging or multimedia messaging. In a yet another embodiment the specific communication type comprises a GSM call.

A further problem with determining the availability status of a remote target user for a communication is that this can result in a considerable amount of additional data communications with the status network node being required. This is disadvantageous because of the increased data traffic generated and also the resultant drain on battery life of a wireless user terminal.

The present invention mitigates this problem by grouping together the status requests and sending them at scheduled intervals to the status server. This has the significant benefit of reducing the number of status determining communications required and thereby conserving precious battery life on the wireless user terminal.

More specifically the present invention preferably further comprises sending a request for status information for a group of target users to the status network node to determine the communication availability status of each member of the group for the specific type of communication. Furthermore when the present invention is being implemented on a mobile device capable of GSM communications the sending step may advantageously comprise sending a batch of requests for the group of target users in time slots of a GSM air interface which are reasonably close together. Thus rather than having the GSM system report each status change it reports status changes in batches where those batched status changes are further apart in time. This allows the mobile device to drop to a lower power saving mode in between.

Further the status of each target user can advantageously be used to establish a dynamic on line group of target contacts with whom the user can communicate. This can be automatically updated such that the user is always aware of the types of possible communications available for a given target user.

In response to the request the receiving step may comprise receiving a response message wherein the response message comprises a collection of communication availability status responses for the group of target users. This advantageously minimises the number of messages which the requesting user terminal has to process and ensures that the contact information can advantageously be updated at approximately one moment in time thus avoiding the problem of differential updating of the store of status information which may lead to discrepancies in communications.

The present invention may comprise a method in which the response message comprises communications status information for a plurality of types of communication possible with the at least one target user. Thus the response can updated multiple types of communications and enable the user with a single response to select which one of the possible types of communications to use.

Furthermore the plurality of types of communication possible with the at least one target user in combination may define an available multiple type communications path to the target user.

Another problem with arises when using a conventional mobile telecommunications device for carrying out the above described communication status determination prior to the communication relates to the way in which the current status is presented to the requesting user on their mobile telecommunications device. It is often not easy for the user to determine the status because of the limited screen size or multiple pages are provided for the contacts status to be ascertained. Providing status information can take up parts of the user interface which could be otherwise used for important information.

The present invention addresses this problem by the method preferably further comprising modifying an image forming part of the target user s contact information such that the modified image includes an overlaid visual indication of the target user s availability for the specific type of communication. This maximises the entropy of the image and does not use up any further space in the user interface.

More preferably in the method of the present invention the modifying step preferably comprises modifying the image with a plurality of overlaid images to indicate that a plurality of different types of communication are available for the target user. This further enhances to use of the available screen size to maximises information without needing to move to a new screen.

Preferably the method further comprises constructing and sending an update message to a status network element the update message indication a change in availability status of the requesting user terminal.

Preferably the constructing and sending steps are carried out as a result of a trigger event. The trigger event is preferably caused by a predetermined action by the requesting user which changes a mode of operation of the requesting user terminal. In this way the status of the requesting user terminal can be updated by a change in its operating conditions automatically without the requesting user s specific action. For example changing the profile of a mobile telecommunications device to silent can result in a do not disturb status being generated and sent regarding that device.

According to another aspect of the present invention there is provided a requesting communication user terminal for determining the availability of at least one remote target user for a specific type of communication the terminal comprising a memory for storing contact information of a plurality of target users retrieving means for retrieving contact information of at least one target user from the memory transmitting means for transmitting a request for communication status information of the at least one target user to a status network element the status network element being arranged to provide the communication status information regarding the availability of the target user for the specific type of communication wherein the request comprises at least a portion of the contact information of the at least one target user and identifies the specific type of communication receiving means for receiving as a response to the request a response message from the status network element wherein the response message comprises the communication status information of the at least one target user and modifying means for modifying at least a portion of stored contact information when the received status information indicates that the target user is available for communication via the specific communication type such that the modified contact information indicates on the requesting user terminal the current availability of the at least one user for communication via the specific communication type.

Preferably the terminal further comprises a set of predetermined trigger events stored in the terminal and sensing means for sensing the occurrence of one of the predetermined trigger events in the operation of the user terminal and in response thereto automatically activating the transmitting means to send the request for status information. The advantages of this have been stated previously.

Advantageously the terminal further comprises adding means for adding the at least one user to a stored contact group of users.

Preferably the terminal further comprises creating means for creating a new contact group of users at the requesting user terminal and wherein the adding means is arranged to add the at least one target user to the new contact group of users.

The creating means and the adding means may be arranged to operate on a dynamic group where membership of the group is based upon the current communication availability status of each user. The advantages of this feature have been described above.

According to a further aspect of the present invention there is provided a status network element for providing a communications availability status of a target networked user terminal for a specific type of communication channel the status network element comprising a database of registered user entries each registered user entry including status information about a particular type of communications channel the status information comprising the address of a registered user terminal within that channel and the status of the connection availability to the user terminal within the channel compiling means arranged to retrieve status information regarding a registered user from at least one networked communication element with which the target user terminal is registered for a particular type of communications and to store the same in the database receiving means arranged to receive a communications status request for a target user terminal and to retrieve the relevant registered user entry from the database and communications means for transmitting the retrieved communication status and network address of the target user terminal to a requesting user terminal for updating an communications availability status of the target user within a stored list of users.

The status network element aggregates the relevant information from many network elements to compile a single resource of the communication status of a plurality of target users. This advantageously enables requesting user terminals to determine relatively quickly the correct availability status of the target users.

Preferably the compiling means is arranged to generate a request message for retrieving the required status information the request message being in a format supported by the networked communications element.

The present invention also extends to a system for determining availability of at least one target user for a specific communication type wherein the system comprises a requesting communication user terminal user terminal as described above and a status network element as described above.

According to another aspect of the present invention there is provided an application comprising program code means arranged to carry out the steps of the method defined above. when the program code means are loaded into the memory of and executed by a device capable of executing the application. Further the present invention may extend to a device for communication comprising an application as described above.

In the following advantageous embodiments of the present invention are explained in detail with reference to the appended drawings. A person skilled in the art appreciates that the embodiments are described for illustrative purposes only and are not intended to limit the spirit and scope of the claims to the described embodiments. A skilled person also appreciates that an aspect of the invention may be used in combination of one or more of the disclosed embodiments.

A second wireless user terminal for User B is also shown which only has the ability to communicate via a local station . An example of this may be a laptop computer for example.

A third wireless user terminal for User C is shown which only has the ability to communicate via a base station . An example of this may be a mobile telecommunications device.

Local stations and base stations are connected by means of the network infrastructure of each network not shown to a core network which is preferably a packet switched network such as an IP network. PLMN network infrastructure that is used to connect the local station and other local stations to the core network may comprise network elements such as base station controllers BSC radio network controllers RNC mobile switching centres MSC media gateways and their controllers and support nodes SGSN and GGSN . WLAN infrastructure may comprise routing and switching elements as well as authentication centres and mobility management servers.

For the purposes of understanding the present embodiment a communication server Communication Server is shown having a local database . User B has its communication details registered in this local database . Similarly a further communication server Communication Server is provided which has a local registration database storing the details of its registered users in this example Users A and C. However it is to be appreciated that the number and combination of user terminals and communication servers is limitless. Further a given user can be registered on different communication servers for different types of communication service for example if communication server was a VoIP communication server and communication server was a instant messaging server User B could be registered to both servers each registration representing a different communication channel for the User B terminal .

The status server may be any server that is arranged to provide on request status information communications connectivity status on individual users or groups of users. The status server stores aggregated information about the connectivity status of all users Users A B and C for each of their possible communications channels in a local status database . This database can be accessed to determine the current availability status of any user registered with the status server for any given communication channel such as VoIP.

The status updater functions to update the status of each registered user in several different ways described below . It is directly coupled to the status database and writes status information directly thereto. The status information is stored in a list of users where the stored information for each user includes the type of communication channel the availability of that communications channel to the user the network communications address for that channel together with other information for example time since last update of status see later . The type of communication channel typically not only includes the type of communication being implemented such as VoIP or instant messaging but also the specific communications route to be used for example WLAN GPRS or 3G.

The status request handler receives status requests from a user terminal requesting user via the communications network and the communications module . The requests which identify the requesting user specify the user whose current communications status is required target user . The request is first authorised via the authorisation module which determines whether the requesting user is permitted to obtain the status information for the target user. In order to do this the authorisation module typically accesses a local authorisation database which retains a list of users and their associated permissions regarding accessibility of other users records for each communication channel in the status database . Therefore the authorisation database entry for User B as the target user can permit communication with User A for a VoIP communication but not permit User A for an instant messaging communication. This is simply achieved by having a separate authorisation field for each type of communications channel. Other methods of authorisation which are described later include seeking a specific authorisation from the target user by the authorisation module sending an authorisation request to the target user via the communications module and the communications network and receiving a target user s authorisation response.

If the requesting user has the requisite permissions the authorisation module notifies the status request handler and access to the status database is permitted for the current request. This permission enables the status request handler to access a record for the target user and retrieve information on the current address of the target user and its availability for a given type of communications channel . This retrieved information is send back to the requesting user via the communications module and the communications network .

Status information may comprise for example information on a user s current network address and or availability for communication . The status server may receive status information directly from users either by the status updater requesting the status information from the users or by the status updater enabling the users to input post the status information to the status server . The status server may also gain access to users status information by the status updater requesting the status information from another network element such as one of the communication servers where the target user is registered.

Status information can be requested from the status server by any suitable means for example by sending the status request message to the status server including an indication that status information is requested and an identification of the target user whose status is requested. The indication may be for example the presence of a particular field element character string or bit sequence in the message itself. The identification may be for example a user name or contact information of the target user. The status request message may be in any suitable form for example in the form of a short message SMS or a signalling message of a protocol.

The status server is preferably a presence server providing presence service. The general operation of a presence server is outlined below for clarity. However the detailed operation is known to the skilled addressee and so a detailed description is not required and is not provided herein.

Internet standard RFC 3856 defines presence as ability and willingness of a user to communicate with other users on the network. RFC 2778 defines a model and terminology for describing systems that provide presence information. In such a system there is a provider of presence service and two types of presence clients presentities and watchers. A presentity provides presence information that is stored and distributed by the presence service. A watcher receives presence information from the presence service. A watcher can either be a fetcher that requests a current value of a presentity s presence information from the presence service or a subscriber that requests from the presence service a notification of changes in a presentity s presence information. A fetcher that requests presence information on a regular basis from the presence service is called a poller. The user terminals of the present invention may each be a presentity a fetcher a subscriber or a poller or represent any combination thereof.

Presence service related communication between the user terminal and the status server is preferably arranged to use the SIP protocol and its event notification mechanism that are defined in Internet standards RFC 3261 and RFC 3265 respectively. The SIP presence event package is defined in RFC 3856 and utilizes the SUBSCRIBE and NOTIFY methods defined in RFC 3265. The SIP messaging protocol is used in the present non limiting embodiment for communications between the user terminal and the status server and these SUBSCRIBE AND NOTIFY messages are described in detail later.

The communication servers provide the desired communication services. Each communication server is also capable of providing information on registration status of the users of each communications service communication channel supported by that server . The communication servers may also be arranged to provide the presence service described above. These services include VoIP services GSM voice services instant messaging services IMS Multimedia messaging Services MMS and Short Message Services SMS services for example.

Preferably both communication servers provide VoIP communication services though different communication servers can provide different communications services. User terminals for a requesting user and a target user for example User A terminal and User B terminal connect to their respective VoIP services over an IP network . In the present embodiment the user terminals preferably use the WLAN network as an IP based access network to the IP core network but for example a GPRS service could be used as well for carrying the VoIP signalling and voice data packets which would be the case if User A was seeking to establish a VoIP communication with User C for example .

A user terminal which is configured to operate a VoIP communications channel comprises a speech or speech audio codec see that converts analogue speech signal into digital speech data and digital speech data into analogue speech signal. Basically any codec that is capable of analogue to digital conversion can be used but in a bandwidth limited system like that of the preferred embodiment of the present invention a codec with compression capabilities for example a G.729 codec is preferably used. Digital speech data is arranged into frames which in turn are inserted into IP packets and carried over the IP network by means of a suitable media protocol such as Real Time Protocol RTP in a manner known to a skilled person.

A VoIP service requires further some signalling and call control means like those provided by the H.323 signalling protocol or the SIP protocol referred to above. Calls to external systems such as PSTN or PLMN require gateways at the border of the two networks and means to control the functions of the gateway. Transcoding between the VoIP and the external network speech coding schemes may be required at the gateway or at another suitable network element. Requirements for implementation of a VoIP service in general are known to a skilled person and are not explained further herein.

When the user terminal A preferably comprising a VoIP client see is switched on and the user terminal A is within the service area of a WLAN base station the VoIP client attempts to register to its communication server VoIP server . In this case the user terminal A is configured to set up a WLAN carrier for VoIP traffic. User terminal A may also be configured to set up e.g. a GPRS connection for VoIP traffic as it has both communications channels open to it. If the VoIP client registration is successful at the communication server VoIP server the communication server VoIP server becomes aware of the user terminal s availability for communication according to a specific communication type channel preferably for making and receiving VoIP calls. The communication server VoIP server registers the user terminal as available for VoIP calls. In case the registration fails or the registration is removed by e.g. switching off the VoIP client or not renewed as required by the VoIP service the status of the user terminal is changed to or maintained as not available. The VoIP server also stores other information of the users of the service. The stored information may include a user s name the user s VoIP contact information such as VoIP number or address and the user s other contact information such as the user s mobile phone and or landline phone number not shown .

The baseband processor and application processor comprise system Large Scale Integration chips LSIs combined with a Central Processing Unit CPU Digital Signal Processor DSP and a processor memory not shown . The baseband processor handles processing of basic telephone functions and the application processor handles processing of multimedia such as moving and still images and audio. The memory may comprise e.g. a Flash memory or SRAM as well as SIM card memory.

The user terminal comprises a contacts management application according to an embodiment of the present invention. The application is provided in software in this embodiment but may in alternative embodiments be provided in hardware or software elements or combinations thereof as appropriate. The application is arranged to be started by the occurrence of a predefined trigger event in the user terminal . This trigger event can be for example when the user terminal is switched on or when both the user terminal is on and another application is started such as the VoIP client application . When the application starts it is loaded from the memory of the user terminal and run by the baseband processor or the application processor .

When the contacts management application has started it accesses a contact information database such as a contact list or a phonebook stored in the memory of the user terminal and retrieves user contact information from the database . The application can be configured preferably at least by means of a user interface to retrieve contact information of one user or a plurality of users depending on the need at hand. Contact information that is retrieved from the database may comprise a user s name or a user s telephone number s or combinations thereof. This is described in greater detail later.

Referring now to an example of how the User A terminal requesting user seeks to determine the status of the User B terminal target user for establishing a VoIP communication is described.

The process commences at Step with the requesting user checking at Step for the occurrence of a trigger event. Whilst no trigger event is detected the process continues checking. An example of a trigger event is the opening of a contacts list on the user terminal . On detection at Step of the trigger event the requesting user creates at Step a status request message for the status of a specific target user or preferably a group of target users. The request is then transmitted at Step to the status server for processing.

On receipt of the status request message the status server determines at Step whether the requesting user is authorised. As has been explained previously the authorisation module determines this. If the requesting user is not authorised the status server attempts at Step to seek authorisation described in detail later . If the requesting user is still not authorised at Step a timeout check is performed at Step . Whilst the authorisation procedure has not timed out the process returns to the seek authorisation stage at Step of the process. However if the authorisation procedure has timed out at Step a request failure message is provided back at Step to the requesting user and the process ends at Step .

If however in the authorisation procedure it is determined at Steps or that the requesting user is authorised then a check on the availability of up to date status information is carried out at Step . If the status is not available a status update procedure is implemented at Step and the process is returned with a further check at Step of whether the correct up to date status for a given communications channel is now available. Once the status is available and has been stored in the status database this status is provided back at Step to the requesting user . This target user status is then stored at Step in the contacts list of the requesting user terminal and the contact application program running on the requesting user terminal then indicates at Step the updated status of the target user visually via the display in the contacts list on the user terminal . The status request process then ends at Step .

Reference is now made to where further details of the process of requesting a status update from the status server are described. User terminal A is running the contact management application according to the present embodiment. User terminal A wants to determine availability of user terminal B for communication according to a particular communication type. Preferably user terminal A determines whether user terminal B is available for receiving a VoIP call but according to the present embodiment user terminal A may also determine availability of user terminal B for communication according to other communication types as well such as instant messaging multimedia messaging or a GSM call. In it is assumed that user terminal B is within a service area of a suitable IP access network such as WLAN and has successfully completed registration to the communication server .

User terminal A sends a request message denoted with REQ USER STATUS to the status server requesting status information on user terminal B . The application of the present invention running on user terminal A sends the request message after the occurrence of the trigger event. This event may be the start of the application and when retrieval of contact information from the memory of the terminal is requested. Alternatively the trigger may also be the creating and storing of new contact information into the memory of the terminal . In order to save battery resources of the user terminal A a plurality of requests can be sent as a group for example in scheduled time slots of GSM air interface.

The request message is preferably a SIP SUBSCRIBE message with which the user terminal A subscribes to the Presence Event Package of user terminal B according to RFC 3856 but any other suitable message type such as an SMS including a predetermined character string may also be used. The SIP SUBSCRIBE message comprises an identification of the presentity i.e. the user terminal B in the form of for example a SPI URI Uniform Resource Identifier and the name of the event package which the subscription is directed to. In this case the event package is the Presence event package. The identification information is entered into designated header fields of the SIP SUBSCRIBE message .

In this example the user terminal B as a presentity is identified with a SIP URI comprising the terminal s PLMN number. If the VoIP number of user terminal B is known to user terminal A it can also be used to identify user terminal B in a similar manner. The Via header field may contain for example the name of the user terminal A . The From field identifies for example by means of a SIP URI the party that requests the subscription to the presentity s presence status. In this example the PLMN number of the requesting terminal A is used as a user name portion of the SIP URI but for example the terminal s VoIP number could be used as well.

The SIP SUBSCRIBE message further comprises header fields for call identification and sequence numbers Call ID and Cseq . Contact header field indicates where the subscriber of the presence information can be contacted i.e. where the notifications of the presentity s presence events e.g. changes in presence information are to be sent. Content of the Event header field identifies the event package which is subscribed to. In this case the subscribed event package is the presence event package. The Accept header field indicates the format in which the subscriber wants to receive the presence notifications.

Optionally the status server acknowledges receipt of the request message by sending an acknowledgement denoted as ACK . In the case of SIP and presence service the presence server responds with a SIP OK message.

In the embodiment of the present invention illustrated in the status server preferably a presence server requests information on the status of the user terminal B from communication server which in a preferred embodiment of the present invention is a VoIP server. As described above user terminal B is assumed to be within the service area of a IP access network preferably within a WLAN hotspot and has successfully registered to communication server such that the communication server has recorded the status of the user terminal B as active. The renewal intervals for the registrations at communication server may be set to be relatively short such that communication server is able to detect reasonably early that a user terminal is no longer available for receiving VoIP calls e.g. due to switching off of the terminal or moving of the terminal outside the service area of the IP access network. This high frequency of checking improves the accuracy of the status information maintained at communication server .

Any of the communication servers may be arranged to receive and store the status information of users in various ways. For example one of the communication servers may be a proprietary system with proprietary interfaces towards user terminals and external systems such as the status server . It is a matter of implementation of the proprietary system what type of status information there is stored in the system and what kind of signalling messages is exchanged between the system and user terminals and or external systems to input update and request status information. As far as the present invention is concerned each communication server should at least maintain information on the availability of user terminals for communication according to a particular communication type preferably VoIP namely each communication server should maintain the status of the its user terminals as available or not available for a given communication channel. A skilled person appreciates that the designations of the statuses may vary. For example the communications server may designate availability statuses as on or off .

The communication server may also act as a SIP registrar and maintain SIP registration statuses of user terminals. In that case the user terminals may use the SIP REGISTER method to indicate their status to the communication server . For example the user terminals may use the Contact header field of a SIP REGISTER message to indicate that they can be contacted at their VoIP number. In that way the communication server receives the information that the user terminal is available for a VoIP call.

In the case that one of the communication servers is a proprietary system the status server generates a request message in a format that is supported by that communication server . For communication server the status server inserts contact information of user terminal B into the request message and sends the message to communication server . In the present embodiment the contact information is the PLMN number of user terminal B . The status server may also insert identification information of the requesting party i.e. the user terminal A into the message.

In the case that communication server acts as a SIP registrar the status server may subscribe to the register event package of the user terminal B and receive notifications of the initial state and changes in the status of the user terminal B . The status server uses the SIP SUBSCRIBE method to subscribe to the register state event package in a similar manner as in the case of the user terminal A subscribing to the presence state event package.

The status server is preferably also arranged to request user terminal B s contact information corresponding to the communication server s supported communication type from communication server .

Optionally communication server may acknowledge the request message by sending an acknowledgement message back to the status server .

In an embodiment of the present invention communication server may send a request message to the user terminal B requesting acceptance from the user of the terminal B for delivering the status information to the requesting user terminal A . The target user terminal sends a response message to the communication server and either accepts or denies the request . In another embodiment a user registered with communication server may indicate to the communication server standing instructions for the acceptance or denial of requests from all parties or some parties. These standing instructions can be stored at communication server . In that case when a request from such a party is received communication server does not need to send a request for acceptance to the user terminal B . This procedure can be applied to all networked communication servers .

If the user terminal B accepts the delivery of the status information to the requesting terminal communication server retrieves the status information from its local storage such as its registration database generates a response message inserts the status information of the user terminal B into the message and sends the response message to the status server . Communication server may also insert the contact information according to the server s communication type of the user terminal B into the response message . In an advantageous embodiment of the present invention where communication server is a VoIP server the server inserts the VoIP number of the user terminal B into the response message .

The response message may be a proprietary signalling message or a SIP NOTIFY message depending on whether communication server is a proprietary system or acts as a SIP registrar.

In case the user terminal denies the request for status communication server may indicate the denial in the response message or indicate for example that the request is pending.

After the status server has received the response message from communication server the status server generates a response message in order to communicate the status of the user terminal B and preferably also the contact information of the terminal corresponding to the communication server s communication type to the user terminal A . The response message is preferably a SIP NOTIFY message and in accordance with the present example may have the content as shown in 

The SIP NOTIFY message is sent to the address that the user terminal A indicated in the Contact header field of the SIP SUBSCRIBE message . In order to save battery resources of the user terminal A the status server may send a plurality of SIP NOTIFY messages as a group for example by inserting the results into consecutive data packets that are carried in scheduled time slots over a GSM air interface. The SIP NOTIFY message contains header fields corresponding to those of the SIP SUBSCRIBE message. The SIP NOTIFY message differs from the SIP SUBSCRIBE message in that it contains a message body in XML format. The message body comprises for example a registration element which contains the SIP URI of the presentity and in the present example also the status of the presentity as an attribute value. The message body further comprises a contact element which contains the contact information of the user terminal B in a uri element. Preferably the SIP URI in the uri element contains the VoIP number of the user terminal B and is therefore readily available for the application of the present invention to be included into the contact information database of the user terminal A .

The above described use of SIP SUBSCRIBE and SIP NOTIFY message formats are merely preferable. It is also possible to use most of the specific information described as provided in the above message formats and provide the same information in another messaging format without difficulty. The skilled addressee will be able to select which fields of information to use in such a situation without using all of the fields without any difficulty.

The contact management application according to the present invention retrieves the status information and the VoIP number of the user terminal B from the response message and stores them into the memory of the user terminal A for further processing.

Reference is now made to . The contact management application modifies the contact information of the user s whose status information and preferably also additional contact information was received from the status server in a manner described above. The contact management application may access and modify the contact information database of the user terminal for example by means of an Application Programming Interface API provided by the operating system of the terminal . The application may for example create a new contact group designated as Online and add the user s whose status is active to the new contact group. The content management application may add the additional contact information preferably the VoIP number s of the user s to the contact information database . If the contact information database contains pictures image assigned to users contact information the application may modify the pictures of the users whose status is active to include a visual indication of the active status of the users. This can be carried out for each of the different modes of communication as is described in detail below.

When a user of the terminal accesses the contact information database by means of the user interface of the terminal a user interface module of the terminal generates a phonebook view of the new or modified contact information. shows an example of a phonebook view for a mobile telecommunications device such as a mobile telephone which has a limited screen size. It is important for the graphical user interface in such devices to be optimised to account for the limited screen size.

In it can be seen that contact groups and individual contacts are arranged onto separate pages that can be viewed by means of tabs and respectively. The contact groups are made up of individual contacts in the contact database which have been grouped together because they share a common attribute or feature. Contact groups that are stored into the contact information database in the memory of the terminal may be shown in a list on the contact groups page . A symbol may be used to indicate that the name in the list represents a contact group.

Whilst determining the availability status of all the contacts in the contacts database represents the optimum manner in keeping the availability status correct it is also possible for the availability status of subgroups of the entire contacts list to be determined. There are different ways in which a subgroup can be determined. For example for those contacts in the contact list where information has been received of their relatively long term constant unavailability status for example stating that that contact is to be away for three weeks see later rich presence data they can be excluded from the subgroup whose availability status is to be checked more regularly. Their exclusion from the subgroup of contacts whose current availability is to be checked can be changed when the time period specified for them being away expires.

The same applies to the do not disturb category which may have an expiry time associated with it for this constant status and which could also be excluded from any availability status checking subgroup.

The subgroup for which the current availability status is to be requested can be determined in many different ways and this advantageously provides a way of reducing the required amount of information for updating the contacts list with availability data.

Whatever the size of the subgroup or group the status availability information is obtained by sending a single batch of availability requests to the status server .

The present invention has been described with references to embodiments shown in the appended drawings but it is to be appreciated that a person skilled in the art understands that the present embodiments are exemplary only and can be modified without departure from the spirit and scope of the present invention. For example a desired communication type may be for example a GSM call. In such an embodiment with reference to the status server may send the message requesting the registration status of the user terminal to a Home Location Register HLR of the target user terminal s home PLMN. The status server may use e.g. a Mobile Application Part MAP protocol message to interrogate the HLR.

The status server or any of the communication servers may also be arranged to store and deliver a versatile set of presence information for users. In such a rich presence information the users may register as being in practically any state of presence. For example the user may indicate that he is in a particular physical location such as in a meeting room or in a car and or involved in a particular activity such as being in a fast moving vehicle. The user may have a different state of presence at different times a day and or with respect to the type of party requesting the presence information. For example outside office hours the user may want to indicate to his colleagues that he is not available for any type of communication but for his family members that he is indeed available.

The user may configure the mobile user terminal to register a new presence status when he changes the user profile of his mobile terminal in other words the change of user profile can be a trigger event. For example when the user activates the meeting profile the mobile user terminal may automatically send an update to the user s presence state. The mobile user terminal may further be configured to update the user s mobile terminal s presence status according to changes in cell identification and or network identification information that the mobile user terminal receives from a new cell and or network to which the mobile user terminal is handed off or roams. The mobile user terminal may also be configured to update the presence status according to phone use or call activity. For example the mobile terminal may be configured to update the presence status such that incoming calls are rejected when the user is engaged in a call or is using the mobile terminal s calendar functions. The mobile terminal may also show the user s presence state in a Screensaver.

 Rich presence data may be communicated to the status server communication servers or any other server providing a presence service by means of for example the message body of a SIP REGISTER message. The message body may be in XML format for example which allows flexible structure and content of the body.

