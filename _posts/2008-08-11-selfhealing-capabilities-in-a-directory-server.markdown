---

title: Self-healing capabilities in a directory server
abstract: A novel manner of handling an error or exception caused by the unavailability of a slot or crypto hardware or communication network between server and hardware. As per this scheme, in the event of the unavailability of a particular slot in the hardware, the server may disable the SSL request processing within the server by setting a global “SSL Unavailable” flag. All the existing SSL requests within the server can be en-queued. If the error is because of unavailability of master slot, the server can establish a connection with a backup slot. If the error is because of unavailability of crypto hardware or communication network, then server may start a healer thread that will poll for the state of the hardware. If the exception is because of hardware reset, then server may cleanup earlier connection information and re-establish connection with the hardware, and enable SSL services.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07949894&OS=07949894&RS=07949894
owner: International Business Machines Corporation
number: 07949894
owner_city: Armonk
owner_country: US
publication_date: 20080811
---
Authorized applications that require a highly secured environment for cryptographic components generally use a cryptographic card that serves as storage for cryptographic keys.

An LDAP Lightweight Directory Access Protocol directory normally uses cryptographic keys for SSL Secure Sockets Layer based authentication. The server establishes connection with the crypto hardware during startup using the vendor specific APIs application programming interfaces . This connection is kept persistent throughout the lifetime of server. When the LDAP clients send requests to the server over SSL connection the server retrieves a security certificate corresponding to the client from the hardware and compares it with the one provided by the client. If the two certificates match the client is authenticated.

Broadly contemplated herein in accordance with at least one embodiment of the invention is a novel manner of handling an error or exception caused by the unavailability of a slot or crypto hardware or communication network between server and hardware. As per this scheme in the event of the unavailability of a particular slot in the hardware the server will disable the SSL request processing within the server by setting a global SSL Unavailable flag. All the existing SSL requests within the server will be en queued and the server will establish a connection with a backup slot. Thus all SSL handshaking operations will be done using a backup slot having copies of all certificates present on the master slot. The SSL Unavailable flag will then be reset back to false and all the en queued SSL requests will be processed as usual along with new incoming SSL request. If the error is because of unavailability of crypto hardware or communication network then the server will start a healer thread that will poll for the state of the hardware. As soon as it detects that the hardware is up it will re establish connection with the hardware and enable SSL services by resetting a SSL Unavailable flag to false. If the exception is because of hardware reset then the server will cleanup earlier connection information and re establish connection with the hardware and enable SSL services by resetting a SSL Unavailable flag to false.

In summary this disclosure describes a method including an unavailable connection medium between a server and hardware disabling SSL request processing associated with the server remedying the unavailable connection medium to thereby reestablish a connection medium between the server and hardware and thereafter re enabling SSL services.

This disclosure also describes an apparatus including computer system hardware an ascertainer which ascertains an unavailable connection medium between a server and the hardware an SSL service manager which disables SSL request processing associated with the server and a remedial element which remedies the unavailable connection medium the SSL service manager acting to re enable SSL services subsequent to remedying of the unavailable connection medium.

Furthermore this disclosure also describes a program storage device readable by machine tangibly embodying a program of instructions executable by the machine to perform a method including ascertaining an unavailable connection medium between a server and hardware disabling SSL request processing associated with the server remedying the unavailable connection medium to thereby reestablish a connection medium between the server and hardware and thereafter re enabling SSL services.

It will be readily understood that the embodiments of the invention as generally described and illustrated in the Figures herein may be arranged and designed in a wide variety of different configurations. Thus the following more detailed description of the embodiments of the apparatus system and method of the embodiments of the invention as represented in is not intended to limit the scope but is merely representative of selected embodiments of the invention.

Reference throughout this specification to one embodiment or an embodiment or the like means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the invention. Thus appearances of the phrases in one embodiment or in an embodiment in various places throughout this specification are not necessarily all referring to the same embodiment.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of programming software modules user selections network transactions database queries database structures hardware modules hardware circuits hardware chips etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that embodiment of the invention can be practiced without one or more of the specific details or with other methods components materials etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of embodiments of the invention.

The illustrated embodiments of the invention will be understood by reference to the drawings wherein like parts are designated by like numerals or other labels throughout. The following description is intended only by way of example and simply illustrates certain selected embodiments of devices systems and processes.

Referring now to there is depicted a block diagram of an embodiment of a computer system . The embodiment depicted in may be a notebook computer system such as one of the ThinkPad series of personal computers previously sold by the International Business Machines Corporation of Armonk N.Y. and now sold by Lenovo US Inc. of Morrisville N.C. however as will become apparent from the following description the embodiments of the invention may be applicable to any data processing system. Notebook computers as may be generally referred to or understood herein may also alternatively be referred to as notebooks laptops laptop computers or mobile computers .

As shown in computer system includes at least one system processor which is coupled to a Read Only Memory ROM and a system memory by a processor bus . System processor which may comprise one of the AMD line of processors produced by AMD Corporation or a processor produced by Intel Corporation is a general purpose processor that executes boot code stored within ROM at power on and thereafter processes data under the control of operating system and application software stored in system memory . System processor is coupled via processor bus and host bridge to Peripheral Component Interconnect PCI local bus .

PCI local bus supports the attachment of a number of devices including adapters and bridges. Among these devices is network adapter which interfaces computer system to a local area network LAN and graphics adapter which interfaces computer system to display . Communication on PCI local bus is governed by local PCI controller which is in turn coupled to non volatile random access memory NVRAM via memory bus . Local PCI controller can be coupled to additional buses and devices via a second host bridge .

Computer system further includes Industry Standard Architecture ISA bus which is coupled to PCI local bus by ISA bridge . Coupled to ISA bus is an input output I O controller which controls communication between computer system and attached peripheral devices such as a keyboard and mouse. In addition I O controller supports external communication by computer system via serial and parallel ports including communication over a wide area network WAN such as the Internet. A disk controller is in communication with a disk drive for accessing external memory. Of course it should be appreciated that the system may be built with different chip sets and a different bus structure as well as with any other suitable substitute components while providing comparable or analogous functions to those discussed above.

Reference may now be made herethroughout to the flowcharts provided in and corresponding to logic in mainline code of the server and in corresponding to logic of a healer thread in accordance with an embodiment of the invention. It should be understood that the processes broadly contemplated in accordance with can be applied to a very wide range of computer systems including that indicated at in .

As mentioned above broadly contemplated herein in accordance with at least one embodiment of the invention is a novel manner of handling an error or exception caused by the unavailability of a slot or crypto hardware or communication network between server and hardware. As per this scheme in the event of the unavailability of a particular slot in the hardware the server may disable the SSL request processing within the server by setting a global SSL Unavailable flag. Existing SSL requests within the server may be en queued and the server may establish a connection with a backup slot. Thus all SSL handshaking operations may be done using a backup slot having copies of all certificates present on the master slot. The SSL Unavailable flag may then be reset back to false and the en queued SSL requests may be processed as usual along with new incoming SSL request.

In case of h w hardware or network unavailability the server may disable the SSL request processing within the server by setting a global SSL Unavailable flag. It may also start a new thread that will serve the purpose of self healing the server. This thread may start a status check loop that will poll the crypto hardware periodically.

In case of h w reset if the server tries to communicate with the h w using the existing connection information which no longer exists an unconditional exception or error might be returned by the crypto library. On receiving such exception or error the server may set the global SSL Unavailable flag and en queue all the existing SSL requests. It may then re initialize the connection with the hardware reset the SSL Unavailable flag to false and process the en queued SSL requests as usual along with new incoming SSL request.

Thus to briefly summarize and recapitulate in case of the unavailability of a master slot the server may continue to serve the SSL requests by switching the connection to a backup slot. In case of hardware or network unavailability this scheme may enable the server to remain available and hence serve the non SSL requests as usual. It may also enable the server to start the SSL request processing automatically when the crypto hardware becomes available. In case of hardware reset it may just reinitialize the connection with the hardware and resume the request processing avoiding any downtime.

In order for this scheme to work the administrator may configure a backup slot that holds the copy of certificates present in the master slot so that server can establish connection with the backup slot if the master slot fails. An example of this LDIF configuration entry could be as given below 

Note There might be more attributes required in the configuration entry which are necessary to connect to the hardware depending on the type of interface used for connection e.g. PKCS 11 As well known to those of ordinary skill in the art PKCS refers to a group of Public Key Cryptography Standards devised and published by RSA Security. PKCS 11 is one of the family of PKCS. It defines a platform independent API to cryptographic tokens such as Hardware Security Modules and smart cards. It is often used to refer to the API as well as the standard that defines it. 

If the error is because of unavailability of the master slot check if a backup slot is configured. This may be done by reading the LDIF entry corresponding to the crypto hardware configuration in the configuration file.

If the backup slot is configured all the existing SSL requests may be en queued so that those can be processed afterwards. Then a connection with the backup slot may be initialized using the information provided for backup slot in the configuration entry. The global SSL Unavailable flag may be set to false so that new SSL requests can be accepted. Finally all the existing en queued requests may be processed.

If there is an error because of the unavailability of hardware or a communication network the Healer thread may be started. This thread may start a hardware polling loop. If the polling shows that the hardware is available it may re initialize and establish a new connection with the crypto hardware so that the server can start processing SSL requests. It may also set the SSL Unavailable flag to false.

If the exception is because of reset of crypto hardware all existing SSL requests may be en queued. The connection with the h w may be reinitialized then the SSL Unavailable flag may be reset to false to allow all new SSL requests again. Finally all en queued SSL requests may be processed.

It is to be understood an embodiments of the invention may include elements that may be implemented on at least one general purpose computer running suitable software programs. These may also be implemented on at least one Integrated Circuit or part of at least one Integrated Circuit. Thus it is to be understood that the embodiments of the invention may be implemented in hardware software or a combination of both.

Generally embodiments may take the form of an entirely hardware embodiment an entirely software embodiment or an embodiment containing both hardware and software elements. An embodiment that is implemented in software may include but is not limited to firmware resident software microcode etc.

Furthermore embodiments may take the form of a computer program product accessible from a computer usable or computer readable medium providing program code for use by or in connection with a computer or any instruction execution system. For the purposes of this description a computer usable or computer readable medium can be any apparatus that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device.

The medium can be an electronic magnetic optical electromagnetic infrared or semiconductor system or apparatus or device or a propagation medium. Examples of a computer readable medium include a semiconductor or solid state memory magnetic tape a removable computer diskette a random access memory RAM a read only memory ROM a rigid magnetic disk and an optical disk. Current examples of optical disks include compact disk read only memory CD ROM compact disk read write CD R W and DVD.

A data processing system suitable for storing and or executing program code may include at least one processor coupled directly or indirectly to memory elements through a system bus. The memory elements can include local memory employed during actual execution of the program code bulk storage and cache memories which provide temporary storage of at least some program code in order to reduce the number of times code must be retrieved from bulk storage during execution.

Input output or I O devices including but not limited to keyboards displays pointing devices etc. can be coupled to the system either directly or through intervening I O controllers.

Network adapters may also be coupled to the system to enable the data processing system to become coupled to other data processing systems or remote printers or storage devices through intervening private or public networks. Modems cable modems and Ethernet cards are just a few of the currently available types of network adapters.

This disclosure has been presented for purposes of illustration and description but is not intended to be exhaustive or limiting. Many modifications and variations will be apparent to those of ordinary skill in the art. The embodiments were chosen and described in order to explain principles and practical application and to enable others of ordinary skill in the art to understand the disclosure for various embodiments with various modifications as are suited to the particular use contemplated.

Generally although illustrative embodiments of the invention have been described herein with reference to the accompanying drawings it is to be understood that this disclosure is not limited to those precise embodiments.

