---

title: Calibration apparatus and method of calibrating a communications terminal
abstract: A calibration apparatus for calibrating a communications terminal comprises a data store arranged to store amplifier unspecific power control data, and a processing resource arranged to receive a first indication of a first desired output power level and a second indication of a second desired output power level. The processing resource retrieves from the data store a first amplifier unspecific value associated with the first desired output power level and a second amplifier unspecific value associated with the second desired output power level. An amplifier is operably coupled to the processing resource and arranged to generate a first output signal and a second output signal corresponding to the first and second retrieved values. The processing resource is arranged to receive a first measured value and a second measured value. Also, the processing resource is arranged to support an interpolator for performing an interpolation using the first and second measured values.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08463193&OS=08463193&RS=08463193
owner: Freescale Semiconductor, Inc.
number: 08463193
owner_city: Austin
owner_country: US
publication_date: 20080826
---
This invention relates to a calibration apparatus of the type that for example supports communication of amplifier output power data between a baseband subsystem and an RF subsystem. This invention also relates to a method of calibrating a communications terminal the method being of the type that for example is used to calibrate control of an amplifier of the communications terminal.

In the field of wireless communications it is known to provide wireless communications devices for example mobile communications devices such as wireless cellular communications terminals with a baseband Integrated Circuit IC and a Radio Frequency RF IC. Specification version 3.09 from the standards working group of the Third Generation Partnership Project 3GPP describes a so called DigRF 3G interface in order to support a connection between any baseband IC and an RF IC. In particular the DigRF 3G interface specifies a data block used to transfer data time accurate strobes and control data between the baseband IC and the RF IC during operation of the cellular communications terminal.

Application Programming Interfaces APIs can be and are developed that support communication of commands from the baseband IC to the RF IC the APIs requiring the development of drivers therefore. One known API an Amplifier Output Control AOC API sometimes referred to as a Power Amplifier Control PAC API includes a so called GT2 command for transmitter programming. The GT2 command is relatively complex and development of a layer driver to support the AOC API is similarly complex and has to be done on a per RF IC basis in order to support particular performance characteristics of the RF IC. Development of the layer driver includes derivation of a complex look up table that is stored in non volatile memory of the baseband IC in order to enable output power levels of a power amplifier of the RF IC to be targeted.

In an effort to reduce the complexity associated with driver development a so called Smart AOC API was designed and is employed in the RFX300 40 RF subsystem available from Freescale Semiconductors Inc. The Smart AOC API introduces a new command the GT1 command for transmitter programming. The Smart AOC API has a significantly simpler payload structure than that of the GT2 command mentioned above and provides certain known benefits during use of the cellular communications terminal post manufacture. Indeed the simplicity of the Smart AOC API provides numerous advantages one of the most important being speed of configuration of the transmitter and receiver of the RF IC by the baseband IC. To achieve this a look up table similar in nature to that derived for the GT2 command is developed and stored in non volatile memory of the RF IC.

By way of example of the simplicity of the Smart AOC API in order to target a predetermined output power level for example 33 dBm the GT2 command structure requires the baseband IC to specify a so called AOC parameter that allows choice of efficiency trade offs at a given power level for example bias of the power amplifier and a 12 bit Digital to Analogue Converter DAC word conforming to specification version 45.005 from the standards working group of 3GPP in relation to specifying power steps. In contrast the GT1 command of the Smart AOC simply requires the baseband IC to specify a 5 bit word identifying a so called Power Control Level PCL code. Of course each of the GT1 and GT2 commands requires the baseband IC to specify other parameters but the above two differences are most notable in the present comparison. Indeed software engineers developing the baseband IC have less development work because a local look up table is no longer required. Additionally the payload of the GT1 command has fewer parameters associated therewith as compared with the payload of the GT2 command.

However by simplifying the baseband IC development effort is transferred to development of the RF IC. In this respect the GT2 command is used by developers of the layer driver for the GT1 command in order to generate a look up table for use by the RF IC locally in relation to the GT1 command. The look up table is manually generated and so labour intensive and particular to the RF IC for which the layer driver for the GT1 command is to support.

During manufacture of the wireless cellular communications terminal and prior to dispatch thereof from a manufacturing facility it is known to calibrate the RF IC in order to ensure accurate and reliable operation of the communications terminal. If the GT2 command is to be used by a manufacturer calibration has to be performed in respect of the GT2 command. Similarly if the GT1 command of the Smart AOC API is to be used calibration has to be performed in respect of the GT1 command. However as mentioned above in order to use the GT1 command of the Smart AOC API it is necessary to develop the layer driver for the GT1 command and this requires the layer driver for the GT2 command to have been developed i.e. two drivers have to be developed in order to be able to use the GT1 command. Consequently if considerable effort has been expended in the development of the layer driver to support the GT2 command fewer advantages remain in respect of continuing and developing the layer driver to support the GT1 command of the Smart AOC API. The GT2 command whilst more complicated than the GT1 command can serve the purpose of the GT1 command in many respects the additional remaining benefits of the GT1 command of the Smart AOC API not meriting the additional development effort required to support the GT1 command. It therefore follows that currently it is uneconomic to develop the layer driver for the GT1 command for calibration purposes because the more complex driver for the GT2 command would in any event need to be developed and in most cases can be used for most applications.

The present invention provides a calibration apparatus as described in the accompanying claims. The present invention also provides a method of calibrating a communications terminal as described in the accompanying claims.

These and other aspects of the invention will be apparent from and elucidated with reference to the embodiments described hereinafter.

Any semiconductor substrate described herein can be any semiconductor material or combinations of materials such as gallium arsenide silicon germanium silicon on insulator SOI silicon monocrystalline silicon the like and combinations of the above.

Referring to a calibration system may comprise a protocol tester for example a Rhode Schwarz CMU200 Universal Radio Communication Tester coupled to a subsystem circuit board the subsystem circuit board being coupled to a general purpose interface card supporting for example a Universal Serial Bus USB or a Universal Asynchronous Receiver Transmitter UART . The general purpose interface card is coupled to a computing apparatus for example a Personal Computer PC capable of executing LabVIEW available from National Instruments Corporation.

Turning to in this example the subsystem circuit board is part of a wireless communications terminal for example a cellular communications terminal such as a cellular communications handset. The subsystem circuit board comprises a baseband IC operably coupled to a transceiver IC the transceiver IC being coupled to a power amplifier circuit . The LNA circuit is operably coupled to an antenna switch the antenna switch being coupled to an antenna port . The subsystem circuit board is coupled to the protocol tester via the antenna port . The transceiver the LNA circuit and the antenna switch constitute in overview an RF subsystem.

Referring to the RF subsystem for example an RFX300 40 IC available from Freescale Semiconductor Inc. comprises the transceiver IC transceiver IC comprising a power controller module a transmitter modulator module transmitter driver modules receiver input modules a phase locked loop and voltage controlled oscillator module and a DigRF 3G interface module . Additionally the transceiver IC implements a calibration apparatus comprising a non volatile memory for example a digital memory to serve as a data store and a processing resource for example an on board microcontroller. However the skilled person should appreciate that the microcontroller need not be provided as part of the transceiver IC if warranted by a given application.

A transmission path of RF subsystem comprises the transceiver IC coupled to a Global System for Mobile communications GSM Enhanced Data rates for GSM Evolution EDGE power amplifier a Direct Current DC DC converter and a Wideband Code Division Multiple Access WCDMA power amplifier comprising a first input band pass filter coupled to WCDMA power amplifier modules the WCDMA power amplifier modules being coupled to an output band pass filter . The WCDMA power amplifier also comprises a second input band pass filter . The GSM EDGE power amplifier and the WCDMA power amplifier are coupled to the antenna switch the DC DC converter being coupled to the WCDMA power amplifier .

A reception path of the RF subsystem also comprises in this example a tri band LNA coupled to the second input band pass filter the tri band LNA being coupled to the transceiver IC via a first Surface Acoustic Wave filters module . The antenna switch is also coupled to the transceiver IC via a second SAW filters module . Transmission and receive paths are thereby provided for both GSM and WCDMA communications.

In accordance with specification version 3.09 from the standards working group of the 3GPP a DigRF 3G interface is supported by the DigRF 3G interface module of the transceiver module and a corresponding DigRF 3G interface module of the baseband IC the baseband IC also comprising an image processing unit an Advanced RISC Machines ARM application processor memory and peripherals and a StarCore Digital Signal Processor DSP . The DigRF 3G interface is supported by the following lines coupled between the baseband IC and the transceiver IC a master reference clock line SysClk a master reference clock enable line SysClkEn a Temperature Compensated Crystal Oscillator TCXO reference enable line Ref En B a transmit data interface TxDataP TxDataN line and a receive data interface RxDataP RxDataN line .

The skilled person will appreciate that other parts modules and or components exist in relation to the baseband IC the RF subsystem and coupling therebetween. However for the sake of clarity and conciseness of description the level of detail used above to describe the baseband IC the RF subsystem and coupling therebetween has been limited but such additional detail should be apparent to the skilled person.

Referring to during development of the RF subsystem a look up table is generated Step and stored in the non volatile memory not shown of the transceiver IC . In this respect the look up table is generic in nature and amplifier non specific. The look up table comprises PCL codes PCL power values POW AOC values AOC and DAC values. The PCL codes are identifiers corresponding to power step levels as defined by the 3GPP in specifications version 45.005 of the standards working group of the 3GPP. The AOC values constitute AOC parameter data and the DAC values constitute amplifier control value data. The table is populated by values that are calculated to provide reasonable amplifier power output levels when applied to any number of suitable power amplifier i.e. irrespective of the specific amplifier circuit employed the same look up table can be used. The look up table is compatible with the GT1 command of the Smart AOC API supported by the RF subsystem .

As part of a calibration process for example during manufacture of the cellular communications handset comprising the RF subsystem the PC using the LabVIEW software places the baseband IC into a non call mode and sends Step a first GT1 command to the baseband IC via the general purpose interface . In response the baseband IC communicates the first GT1 command to the transceiver IC via the DigRF 3G interface . The GT1 command includes a first indication of a first output power level that is desired for example PCL5 . As the content of the look up table is known to the LabVIEW software the first output power level desired is pre selected to be a penultimate magnitude output power level of the range of output power levels stored in the look up table i.e. a second from lowest value for example PCL6 . In response to receipt of the first GT1 command the transceiver IC accesses the look up table stored in the data store supported by the non volatile memory and retrieves a first AOC value and a first DAC value corresponding to the PCL6 code word. In this example the first AOC value is 1 and the first DAC value is 734 . The first AOC and DAC values are then processed by an internal state machine of the RF IC supported by the microcontroller mentioned above and are used by the state machine to set the GSM EDGE power amplifier . In response the GSM EDGE power amplifier outputs a first modulated RF output signal constituting a first output signal.

The first output signal has an output power level that constitutes an attempt to attain the output power level indicated in the first GT1 command. The protocol tester then measures Step the first output signal to yield a first measured output power value that is provided by a user of the calibration system to the LabVIEW software. The first measured output power value is then passed back to the transceiver IC via the general purpose interface and the baseband IC the first measured output power value being stored Step by the controller of the transceiver IC in the data store supported by the non volatile memory.

Thereafter the PC using the LabVIEW software sends Step a second GT1 command to the baseband IC via the general purpose interface . In response the baseband IC communicates the second GT1 command to the transceiver IC via the DigRF 3G interface . The second GT1 command includes a second indication of a second output power level that is desired for example PCL18 . As the content of the look up table is known to the LabVIEW software the second output power level desired is pre selected to be another penultimate magnitude output power level at a second end of the range of output power levels stored in the look up table i.e. a second from highest value. In response to receipt of the second GT1 command the transceiver IC accesses the look up table stored in the data store supported by the non volatile memory and retrieves a second AOC value and a second DAC value corresponding to the PCL18 code word. In this example the second AOC value is 13 and the second DAC value is 370 . The second AOC and DAC values are then again processed by the state machine of the RF IC in a like manner to that described above in relation to the first AOC and DAC values resulting in the GSM EDGE power amplifier being set so as to output a second modulated RF output signal constituting a second output signal.

The second output signal has an output power level that constitutes an attempt to attain the output power level indicated in the second GT1 command. The protocol tester then measures Step the second output signal to yield a second measured output power value that is provided by the user of the calibration system to the LabVIEW software. The second measured output power value is then passed back to the transceiver IC via the general purpose interface and the baseband IC the second measured output power value being stored Step by the controller of the transceiver IC in the data store supported by the non volatile memory .

Once the first and second measured output power values have been stored by the transceiver IC the first and second stored measured output power values can be used in a number of ways two examples of which are set out below.

In a first example once the first and second measured output power values have been stored in the data store the controller of the transceiver IC retrieves the first and second stored measured output power values Steps and and provides the interpolator with the first and second measured output power values. The interpolator implementing an interpolation algorithm for example a linear interpolation algorithm of a non linear interpolation algorithm such as a logarithmic interpolation algorithm performs an interpolation Step using the first and second measured output power values and generates an output power look up table using the results of the interpolation performed the values of the output power look up table generated being stored Step in the data store. The choice of interpolation to be performed depends upon whether the GSM EDGE power amplifier has a linear or non linear performance characteristic. The output power look up table comprises PCL step words in accordance with specification version 45.005 of the standards working group of the 3GPP referenced to corresponding DAC values calculated using the interpolation and corresponding AOC parameters the AOC parameters having already been defined during characterisation of the generic look up table mentioned above. The output power look up table enables output power levels of the amplifier to be set using a hardware agnostic API. In this example the hardware agnostic API is the Smart AOC API devices external to the transceiver IC for example the baseband IC not requiring knowledge of parameters associated with setting the output power of the amplifier other than a target power level desired.

The output power look up table generated in contrast with the look up table used to generate the measured values is specific to the hardware implementation in which the transceiver IC is disposed and can be accessed subsequently by the transceiver IC in response to a GT1 command sent from the baseband IC during normal operation of the cellular communications handset.

Turning to in another example the interpolation is not pre performed and the results stored in the data store in the non volatile memory . Instead after the terminal is powered up Step during normal use thereof the generation of the output power look up table is determined on the fly using the interpolation algorithm. Consequently the controller of the transceiver IC retrieves the first measured output power value Step and second stored measured output power value Step . The interpolator implementing one of the interpolation algorithms mentioned above performs the interpolation Step using the first and second measured output power values and generates and the output power look up table using the results of the interpolation performed in a like manner to that described above in relation to the preceding example the values of the output power look up table generated being stored Step in the data store but in volatile memory not shown of the transceiver IC .

It should be appreciated that the above example has been described in the context of a single GSM band . However the above technique for generation and or use of the output power look up table is repeated for other bands. Additionally or alternatively although not described above the above techniques can be employed in relation to the WCDMA power amplifier .

It is thus possible to provide a calibration apparatus and a method of calibrating communications terminal that enables use of a hardware agnostic application programming interface between for example a baseband IC and a transceiver IC. The use of the hardware agnostic application programming interface is possible whilst mitigating the need to develop a first layer driver in order to develop a second layer driver for the hardware agnostic application programming interface thereby reducing development time associated with an RF subsystem of a communications terminal and hence development cost. The calibration apparatus and method also makes use of the hardware agnostic applications programming interface viable in relation to setting an output power level of an amplifier.

Of course the above advantages are exemplary and these or other advantages may be achieved by the invention. Further the skilled person will appreciate that not all advantages stated above are necessarily achieved by embodiments described herein.

The invention may also be implemented in a computer program for running on a computer system at least including code portions for performing steps of a method according to the invention when run on a programmable apparatus such as a computer system or enabling a programmable apparatus to perform functions of a device or system according to the invention. The computer program may for instance include one or more of a subroutine a function a procedure an object method an object implementation an executable application an applet a servlet a source code an object code a shared library dynamic load library and or other sequence of instructions designed for execution on a computer system. The computer program may be provided on a data carrier such as a CD ROM or diskette stored with data loadable in a memory of a computer system the data representing the computer program. The data carrier may further be a data connection such as a telephone cable or a wireless connection.

In the foregoing specification the invention has been described with reference to specific examples of embodiments of the invention. It will however be evident that various modifications and changes may be made therein without departing from the broader spirit and scope of the invention as set forth in the appended claims. For example the connections may be an type of connection suitable to transfer signals from or to the respective nodes units or devices for example via intermediate devices. Accordingly unless implied or stated otherwise the connections may for example be direct connections or indirect connections.

As used herein the term bus is used to refer to a plurality of signals or conductors which may be used to transfer one The terms assert or set and negate or deassert or clear are used herein when referring to the rendering of a signal status bit or similar apparatus into its logically true or logically false state respectively. If the logically true state is a logic level one the logically false state is a logic level zero. And if the logically true state is a logic level zero the logically false state is a logic level one.

Each signal described herein may be designed as positive or negative logic where negative logic can be indicated by a bar over the signal name or an asterisk following the name. In the case of a negative logic signal the signal is active low where the logically true state corresponds to a logic level zero. In the case of a positive logic signal the signal is active high where the logically true state corresponds to a logic level one. Note that any of the signals described herein can be designed as either negative or positive logic signals. Therefore in alternate embodiments those signals described as positive logic signals may be implemented as negative logic signals and those signals described as negative logic signals may be implemented as positive logic signals.

The conductors as discussed herein may be illustrated or described in reference to being a single conductor a plurality of conductors unidirectional conductors or bidirectional conductors. However different embodiments may vary the implementation of the conductors. For example separate unidirectional conductors may be used rather than bidirectional conductors and vice versa. Also plurality of conductors may be replaced with a single conductor that transfers multiple signals serially or in a time multiplexed manner. Likewise single conductors carrying multiple signals may be separated out into various different conductors carrying subsets of these signals. Therefore many options exist for transferring signals.

Because the apparatus implementing the present invention is for the most part composed of electronic components and circuits known to those skilled in the art circuit details will not be explained in any greater extent than that considered necessary as illustrated above for the understanding and appreciation of the underlying concepts of the present invention and in order not to obfuscate or distract from the teachings of the present invention.

Although the invention has been described with respect to specific conductivity types or polarity of potentials skilled artisans appreciated that conductivity types and polarities of potentials may be reversed.

Moreover the terms front back top bottom over under and the like in the description and in the claims if any are used for descriptive purposes and not necessarily for describing permanent relative positions. It is understood that the terms so used are interchangeable under appropriate circumstances such that the embodiments of the invention described herein are for example capable of operation in other orientations than those illustrated or otherwise described herein.

The term program where used herein is defined as a sequence of instructions designed for execution on a computer system. A program or computer program may include a subroutine a function a procedure an object method an object implementation an executable application an applet a servlet a source code an object code a shared library dynamic load library and or other sequence of instructions designed for execution on a computer system.

Some of the above embodiments as applicable may be implemented using a variety of different information processing systems. For example although and the discussion thereof describe an exemplary information processing architecture this exemplary architecture is presented merely to provide a useful reference in discussing various aspects of the invention. Of course the description of the architecture has been simplified for purposes of discussion and it is just one of many different types of appropriate architectures that may be used in accordance with the invention. Those skilled in the art will recognize that the boundaries between logic blocks are merely illustrative and that alternative embodiments may merge logic blocks or circuit elements or impose an alternate decomposition of functionality upon various logic blocks or circuit elements.

Thus it is to be understood that the architectures depicted herein are merely exemplary and that in fact many other architectures can be implemented which achieve the same functionality. In an abstract but still definite sense any arrangement of components to achieve the same functionality is effectively associated such that the desired functionality is achieved. Hence any two components herein combined to achieve a particular functionality can be seen as associated with each other such that the desired functionality is achieved irrespective of architectures or intermedial components. Likewise any two components so associated can also be viewed as being operably connected or operably coupled to each other to achieve the desired functionality.

Also for example in one embodiment the illustrated elements of transceiver IC are circuitry located on a single integrated circuit or within a same device. Alternatively transceiver IC may include any number of separate integrated circuits or separate devices interconnected with each other. For example non volatile memory may be located on a same integrated circuit as the controller or on a separate integrated circuit or located within another peripheral or slave discretely separate from other elements of transceiver IC . Also for example the functionality of the transceiver IC or portions thereof may be soft or code representations of physical circuitry or of logical representations convertible into physical circuitry. As such transceiver IC may be embodied in a hardware description language of any appropriate type.

Furthermore those skilled in the art will recognize that boundaries between the functionality of the above described operations merely illustrative. The functionality of multiple operations may be combined into a single operation and or the functionality of a single operation may be distributed in additional operations. Moreover alternative embodiments may include multiple instances of a particular operation and the order of operations may be altered in various other embodiments.

All or some of the software described herein may be received elements of the interpolator for example from computer readable media such as the non volatile memory or other media on other computer systems. Such computer readable media may be permanently removably or remotely coupled to an information processing system such as transceiver IC . The computer readable media may include for example and without limitation any number of the following magnetic storage media including disk and tape storage media optical storage media such as compact disk media e.g. CD ROM CD R etc. and digital video disk storage media nonvolatile memory storage media including semiconductor based memory units such as FLASH memory EEPROM EPROM ROM ferromagnetic digital memories MRAM volatile storage media including registers buffers or caches main memory RAM etc. and data transmission media including computer networks point to point telecommunication equipment and carrier wave transmission media just to name a few.

In one embodiment the computing apparatus described above is a computer system such as a personal computer system. Other embodiments may include different types of computer systems. Computer systems are information handling systems which can be designed to give independent computing power to one or more users. Computer systems may be found in many forms including but not limited to mainframes minicomputers servers workstations personal computers notepads personal digital assistants electronic games automotive and other embedded systems cell phones and various other wireless devices. A typical computer system includes at least one processing unit associated memory and a number of input output I O devices.

A computer system processes information according to a program and produces resultant output information via I O devices. A program is a list of instructions such as a particular application program and or an operating system. A computer program is typically stored internally on computer readable storage medium or transmitted to the computer system via a computer readable transmission medium. A computer process typically includes an executing running program or portion of a program current program values and state information and the resources used by the operating system to manage the execution of the process. A parent process may spawn other child processes to help perform the overall functionality of the parent process. Because the parent process specifically spawns the child processes to perform a portion of the overall functionality of the parent process the functions performed by child processes and grandchild processes etc. may sometimes be described as being performed by the parent process.

Also the invention is not limited to physical devices or units implemented in non programmable hardware but can also be applied in programmable devices or units able to perform the desired device functions by operating in accordance with suitable program code. Furthermore the devices may be physically distributed over a number of apparatuses while functionally operating as a single device. For example 

However other modifications variations and alternatives are also possible. The specifications and drawings are accordingly to be regarded in an illustrative rather than in a restrictive sense.

In the claims any reference signs placed between parentheses shall not be construed as limiting the claim. The word comprising does not exclude the presence of other elements or steps then those listed in a claim. Furthermore Furthermore the terms a or an as used herein are defined as one or more than one. Also the use of introductory phrases such as at least one and one or more in the claims should not be construed to imply that the introduction of another claim element by the indefinite articles a or an limits any particular claim containing such introduced claim element to inventions containing only one such element even when the same claim includes the introductory phrases one or more or at least one and indefinite articles such as a or an. The same holds true for the use of definite articles. Unless stated otherwise terms such as first and second are used to arbitrarily distinguish between the elements such terms describe. Thus these terms are not necessarily intended to indicate temporal or other prioritization of such elements The mere fact that certain measures are recited in mutually different claims does not indicate that a combination of these measures cannot be used to advantage.

