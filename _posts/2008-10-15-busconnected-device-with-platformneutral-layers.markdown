---

title: Bus-connected device with platform-neutral layers
abstract: A bus-connected device includes a data storage element, a physical layer and a controller. The data storage element stores user data and multiple adaptations for multiple platform protocols. The physical layer uses at least a portion of a selected one of the multiple platform protocols to access the user data. The controller controls and communicates with the data storage element using a controller communication protocol that is neutral relative to the multiple platform protocols.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07904630&OS=07904630&RS=07904630
owner: Seagate Technology LLC
number: 07904630
owner_city: Scotts Valley
owner_country: US
publication_date: 20081015
---
The present invention relates generally to bus connected devices and more particularly but not by limitation to adaptation of a data storage device to a computing platform.

Various computing platforms are known and these computing platforms use a number of variations of different chipsets operating systems and add on hardware. Designing disc drives and other storage devices is difficult because of the large number of platform variations. Typically an interface for the data storage device requires developing different software for each variation. The software development is time consuming expensive and redundant.

Embodiments of the present invention provide solutions to these and other problems and offer other advantages over the prior art.

In the embodiments described below a bus connected device comprises a data storage element. The data storage element stores user data. The data storage element stores multiple adaptations for multiple platform protocols.

The bus connected device comprises a physical layer. The physical layer uses at least a portion of a selected one of the multiple platform protocols to access the user data.

The bus connected device comprises a controller. The controller controls the data storage element. The controller communicates with the data storage element using a controller communication protocol. The controller communication protocol is neutral relative to the multiple platform protocols.

Other features and benefits that characterize embodiments of the present invention will be apparent upon reading the following detailed description and review of the associated drawings.

In the embodiments described below a system adapts a bus connected device to a host platform. The system includes the bus connected device. The bus connected device comprises a data storage element. The data storage element stores user data. The data storage element stores multiple adaptations of multiple platform protocols that adapt the bus connected device for interfacing with multiple host platforms. The bus connected device comprises a controller. The controller controls the data storage element. The controller communicates with the data storage element using a controller communication protocol that is neutral relative to the multiple platform protocols. A host platform couples to the bus connected device by a bus. The host platform receives at least a portion of a selected one of the multiple adaptations that corresponds with a chipset in the host platform.

The system comprises a core driver . The core driver communicates with a data storage element not illustrated in . The core driver communicates with the data storage element in a format that is associated with formatting of data in the data storage element.

In an example in which the data storage element comprises one or more magnetic data storage discs in a disc drive the core driver comprises a controller communication protocol for communicating with the data storage element. The controller communication protocol is invariant as a function of a selected platform protocol. The controller communication protocol for communicating with the magnetic data storage discs includes disc drive format features such as seeking and tracking modes preambles for synchronization error detection and correction coding sector numbers cylinder numbers physical addresses and the like. The core driver in the controller controls the data storage element as a function of the selected platform protocol. The controlling of the data storage element is adapted to the selected platform protocol however the communication protocol used in controlling is invariant as a function of the platform protocol.

The system comprises an operating system OS abstraction layer a feature manager abstraction layer and an interface abstraction layer . The core driver communicates with the OS abstraction layer along lines and . The core driver communicates with the feature manager abstraction layer along line . The core driver communicates with the interface abstraction layer along lines . The communications of the core driver along lines are communications that are formatted to be platform neutral communications. The term platform neutral communication as used in this application means communication that is formatted such that it is free of higher level layers of formatting which are different for different operating systems. Platform neutral communication is invariant as a function of the selected platform. According to one aspect platform neutral communication comprises formatting that is free of layers that are PC specific or MAC specific. According to another aspect platform neutral communication comprises formatting that is free of layers of formatting that are Windows specific OS 10 specific or UNIX specific. According to another aspect platform neutral communication comprises formatting that is at a low enough level in the sense of lower and higher levels of a multilayer communication protocol and complete enough so that the platform neutral communication can be readily converted by commands into communications that are platform specific and operating system specific. According to yet another aspect platform neutral communication does not include a complete presentation layer or a complete application layer for a particular operating system.

The operating system abstraction layer is configurable and is configured to access one of a library of different original equipment manufacturer OEM adaptation layers OAL s and . The particular OAL s illustrated in are exemplary and different OAL s can also be used. An OAL is selected that is associated with a selected operating system with which the data storage device is used. The operating system abstraction layer communicates along line with a file system associated with the selected operating system. The operating system abstraction layer communicates along line with a selected user to kernel interface input output control IOCTL associated with the selected platform and operating system. The operating system abstraction layer communicates along line with application programming interface API hints API APPLN HINT that are selected for use with the selected platform and operating system. The operating system abstraction layer communicates along lines with the interface abstraction layer .

The feature manager abstraction layer communicates along lines with the OS abstraction layer . The feature manager abstraction layer communicates along line with the interface abstraction layer . The feature manager abstraction layer accesses at least one of a library of data storage device managers such as a power manager a reliability manager a multimedia manager and a buffer manager and makes these managers available for managing the data storage element. The managers illustrated in are exemplary and different managers may also be used. The data storage device managers are specialized to the data storage element are platform neutral are not specialized to any particular operating system or platform and are available for use in conjunction with multiple platforms and protocols.

The interface abstraction layer accesses at least one of a library of specific interface abstraction layer IAL implementations . Each specific IAL implementation is associated with and communicates with a corresponding specific application programming interface API driver . Each specific API drivers is associated with and drives a specific hardware device . The communications between each specific IAL implementation and each API implementation is hardware device specific and is not platform neutral. The IAL API driver and hardware device implementations illustrated in are exemplary and other IAL API driver and hardware device implementations can be used.

A data storage device that includes the system can be used with a variety of different platforms and operating systems without the need to provide user actuated mechanical switches or jumpers and without the need to provide multiple platform specific or operating system specific circuit cards for use with the data storage device. Examples implementations in data storage devices are described in more detail below in connection with . The data storage device illustrated in is exemplary and other bus connected devices can be used as well.

The system comprises a controller that includes a core driver . The core driver communicates with the data storage element . The core driver communicates with the data storage element in a controller communication format controller communication protocol that is associated with formatting of data in the data storage element .

The controller communication protocol is invariant as a function of a selected platform protocol for the platform . The controller communication protocol for communicating with the data storage element includes disc drive format features such as seeking and tracking modes preambles for synchronization error detection and correction coding sector numbers cylinder numbers physical addresses and the like. The core driver in the disc drive controller controls the data storage element as a function of the selected platform protocol. The controlling of the data storage element is adapted to the selected platform protocol however the controller communication protocol used in the controlling the data storage element is invariant as a function of the platform protocol. The controller communication protocol includes a large set of controller commands so that enough commands are included to accommodate any selected one of multiple platforms.

The data storage device comprises a bus interface circuit . The bus interface circuit communicates along line with the controller . Communication along line comprises platform neutral communication protocol . The platform neutral communication protocol is shared by the controller and the bus interface circuit . The bus interface comprises lower levels of a bus communication protocol such as a bus data link layer and a bus physical layer . The bus interface communicates along a communication bus with a host that is running on platform . Communication along communication bus comprises platform neutral communication. Communication along bus does not include higher level layers of bus communication that include platform specific or host specific aspects. The data storage device is thus connectable by the communication bus to different platform types and host types without the need for any physical adaptation of the data storage device such as actuation of mechanical switches installation of jumpers or installation of a circuit board.

The host comprises a central processor unit CPU . The processor communicates along a front side bus with a memory controller hub that is part of a chipset . The memory controller hub communicates along a peripheral component interconnect PCI bus with a graphics adapter . The memory controller hub communicates along an internal bus in the chipset with an input output I O controller hub . The I O controller hub communicates along a low pin count LPC bus with a basic input output systems BIOS circuit . The I O controller hub communicates along the communication bus with the data storage device . The hardware configuration of the host is exemplary and other hardware configurations can be used as well.

The memory controller hub communicates along a memory bus with memory . Platform specific software such as platform specific abstraction layers a platform specific file system platform specific I O controls and other platform specific software is loaded into the memory . According to one aspect the platform specific software is specific to the type of platform and the type of host . According to another aspect at least a portion of the platform specific software is specific to the type of chipset . According to another aspect the set B of platform specific software for multiple platforms operating systems and chipsets is stored in the data storage element and at a time of startup of the data storage device by the host a single one of the set of platform specific software is selected for use and loaded into memory on the host at startup. The data storage device illustrated in is exemplary and other bus connected devices can be used as well.

The system comprises the controller that includes a core driver . The core driver communicates with the data storage element . The core driver communicates with the data storage element in a controller communication protocol that is associated with formatting of data in the data storage element similar that described above in connection with .

The controller communication protocol is invariant as a function of a selected platform protocol for platform . The controller communication protocol for communicating with the data storage element includes disc drive format features such as seeking and tracking modes preambles for synchronization error detection and correction coding sector numbers cylinder numbers physical addresses and the like. The core driver in the disc drive controller controls the data storage element as a function of the selected platform protocol. The commands selected to control the data storage element are a subset of commands of the controller communication protocol which are appropriate for the selected platform protocol. The controller communication protocol used in the controlling the data storage element however is invariant as a function of the platform protocol.

The data storage device comprises a bus interface circuit and platform specific abstraction layers . The bus interface circuit communicates along line with the platform specific abstraction layers . The platform specific abstraction layers communicate along line with the controller . Communication along line comprises communication that is formatted with a platform neutral communication protocol. The bus interface comprises lower levels of a bus communication protocol such as a bus data link layer and a bus physical layer . The bus interface communicates along a communication bus with a host that is running on the platform . Communication along communication bus comprises platform specific communication. Communication along bus includes higher level layers of bus communication that include platform specific or host specific aspects. The data storage device is connectable by the communication bus to different platform types and host types without the need for any adaptation of the data storage device to the host or platform other than selection of one set of platform specific abstraction layers for use. A set of multiple platform specific features is stored in the data storage device and the one set of platform specific abstraction layers that are in use are selected from the set . According to one aspect the set is stored in the data storage element . According to another aspect the set is stored in read only memory ROM .

The host comprises a central processor unit CPU . The processor communicates along a front side bus with a memory controller hub that is part of a chipset . The memory controller hub communicates along a peripheral component interconnect PCI bus with a graphics adapter . The memory controller hub communicates along an internal bus in the chipset with an input output I O controller hub in the chipset . The I O controller hub communicates along a low pin count LPC bus with a basic input output systems BIOS circuit . The I O controller hub communicates along the communication bus with the data storage device . The memory controller hub communicates along a memory bus with memory . The data storage device illustrated in is exemplary and other bus connected devices can be used as well.

In an embodiment of a disc drive is illustrated. Disc drive includes a pack of multiple discs having storage surfaces that are typically layers of magnetic material. The disc drive also includes a head gimbal assembly HGA that includes a read write head for each stacked disc. The head gimbal assembly is attached to an arm of a voice coil motor . The pack of discs is spun or rotated as shown by arrow to allow the head gimbal assembly to access different rotational locations for data on the storage surfaces of the discs .

The head gimbal assembly is actuated to move radially relative to the discs as shown by arrow to access different radial locations for data on the storage surfaces of discs . Typically the actuation of head gimbal assembly is provided by the voice coil motor . Voice coil motor includes a rotor that pivots on axle . The arm actuates the head gimbal assembly . Disc drive includes electronic circuitry for controlling the operation of the disc drive and transferring data in and out of the disc drive. The pack of discs and the read write heads taken together comprise a data storage element that is controlled by a disc controller portion of the electronic circuitry . User data and multiple adaptations for multiple platform protocols are stored on the pack of disc .

Aspects of the system abstraction shown in are useful in the systems illustrated in . It is to be understood that even though numerous characteristics and advantages of various aspects have been set forth in the foregoing description together with details of the structure and function of various aspects this disclosure is illustrative only and changes may be made in detail especially in matters of structure and arrangement of parts to the full extent indicated by the broad general meaning of the terms in which the appended claims are expressed. For example the particular elements may vary depending on the particular application for the data storage device while maintaining substantially the same functionality. In addition although the preferred aspects described herein is directed to a data storage device for connection to a personal computer it will be appreciated by those skilled in the art that the teachings herein can be applied to other computing devices.

