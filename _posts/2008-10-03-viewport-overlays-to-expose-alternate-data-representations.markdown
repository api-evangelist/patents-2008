---

title: Viewport overlays to expose alternate data representations
abstract: A method, apparatus, and article of manufacture provide the ability to display (using a 3D graphics application) an overlayed window containing an alternate data representation in a three-dimensional system. A first 3D view of a real world scene (that includes a first set of data layers) is displayed on a display device. The user selects a set of entities that together define an alternate representation of the first 3D view. The alternate representation is a second set of data layers that is different than the first set of data layers. An overlayed window is displayed on top of the first 3D view and displays the alternate representation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08549439&OS=08549439&RS=08549439
owner: Autodesk, Inc.
number: 08549439
owner_city: San Rafael
owner_country: US
publication_date: 20081003
---
This application claims the benefit under 35 U.S.C. Section 119 e of the following and commonly assigned U.S. provisional patent application s which is are incorporated by reference herein 

Provisional Application Ser. No. 60 997 868 filed Oct. 5 2007 by RICHARD D. HOWARD JARROD LOPICCOLO GRANT ANDERSON ROY LINDAUER THOMAS HELMAN and MATTHEW LARSEN entitled FRAMEWORK FOR AGGREGATING DESIGN MODELS AND GIS DATA IN A GEOSPATIAL ENVIRONMENT 

This application is related to the following co pending and commonly assigned patent application which application is incorporated by reference herein 

U.S. patent application Ser. No. 12 245 562 entitled USER DEFINED SCENARIOS IN A THREE DIMENSIONAL GEO SPATIAL SYSTEM by Richard D. Howard Jarrod Lopiccolo Grant Anderson Roy Lindauer Thomas Helman and Matthew Larsen filed on the same date herewith and

U.S. patent application Ser. No. 12 245 568 entitled SUN SHADOW SIMULATION IN A GEOSPATIAL SYSTEM by Richard D. Howard filed on the same date herewith.

The present invention relates generally to three dimensional 3D applications and in particular to a method apparatus and article of manufacture for viewing an alternate representation of data in a geospatial system without losing the context of a main data representation.

Geographic information systems GIS are commonly used and generally refer to an information system that integrates hardware software and data in order to capture store analyze manage and display present data that is spatially referenced i.e. linked to location or is geographically referenced . GIS systems commonly provide a two dimensional 2D visualization of data in the form of maps globes reports and charts. However prior art GIS systems fail to provide the capability to merge GIS data with additional information in order to visualize analyze and simulate trends phenomena states and events. Further three dimensional 3D systems also fail to provide such capabilities.

In addition it may be desirable to view different data sets in the same user interface. For example a user may desire to view a geospatial map while also viewing the underlying sewage system or traffic patterns on such a map. However prior art systems often either present mutually exclusive data sets i.e. the user must elect a single data set to view or alternatively must select which data sets to view for the entire graphical user interface. For example traditionally systems that allow users to view different data sets in the same user interface required that the user 1 select the data to be displayed 2 select OK and 3 close a dialog. Once completed the view of the entire user interface is based on the selected set s of data. What is desirable is the capability to view different sets of data in the same user interface in an easy efficient and user understandable manner.

One or more embodiments of the invention employ the idea of lenses that overlay a base model view with alternate layers of information. The lenses provide a window into an alternate representation without losing the context of the main data representation.

In the following description reference is made to the accompanying drawings which form a part hereof and which is shown by way of illustration several embodiments of the present invention. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.

One or more embodiments of the invention provide an application and development framework for aggregating design models and GIS data within an immersive 3D geospatial environment for the purposes of visualizing analyzing and simulating trends phenomena state and events in ways that are not possible within conventional 2D GIS or existing 3D application software. In other words embodiments of the invention provide the ability to view analyze simulate trends pheonmena states and events in a digital city.

3D Geospatial Environment containing both simplified and fully textured rendition based on high resolution lidar and ortho photography for content such as Digital Terrain Models Streets and Roadways Water Features Railways Buildings Utility Infrastructure and Street Furniture 

Importation storage and data mapping of full 3D design models from various software e.g. software available from the assignee of the present invention including AutoCAD Map3D Revit Architecture Civil3D and Inventor as well as support for GIS formats via Autodesk Feature Data Objects FDO technology 

Real time 3D rendering and animation including transparency reflections lights shadows and atmospheric effects 

One or more embodiments of the invention are implemented by a computer implemented graphics program wherein the graphics program is represented by a window displayed on the display device . Generally the graphics program comprises logic and or data embodied in or readable from a device media carrier or signal e.g. one or more fixed and or removable data storage devices connected directly or indirectly to the computer one or more remote devices coupled to the computer via a data communications device etc.

In one or more embodiments instructions implementing the graphics program are tangibly embodied in a computer readable medium e.g. data storage device which could include one or more fixed or removable data storage devices such as a zip drive floppy disc drive hard drive CD ROM drive DVD drive tape drive etc. Further the graphics program is comprised of instructions which when read and executed by the computer causes the computer to perform the steps necessary to implement and or use the present invention. Graphics program and or operating instructions may also be tangibly embodied in a memory and or data communications devices of computer thereby making a computer program product or article of manufacture according to the invention. As such the terms article of manufacture and computer program product as used herein are intended to encompass a computer program accessible from any computer readable device or media.

A network such as the Internet connects clients to server computers . Additionally network may utilize radio frequency RF to connect and provide the communication between clients and servers . Clients may execute a client application or Web browser e.g. as described above and communicate with server computers executing Web servers . The software executing on clients may be downloaded from server computer to client computers and installed as a plug in or ActiveX control of a Web browser. Accordingly clients may utilize ActiveX components component object model COM or distributed COM DCOM components to provide a user interface on a display of client .

Web server may host an Active Server Page ASP or Internet Server Application Programming Interface ISAPI application which may be executing scripts. The scripts invoke objects that execute business logic referred to as business objects . The business objects then manipulate data in database through a database management system DBMS . Alternatively database may be part of or connected directly to client instead of communicating obtaining the information from database across network . When a developer encapsulates the business functionality into objects the system may be referred to as a component object model COM system. Accordingly the scripts executing on web server and or application invoke COM objects that implement the business logic. Further server may utilize Microsoft s Transaction Server MTS to access required data stored in database via an interface such as ADO Active Data Objects OLE DB Object Linking and Embedding DataBase or ODBC Open DataBase Connectivity .

Those skilled in the art will recognize many modifications may be made to this exemplary environment without departing from the scope of the present invention. For example those skilled in the art will recognize that any combination of the above components or any number of different components including different logic data different peripherals and different devices may be used to implement the present invention so long as similar functions are performed thereby.

The Graphical User Interface displays information to the operator and provides the functionality for the operator s interaction with the graphics program .

The Image Engine processes the DWG files and delivers the resulting graphics to the monitor for display. In one or more embodiments the Image Engine provides a complete application programming interface API that allows other computer programs to interface to the graphics program as needed. The Database is comprised of two separate types of databases 1 a 3D database known as the 3D world space that stores 3D information and 2 one or more 2D databases known as the 2D view ports that stores 2D information derived from the 3D information.

As used herein the graphics program may consist of a variety of different type of applications including GIS CAD computer aided design solid modeling systems animation products rendering systems etc. Embodiments of the invention are not limited to those software applications explicitly described herein but by the limitations set forth in the claims.

Embodiments of the invention provide an architecture and method of using plug in modules for user defined 3D 4D visualization analysis and simulation. Users clients are provided with the ability to search for download and immediately use plug ins from an online catalog offered by one or more servers . These plug ins can be supplied by software developers and enable users to visualize analyze and simulate trends phenomena state and events via software application .

Such a plug in environment allows many different types of applications to load specific data types and allows interaction between those data types. Most traditional plug in environments do not allow this. Plug ins for different data types may include textures 3D models 2D models particle systems and geo based behavior systems behaviors based on specific geo information .

Another advantage of the plug in architecture is that it allows user to load models seamlessly without having to go through the lengthy steps of importing files. Accordingly a full 3D environment and real time rendering capability of embodiments of the invention combined with the analytic capabilities supplied by a plug in developer allows user to visualize their data in ways not formerly possible.

Plug ins are loaded and associated with specific models and scenarios within the digital city of embodiments of the invention. A user can override model and linked data values enter plug in parameters and control the visualization of results. Plug ins have the ability to automatically add themselves or make calculations based on the data of a particular file making up a digital city environment.

For example based on GIS fault data an earthquake preparedness drill particle system could be suggested and or instantiated. Another example would be a recommended parking configuration based on the number of roads or total lanes adjacent to a particular structure. Alternatively a road configuration could be suggested based on the parking structures and parking places in a given city block.

The location plug in contains the display and overrides to the geospatial location and position information for the building. In this regard if location panel were expanded the user would have the option of specifying where Building A is located. For example the user can specify the latitude longitude and elevation. Alternatively the user can enter an address e.g. number street city state and or zip etc. . Further entering information in one field of the location panel may automatically retrieve and output information in another field e.g. entry of an address may automatically fill in the corresponding latitude longitude and elevation. In addition once the location information is entered the object e.g. Building A would automatically move to the location specified. The resulting visualization from the location plug in provides a visual representation of Building A in a 3D environment.

The occupancy plug in allows the user to establish the current number of occupants A to be displayed and overrides B i.e. the maximum number of occupants to the number of occupants for Building A . The visualization of the occupancy plug in would provide for multiple dots indicative of persons in Building A or distributed throughout building A .

The utilities plug in contains the display and overrides to the utility usage i.e. water and power for Building A . The visualization of the utilities plug in results in line or effect simulating power and water usage in Building A .

The greenhouse emissions plug in contains the display and overrides to the LEED Leadership in Energy and Environmental Design green building rating system emissions impact score for the Building A . The values on greenhouse emissions panel are automatically i.e. without additional user input updated based on the occupancy panel and utility consumption panel for a selected building. Alternatively the user may have the options of setting the greenhouse emissions values in panel and the system can automatically adjust either the occupancy values or utility values that are necessary to reach the greenhouse emissions values set forth in panel . In this regard the user can determine which values panels and are locked and which can be adjusted depending on the values specified in the other panels. The visualization of greenhouse emissions plug in would result in a halo type effect displayed around and emanating from Building A .

Accordingly developers and plug in authors can harness to the full power of 3D rendering to convey the results of their calculations. In this regard the 3D simulation illustrated in may change its coloring or areas displayed based on the visualizations resulting from plug ins . Check boxes C C may be utilized to determine whether a resulting visualization for the respective plug in is displayed in the 3D rendering of . For example the user may check boxes e.g. check boxes C C C and C within panel to determine which plug ins will be reflected in the display of building A of . This allows users to visualize and analyze their data in new and powerful ways.

One or more embodiments of the invention use plug ins to create animations that simulate results over time 4D . In addition plug ins can be used to simulate human behavior in the 3D environment. Given some human interaction and a stimulus in that environment the plug in architecture allows a user to predict and visualize certain human behaviors. The architecture also allows the user to visualize different temporal simulations like the sun and moon weather patterns and phenomena such as tornadoes and snowfall see detailed examples below .

One or more embodiments of the invention all the user to define scenarios that incorporate specific model and linked data overrides plug ins and their settings and visualization traits. In other words a group of settings are stored into a type of visual bookmark that allows the user to define specific what if scenarios. Each scenario or bookmark captures specific model and linked data overrides supplied by the user a set of plug ins and their settings and visualization parameters and traits.

By bookmarking scenarios and sub scenarios with different settings the user can quickly compare and analyze their information and make informed decisions. This essentially allows a user to save certain data sets apply them to scenes recall them and compare and contrast. In the prior art to visualize and compare different scenarios the users were required to modify a file save it with a certain criteria render it and repeat the process for each different scenario and comparing the final renderings. The ability to store the various settings into a bookmark is faster and interactive so the user is not required to save files using different settings.

Alternatively the user can select the scenario bookmark in panel which allows the user to select a set of predefined settings. Once the desired properties for a bookmark have been established i.e. in dialog box panel the user can opt to create a bookmark to associate all of the settings with a bookmark placeholder or thumbnail for those settings using dialog box . Once created and if in the appropriate mode the user may be presented with a group of selectable icons or menu options representative of the various bookmarks that have been established. For example icons and are representative of various bookmarked scenarios that have been established by a user. Thus each scenario represented by bookmarked icons provides a selection of one or more plug ins and properties settings that permit the user to define a particular visualization in a 3D 4D environment.

In view of the above bookmarked scenarios can be viewed as a way of storing both a set of data a specific set of models that have been loaded into a server into a name a set with a series of plug ins and potentially some overriding information for those plug ins.

As described above it is often desirable to view a different alternate representation of data while maintaining the context of the main data representation. For example when displaying a map or a 3D view of a real world scene it may be desirable to show a view depicting the underground utilities in a particular area of the scene.

One or more embodiments of the invention employ the idea of lenses that overlay a base model view to expose alternate data representations or alternate layers of information. The lens is used to offer a window into an alternate representation without losing the context of the main representation. For example a utility lens may allow the viewing of a subset of layers looking through the model to underlying layers. In addition to the utilities being represented colors can represent utility usage within a building. Thus while simultaneously viewing the alternate data representation the user can active a simulation over time for the elements viewed through the lens. In this regard a user can turn on or of water gas waste or electricity as desired and view the simulated result through the lens. Alternatively the user can turn off certain water lines and view the resulting effect in the 3D visualization.

The user can also drag and resize the lens around the display to dynamically reveal the underlying data. illustrates the result after the lens is dragged moved to the lower left corner of the main data representation display . Similarly illustrates the result after the lens is dragged moved to the upper right corner of the main data representation display . As the lens is dragged the content displayed within lens is automatically and dynamically updated to display the alternate data representation contained therein.

In addition the lens may also have a degree of transparency opacity so that a degree of the underlying main data representation can be seen within lens . The user may or may not have the ability to alter the degree of opacity of the lens . While a degree of transparency may be utilized one or more embodiments of the invention do not provide any transparency within lens . Instead a completely alternate data representation is provided and as the lens is moved around display the alternate data representation is lined up or overlaid precisely so that it appears as if the main data representation is being viewed when in fact a completely different representation of the data is viewed within lens .

The user may also be free to interact concurrently with the main data representation and any alternates shown within lenses . illustrates the user isolating a subset of the utility layers with the ability to manipulate and view just the water supply displayed in blue in accordance with one or more embodiments of the invention. Panel illustrates the settings for the utilities lens . The check boxes indicate whether the corresponding object entity appears in the visualization within the utility lens . As illustrated the user has elected to turn off the simulation visualization for the gas line waste removal and electricity lines e.g. by removing the check from the checkboxes corresponding to those elements using a cursor control device . The user has elected to display the simulation visualization for the water lines. In addition the user has elected to display the simulation visualization for specific water lines that are listed in panel . The user could also opt to remove one or more of the specific water supply lines from the display by unchecking the appropriate checkbox .

In addition to selecting which utility to display in the simulation visualization the user may also set the colors that will be displayed and the opacity levels for each utility. Further the utilities and or water lines are dynamically updated within the utility lens as the user checks unchecks the desired checkbox es and establishes defines the appropriate desired display attributes. Further although not shown the user can also opt to simulate the utility usage over time.

In view of the above the lens is unique in that it allows for interactive rendering within a data file possibly containing several different plug ins for several different file formats of specific layers selected by the user. In this regard each utility or other type of entity to be displayed may be viewed as a layer of the 3D scene and the lens allows the user to view a subset of those layers. Interactive viewing of selected layers allows a user to move the lens back and forth over an area to view the underlying levels. This step in previous applications would have taken several different key strokes several different file save operations and possibly several different renderings.

In addition to the ability to see alternate views of data a lens may also give the user the ability to search based on the shape of the file. For example a user who is searching a building for a specific garage door would be able to specify that shape and see the shape highlighted in the drawing. Another example would be searching for a standard fire hydrant in a city block in order to determine best line of defense in the event of a fire or determine a fire lane.

At step a set of entities are selected that together define an alternate representation of the first 3D view. The alternate representation is a second set of data layers that is different that the first set of data layers and the second set of data layers consists of the set of selected entities. Entities from a variety of different formats and or different data types may be selected as part of the set. The layers of data selected may not be visible in the first 3D view but may instead reflect data that is underneath the current viewable layer. Further the set of entities may be a composite of multiple different layers or entities. The lens application will allow the user to drill down past the main viewable area to view data in layers through the window as if the lens is a filter or x ray view revealing the set of entities selected by the user.

At step an overlayed window is displayed on top of the first 3D view. The overlayed window displays the alternate representation of the real world scene. The overlayed window may be moved around the 3D view by the user while automatically e.g. without additional user input and dynamically i.e. in real time revealing the alternate representation of the real world scene within the overlayed window. As illustrated in A B and the selected data may be displayed in a highlighted manner such that it is clearly distinguishable from other data within the lens thereby providing a context for the data. Accordingly the background within lens may appear dimmed or in a darker color compared to the alternate data that is highlighted in the overlayed window.

As described above the 3D graphics application may consist of a utility lens feature or plug in where the set of entities are selectable from a panel illustrating public utilities that may be displayed in the 3D view. The selected set of entities is a selected subset of the public utilities and the alternate representation is a color coded display of the selected subset of public utilities. The color coded display may be color coded based on usage of the selected public utilities. For example the color and intensity of the color may reflect the usage of the particular entity identified by the color. More specifically a darker or more intense blue color may reflect an increased flow of water at the location identified in the 3D view. Alternatively a dimmer or lighter blue may reflect a lower flow.

The public utilities that may be selectable can include gas lines that consists of individual gas lines water lines consisting of individual water lines waste removal consisting of individual waste removal sewage lines and electricity lines consisting of individual electric lines. The selected subset may consist of a selection of a subset of individual lines from the public utilities.

This concludes the description of the preferred embodiment of the invention. The following describes some alternative embodiments for accomplishing the present invention. For example any type of computer such as a mainframe minicomputer or personal computer or computer configuration such as a timesharing mainframe local area network or standalone personal computer could be used with the present invention.

The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto.

