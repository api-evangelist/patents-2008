---

title: Method and system for identifying available resources in a peer-to-peer network
abstract: A method for a peer of a peer-to-peer network to search for an available resource is provided. The method initiates with representing a request for the available resource as a request bit string. The method includes transmitting the request to a parent of the peer. Then, an aggregate availability bit string associated with the parent is accessed. The aggregate availability bit string represents an aggregate resource availability for all children of the parent. Next, a logical operation is performed with the bits of the aggregate availability bit string and the bits of the request bit string. Then, it is determined whether any of the children of the parent are able to provide the available resource based upon a result of the logical operation. A peer-to-peer grid and a system for publishing and identifying an available resource in a peer-to-peer distributed network are also provided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07814207&OS=07814207&RS=07814207
owner: Sony Computer Entertainment, Inc.
number: 07814207
owner_city: Tokyo
owner_country: JP
publication_date: 20080620
---
This application is a Divisional Application of U.S. application Ser. No. 10 857 559 filed on May 27 2004 now U.S. Pat. No. 7 603 464 which claims priority under 35 U.S.C. 119 e to U.S. Provisional Patent Application No. 60 476 084 filed on Jun. 4 2003 and entitled V RWDIMS which is hereby incorporated by reference in its entirety for all purposes. This application is also related to Divisional application Ser. No. 12 214 746 filed on the same day as the instant application which is hereby incorporated by reference in its entirety for all purposes. This application is related to application Ser. No. 10 845 508 filed on May 12 2004 and entitled CCARP PN which is hereby incorporated by reference in its entirety for all purposes.

The present invention relates to peer to peer networks and more specifically to manipulating and querying arbitrary resources of peers in the peer to peer network.

Currently a client can access resources through a server over a network. For example is a prior art diagram illustrating a client accessing resources over a network . A server interfaced by a proxy server provides access to multiple resources of the server . The resources can include a central processing unit CPU a memory a disk and a printer . Typically the client requests access to a resource such as the printer and the proxy server either grants or disallows access. It should be appreciated that in this type of system the available resources are pre set as being available to the client. That is the client does not have to search for available resources that may be desired.

In a decentralized network e.g. a peer to peer network as the number of peers in the network become large each peer is incapable of notifying each of the other peers of its available resources because of the large number of peers. One barrier for a system having a large number of peers i.e. hundreds of thousands of peers is the bandwidth required for handling the publishing of available resources between each of the peers. One technique to address the publishing of resources has been to allow searching for an exact resource and not a range of resources. This type of search is limiting as an exact amount is not the preferable search format i.e. it is preferable to search for a resource having a minimum or maximum percentage of the resource available. In addition as resource availability tends to constantly change the update rate and the bandwidth consumed by the constant updates of the exact available amount of the resource become excessive.

Accordingly a method and an apparatus for enabling notification of available resources in a deterministic manner that does not impact performance for a decentralized network are needed.

Broadly speaking the present invention is a method and system for identifying available resources in a peer to peer network. It should be appreciated that the present invention can be implemented in numerous ways such as a process an apparatus a system or a method on a computer readable medium. Several inventive embodiments of the present invention are described below.

In one embodiment a method for a peer of a peer to peer network to publish available resources is provided. The method initiates with determining an available resource of the peer. The method includes expressing the available resource as a bit string. Then the bit string is transmitted to a parent of the peer.

In another embodiment a method for a peer of a peer to peer network to search for an available resource is provided. The method initiates with representing a request for the available resource as a request bit string. The method includes transmitting the request to a parent of the peer. Then an aggregate availability bit string associated with the parent is accessed. The aggregate availability bit string represents an aggregate resource availability for all children of the parent. Next a logical operation is performed with the bits of the aggregate availability bit string and the bits of the request bit string. Then it is determined whether any of the children of the parent are able to provide the available resource based upon a result of the logical operation.

In yet another embodiment a computer readable medium having program instructions for a peer of a peer to peer network to publish available resources is provided. The computer readable medium includes program instructions for determining an available resource of the peer and program instructions for expressing the available resource as a bit string. Program instructions for transmitting the bit string to a parent of the peer are provided.

In still yet another embodiment a computer readable medium having program instructions for a peer of a peer to peer network to search for an available resource is provided. Program instructions for representing a request for the available resource as a request bit string and program instructions for transmitting the request to a parent of the peer are provided. Program instructions for accessing an aggregate availability bit string associated with the parent where the aggregate availability bit string represents an aggregate resource availability for all children of the parent are included. Program instructions for performing a logical operation with bits of the aggregate availability bit string and bits of the request bit string are provided. Program instructions for determining whether any of the children of the parent are able to provide the available resource based upon a result of the logical operation.

In another embodiment a system for publishing and identifying an available resource in a peer to peer distributed network is provided. The system includes topology management logic for organizing nodes within the peer to peer distributed network into a hierarchical tree. Resource level logic configured to determine the availability of a resource contained within a node of the hierarchical tree is included. The resource level logic is further configured to represent the availability of the resource as a first bit string for transmission to a parent of the node wherein the parent is configured to compare request strings to the first bit string through a logical operation in order to determine whether the resource can be fulfilled by the node.

In yet another embodiment a peer to peer grid is provided. The peer to peer grid includes a plurality of peers configured to be arranged in a hierarchical tree. The plurality of peers includes a first peer in communication with a second peer. The first peer is configured to transmit an availability string to the second peer. The availability string represents availability of a resource associated with the first peer. A third peer configured to generate a request string representing a request for the resource is provided. Logic for comparing bits of the availability string to bits of the request string in order to determine if the second string can fulfill the request for the resource is included. The logic is locally available to each of the plurality of peers.

In still yet another embodiment a peer to peer network capable of being searched for an available resource is provided. The peer to peer network includes means for representing a request for the available resource as a request bit string and means for transmitting the request to a parent of the peer. Means for accessing an aggregate availability bit string associated with the parent where the aggregate availability bit string represents an aggregate resource availability for all children of the parent. Means for performing a logical operation with bits of the aggregate availability bit string and bits of the request bit string and means for determining whether any of the children of the parent are able to provide the available resource based upon a result of the logical operation are provided.

Other aspects of the invention will become apparent from the following detailed description taken in conjunction with the accompanying drawings illustrating by way of example the principles of the invention.

The following embodiments describe a method and apparatus for identifying an available resource in a decentralized network. As used herein resources can include any physical component of a peer that is connected to the peer to peer P2P network. Exemplary physical components include processors co processors storage devices memory swap space radio receivers radio telescopes image capture devices such as cameras printers display devices security devices and media specific devices such as digital video disc DVD drives and CD drives. Thus any physical component is possible as long as a first peer connected to the P2P network can take command and control of the physical component of a second peer in the P2P network. It will be obvious however to one skilled in the art that the present invention may be practiced without some or all of these specific details. In other instances well known process operations have not been described in detail in order not to unnecessarily obscure the present invention.

Peer to peer networks are decentralized computing systems such that each peer has roughly equivalent capabilities with any other peer. In some exemplary embodiments a peer can include any computing device such as a desktop class computer a server class computer a mobile device a game machine and a game console. However in other embodiments the peer can be a computing device that is capable of establishing communication with another computing device as long as the computing devices are connected to the P2P network.

In contrast with centralized computing systems such as client server environments any peer in the P2P network can interact directly with any other peer in the P2P network. Thus in the P2P network a first peer is not a server for a second peer that is a client for applications and devices located on the server. Moreover P2P networks can have many configurations. For example is a diagram illustrating a fully connected peer to peer network in accordance with an embodiment of the invention. In the fully connected P2P network first peer second peer third peer and fourth peer communicate directly with one another because each peer has a connection to every other peer. In one exemplary embodiment a resource of first peer such as a DVD recorder co processor memory etc. may be accessed by second peer third peer and or fourth peer .

For example when fourth peer accesses the DVD recorder of first peer first peer interfaces with fourth peer to provide command and control of the DVD recorder to fourth peer . The interface can be any suitable graphics interface. Exemplary embodiments can include a web browser a terminal screen and a graphics user interface GUI . Additionally the interface can be any mechanism e.g. an application programming interface API that permits fourth peer to take command and control of the DVD recorder of first peer as long as the peers are connected in the P2P network. In order to access the resource of first peer the first peer publishes the resource on the P2P network with some or all of the other peers.

To identify the resources of a particular peer such as first peer the first peer publishes the resource. In one exemplary embodiment first peer publishes second resource on the P2P network. Specifically first peer transmits message to publish the second resource to second peer . After publication any peer on the P2P network such as third peer and fourth peer can access second resource by identifying the peer that manages second resource . This identification process is described in more detail below. Because first peer published second resource to second peer the second peer identifies first peer as managing the second resource . Subsequently third peer and fourth peer only need to send a request for second resource to the peers on the P2P network to find out which peer manages second resource .

The fixed set of bits represented in provide the availability of the applicable resource. It should be appreciated that in one embodiment rather than using a base two distribution i.e. a one logical high value or a zero logical low value a power law representation may be used. Under a base two distribution eight bits will have a limit of representing 256 units. However under an alternative representation such as for example a power law representation eight bits may represent billions of units. It should be appreciated that it is not necessary to have a precise availability. That is if there are gaps between certain numbers as may occur with a power law distribution the gaps do not affect the scheme provided herein. As the embodiments described herein enable searching for a range of available resources and do not rely on an exact amount the gaps become irrelevant. Thus a power law representation may be used where there may be gaps in the numbers represented.

In yet another embodiment it is possible to provide a hybrid model in which a portion of the bits represent one scheme such as a base two distribution while the remainder of the bits represent an alternative scheme such as a power law representation. Here a small number of available resources can be represented accurately through the base two distribution while the large number of available resources required when dealing with a large number of users can utilize the power law distribution. It should be appreciated that each peer in the peer to peer network would have an evaluator to recognize that the first four bits represent a first semantic while the second four bits are representing a second semantic to describe the available resources. In this embodiment 2or 16 units are available to be represented for a small amount of resources while a power law distribution is used to represent available resources in excess of 16. In the organized hierarchical tree structure discussed herein the hybrid scheme is well suited for the aggregation as the higher level peers will be associated with a large amount of resources power law distribution while lower level peers are associated with a smaller amount of resources binary distribution .

In one embodiment the resource availability expressed in the bit strings of is compatible with Bloom filters. A Bloom filter consists of two components a set of hash functions and a bit vector of a given length. The length of the bit vector number of bits and the number of hash functions are set dependent upon the number of keys desired to be added and the acceptable error rate. The hash functions in a Bloom filter are configured so that their range matches the length of the bit vector. For example if the bit vector is 200 bits long the hash function returns a value between 1 and 200. A key is run through each of the hash functions and the result is treated as an offset into the bit vector to turn on the corresponding bit at that position. The hashing operation normally associated with Bloom filters can be replaced with other semantics such as assigning semantic meaning to bits like the binary or power law values already discussed . This can be understood as a modified Bloom filter representation.

Still referring top in peer a bit string of 000101 is used to represent the availability of the resource e.g. a co processor available memory disc space network bandwidth etc. Each child s bit string is communicated to the corresponding parent. The parent of peer i.e. peer is configured to aggregate the received bit strings from each child and incorporate its own available resources in order to define a bit string for the parent. Thus the bit string associated with peer 100101 represents the aggregate of the bit strings from children through of parent . It should be appreciated that the bit string of parent may also include information as to available resources of the parent. The aggregation of the bit string may occur through a suitable mathematical operation providing addition up the tree.

One skilled in the art will appreciate that as the parents successively aggregate what the corresponding children are capable of in terms of available resources the root node will likely have its filter saturated. However most searches through the hierarchical tree will rarely get to the root node. That is most providers and users will be searching in the bottom portion of the distribution represented in . Irrespective of which portion of the tree the search is being performed in the use of a power law distribution for the upper portion of the tree will enable the embodiments described herein to accommodate peer to peer networks having a large number of peers e.g. networks having 1 million or more peers. It should be further appreciated that the propagation of the bit string through the tree requires a relatively small amount of bandwidth due to the structure of the string. Propagation of the bit string up the tree will occur at regular tunable time intervals. Bandwidth use at the top of the tree does not grow proportional to the size of the tree because each tier of the tree fully and opaquely represents its children.

In one embodiment a portion of the resources requested may be fulfilled by a first parent while the remaining portion of the requested resources is fulfilled by a parent of the first parent. Of course the application providing this functionality would have to be able to be able to handle a portion of the requested resources being satisfied until the full amount of the requested resources are available. It should be appreciated that the communication protocol enabling communication through the structured tree includes an arbitration and reservation mechanism. The arbitration and reservation mechanism functions to reserve requested available resources so that a subsequent request for the same resources will be denied access to the reserved resources. For example the first reservation request may generate a virtual reservation request which transforms into a real reservation once the reservation is fulfilled. If the first reservation request fails then the reservation disappears.

The method then proceeds to operation where a request string is generated. In operation a peer requesting a resource defines that request as a bit string. The method then moves to operation where the request string is sent to a peer. The peer then tests for the availability to satisfy the request string in operation . Here a bit by bit comparison of the two bit strings may be performed through a logical operation. The method then advances to operation where the resources are provided if the peer is able to satisfy the request string. If the peer cannot satisfy the request string the request string is propagated up the structured tree to a parent of the peer and continues propagating up the structured tree until a resource satisfying the request is found. It should be appreciated that the resources will be provided directly from the peer identified as being able to provide the resources. That is if the child of the peer has the available resources then the requestor is provided with the address for the child and communicates directly with the child.

In summary a method and system enabling identification of an available resource in a manner requiring low bandwidth. The peers of the P2P network are organized in a hierarchical tree structure having a root node where each parent is configured to successively encompass what the corresponding children are capable of supplying in terms of resources. Through the use of bit strings compatible with bloom filters the available resources are captured and aggregated. In order to accommodate the large size of the P2P network a power law distribution may be used to characterize at least a portion of the bit string. One skilled in the art will appreciate that alternative embodiments to the bit string may be used. For example an extensible markup language XML representation may be used to describe the availability of resources. Here a schema defining XML format that specifies the resource availability is equal to a value. This value may then be propagated and aggregated through the hierarchical tree structure.

It should be appreciated that the embodiments described above may be incorporated into on line gaming applications with a subscriber base of hundreds of thousands of players located all over the world. Exemplary on line gaming titles include EVERQUEST PLANET SIDE and STAR WARS GALAXIES played through the PLAYSTATION 2 video game console. One application incorporating the embodiments described above may occur during video encoding. For example if a computing device needs to encode 1000 frames of video and does not have the local computing resources to accomplish this in a certain time frame then the computing device may deputize a number of other computing devices to help encode the video. Thus the computing device generates a request asking for 100 other processors having a certain bandwidth and storage overhead locally on each of the 100 other processors. The bit stream may be a base two distribution a power law distribution or some combination of the two. The request is pushed out to the parent and the resource availability algorithm propagates the request to identify the available resources satisfying the request.

It should be appreciated that the bit stream used to represent the resource availability and the resource request is not limited to the specific embodiments referred to above. That is the bit stream is not limited to only a first portion and second portion where one portion is a base two representation and the other portion is a power law representation. For example the entire bit stream may be a single representation. Alternatively the bit stream may be subdivided into more than two portions. The bit stream is not limited to a base two or power law distribution. For example a base ten or any other suitable base distribution that may be represented in the bit stream can be incorporated into the embodiments described herein. In one embodiment the lower third of the bit stream may represent fractional values in base two e.g. these lower third bits can be used to represent 10 20 50 etc. availability of a processor. The middle third of the bit stream represents whole processors in a base ten representation while the upper third of the bit stream represents large groups of processors in a power law representation. Thus the bit stream may have numerous configurations i.e. single or multiple subdivisions with a single or multiple representations being used.

As mentioned above the regular representation of the data in the bit stream enables the ease with which the request may propagate since the bit stream is relatively small e.g. one kilobyte of bits per node. Thus each peer automatically publishes and updates its available resources regularly without impacting bandwidth. Once the available resources have been identified the resources may be accessed as described above. In one embodiment accounting and usage charges may be incorporated and enforced to provide incentive for peers to share resources.

Embodiments of the present invention may be practiced with various computer system configurations including hand held devices microprocessor systems microprocessor based or programmable consumer electronics minicomputers mainframe computers and the like. The invention can also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a wire based or wireless network.

With the above embodiments in mind it should be understood that the invention can employ various computer implemented operations involving data stored in computer systems. These operations are those requiring physical manipulation of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated.

Any of the operations described herein that form part of the invention are useful machine operations. The invention also relates to a device or an apparatus for performing these operations. The apparatus can be specially constructed for the required purpose or the apparatus can be a general purpose computer selectively activated or configured by a computer program stored in the computer. In particular various general purpose machines can be used with computer programs written in accordance with the teachings herein or it may be more convenient to construct a more specialized apparatus to perform the required operations.

The invention can also be embodied as computer readable code on a computer readable medium. The computer readable medium is any data storage device that can store data which can be thereafter be read by a computer system. Examples of the computer readable medium include hard drives network attached storage NAS read only memory random access memory CD ROMs CD Rs CD RWs magnetic tapes and other optical and non optical data storage devices.

Although the foregoing invention has been described in some detail for purposes of clarity of understanding it will be apparent that certain changes and modifications can be practiced within the scope of the appended claims. Accordingly the present embodiments are to be considered as illustrative and not restrictive and the invention is not to be limited to the details given herein but may be modified within the scope and equivalents of the appended claims.

