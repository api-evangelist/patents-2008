---

title: Substrate processing apparatus and method
abstract: Substrate processing methods and apparatus are disclosed. In some embodiments a substrate processing apparatus may comprise a support structure and a moveable stage including first and second stages. The moveable stage has one or more maglev units attached to the first stage and/or second stage proximate an edge of the first stage. The first stage retains one or more substrates and moves with respect to a first axis that is substantially fixed with respect to the second stage. The second stage translates along a second axis with respect to the support structure. In other embodiments, a primary motor may maintain a rotary stage at an angular speed and/or accelerate or decelerate the stage from a first angular speed to a second angular speed. A secondary motor may accelerate the stage from rest to the first angular speed and/or decelerate the stage from a non-zero angular speed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08058628&OS=08058628&RS=08058628
owner: KLA-Tencor Corporation
number: 08058628
owner_city: San Jose
owner_country: US
publication_date: 20080709
---
This application claims priority of U.S. patent application Ser. No. 11 670 896 filed on Feb. 2 2007 which claims priority from co pending provisional patent application Ser. No. 60 870 528 filed on Dec. 18 2006 the entire disclosures of both of these applications are incorporated herein by reference.

This application claims priority of co pending provisional patent application Ser. No. 60 948 667 filed on Jul. 9 2007 the entire disclosures of which are incorporated herein by reference.

This application claims the benefit of priority of co pending International Patent Application number PCT US07 87953 filed on Dec. 18 2007 which claims priority to U.S. patent application Ser. No. 11 670 896 and U.S. Provisional Applications 60 870 528 and 60 940 667 the entire disclosures of International Patent Application number PCT US07 87953 are incorporated herein by reference.

This invention was made with Government support under Agreement HR0011 06 3 0008 awarded by the Defense Advanced Research Projects Agency DARPA . The Government has certain rights in the invention.

This invention generally relates to substrate inspection and lithography and more particularly to movable stages used in substrate inspection and lithography.

Historically wafer writing in lithography and scanning in metrology and inspection systems have used linear stepping or scanning motion to translate a substrate. Rectilinear motion has the advantages of simplicity in the rendering process since the die on a semiconductor wafer are typically arranged in the direction of motion. In Cartesian XY reticle writing the data path follows the prevailing directionality in the geometry to be rendered. However the factor limiting the throughput is the mechanical motion of the Cartesian stage. As the data path electronics get faster this mechanical limitation of Cartesian systems becomes more limiting and the data path rendering in polar coordinates becomes easier. The data path rendering speed is expected to continue to follow the Moore s law and improve with newer generations of semiconductors while throughput of Cartesian stages is subject to relatively slow progress in precision engineering.

Reciprocating stages have a practical limit of turnaround time at the end of the swath of about 100 milliseconds. To shorten this time mechanics must allow higher bandwidths. The use of high performance materials allows only for moderate improvements of highest scanning speed. The increases in acceleration at the end of the motion also have their limitation in power of actuators heat dissipation reaction on the vibration isolation system and the machine base settling after acceleration etc.

Although the following detailed description contains many specific details for the purposes of illustration anyone of ordinary skill in the art will appreciate that many variations and alterations to the following details are within the scope of the invention. Accordingly the exemplary embodiments of the invention described below are set forth without any loss of generality to and without imposing limitations upon the claimed invention.

An example of a substrate processing apparatus according to an embodiment of the present invention is depicted schematically in . The apparatus generally includes a first stage and a second stage . The first stage carries one or more substrate chucks . Each substrate chuck is adapted to support and retain a substrate . Examples of suitable substrates include but are not limited to semiconductor wafers or reticles for optical lithography. The first stage moves with respect to the second stage . By way of example the first stage may be a rotary stage that rotates about a z axis. The z axis may be oriented in a substantially vertical direction a substantially horizontal direction or some other direction between the horizontal and the vertical. The second stage may be a translating stage moves the rotary stage linearly in a direction parallel to the plane of rotation of the rotary stage . One or more bearings support the rotary stage facilitate smooth rotation of the rotary stage and transfer translation forces between the rotary stage and the translating stage in such a way as to maintain the z axis of the rotating stage in a substantially fixed position and orientation relative to the translating stage as the translating stage moves with respect to a support structure . By way of example the support structure may be a vacuum chamber the lid of the vacuum chamber or a stage base structure.

By way of example the rotary stage and translating stage may be disposed within a chamber e.g. a vacuum chamber to provide a controlled environment for processing the substrate and serves as the support structure . A substrate processing tool may be used to probe selected portions of the substrate with radiation e.g. in the form of electromagnetic radiation such as infrared visible or ultraviolet light or in the form of a beam of charged particles such as electrons or ions. The processing tool may be part of a lithographic system e.g. an electron beam exposure column or an optical lithography lens system. Alternatively the tool may be part of a substrate metrology or inspection tool that exposes selected portions of the substrate to radiation and collects scattered or secondary radiation from the substrate . Examples of such tools include optical wafer inspection tools and scanning electron microscopes.

The combined rotary motion of the rotary stage and linear motion of the translating stage move the substrate relative to the tool in such a way that the optical column may probe the entire surface of the substrate in a continuous fashion e.g. along a spiral path. Such motion is analogous to the movement of a phonograph needle relative to a record or a laser beam relative to a compact disc CD . The principal difference being that in embodiments of the present invention the tool remains substantially fixed with respect to the chamber and the substrate rotates and is moved linearly relative to the fixed tool . By substantially fixed it is meant that the there may be some mechanism for adjustment of small scale variations in positioning. Preferably such position variations are within an ability of a sensor to detect and within an ability of the adjustment mechanism to counteract while maintaining a desired resolution in relative positioning between the tool or a beam from the tool and the substrate . Mechanisms for such adjustment are described in detail below.

Unlike reciprocating motion or R motion of conventional non continuous R positioning stages continuous rotary motion is inherently smooth. The inertial forces of the rotary stage are inherently balanced and gyroscopic effects tend to stabilize the orientation of the rotation axis z. Consequently an apparatus of the type shown in may scan large substrates quickly without having to impart high acceleration to the substrate . In alternative embodiments the tool may probe the surface of the substrate with continuous rotary motion along a series of concentric circular paths having different radii. In such a case the rotary motion may be kept continuous while the linear motion is discontinuous.

In multiple substrate configurations multiple chucks may be arranged symmetrically on a rotating platter. The layout of the chucks on the rotary stage can be in a single radial arrangement with all chucks arranged at the same radial distance from the z axis. Alternatively the chucks may be arranged in multiple rows a hexagonal pack or another arrangement suitable for writing or probing of the substrates. Corresponding data path strategies would follow the substrate layout.

One or more of the chucks may be equipped with sensors allowing for feedback of parameters important to accurate writing for example thermal sensors e beam detectors e beam reflectors or position sensors.

Several configurations are possible for the bearings to meet the requirements of a very high throughput stage. For example the rotary translation stage may be implemented using magnetic levitation maglev in the bearings to support the rotary stage . Alternatively the Rotary Translation stage may use air bearings or conventional bearings as an alternative to magnetic levitation. In some embodiments a fixed rotary stage may be combined with one or more moving tools. For example a differentially pumped air bearing rotary stage may be combined with a differentially pumped air bearing tool slide. Alternatively a conventional bearing rotary stage may be combined with a sliding seal moving tool.

It is noted that the placement of maglev bearings proximate a periphery of the rotary stage keeps stray magnetic fields from the bearings at a safe distance from the tool . This greatly reduces the effect of such magnetic fields on the operation of the tool particularly when the tool is a charged particle beam column such as an electron beam column. It is further noted that this same concept may also apply to an X Y translation stage e.g. in which the first stage moves linearly along an x axis that is fixed with respect to the second stage and the second stage moves linearly along a y axis that is at an angle relative to the x axis.

In a preferred embodiment of a rotary linear stage shown in a rotary stage is carried by a linear stage using linear motors . The rotary stage supports multiple substrate chucks . The rotary stage includes a peripheral ferromagnetic ring . Peripherally mounted rotary stage radial maglev units X Y attached to the intermediate linear stage apply magnetic forces to the ring along the x and y axes respectively along lines of force that intersect the rotation axis z. The z axis may be oriented in a substantially vertical direction a substantially horizontal direction or some other direction between the horizontal and the vertical. Peripherally mounted rotary stage vertical maglev units X Y attached to the intermediate linear stage apply magnetic forces to the ring along the rotation axis z.

The linear stage may suspended by electromagnet levitation units Z maglevs from a support structure. By way of example the support structure may be the underside of a lid of a vacuum chamber . The chamber lid may also carry a substrate processing tool . By way of example and without limitation the tool may include e.g. an e beam column or multiple columns. Alternatively the tool may include an optical column or an x ray column suitable for performing x ray processing such as X ray fluorescence spectroscopy on the substrates . To reduce the force path for reaction forces the rotary stage vertical maglevs Z and the X stage vertical maglevs may be arranged in close proximity e.g. in a side by side or a back to back configuration such that the maglevs Z apply forces along a common line of action.

The linear stage may be translated by one or more parallel linear motors . In a preferred configuration two linear motors are used symmetrically placed in respect to the center of moving linear mass. For example to guide the linear motion of the linear stage the linear motors may include a set of lateral electromagnets of alternating polarity that guide the linear stage along parallel ferromagnetic guideways . X stage Y maglevs may be used to finely adjust the position of the x stage along the Y direction relative to the guideways . Preferably the rotary stage is suspended with respect to the X stage by at least 3 more preferably 4 rotary stage radial maglevs X Y. These radial maglevs are preferably arranged in close proximity to corresponding Y maglevs that adjust the position of the linear stage in the y direction. To shorten the path for reaction forces the X stage Y maglevs may be arranged back to back with the rotary stage radial maglevs Y. Most preferably 4 rotary stage radial maglevs X Y may be assembled back to back with corresponding linear stage Y maglevs electromagnets. This way any forces controlling the imbalance of the rotary stage are transmitted directly to the stationary chamber lid and do not excite structural vibration modes of the linear stage .

The magnetic flux from the maglevs X Y Z and may be confined and shielded to prevent it from interfering with the tool . In addition the peripheral placement of the maglevs X Y Z and and ferromagnetic ring keep them and their flux far from the tool so that these fluxes do not interfere with magnetic lens fields from the tool that are used e.g. to focus an electron beam. The rotary stage may be made of a magnetically transparent material e.g. a ceramic aluminum etc. to further reduce undesirable effects on the tool . In addition the rotary stage may be made of a material having a high electrical resistivity reduce eddy currents that might affect the electron beam from an electron beam optical column if one is included in the tool . It is desirable for the electrical resistivity to be high enough to make eddy currents insignificant while still allowing dissipation of electrical charge from the surface. By way of example and without limitation the electrical resistivity may range from about 1 ohm cm to about 1000 ohm cm. Examples of suitable high resistivity materials include but are not limited to silicon carbide tungsten carbide. In addition insulating ceramics having electrical resistivities larger than about 1000 ohm cm with surface treatment for dissipating electric charge build up may be used.

As shown in the rotary stage may be spun by a central rotary motor having a rotor and a stator . The rotor is attached to the center of the rotary stage and the stator is attached to the linear stage . In the rotor is depicted as being inside the stator . It is also possible to configure the motor so the stator is in the center attached to the linear stage and the rotor is on the outside attached to the rotary stage . The stator may exert magnetic forces on the rotor along the z direction that partly counteract the weight of the rotary stage or other z directed forces acting on the rotary stage .

In certain embodiments it may be desirable to support all or nearly all of the weight of the rotary stage using the rotor and stator . This may be particularly useful where fine control of the rate of rotation of the rotary stage is important in maintaining a high degree of resolution in the relative positioning of the substrates and the tool . In particular the magnetic fields used by the rotary stage vertical maglevs Z to levitate the rotary stage may produce eddy currents in the ferromagnetic ring . Such eddy currents can produce a magnetic drag torque that can slow down the rotation of the rotary stage . Countering such drag forces with a torque from the motor can produce an undesired torque ripple that leads to poor control of the rotation rate.

To reduce such eddy currents the rotor and stator may be configured to bear the weight of the rotary stage . This may be done using air bearings mechanical bearings or magnetic levitation. shows close up detail of an example of a magnetic levitation scheme. In this example a pole piece and one or more permanent magnets are attached to the rotor at a point below the bottom of the stator . A corresponding pole piece is attached to the bottom of the stator . The stator pole piece may be laminated to reduce eddy currents. Attractive magnetic forces between the permanent magnet and stator pole piece are transferred in a vertical direction to the rotary stage by the rotor . In alternative embodiments magnets may be attached to the stator instead of the rotor or to both the stator and rotor. Furthermore the magnets and pole pieces on the rotor and stator may alternatively be configured to levitate the rotary stage by magnetic repulsion.

With all or most of the weight of the rotary stage supported by the forces between the rotor and stator and the rotary stage properly balanced torque from the motor may be primarily used to spin up the rotary stage to a desired rotational speed. After that the torque exerted by the motor on the rotary stage may be greatly reduced as the rotary stage spins under its own inertia. In addition the rotary stage vertical maglevs Z can finely adjust the vertical position of the rotary stage with relatively small magnetic forces and therefore much smaller eddy currents. This allows the use of a non laminated ferromagnetic ring which may simplify fabrication and reduce cost.

It is also possible to drive the rotary motion of the rotary stage using a conductive ring such as the outside ring ferromagnetic ring of the rotary stage and having the rotary motion stator built into the linear stage proximate the periphery of the ring . In one such configuration the resulting rotary motor may be an induction AC motor using eddy currents induced in a conductive ring mounted at the periphery of the rotary stage . It is noted that this latter configuration keeps stray magnetic fields from the motor away from the beam column even if the rotary stage supports a single substrate chuck that is concentric with the z axis.

In the example shown in the rotary stage has six chucks for supporting substrates . Note that the placement of the chucks shown in and F keeps the substrates at a distance from stray magnetic fields from the motor . This particular example is for purposes of illustration and is not to be considered a limitation on any embodiment of the invention. The rotary stage is carried by a linear X stage . The rotary stage and its coordinate system defined by axes x yrotates with rotary speed in the direction shown. Patterned spokes may be used as part of a reference system for tracking the position of the substrates relative to the rotary stage coordinate system with optical sensors that sense a pattern on the spokes . By way of example the spokes may be visible to both the tool and a separate substrate metrology system.

Substrates e.g. semiconductor wafers are exposed to radiation from the beam column in a spiral from an outer radius Rto an inner radius R. Substrates e.g. semiconductor wafers are placed on the chucks at radius R i 1 2 . . . N and angle from the center of the rotary stage which defines the axis z. In this example the substrates are rotated by an angle 45 relative to the substrate placement radius. Each substrate offset and rotation from the stage coordinate system is slightly different and is individually tracked

A gap sensor may be coupled to a sensor amplifier and a controller that regulates current to the coil e.g. by applying a signal to a power amplifier . If for example dynamic forces tend to move the maglev downwards e.g. as determined by an increase in the gap g measured by the gap sensor the controller may signal the power amplifier increase current to the coil to add additional flux to the flux due to the permanent magnet thereby increasing the attractive force. If the gap g decreases as measured by the gap sensor the controller may signal the power amplifier to adjust the current to the coil to produce flux in the direction opposite to that of the permanent magnet . The controller may be commanded to maintain a constant gap g or to exert a prescribed force across the gap to cause deliberate motion of the maglev as in stage focusing action.

The rotary stage spins about its axis of symmetry z and translates along the x axis. The linear stage maintains the rotary stage on a straight path. A following metrology system may close the loop on the position of the rotary stage and the position of the electron beam relative to the substrates on the chucks . Feedback of the stage position may be derived from a number of different sensors. As shown in these sensors may include interferometers Y Z mounted to the translation stage to sense horizontal and vertical movement of the rotary stage and or translation stage relative to the chamber lid . By way of example an interferometer Y may track y axis movement of the rotary stage using a Y reference mirror mounted to the chamber lid and a cylindrical surface of a ring mirror attached to a periphery of the rotary stage . The cylindrical side surface of the ring mirror is concentric with the rotation axis z. In addition rotary encoders may sense the rotation of the rotary stage . Another interferometer may track z axis movement of the rotary stage using a reference mirror seen in mounted to the chamber lid and a flat top reflecting surface of the ring mirror . The top reflecting surface of the ring mirror and the Z reference mirror

The heavy and rigid chamber lid forms the inertial frame of reference for the stage metrology. A set of interferometer mirrors is kinematically attached to the lid and forms the metrology frame. This configuration reduces the effect of stage forces on the metrology.

There are a number of different possible configurations for the interferometers and sensors described above. For example as shown in between 1 and 4 radial sensors r r r rmay measure the radial displacement of the rotary stage relative to the X stage while 1 to 4 rotary encoders measure the tangential displacement of the rotary stage periphery. Using redundant sensors allows dynamic measurement of both the deviation of the cylindrical surface of the rotary stage from a perfect cylinder and direct measurement of the motion of the center of the cylinder relative to the X carriage reference frame. It is noted that the radial sensors r r rand rof may also be implemented as differential interferometers or as other types of sensors such as capacitance sensors. The bandwidth of these sensors may be up to about 200 MS s. Rotary velocity measurements from these sensors may be coupled in a feedback loop with position update from the optical sensors in a reference based on the spokes . If the redundancy is excessive some of the sensors may be dropped.

Differential interferometers x y z z ztrack changes in the relative position of the rotary stage with respect to a mechanically stable fixed reference e.g. the chamber lid . The interferometers may be characterized by a bandwidth between about 100 kHz and about 1 MHz. The interferometers are used in a feedback loop with corresponding maglevs to stabilize the rotary axis z in relation to the tool with a mechanical servo bandwidth of about 100 to 300 Hz. Such a system may be characterized by a following error within 100 nm in the x y and z directions.

Embodiments of the present invention may use differential interferometers to monitor the relative movement of the rotary stage so that a beam from the tool follows a predetermined path P across the substrates retained by the chucks . For example as shown in an interferometer Ymay measure the position of the stage relative to a stationary reference system e.g. with respect to the chamber lid along the y axis. Another differential interferometer Xmay measure the position of the cylindrical perimeter of the rotary stage relative to the tool which may be an electron beam column. The Yinterferometer differentially measures the location of the tool relative to stationary reference mirror along the y axis using a mirror mounted to the beam column. The Xinterferometer may similarly track variation in the location of the tool with respect to the x axis using a stationary reference mirror mounted to the chamber lid parallel to the y z plane and a mirror mounted to the tool . The Ydifferential interferometer measures the position of the rotary stage relative to a reference mirror . The above mentioned interferometers may alternatively be implemented in non differential configurations.

In addition to the above described interferometers the following sensors may be used to track the remaining degrees of freedom of the rotary stage interferometers z z zmay be kinematically mounted to the chamber lid to measure position of the top or the bottom of the stage relative to a stationary plane mirror in a z direction perpendicular to the x and y axes. The use of three interferometers allows tracking of the tilt of the cylinder about the x and y axes. Alternatively using 4 interferometers for z sensing may have advantages over the 3 interferometer configuration. Signals from the interferometers and sensors shown in may be fed back to the various maglevs used to position the rotary stage relative to the x stage the x stage relative to the guideways and the linear motors that move the x stage along the guideways .

Several metrology configurations exist for an apparatus of the type described above with respect to . By way of example illustrates metrology for direct column and Substrate metrology system SMS using the chamber lid as a metrology reference frame In this example an optical based SMS covers a die size wide 30 mm swath upstream of an electron beam e beam from the tool . A much narrower e.g. 200 m field of view of the e beam may be used to capture sparse die alignment marks on the substrates on every pass.

The SMS may include one or more optical sensors adapted to sense reference features located on the substrates . Reference mirrors may be used in conjunction with interferometers not shown to track the location of the SMS relative to the chamber lid . The optical sensors measure the x and y positions of substrate marks with respect to a substrate coordinate system. Such reference marks may be located e.g. on the spokes . The sensors may also measure Z focus . A process coupled to the SMS interpolates signals from the optical sensors and creates a grid of wafer surface distortion values. The coordinate system for the SMS may be a moving coordinate system having as its origin a corner of a reference die on the substrate . The processor may designate one wafer as a master wafer and calculate the origin shift of the other wafers relative to the master wafer. The processor may also updates the optical sensor position relative to null position of the electron beam using interferometric measurements of the sensor position relative to the chamber lid .

If the locations of the tool and SMS are not stable they may be tracked using differential measurements and reference mirrors. The SMS cluster may be tracked in x and y directions and yaw angle about the z axis as it focuses on a substrate . E beam to column shifts may also be tracked dynamically. The stage to substrate coordinates may be updated several times on every turn of the rotary stage e.g. using the SMS and e beam tracking.

Differential interferometers Y Yand Y which are referenced to a y reference mirror attached to the chamber lid track the position of the rotary stage X stage and e beam column respectively along the y axis. Differential interferometers Z Z Z which are referenced to a mirror mounted to chamber lid track vertical position tip and tilt of the rotary stage . Interferometers X X which are referenced to x reference mirror attached to the chamber lid track the position of the X stage along the x axis and yaw of the X stage about the z axis.

As shown in the rotary stage may be spun by a central rotary motor . However to accelerate the weight of the rotary stage to the initial writing speed the central rotary motor may need to generate a large torque ripple which in turn may generate a significant amount of heat depending on the rotational speed during writing. For example in some embodiments full speed for writing the outer circle may be about 3 revolutions per second rps and on the inner circle it may be about 9 rps. To slowly accelerate from 3 rps to 9 rps during the writing process a much smaller motor may suffices with about one tenth the torque required to spin the rotary stage from rest to 3 rps or to stop it from 3 rps or 9 rps. Such a small central rotary motor may have a very small torque ripple By way of example the torque ripple may be less than about 1 of driving torque of the motor. To facilitate low torque ripple the motor may include a stator that is ironless and may include windings designed to provide sinusoidal torque almost perfectly matching that of a sinusoidal commutation by a motor amplifier. By way of example the motor may be a ThinGap TG 8260 motor available from ThinGap Corporation of Ventura Calif. ThinGap is a registered trademark of ThinGap Corporation. The torque ripple of this particular model of motor is on the order of 10times the driving torque but the torque is low only adequate to sustain the motion and modest acceleration from the low speed writing speed to the high writing speed.

In some motors the torque ripple may also be proportional to torque itself. Thus a large motor having a torque about 200 times larger than a low torque ripple motor may have about 200 times the torque ripple. Therefore the torque ripple of a motor large enough to accelerate the rotary stage from rest and control the rotational motion during substrate processing is likely to disturb the smoothness of motion required for the process of writing or inspecting the substrates or any other process where parasitic motions must be controlled to a high degree.

To overcome this in some alternative embodiments e.g. as shown in a secondary motor sometimes referred to herein as a booster motor may be used to help spin up and spin down the rotary stage . The secondary motor may be mounted to a support base e.g. the chamber or to a carrier stage such as the linear stage that supports the rotary stage . The carrier stage may be either fixed or movable relative to the support base. The secondary motor may provide the high torque desirable to rapidly speed up slow down or stop the rotary stage when substrate processing is not taking place and small torque ripple is not required. As shown in the booster motor is mounted to the chamber and coupled to the rotary stage by a shaft . The shaft may pass into the chamber through seals which may be vacuum seal e.g. O ring lip seal or ball seal or ferrofluidic seal. In the example depicted in the booster motor may be connected to and has the same rotation axis z as the primary central motor . In this case the encoders may be synchronized so that both motors and spin at same angular speed during coupling and decoupling.

As shown in to spin up the maglev axis is aligned with the booster motor axis and the maglev coil may lower the primary motor on to a clutch plate which may be connected to a shaft of the booster motor . The clutch plate may selectively engage the rotor of the primary motor e.g. via an electromagnetic clutch. By way of example the electromagnetic clutch may be engaged by energizing a clamping coil thereby coupling the primary rotor and the clutch plate through magnetic attraction when energized. Preferably the clutch plate provides sufficiently strong friction enough so that the two motors and will not slip. The clutch plate may optionally include one or more protrusions that engage corresponding recesses on the primary rotor to avoid slippage. The clutch plate may engage the primary rotor through relative axial movement of the clutch plate axial movement of the primary rotor or some combination of both. This axial motion may be accomplished e.g. with a maglev of an extended axial stroke or by moving the booster motor axially or by using a conventional auxiliary axial engagement mechanism. In some embodiments engagement between the clutch plate and primary rotor may be accomplished through case of low stroke friction engagement. In vacuum environments it is desirable to use precisely machined clean and hard surfaces are together with a high clamping force to develop enough friction. In order not to create particulate. In some embodiments the engaging surfaces may include labyrinth enclosure to contain any particulate which may be generated.

The booster motor may accelerate the rotary stage to an initial writing speed then the clutch plate may be released and the maglev coil moves the booster motor axially to disengage it. The primary motor may then take over the servo assembly. The torque on the booster motor may depend on size of the clutch plate and the clamping force of the clamping coil . The axial motion may be accomplished with either the maglev of an extended axial stroke or by moving the booster motor axially or by using a conventional auxiliary axial engagement mechanism.

To facilitate engagement between the primary motor and secondary motor it may be desirable to synchronize the rotation of both motors such that they spin at the same angular speed. In addition it may be advantageous to synchronize their respective rotations such that engaging components of the primary motor and the secondary motor are aligned with some particular angular position relative to each other. By way of example the primary rotor and the clutch plate may be aligned so that the protrusions engage the recesses . Such synchronization may be implemented e.g. through use of precise rotary encoders and calibration of relative angular positions of the clutch plate and primary rotor at engagement. There is no slippage during the engagement so there is no need for high friction at this point. The friction during the engagement is necessary to accelerate or decelerate the spinner. The stepped clutch is shown here before engaging engaged and driving. Notice that a larger axial motion is necessary to do this.

As shown in the booster motor may be fixedly mounted to the chamber . The linear stage may align the primary motor with the booster motor prior to engaging the two motors for acceleration or deceleration. Mounting the booster motor outside the chamber may be advantageous in that it allows access to the booster motor without having to open the chamber. In addition such a configuration may keep stray magnetic fields from the booster motor relatively far from the substrates on the rotary stage .

In alternative embodiments the booster motor may be mounted to the linear stage so that the booster motor is fixedly aligned with respect to the rotary stage as the latter translates. This may simplify engagement of the booster motor while avoiding the need for a sealed bearing . By way of example as shown in the booster motor may engage the rotary stage at or near its rim e.g. with a friction drive attached to the booster motor shaft that engages the maglev ring . The friction drive may include a layer of material e.g. a synthetic rubber. The material may be chosen such that there is a high coefficient of static friction between the friction drive and the maglev ring or other portion of the rotary stage. The friction drive may selectively engage the rotary stage e.g. through use of an engagement mechanism such as a magnetic clutch. In an alternative embodiment the booster motor may be configured with a stator attached to the translation stage that applies a direct drive force to a rotor attached to rotary stage . By way of example the stator and rotor may be configured as an asynchronous motor sometimes also known as an inductive motor or asynchronous inductive motor . For example as shown in stator coils and corresponding pole pieces may be attached to the translation stage. The coils may be configured such that they apply a rotating flux to a conductive ring attached to the rotary stage . The conductive ring provides the rotor. The rotating flux induces eddy currents in the rotor follows flux. These eddy currents tend to follow the rotating flux. Interaction between the eddy currents and the rotating flux may exert a torque on the conductive rotor which is transferred to the rotary stage . By way of example the rotating flux may be applied to the maglev ring or a separate ring. As shown in a magnetic winding consisting of multiple coils surrounding the conductive ring may generate a magnetic field across the ring and induce eddy currents to rotate the rotary stage . In some embodiments it may be desirable to make the ring from a material of high electrical conductivity like copper or aluminum to provide sufficient generation of eddy currents producing the torque accelerating or decelerating the rotary stage . Alternatively e.g. if the maglev ring is made of stainless steel it may be advantageous to place a copper or aluminum ring inside the maglev ring to provide the rotor. Alternatively a set of stator coils may produce a rotating magnetic flux that drives the conductive mirror ring . This is somewhat counterintuitive since one of skill in the art would normally avoid applying driving forces to a metrology component such as the mirror ring due to the risk of deformation. However if the radius of the mirror ring is sufficiently large the force applied and the resulting deformations may be sufficiently small that their effect on metrology may be ignored. Asynchronous motors may be advantageous in that they do not require magnetic materials such as permanent magnets or pole pieces in the rotor. Consequently stray magnetic fields may be significantly reduced when using such a motor design as the boost motor.

After the quick acceleration of the rotating stage by the booster motor the rotation of the rotating stage may be sustained by the primary motor which drives the stage with minimal torque ripple. Preferably the torque requirement of the primary motor to sustain constant or slowly accelerating rotation is much lower than the torque of the secondary motor which can accelerate the rotating stage to operating speed in a matter of seconds and decelerate the rotating stage after the process from the operating speed to a full stop. In some implementations the braking torque requirement may be two orders of magnitude larger than the motion sustaining torque of the primary motor .

There are a number of different possible configurations for an asynchronous induction motor that may be used as the booster motor . For example and Q R illustrate two alternative embodiments of that utilize an asynchronous boost motor. In the embodiment depicted in the secondary booster motor may include a stator having multiple windings that are built into the translation stage and a conductive rotor that may be a part of the rotating stage assembly . The rotor may be attached to the rotating stage via a drive shaft DS. The rotor may be in the form of disk made of an electrically conductive but non magnetic material such as copper or aluminum. In this configuration there is no need for a coupler assembly since the stator and rotor are coupled inductively through the magnetic gap between them.

In the example depicted in the windings and pole pieces of the stator are oriented such that the flux they produce is oriented radially inward toward the rotor . By driving different windings in the stator with different phased currents the net flux produced by the stator may be made to rotate. The rotating flux produced by the stator produces eddy currents in the rotor which induces a magnetic force that drives the rotor . By way of example the stator may include one or more sets of three phase windings with each winding in each set being 120 degrees apart from the next. In a preferred embodiment there are 6 sets of three phase windings. This allows for a synchronous rotational speed of 10 Hz when the 60 Hz AC current is applied to the windings of the stator .

In the Example depicted in the primary motor may be have a thin ironless stator winding attached to the rotating stage and a rotor sometimes referred to herein as the primary rotor attached to the rotor of the secondary motor . Use of an ironless stator may avoid cogging associated with pole pieces. The primary rotor may include permanent magnets M and a magnetically permeable yoke PY having a u shaped cross section. The stator winding fits between magnets M attached to inner and outer walls of the yoke PY. An example of a commercially available motor having such a configuration is a model TG 8263 brushless DC motor available from ThinGap LLC of Ventura Calif.

A center maglev assembly may provide vertical lift force supporting the weight of the rotary stage while small peripheral vertical maglevs Z proximate the ferromagnetic ring may be used to stabilize the rotary stage in the plane of rotation. Pairs of small radial maglevs X and Y may be used to provide forces centering the rotation of the stage about its axis. The center maglev assembly may include a stator pole piece and stator winding attached to the linear stage a permanent magnet and pole piece may be attached to the rotor of the secondary motor .

An alternative configuration utilizing an asynchronous inductive motor as the secondary motor is depicted in . In this embodiment the rotor of the primary motor is attached to the rotating stage and the rotor of the secondary motor is attached to the primary rotor . The stators of the primary and secondary motors are attached to the linear stage by a fixed disk FD and a fixed shaft FS. The primary motor may be otherwise configured as described above with respect to .

In this embodiment the windings and pole pieces of the secondary stator are oriented such that they produce an axially oriented flux. The secondary stator is in the form of a ring made of a conductive and nonmagnetic material such as copper or aluminum. The secondary stator includes pairs of opposed windings located above and below the rotor . The coils above and below the rotor are wound the same way to provide a uniform flux. If the stator includes a group of three phase windings the return path for the flux through a given winding is through the pole of the next winding in the group.

In the embodiment depicted in most of the weight of rotary stage may be supported by main vertical maglevs having windings and corresponding pole pieces e.g. E cores attached to the fixed shaft FS exerting magnetic forces on a permanent magnet and corresponding stator pole piece e.g. a ferromagnetic ring attached to the primary rotor . Secondary vertical maglevs Z may be attached to an upper disk UD attached to the fixed shaft FS and corresponding permanent magnets PM may be attached to the primary rotor . Magnetic forces between the secondary vertical maglevs Z and a ferromagnetic ring attached to the primary rotor may be used to provide vertical forces for de wobbling the rotary stage . In addition radial maglevs X may be attached to the fixed shaft FS and exert forces on a ferromagnetic ring attached to the primary rotor . In some Note that in this embodiment the ferromagnetic ring and peripheral maglevs may be avoided.

To maintain constant gap widths the current supplies for the maglevs X Z Z may be coupled in feedback loops to gap sensors in servo loops. The gap sensors may be in the form of capacitive or inductive sensors. One type of inductive sensor may sense changes in a small high frequency current added to the drive current applied to the coils in the maglevs. Changes in the gap cause changes in the inductance which causes changes to the high frequency current.

It is noted that in the embodiments depicted in no windings are used on the spinning part of the primary motor the secondary motor or any maglevs associated with either motor. This avoids having to couple coils on the spinning part to an external current source e.g. through slip rings.

Examples of preferred differential interferometer configurations for use in motion tracking are shown in . Specifically as shown in in a rotary linear stage of the type shown in optical motion tracking may be implemented with a differential interferometer disposed between a reference mirror and a stage ring mirror having a cylindrical surface that is concentric with the z axis. The interferometer is mounted to the linearly translatable X stage . The reference mirror is mounted in a fixed in position relative to the X stage . By way of example in preferred embodiments the reference mirror may be mounted the lid of the chamber that contains the X stage and rotary stage . In the example shown in the stage ring mirror is peripherally mounted to the rotary stage which rotates about a rotation axis z that is in a substantially fixed position and orientation with respect to the X stage . The stage ring mirror provides a cylindrical reflecting surface that is symmetric about the rotation axis z. The interferometer includes a folding mirror a polarization beamsplitter disposed between first and second quarter waveplates A B a corner cube mirror and wavefront compensation optics . Interferometers having this design are described in detail in International Patent Application Publication WO 2005 078526 A1 published 25 Aug. 2005 and entitled A SYSTEM FOR POSITIONING A PRODUCT .

Light from a source such as a laser is deflected by the folding mirror towards the polarization beamsplitter . The light from the source contains first and second polarizations. Light having the first polarization of the light passes through the beamsplitter and is reflected by the corner cube back through the polarization beamsplitter to the folding mirror which deflects the light to a detector . This light serves as a reference beam indicated by the dashed optical path.

Light having the second polarization is reflected at a diagonal interface of the polarization beamsplitter through the first quarter waveplate A off the reference mirror and back through the first quarter waveplate A. The two trips through the first quarter waveplate A convert the light from the second polarization to the first polarization. As a result the light can pass through the interface the second quarter waveplate B and the wavefront compensation optics to the curved surface of a cylindrical stage ring mirror having an axis concentric with the z axis. After reflection by the stage ring mirror the light passes back through the wavefront compensation optics and the second quarter waveplate B. The two trips through the second quarter waveplate convert the light from the first polarization back to the second polarization. As a result the light is deflected by the interface towards the corner cube which bends the light back to the folding mirror . The folding mirror deflects the light to the detector . Light following this path serves as a measurement beam indicated by the solid optical path. Light from the reference path and measurement beam interfere at the detector producing a signal that depends on relative changes in the lengths of the two beam paths due to motion of the rotary stage with respect to the reference mirror .

In an alternative embodiment depicted in a small cylindrical mirror having a cylindrical surface concentric with the z axis may be used in place of the peripheral ring mirror . In either configuration the wavefront compensation optics are configured so that wavefronts traveling from the interferometer and the cylindrical reflecting surface are compensated for reflection from the cylindrical mirror so that light reflected from the cylindrical reflecting surface follows the proper path back through the interferometer . By way of example the wavefront compensation optics may include cylindrical optical components or spherical optical components.

A number of different configurations for the wavefront compensation optics may be used to couple light between the interferometer and cylindrical reflecting surface or . By way of example and without limitation two possible configurations of the wavefront compensation optics are shown in and . In the wavefront compensation optics focuses parallel light from the interferometer at the axis of curvature of the wavefront compensation optics e.g. on the rotation axis z. In this way light reflected from the cylindrical surface of mirror follows essentially the same path as the light incident on the cylindrical mirror from the interferometer . In an alternative configuration depicted in the wavefront compensation optics is configured to focus parallel light from the interferometer onto the surface or of the cylindrical mirror or . In this way light beams incident on and reflected from the cylindrical mirror follow parallel paths through the interferometer .

It is noted that tracking the rotary stage motion using reflection from the curved reflecting surface or using the wavefront compensation optics as described above is suitable for measuring small amplitude vibrations relative to the X stage or the lid . As used herein small amplitude refers to motions that are no larger than the depth of focus of the wavefront compensation optics .

The differential interferometer is carried by the motion of the X stage so that the interferometer is always pointed at the center of rotation of the rotary stage and remains in alignment with the rotary stage . Although a stage ring mirror at the periphery of the rotary stage is shown in alternatively a small cylindrical hub at the center of the rotary stage may provide a cylindrical reflecting surface e.g. as shown in . It is noted that in both and the reference mirror laser and detector remain fixed with respect to the X stage and rotary stage as indicated by the dashed line surrounding these components. Preferably these components are mounted to a lid of a chamber that contains the X stage rotary stage and interferometer which move in the x direction as indicated by the dashed line surrounding these components.

The interferometer is carried by the X stage and is aligned to the center of the X Stage . A servo system based on this interferometer system maintains the prescribed linear motion of the X stage and the rotary stage moving together and following each other as closely as possible. The rotary stage axis z remains fixed relative to the X stage . Therefore the alignment does not change as a result of this motion.

The interferometer moves with the X stage towards the laser and detector however to first order this motion does not affect the reading of the detector . The detector only senses an optical path difference between the cylindrical mirror and the stationary reference mirror .

As shown in the Z interferometers may also be configured differentially. Once again an interferometer is attached to the X stage along an optical path between a stationary reference mirror and the stage ring mirror . The reference mirror may be mounted to the lid of the chamber e.g. as shown in . The interferometer includes a polarization beamsplitter quarter waveplates A B and corner cube . Light from a laser is divided into a reference path and a measurement path through the interferometer to a detector . Operation of the interferometer is similar to operation of the interferometer described above with respect to . Since the reference beam reflects from a flat upper surface of the stage ring mirror wavefront compensation optics between the interferometer and the stage ring mirror are not necessary.

Some of the design concepts described above with respect to rotary linear stages may be advantageously applied to more conventional X Y stages. For example it is noted that one of the advantages of the apparatus described above is that the various maglevs and magnetic motors are located near the edges of the rotary stage and X stage. This places the magnetic fields generated by these devices at a considerable distance with respect to the tool . Such a configuration can be particularly advantageous if the tool is sensitive to stray magnetic fields. For example where the tool includes an electron beam column stray magnetic fields from the maglevs may deflect the electron beam resulting in an error in its position. Although the deflection of the beam may be tracked and compensated it is more desirable to avoid or at least significantly reduce such magnetic deflection. The placement of the maglevs at the edges of the rotary stage and X stage and away from the optical column may significantly reduce errors associated with stray magnetic fields from the maglevs. The rotary stage may be made of a magnetically transparent material e.g. a ceramic so that magnetic fields from a magnetic lens of the tool are not distorted.

This same concept of supporting the stages with edge mounted maglevs may be applied to an X Y stage according to an embodiment of the present invention. For example depict a substrate processing apparatus according to an alternative embodiment of the present invention. The apparatus includes an X stage and a Y stage . The X stage includes a chuck adapted to retain a substrate . The X stage is suspended from the Y stage by vertical maglevs A mounted at the corners of the X stage . Controlled movement of the X stage along an X axis relative to the Y stage may be imparted e.g. by linear motors . The Y stage is suspended from a chamber lid by vertical maglevs B mounted at corners of the Y stage . The Y stage may be adapted to move in a Y direction relative to the chamber lid e.g. using linear motors not shown . The position of the X stage relative to the Y stage along the Y axis may be regulated using edge mounted horizontal maglevs C coupled in feedback loops with appropriate sensors. The X stage may move in the X and Y directions relative to a substrate processing tool which may include e.g. an electron beam column. By placing the linear motors vertical maglevs A B and horizontal maglevs C away from the substrate undesired magnetic deflection of the electron beam from the column may be avoided. The X stage may be made of a magnetically transparent material e.g. a ceramic so that magnetic fields from a magnetic lens of the tool are not distorted.

Metrology for directing the tool and a substrate metrology system SMS may use the chamber lid as a metrology reference frame. The SMS may be tracked in the x and y directions and yaw about the z axis as it focuses on the substrate . The SMS may use reference pattern similar to those seen on the spokes in and . By way of example the SMS may cover a swath approximately as wide as a e.g. about 30 mm upstream of the e beam column and a much narrower field of view e.g. about 200 m to capture sparse die alignment marks on every pass. Since the stage reverses direction the SMS may include two optical sensors. One sensor may be located on either side of column arranged in an X scanning direction. If the column and SMS locations are not differential measurements reference mirrors may be used to determine these positions. In addition shifts in the e beam position relative to the tool may be tracked dynamically to precisely position the electron beam from the column on the substrate . Stage to substrate coordinates may be updated on turnarounds of the X stage on a calibration chip using SMS and e beam location information.

The apparatus may use one or more interferometers to track the position of various components with respect to the chamber lid . These may include an interferometer Xthat measures movement along the x axis of the X Stage relative to the tool and chamber lid . A second interferometer Xmeasures movement of the X stage relative to the chamber lid thereby facilitating measurement of yaw of the X stage . A third interferometer Y measures movement along the y axis of the X Stage relative to the chamber lid and the tool . Vertical differential interferometers Z Z Z may be configured e.g. as shown in to measure changes in position of the top of the X stage relative to the chamber lid . X Stage top to lid differential. Although additional interferometers may be used to track the motion of the carriage in the Y stage this may alternatively be accomplished with the maglevs and or linear motors used to support and or move the Y stage along the y direction. Although in this example the x and y axes are perpendicular to one another they may alternatively be oriented at some oblique angle.

The advantage of the configuration shown in may be illustrated by comparison with a prior art X Y stage e.g. as depicted in . In the prior art X Y stage an X stage is levitated by maglev units . Mounts attached to the X stage support a chuck that retains a substrate . The X stage and Y stage are adapted to move along x and y axes respectively e.g. using linear motors . An example of such a prior art X Y stage is described in detail e.g. in International Patent Application Publication WO 2005 078526 A1 published 25 Aug. 2005 and entitled A SYSTEM FOR POSITIONING A PRODUCT .

Downward looking differential interferometers Z Z track variations of the vertical z position of the X stage relative to a base of a chamber . A mirror is positioned on the underside of the X stage for this purpose. It is noted that in this design the maglev units are directly beneath the substrate. This is done to keep the maglev system from interfering with the downward looking interferometers Z Z Stray magnetic fields from the maglev units can deflect the path of an electron beam. Furthermore the configuration of the maglevs requires a relatively tall central support and correspondingly long mechanical paths for reaction forces from the maglevs to the chamber lid which is used as a reference mass. For example the moment arm between the top of the X stage and the point of application of horizontal forces by the maglevs may be as much as 200 mm. This configuration also requires a relatively large chamber to support the X Y stage . In embodiments of the present invention by contrast the upward looking interferometers use the chamber lid as a reference. This allows the maglev units to be placed at or near the edges of the X stage or rotary stage. Consequently the mechanical path for reaction forces can be made much shorter the apparatus made more stable and the chamber may be smaller.

Embodiments of the invention allow for more compact and stable rotary translation stages and X Y stages. Embodiments relating to rotary stages provide for high substrate throughput with lower linear acceleration that would be required for an X Y stage with short path lengths for reaction forces stable configuration of the bearings and compact design. Embodiments of the invention relating to X Y stages provide for shorter path lengths for reaction forces greater stability and more compact design than in prior art X Y stages.

It is noted that some embodiments of the present invention may utilize something other than magnetic levitation e.g. mechanical bearings or air bearings to provide bearings for the X stage and rotary stage and or Y stage. For example depict an alternative substrate processing apparatus according to an alternative embodiment.

The apparatus includes a rotary stage and translation stage disposed in a chamber . The rotary stage carries a plurality of substrate chucks which may be configured as described above. The rotary stage may be spun by a central rotary motor mounted to the linear stage . The motor includes a spindle bearing attached to the center of the rotary stage . The rotary stage spins about a z axis and the X stage moves the rotary stage along an x axis. A substrate processing tool remains more or less fixed with respect to the chamber lid as described above. Note that the placement of the chucks shown in keeps substrates mounted to the chucks at a distance from stray magnetic fields from the motor . Linear motors mounted at edges of the X stage move the linear stage along parallel ferromagnetic guideways mounted to the chamber . The linear motors may include a set of lateral electromagnets of alternating polarity. In this example between the X stage and chamber may keep the motion of the X stage aligned with the x axis. By way of example the bearings may be mechanical cross bearings. Mechanical bearings may be used if stage positioning noise from the bearings does not exceed the ability of the metrology systems to track motion of the substrates mounted to the chucks . In alternative embodiments the bearings may be air bearings. It is noted that if the bearings are in vacuum differential pumping may be used for air bearings. It is further noted that the motor may include an air bearing.

Positioning of the rotary stage and X stage may be monitored as described above e.g. using interferometers Z and peripherally mounted ring mirror on the rotary stage and reference mirrors mounted to the chamber lid .

In embodiments of the present invention it is often desirable for a rotary linear stage to control a position of the substrates relative to the tool to within 10 nanometers of a desired position. There are a number of different ways to accomplish this. For example as described above the position of the substrates and the tool may be very tightly controlled with respect to a reference frame such as the chamber lid. Generally it is desirable to have very high resolution e.g. less than 1 nm in sensing the stage position and in positioning the beam from the tool with respect to the substrates. Embodiments of the invention may use precise control of the rotary linear stage in conjunction with precise control of a position of the beam from the tool to achieve the desired resolution in beam positioning. For example in the case of an electron beam tool beam positioning may be adjusted through the use of electrostatic and or electromagnetic lenses in conjunction with electrostatic and or electromagnetic beam deflection mechanisms e.g. raster plates or deflection coils . If the range of focus and or X Y beam deflection is both sufficiently large and sufficiently accurate it may be possible to tolerate a somewhat greater degree of variation in the position of the substrates relative to the optical column. For example if the positioning accuracy of the beam deflection and focusing is less than about 1 nm and the range of beam positioning is about 1 micron the system can tolerate stage position variations of roughly 1 micron provided the metrology system can track these variations and the beam deflection mechanism can respond quickly enough.

In the particular example of an electron beam tool there are a number of different ways of controlling stage and or beam position in order to achieve the desired positioning accuracy for the optical column. Control of the beam and or stage position may be understood with respect to the block diagram shown in . By way of example control of a rotary linear stage of the types described above may be implemented using three sets of inner multiple input multiple output MIMO control loops a the stage loops b the lid and optical sensor loops and c optical column beam position and focus control loops. An overall outer control loop may estimate the relative position between the optical column and the substrate using a spoke reference system SRS and substrate metrology system SMS as described above. Servo mechanisms may be used to bring this error to zero using a slower stage loop and a faster beam loop.

In a stage Setpoint Generator generates nominal trajectories in x and that are used to perform probing of the substrates with the optical column. In addition this stage setpoint generator may be used to position the stage for loading to perform substrate alignment map the substrate distortions prior to writing and create a focus map for the optical column and the SMS. In some embodiments data regarding known topographic features of the substrates may be stored in a database which may include information regarding the relative orientation of the substrates and their thickness variations. These may be measured as a part of a spin up process and used to generate a correction table to compensate for any misalignments.

The stage setpoint generator may also utilize calibration data that captures thermal and elastic deformation of the rotary stage and or substrates. For example the temperature of various components in the system and the resulting distortion due to CTE differences may be monitored. The distortion values may be pre computed and stored as a part of the calibration data in the setpoint generator . The stage setpoint generator may also include corrections for measured non uniformities in a given rotary stage. Furthermore models of the distortion of the rotary stage due to centrifugal forces during spin up may be stored as a part of calibration data in the setpoint generator .

A stage metrology system may perform the r measurements of the rotary stage in addition to the x y and z interferometer measurements as described above. The stage metrology system may include multiple redundant sensors and one of the functions represented in this block may include a set of sensor fusion algorithms that provide estimates of the various coordinates of the stage position. The stage metrology system may also contain calibration tables for each of the sensors to compensate for errors that are systematic. For example harmonic errors in the measurements may be measured during a calibration process and stored. These known errors may then be removed from actual measurements before generating estimates of the position of the rotary stage. Similar calibration data is generated and used for the other sensors that are a part of the stage metrology system .

An optional Substrate Metrology System SMS may provide a measurement between the optical sensors held by the lid and the substrate. If the optical sensors are referenced to the column the SMS may provide an estimate of the position of a substrate relative to the beam from the optical column. The SMS may optionally utilize reference marks on the substrates to obtain input e.g. regarding the relative orientation and thickness variations of the substrates.

The SMS may receive input from a spoke reference system SRS that uses spokes of the type described above. The SRS may allow a sensor e.g. an optical sensor in the SMS to provide a measurement of the relative position between spokes on the stage and the substrates. The spokes may be features on the rotary stage such as those shown in . Initial positions of the spokes relative to the substrate position may be stored as a part of the calibration data after loading the substrates.

Measurements obtained from the Stage Metrology system SMS and SRS may be used to control the position of the rotary linear stage using MIMO control referenced to the chamber lid for minimal length force and metrology paths. By way of example the electron beam may be visible to the spokes in the spoke reference system . For example the spokes may be electrically conducting and configured so that it is possible to determine where the beam strikes a particular spoke. This information may be used to by the SMS . For example the WMS may also use the information from the spoke reference system to produce an adjusted substrate position signal which may be filtered by the low pass filter . The output of the low pass filter may then be combined with inputs from the stage setpoint generator and stage metrology system to produce an error signal that is fed to a stage controller . By way of example the stage controller may be a MIMO controller that issues a simultaneous command to all actuators that control the positioning of the rotary stage and linear stage in the stage . In the case of the system of the controller may adjust the actuation of rotary stage positioning maglevs the x translation and rotation actuators to drive the error signal to zero.

The command to this stage control loop may have two components. The first component is the reference trajectory command from the stage setpoint generator . The second component is a low pass filtered beam to substrate position error estimate from the low pass filter . The stage controller may be used to stabilize the rotary stage and reject imbalance precession and nutation motion of the rotary stage. In addition the stage controller may make corrective actions to rectify the low frequency portion of the beam to substrate position error. These corrections may be fed back to the stage metrology system in the form of a stage state vector . By way of example the Stage Metrology System may measure displacements at the interferometer points of incidence e.g. as described above. Knowing the laser beam configuration relative to the point of reference on the stage the stage vector may be calculated. The stage state vector may contain displacements velocities accelerations and possibly jerks derivatives of accelerations with respect to time in all stage degrees of freedom e.g. XYZ pitch roll and yaw.

Measurements from the Stage Metrology system SMS and SRS may also be used to estimate a Beam to substrate position error. The beam position error may be used to drive a beam controller in such a way as to drive the beam to substrate position error to zero. The beam controller may operate on an error between the commanded beam position and the actual measured beam position and aims to minimize the error. The beam controller receives an input from the stage metrology system that is filtered with a high pass filter . The beam controller also receives an input from the substrate metrology system . The combination of these inputs provides a high pass filtered value of a beam substrate position error estimate.

By way of example the beam controller may produce signals that control a beam deflection mechanism and the actual beam dynamics. The beam deflection mechanism may include electrostatic deflectors or electromagnetic deflectors. The beam deflection control signals may be used to derive a beam in substrate state vector which may be combined with measurements of the beam position from the spoke referencing system to produce a measured beam in substrate state vector. The measured beam in substrate state vector may be used as an input to the beam controller .

The beam controller may also obtain input from a Beam In Lens Position detector that senses the position of the beam relative to the optical column. The beam in lens position detector may sense a position of an optical or electron beam from the optical column relative to an optical axis. The beam in lens position detector may also receive input from the beam deflection mechanism . In some embodiments the beam in lens position detector may also include a focus sensing scheme.

It may be seen from the preceding discussion that the stage controller and stage provide correction for a low frequency component of the beam substrate position error and the beam controller and beam deflection provide correction for a high frequency component of the beam substrate position error. The stage controller and beam controller may receive additional input from adaptive Filter Logic which may be implemented in hardware or in software e.g. in the form of adaptive control algorithms. By way of example the adaptive filter logic may use Kalman filtering. The adaptive filter logic may receive input from the Stage Metrology System . There are a number of different possible implementations of the adaptive filter logic . For example an imbalance between actuators used to translate the rotary stage in the x direction may cause a variation in the angular speed of the rotary stage. The sensors used in the stage metrology system may sense this imbalance and a differential command may be applied by the stage controller to the x actuators to compensate for the imbalance between the two actuators. Alternatively reaction forces from controlling the rotary stage may cause motion in the chamber lid. These reaction forces may be adaptively cancelled e.g. using electrodynamic actuators. In addition the adaptive filter logic may adaptively correct for effects of thermal and elastic deformation of the rotary stage and or substrates based on measurements from the substrate metrology system and the spoke referencing system during operation.

It is noted that if the rotation of the rotary stage is relatively slow and or the substrates are not subject to significant deformation due to heat loads and or high acceleration embodiments of the invention may be able to achieve resolution of about 40 nm or better e.g. about 2 40 nm in tool substrate positioning without the substrate metrology system .

While the above is a complete description of the preferred embodiment of the present invention it is possible to use various alternatives modifications and equivalents. Therefore the scope of the present invention should be determined not with reference to the above description but should instead be determined with reference to the appended claims along with their full scope of equivalents. Any feature whether preferred or not may be combined with any other feature whether preferred or not. In the claims that follow the indefinite article A or An refers to a quantity of one or more of the item following the article except where expressly stated otherwise. The appended claims are not to be interpreted as including means plus function limitations unless such a limitation is explicitly recited in a given claim using the phrase means for. 

