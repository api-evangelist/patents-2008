---

title: Composite endpoint mechanism
abstract: A multimedia call from an originating device is provided. At least one session may be created at an application server in response to receiving the multimedia call. An endpoint may be created within the session for communication between the originating device and the application server. The endpoint may be a composite endpoint for communication between the originating device and two or more terminating devices. The composite endpoint may be include two or more logical endpoints for communicating with and respectively associated with the two terminating devices. A portion or more of the multimedia call may be delivered from the application server to each of the terminating devices using the logical endpoint associated with each terminating device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09374391&OS=09374391&RS=09374391
owner: BroadSoft, Inc.
number: 09374391
owner_city: Gaithersburg
owner_country: US
publication_date: 20081111
---
The invention relates to communication systems for providing multimedia services such as for example audio and video services.

Software maintenance is difficult for conventional communication systems that provide multimedia services because each multimedia service is typically independently embedded at the application level. When a new multimedia service is added to a conventional communication system changes to existing software are often required which may lower the quality and increase the time to market for the new multimedia service.

One exemplary embodiment may be a method for providing a multimedia call from an originating device. At least one session may be created at an application server in response to receiving the multimedia call. An endpoint may be created within the session at the application server for communication between the originating device and the application server. The endpoint may be a composite endpoint for communication between the originating device and two or more terminating devices. The composite endpoint may include two or more logical endpoints for communicating with and respectively associated with the two terminating devices. A portion or more of the multimedia call may be delivered from the application server to each of the terminating devices using the logical endpoint associated with each terminating device. The terminating devices may be one or more audio and video terminating device and the multimedia call may be split at the application server into at audio only and video only streams using the composite endpoint and delivered to the devices using the logical endpoints. Service logic is provided for the session using a service profile associated with a user of the originating device.

Another exemplary embodiment may be a system for providing at least one multimedia service including a storage device a processor and a communication interface. The storage device may hold a software instructions for a composite endpoint. The composite endpoint may include service logic for splitting one multimedia stream into at least two multimedia streams and two or more logical endpoints for communicating with at least two devices that receiving the least two multimedia streams. The processor may execute the instructions and is coupled to the storage device and the communication interface. The service logic may fork one or more multimedia stream to two or more devices or combine two or more multimedia streams. The composite endpoint may include a policy manager for providing one or more policies for the operation of the multimedia service. The devices may include a first device for receiving only the audio portion of the multimedia service and a second device for receiving only a video portion of the multimedia service. The system may include an application server which includes one or more sessions for the multimedia service which in turn includes service logic and the composite endpoint.

Yet another exemplary embodiment may be a computer readable medium including instructions which when executed by an application server may cause the application server to perform operations for a composite endpoint. The computer readable medium may include instructions executable by the application server for receiving at least one multimedia data stream. The multimedia data stream may include audio data video data or other data. The computer readable medium may include instructions executable by the application server for generating at least two endpoints which may specify a communications device. The computer readable medium may include instructions executable by the application server for separately transmitting at least two of the audio video or other data portions of the multimedia data stream to communications devices associated with the at least two endpoints. The computer readable medium may include instructions executable by the application server for determining based on a user profile whether two or all of the audio data the video and the other data and both the audio and video data is transmitted to one of the endpoints. The computer readable medium may include instructions executable by the application server for determining if the multimedia stream needs to be demultiplexed and if the multimedia stream needs to be demultiplexed demultiplexing the multimedia stream.

Further features of the invention as well as the structure and operation of various embodiments of the invention are described in detail below with reference to the accompanying drawings.

Exemplary embodiments are discussed in detail below. While specific exemplary embodiments are discussed it should be understood that this is done for illustration purposes only. In describing and illustrating the exemplary embodiments specific terminology is employed for the sake of clarity. However the embodiments are not intended to be limited to the specific terminology so selected. A person skilled in the relevant art will recognize that other components and configurations may be used without parting from the spirit and scope of the embodiments. It is to be understood that each specific element includes all technical equivalents that operate in a similar manner to accomplish a similar purpose. The examples and embodiments described herein are non limiting examples.

Exemplary embodiments may include systems and methods for providing multimedia services such as video add on. For example video add on may be a call service that allows a user to receive a video call where the audio portion of the call may be provided on the user s primary line or extended line e.g. desk phone home phone cell phone etc. and the video portion of the call may be provided on a software client running on a computing device such as a personal computer PC . The video add on call service may allow the user to receive video calls even when the user does not have a physical non PC based device to handle the video portion of the call. When the user does not have a video phone the user may use a regular phone for the audio portion of the call and a PC for the video portion of the call.

The application server may be any combination of hardware firmware and or hardware running software for serving software applications providing multiple stream multimedia services. The application server may include a memory or storage device a processor coupled to the storage device and a communication interface coupled to the processor. The memory or storage device may hold instructions that provide multiple stream multimedia services and the processor may execute the instructions. For example the instructions may include a multimedia splitting component for splitting one multimedia stream into at least two multimedia streams a multimedia aggregating component for combining at least two multimedia streams into one multimedia stream and or a policy management component for providing one or more policies for the operation of the multimedia services. The application server may make a program interface for a multimedia service accessible to clients such as other programs or devices. For example the application server may be a server that hosts an application programming interface API to expose logic processes and other objects for use by for example another application a Java application server or a client residing on a device such as integrated video phone .

An originating session may be a session established after the application server receives an invitation or a call. A calling party may be associated with the originating session in the application server. The originating session may include service logic and a regular endpoint . The regular endpoint may be associated with the originating session within the application server and may be instantiated with for example a video add on policy which may be stored in a policy manager . The originating session may be linked to a terminating session .

The terminating session may be a session established after the application server sends an invitation to one or more terminating device . A called party may be associated with the terminating session in the application server . The application server may deliver an invitation to service logic in the terminating session . The service logic may be derived from subscription information in the user profile. In this example the user may be subscribed to a video add on service which may become part of the service logic in the terminating session . As a result a composite endpoint may be created and the service logic may be programmed into the composite endpoint . The invitation event may be processed through the service logic in the terminating session and delivered to the composite endpoint . The composite endpoint may run instructions in the policy manager and create an endpoint for a communication session to an audio device and another endpoint for a communication session to a video device and optionally another endpoint for a communication session to a third device . The composite endpoint may take the incoming invitation and split the media according to policies in the policy manager .

The composite endpoint may manage the independent calls for each media type on one or more various kinds of devices and may provide a single interface for service execution within the terminating session . The logical endpoints may process the independent calls for each media type on the devices . The service logic may include a video add on service .

The devices interacting with the application server such as for example device X device A device B and device C may be any kind of communications device such as for example a voice over Internet Protocol VOIP device which may support Session Initiation Protocol SIP Media Gateway Control Protocol MGCP or other protocol for placing and or receiving multimedia calls. The devices may communicate with the application server e.g. via an SIP INVITE method to place or receive calls. The devices may support audio only streams video only streams both audio and video streams and or any other kind of session based media e.g. instant messaging text file transfer etc. .

The originating session terminating session service logic video add on service regular endpoint composite endpoint logical endpoints and policy manager may be software entities having instructions that reside in a storage device and execute on a processor in the application server that generally transform input into output between or among various communication devices by providing various multimedia services.

The originating session and or terminating session may encapsulate all of the service logic and communication protocol state machines needed to process a call for a given user. The originating session and terminating session may include the service logic and state machine to process the call and one or more logical endpoints to encapsulate the protocol state machine to deliver the call to a device such as device A device B or device C .

The service logic in the originating session and or terminating session may include the state machine service profile and service policies needed to process the call from a device such as device X for a specific called user. The service logic in the originating session may differ from the service logic in the terminating session or it may be the same depending on the profile of the subscriber. The service logic may be the container of the service subscription data and may manage the interactions for all of the services involved for the call for the specific user. The service logic may include logic for one or more specific services such as for example video add on service .

The logical endpoints and the composite endpoint are specific examples of endpoints. These endpoints may be logical components within the terminating session that may encapsulate the protocol state machine for a communication stream with a device using a protocol such as for example SIP and MGCP for VOIP. Each endpoint may provide an API for the service logic to handle a received call or to initiate a call with a device e.g. device X . Each endpoint may abstract the protocol from the service logic via the API allowing a protocol independent service set which may be used across multiple protocols and interwork calls between protocols.

The composite endpoint may aggregate multiple communication sessions into a single logical endpoint container. This aggregation may avoid needing to change the service logic when new policies are deployed. The composite endpoint may ensure that service interactions are transparent to the video add on service and that voice services continue to operate without change on the audio portions of the call. The composite endpoint may provide splitting forking or distributing services for multimedia streams. For the video add on service the composite endpoint may provide one or more policies for splitting an incoming multimedia video call into an audio stream and a video stream and directing the audio stream to a regular phone e.g. the user s primary or extended line and directing the video portion to the user s video client e.g. the user s PC . The composite endpoint may aggregate multiple media streams into a single terminating session and may provides policies stored in the policy manager that define for example on how the streams are processed and interact with each other.

The composite endpoint may aggregate multiple multimedia streams with programmable policies to provide a variety of service offerings. The composite endpoint may abstract the multiple multimedia streams from the service or application software layer of a communications system allowing integration of multiple multimedia stream applications into existing services.

The composite endpoint may be a special type of endpoint. The composite endpoint may implement the same API as a regular endpoint however the composite endpoint includes zero or more regular endpoints. The composite endpoint may include its own policy logic which may be populated via the user s service profile and stored in the policy manager . The composite endpoint may instantiate an endpoint e.g. composite endpoint or logical endpoint per communication stream as specified by the user s service profile. The service logic may delegate calls among the logical endpoints to the composite endpoint for management. The programmable policies of the composite endpoint may be defined and implemented when the service is developed. The logic for the composite endpoint may be created as part of the service development and loaded into the composite endpoint at execution time when the composite endpoint is instantiated.

The composite endpoint may be instantiated during the call setup based on a service profile of a subscriber. The behavior of the composite endpoint depends on the service profile assigned for the subscriber and the corresponding programmable policies used to provide the applicable services. The composite endpoint may provide a variety of multiple stream multimedia services for a given user session. Examples of such services may include a video add on service a shared call appearance service a multiple call arrangement service a backup devices for remote survivability service a dual mode device support service for wireless networks e.g. Wi Fi or global system for mobile communications GSM networks and other services.

The video add on service may be a service that separates the audio and video stream for a given terminating session so that the audio is only provided to the user s primary line phone and the video is only provided to the PC video client. The video add on service may be a call service that allows a user to receive a video call where the audio portion of the call is provided on the user s primary line or extended line e.g. desk phone home phone call phone etc. and the video portion of the call is provided on a software client running on a computing device such as a personal computer PC . The video add on service may allow the user to receive video calls even when the user does not have a physical non PC based device to handle the video portion of the call. When the user does not have a video phone the user may use a regular phone for the audio portion of the call and a PC for the video portion of the call. This may provide a more natural user experience while adding video to the user s call experience.

A shared call appearance service may be used in various scenarios such as for example key system emulation executive administrative assistant scenarios and personal use. The shared call appearance service allows an incoming call to appear at multiple locations simultaneously. Any of a number of devices in a group where call appearance is shared may be used to answer an incoming call or to originate a call on behalf of the main location such as in the executive administrative assistant scenario. Only one device in the group where call appearance is shared may be involved in a call at any given time. The composite endpoint may provide the forking policies and service abstraction to provide this service without any interface changes to other service applications by providing the appearance of a single endpoint to the other service applications.

The multiple call arrangement service may be an extension to the shared call appearance service. This service may allow multiple calls to be handled concurrently on different shared call appearance locations for a user. Because no single shared call appearance location may be considered the active location all locations may be allowed to originate and receive calls when they have an available call appearance regardless of the activity at the other locations. The composite endpoint may provide an additional policy for the multiple call arrangement service allowing multiple devices to be involved in calls simultaneously.

The backup devices for remote survivability service may be a service that allows a secondary or backup device to be contacted when the primary device is non responsive or otherwise unreachable. The composite endpoint may provide this capability by encapsulating the secondary device within the composite endpoint and providing the policy to contact the secondary device when the primary device is deemed unreachable.

The dual mode device support service for Wi Fi GSM networks may allow a user to be reached on the user s dual mode phone on a Wi Fi network when the user is connected to the Wi Fi or GSM network. Similar to the backup devices for remote survivability service the composite endpoint may provide the abstraction of the location of the user from the service logic and connect to the appropriate device based on a policy in the policy manager that includes the user s network registration e.g. Wi Fi or GSM network .

The composite endpoint may include several attributes such as an encapsulation attribute a service abstraction attribute and a policy management attribute.

The encapsulation attribute may allow the composite endpoint to encapsulate multiple multimedia streams in a single terminating session providing the appearance of a single multimedia stream. The composite endpoint may minimize or eliminate service interactions by abstracting media streams into a single instance of the composite endpoint via the programmable policies stored in the policy manager . The terminating session may be a software entity that embodies the encapsulation attribute of the composite endpoint .

The service abstraction attribute may allow the composite endpoint to integrate multiple multimedia streams into the service logic so that the service logic is only aware of a single media session and may provide an API to a service layer that is identical to a single multimedia session API. The composite endpoint may provide service abstraction by emulating a single endpoint i.e. a composite endpoint regardless of how many physical endpoints are used in the multimedia service processing. The service logic may be a software entity that embodies the service abstraction attribute of the composite endpoint .

The policy management attribute may allow the composite endpoint to have programmable policies for various services. Some examples of programmable policies may include multiplexing or demultiplexing multiple multimedia streams into a single session . The policy management attribute may provide a programmable policy framework to control interactions among multiple multimedia sessions which are encapsulated within the composite endpoint . Policies may define interactions among multiple multimedia streams. An extensible policy framework may allow dynamic instantiation of new policies as new services are instantiated. The policy manager may be a software entity that embodies the policy management attribute of the composite endpoint .

In an exemplary operation the application server may receive a request to establish the call from a device such as device X . The request may be a multiple SIP INVITE method as defined in the Internet Engineering Task Force IETF draft standard Request for Comments RFC or some other request using some other protocol. The application server may identify the user associated with device X via an INVITE method which may be used to setup the call and determine whether the call is an origination or termination in order to invoke an appropriate service set. The application server then may create an originating session or a terminating session to process the call. As part of creating the originating session or terminating session the application server may populate the originating session or terminating session with the appropriate service logic as specified by a service configuration in a service profile for the user. The service profile may include a number of services some of which may include a composite endpoint .

In this exemplary operation the service profile of the terminating session may include a forking service to deliver the media stream from the device X to multiple devices . The service providing the forking capability may instantiate a composite endpoint . The programmable policy for the forking service may be populated in the composite endpoint based on the service profile for the user when the composite endpoint is instantiated and may be stored in the policy manager . The composite endpoint may receive a call termination attempt create a logical endpoint for each device as specified in the service profile and or deliver the call to each device . The composite endpoint may implement the service API of a single endpoint allowing the forking service to be integrated into the application server without introducing any service interactions for the forking service. The logical endpoints manage the communication of the media streams to each associated device .

Alternatively a composite endpoint may be instantiated in place of a standard logical endpoint based on any services in the user profile that need the capabilities of a composite endpoint . The call may then be processed within the terminating session via the populated service logic and delivered to the logical endpoint . The composite endpoint may act as the logical endpoint and provide the appropriate policies which may be programmed into the composite endpoint upon instantiation based on the user s service profile. The composite endpoint may create logical endpoints for each communication stream needed for the service and manage the logical endpoints based on the service policy. Thus service interactions may be reduced and a new multimedia service may be delivered by adding a new programmable policy without any other modification to the existing application.

Once the application server receives the session establishment event step the application server may determine whether the session establishment is for an originating session not shown or a terminating session . The application server may also identify the user associated with the session establishment. The application server may then instantiate a new terminating session step on behalf of the user indicating whether originating or terminating service policies should be used within the terminating session . The terminating session may process the multimedia stream s that are sent by the device X and represented in the session description.

As part of the session instantiation step the terminating session may populate the service logic for the terminating session step . The service logic as described above may include the state machine service profile and service policies for processing the multimedia session for the user. The terminating session may obtain the service profile for the user from the application server . The application server in turn may obtain the service profile from a local cache a database a remote database or some other accessible storage device or function. The terminating session may populate the appropriate service logic into the terminating session as specified by the service configuration in the service profile for the user.

The terminating session may instantiate a logical endpoint step or composite endpoint to process the session description included in the session establishment event. The logical endpoint or composite endpoint may include the protocol state machine used to process the session description. The logical endpoint or composite endpoint may provide the interface for the multimedia stream handling and processing the service logic. The composite endpoint may be instantiated in place of a logical endpoint within the terminating session as specified in the user profile when for example the user profile indicates that services within the profile need certain capabilities to process or manipulate multiple multimedia streams.

Depending on the user profile the terminating session may load programmable policies into the policy manager step and then the composite endpoint may instantiate a logical endpoint for each communication stream step as specified by the policies derived from the user s profile. Each logical endpoint may manage one or more of the multimedia streams that are defined in the session description. Multiple logical endpoints may manage the same media stream. The composite endpoint may act as a single logical endpoint from the perspective of the service logic and process the media related requests that are driven by the service logic among the multiple logical endpoints as specified via the policies loaded into the policy manager .

After the individual logical endpoints within the composite endpoint have been created step the service logic may complete the processing of the session establishment event step . Once the service logic executes the service logic may signal to a logical endpoint to process the call and deliver the multimedia streams to the remote device s . Based on the loaded policies the composite endpoint may deliver the multimedia streams to zero or more endpoints within the composite endpoint . The composite endpoint may individually modify the multimedia streams on a per endpoint basis based on the programmable policy loaded into the policy manager . Each endpoint within the composite endpoint may continue the session establishment to the corresponding remote devices as determined by the policies stored in the policy manager .

In step of user P may place a multimedia audio and video call from an originating device X by for example dialing an extension number associated with user Q.

In step of the application server upon receiving the call from device X may create the originating session for user P.

In step of the application server may populate the service logic for the originating session with the service profile for user P.

In step of the application server may create a regular endpoint to encapsulate the protocol state machine for the communication between the application server and device X .

The application server may invoke the originating session created for the call from user P. The service logic in the originating session may process the call and determine that the call is destined for user Q by identifying the dialed extension by user P as belonging to user Q. Because the originating session for the originating user P does not need a composite endpoint as determined from the user profile steps and are not exercised in . Consequently the regular endpoint may be instantiated within the originating session . The service logic may invoke one or more of the application server APIs to instantiate the terminating session for the call to user Q.

In step of the application server may create the terminating session for user Q to process the multimedia audio and video call from user P which may be initiated in step of .

In step of user Q may be subscribed to the video add on service . The application server may populate the service logic for the terminating session with the service profile for user Q.

In step of the application server may create a composite endpoint to encapsulate the multiple media streams to satisfy the video add on service processing subscribed to by user Q as specified in user Q s service profile.

In step of the composite endpoint acts as the logical endpoint for user Q s terminating session and may be programmed with the appropriate policies to provide the video add on service on instantiation of the composite endpoint . In this case the policy may be to fork only the audio portion of the call to user Q s audio device and only the video portion of the call to user Q s video device as specified in the service configuration of the service profile for user Q.

In step of the composite endpoint may create two logical endpoints one for each communication stream to provide the video add on service within the composite endpoint .

In step of each endpoint may deliver its communication stream to the remote device associated with that endpoint . In this case the endpoint associated with the audio device may send a session establishment event with the audio media stream to the audio device and the endpoint associated with the video device may send a session establishment event with the video media stream to the video device .

Exemplary embodiments may be embodied in many different ways as a software component. For example originating session terminating session service logic video add on service composite endpoint policy manager and logical endpoints may be embodied as one or more software components. For example the software component may be a stand alone software package a combination of software packages or it may be a software package incorporated as a tool in a larger software product. The software component may be downloadable from a network for example a website as a stand alone product or as an add in package for installation in an existing software application. The software component may also be available as a client server software application or as a web enabled software application. The software component may also be embodied as a software package installed on a hardware device. The software component may be embodied on a computer readable medium. The computer readable medium may be separate or part of a computer.

While various exemplary embodiments have been described above it should be understood that they have been presented by way of example only and not limitation. Thus the breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should instead be defined only in accordance with the following claims and their equivalents.

