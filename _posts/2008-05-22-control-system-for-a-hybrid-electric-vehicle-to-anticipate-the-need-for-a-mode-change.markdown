---

title: Control system for a hybrid electric vehicle to anticipate the need for a mode change
abstract: A parallel hybrid electric vehicle method and system including an internal combustion engine (ICE), an electric traction motor/generator, and a controller. A control strategy is provided to prevent unpredicted or undesired engine starts by anticipating the need for the vehicle engine, while avoiding “false starting” the engine or allowing an annoying lag in performance that will occur if the engine is not started in advance of an actual requirement. The invention anticipates the need for engine starts and electromotive driving by monitoring vehicle speed and driver commands and their rates of change. The invention allows consistent performance and establishes seamless transitions between engine driving and electromotive driving.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07753150&OS=07753150&RS=07753150
owner: Ford Global Technologies, LLC
number: 07753150
owner_city: Dearborn
owner_country: US
publication_date: 20080522
---
This application is a division of U.S. application Ser. No. 10 908 598 filed May 18 2005 which is a continuation in part of U.S. application Ser. No. 10 230 707 filed Aug. 29 2002 now U.S. Pat. No. 7 021 409 which is a continuation in part of Ser. No. 09 686 472 filed Oct. 11 2000 now abandoned. Applicant claims the benefit of the priority of those applications.

The present invention relates generally to hybrid electric vehicles HEVs and specifically to a method and system to improve the efficiency and drivability of a HEV by monitoring vehicle control variables and their rate of change whereby driver demand is anticipated so that unpredicted or undesired engine false starts and performance lags are prevented.

The need to reduce fossil fuel consumption and undesirable engine exhaust gas emissions from vehicles powered by an internal combustion engine ICE is well known. Vehicles powered by battery powered electric traction motors have attempted to address this need. However electric vehicles have limited operating range and limited power capabilities. They also require substantial time to recharge their batteries. An alternative solution is to combine an ICE and an electric traction motor in one vehicle. Such vehicles are typically called hybrid electric vehicles HEVs . See generally U.S. Pat. No. 5 343 970 Severinsky . HEVs reduce both undesirable exhaust gas emissions and fuel consumption because a smaller engine can be used. Under certain conditions the engine can be turned off.

The HEV has been described in a variety of configurations. Many known HEV designs use systems in which an operator is required to select between electric and internal combustion engine operation. In other configurations the electric motor drives one set of wheels and the ICE drives a different set of wheels.

Other more useful configurations include for example a series hybrid electric vehicle SHEV which is a vehicle with an engine most typically an ICE that powers a generator. The generator in turn provides electric power for a battery and an electric traction motor coupled to the drive wheels of the vehicle. No mechanical connection exists between the engine and the drive wheels. Another useful configuration is a parallel hybrid electrical vehicle PHEV which is a vehicle with an engine most typically an ICE battery and electric traction motor that combine to provide torque to the drive wheels of the vehicle.

A parallel series hybrid electric vehicle PSHEV has characteristics of both the PHEV and the SHEV. The PSHEV is also known as a torque or power split powertrain configuration. In the PSHEV the engine torque can be used to power a motor generator and or contribute to the necessary traction wheel or output shaft torque. The motor generator generates electrical power for the battery or it can act as a traction motor to contribute to the necessary wheel or output shaft torque. The traction motor generator can be used also to recover braking energy to the battery if a regenerative braking system is used.

The desirability of combining the ICE with an electric motor generator is clear. Fuel consumption and undesirable engine exhaust gas emissions are reduced with no appreciable loss of performance or range of the vehicle. Nevertheless there remains substantial room for development of ways to optimize HEV operation. This includes the need to ensure that vehicle drivability is consistent predictable and pleasing to the customer while also maintaining efficiency.

Factors involved in achieving an acceptable level of HEV drivability are the frequency and character of engine start and engine stop events. Frequent engine starts and stops can be annoying especially if they do not occur in response to any conscious input from the vehicle driver.

Some engine starts and stops are dictated by an energy management strategy EMS that seeks to combine the engine and motor drives to achieve maximum fuel economy. For example the EMS might start the engine whenever demand exceeds a predetermined motive power threshold. Also the engine must start when driver demand for power is in excess of that available from the electric system.

Frequent annoying high emission and engine wearing false starts can occur when the engine is started in response to what later proves to be a very brief demand for power in excess of the motive power threshold but still within the drive capabilities. This can occur when quickly pulling out into otherwise slow traffic or surging forward in heavy traffic. Alternatively starting an engine poses a challenge because its torque is not available instantaneously. An annoying lag in performance will occur if the engine is not started somewhat in advance of the actual engine torque requirement.

An HEV system controller VSC must therefore control two mode transitions. The first is the transition from a vehicle at rest with the engine off to a vehicle using electric power. The second is the transition from electric driving to engine power in response to an increase in driver demand. This driver demand transition should not be confused with a less time critical version of the same transition when the engine is started because of a need to charge a battery. The timely preparation for these transitions is achieved by anticipators .

A converterless multiple ratio automatic transmission of the kind that may be used in a parallel hybrid electric vehicle powertrain is shown in U.S. Pat. No. 6 217 479 where an engine crankshaft is connected through a damper assembly and a disconnect clutch to the torque input element of multiple ratio gearing without an intervening torque converter. A slipping forward drive clutch during an engine engage operating mode is used thereby avoiding a need for a separate startup clutch. The lack of a startup clutch as well as the lack of a hydrokinetic torque converter reduces the inertia mass which permits a faster response to a command force startup torque at the vehicle wheels.

A control strategy for a hybrid powertrain of the kind disclosed in the 479 patent is described in U.S. Pat. No. 6 364 807. The control strategy of the 807 patent includes a closed loop clutch pressure modulation technique to effect a smooth transition from an electric motor drive mode to an internal combustion engine drive mode. This is done in cooperation with a control of the fuel supply during the transition. The electric motor in this HEV powertrain may act as an inertial starter wherein the electric motor freely accelerates up to idle speed where the engine driven pump has full hydraulic pressure for the clutch following continuously slipping clutch operation during startup.

Another hybrid vehicle powertrain using a multiple ratio transmission without a torque converter and having a startup clutch located between the induction motor and the engine crankshaft is described in U.S. Pat. No. 6 176 808. An auxiliary launch torque is supplied by the motor during startup in the design of the 808 patent and regenerative braking with the internal combustion engine inactive is available for charging the battery when the vehicle is in a coast mode.

In HEV operating strategies of the kind described in these prior art patents the decision to start the engine in response to driver demand is based on vehicle speed and driving torque. The drive power is calculated using torque and motor speed. The total power required for the HEV is not only the drive power but also power for all other loads such as accessory load and climate control load. If this total required power exceeds a predetermined threshold for the motor engine power and therefore engine start is required. If the total required power is below a predetermined value the motor solely provides torque to the powertrain. A hysteresis loop is included in these predetermined values to prevent mode chattering when the vehicle nears these power thresholds.

A problem with this prior art system is apparent in an intermediate power range above the power below which it is more efficient to drive with the motor on perhaps five to ten kW for a typical compact to mid size vehicle and below the peak electric only power capability required for acceptable engine off launch twenty to forty kW for the same vehicle . While driving in electric only mode a momentary demand for power in this intermediate power range should be met without repetitive starting the engine and then immediately stopping it. Therefore a new anticipator strategy is required to improve efficiency and drivability of the HEV by anticipating the need for a driving state or mode change as close as possible to a predetermined optimal moment to create a seamless transition while reducing or eliminating engine false starts .

It is possible to effect an instantaneous response of the powertrain to a driver command using a so called feed forward torque calculation. This strategy would anticipate the torque requirements following a command for an increased torque or a decreased torque by calculating a leading indicator of engine torque. That indicator is used to develop a transmission line pressure that is appropriate for a subsequent ratio change and a subsequent driving torque requirement by anticipating the engine torque required following a response to an engine torque request by the driver. This torque feed forward technique is further refined in a control system described in U.S. Pat. No. 6 253 140 where the engagement of the clutch as the gear ratio change nears completion is controlled with a pressure shaping function used to reduce the desired slip rate to effect a smooth termination of the slip of one friction element as a companion friction element during a ratio change gains torque transmitting capacity. This is achieved using an adaptive engagement technique so that the engagement characteristics of the controller can be learned during a ratio change and used in a subsequent ratio change. In this way ratio change smoothness can be achieved by compensating for driveline variables such as changes in coefficients of friction due to clutch wear for example and due to changes in spring loads at the friction element actuators.

Another example of a converterless multiple ratio transmission is described in U.S. Pat. No. 6 299 565 wherein the clutches during a ratio change are controlled by a strategy that makes it possible to achieve maximum vehicle acceleration using a controllable wet clutch between the engine and the input of a synchronous transmission.

Another example of a hybrid electric vehicle powertrain is described in U.S. Pat. No. 6 316 904 wherein the induction motor is controlled using a speed sensorless controller.

The control systems of these prior art patents do not describe nor suggest an anticipator function for anticipating the need for a driving state change so that an optimal seamless transition between driving state modes can be achieved.

A successful anticipator function must predict either 1 that the demand power is likely to remain higher than a motive power threshold but well within the motor and battery capacities so that the engine will be started in as seamless a manner as possible or 2 that the demand power is likely to exceed the motor and battery capacities within a very short time and the engine should be started quickly in a kick down fashion. In the latter case sufficient motor torque must be held in reserve to compensate for the sudden load of the slewing engine.

Accordingly an objective of the present invention is to improve the drivability and efficiency of a parallel hybrid electric vehicle PHEV powertrain system so that the vehicle has predictable drivability as perceived by the vehicle operator.

Specifically it is an object of the present invention to provide a strategy to prevent unpredicted or undesired engine starts by anticipating the need for the vehicle engine while not false starting the engine or allowing an annoying lag in the engine s performance. This is achieved by the control of the present invention by monitoring both vehicle speed and driver demand as well as their rates of change.

It is a further objective of the invention to provide an anticipator strategy that is a mathematical function of a predetermined set of system variables such as master cylinder brake pressure MCP throttle position vehicle speed vehicle mass and road grade including any rates of change of these system variables. Estimates of time remaining from the instant of estimation to the moment at which the vehicle system cannot meet the driver demand in the present mode are calculated. When the anticipated time remaining before the incipient transition approaches the time required to smoothly execute that transition a transition command is executed.

The invention could be applied to a variety of hybrid electric vehicle powertrain configurations but two configurations are disclosed as examples. shows components of a pre transmission parallel HEV powertrain with an engine disconnect clutch. This pre transmission configuration is described in co pending U.S. patent application Ser. No. 10 225 824 filed Aug. 22 2002 now U.S. Pat. No. 6 746 366 which is assigned to the assignee of the present invention.

An engine shown in is linked to an electric motor generator via a disconnect clutch . A battery is connected to the motor generator via an inverter which controls a flow of electrical power to and from the two components. The motor generator which may be referred to as a drive unit is connected to a power transfer device such as a drive shaft which is connected to vehicle traction wheels via a transmission . Thus torque flows from the engine and motor generator or drive unit through the power transfer device to the wheels .

All powertrain components are under the supervisory control of a vehicle system controller VSC . Each powertrain component has a separate controller under that supervisory control of the VSC .

An engine control unit controls the engine . For this application an electronic throttle control ETC would be used. The disconnect clutch is under the control of a clutch control unit . The motor generator is under the control of a motor generator control unit . The transmission is under the control of a transmission control unit .

In the embodiment of the transmission is an electronic converterless transmission ECLT which will be described with reference to . The ECLT is a synchronous high efficiency power shifting transmission derived from a current mass production product known in the prior art. Torque amplification function of the torque converter is provided by the motor generator drive unit . The motor generator is also used for shift synchronization and dynamic control.

A vehicle brake system control unit is under the control of a regenerative braking system control unit and the battery is under the control of a battery control unit . The control units comprise a powertrain control system.

Since the engine can be disconnected from the motor generator and power transfer device there are three potential powertrain states. These states which are based on various vehicle demands and commands for the VCS include the engine only the motor generator drive unit only or the engine and the motor generator drive unit combined. The disclosed embodiment of this invention is a strategy to determine when the engine should be turned on and off based on driver demand.

A simple state algorithm within the vehicle system control of an HEV is illustrated in . In this Figure the circles indicate intrinsically transient self exiting states of starting and stopping vehicle systems including starting and stopping the engine.

This state algorithm has several flags and parameters controlling transitions among the different vehicle states in . A KEY ON flag and a KEY OFF flag are self explanatory. The KEY ON flag results in a pre start state proceeding to a REST IC OFF whereby the engine is off. The KEY OFF flag results in a vehicle shutdown state command followed by a system off state .

SYS ON and SYS OFF flags and reflect a basket of conditions that require starting the engine for reasons other than to satisfy a driver s demand for powertrain torque under the current vehicle conditions speed grade etc. . These include but are not limited to the engine temperature below a predetermined value an after treatment system temperature below a predetermined value an air conditioner set to its maximum value low battery state of charge and gear selector PRND in a reverse position . The engine must be started when any one of these conditions exist and can be shut down only when none of these conditions are in effect.

The Rest IC OFF State moves to a cold start clutch open state or to a Rest IC on state with the SYS on flag or Reverse flag . The DRV ON and DRV OFF flags and indicate the need to start or stop the engine based on driver demand such as accelerator position and present vehicle speed v . The DRV ON and DRV OFF flags and will be set and cleared based on a map of and v. Other considerations such as d dt rate of change of accelerator position and grade if identifiable could also be included.

A DR BOOST flag indicates that driver demand can only be met with a combination of motor generator and engine power. This is the Boost I E drive condition . The NOT DR BOOST condition means driver demand does not require the combination.

The RGN OFF flag indicates that regenerative braking is occurring. This condition is used to postpone the engine shutdown while significant negative torque is transmitted through the vehicle powertrain thus preventing what might otherwise be unpleasant braking behavior. Note that regenerative braking can actually take place without master cylinder pressure MCP or brake touch and even with slight throttle.

The is simply an accelerator position in percent representing its full range of 0 to 100 percent. The V notation is a speed below which the motor generator drive unit is turning too slowly to at that instant BUMP start the engine simply by closing the disconnect clutch leading to an I drive IC ON state whereby the engine is on. The engine would spin to below idle speed or be turning too slowly to deliver the requisite torque. The motor generator drive unit must be spun up by a combination of downshifting the transmission and allowing the drive away clutch to slip thus the term slip start .

The Rest IC ON state transitions to an IC stop state with the SYS OFF flag DRV OFF flag and the KEY OFF flag and then back to the REST IC OFF state. The Rest IC ON state also can transition to the I Drive IC ON state when using terms defined above 0 or V 0. The I Drive IC on state can also transition to the Rest IC ON state when 0 and V 0.

The Rest IC OFF state transitions to an electric E drive low speed state when using terms defined above 0 or V 0. The E drive low speed state can also transition to the rest IC ON state when 0 and V 0.

The electric E drive low speed state transitions to the slip start state when there is a SYS ON flag or a DRV ON flag that results in the I Drive IC ON state . The I Drive IC ON state can transition to the IC STOP state with the SYS OFF flag DRV OFF flag and RGN OFF flag .

The IC STOP state and an E drive high speed state transition to the electric E drive low speed state when VV. Finally the E drive high speed state transitions to the BUMP start state with the SYS ON flag or the DRV ON flag .

In determining state transitions from a purely fuel economy perspective all powertrain torque below a fairly low motive power threshold typically in the range of 5 kW to 12 kW for a compact or mid size vehicle should be electric. When the engine is on it should be delivering at least the threshold power for the combined load of the vehicle requirements and battery charging load. The threshold represents an efficiency crossover point in . Thus small errors in the exact value do not have a major effect on fuel economy.

Adding driver demand to the transitions takes into account at least two considerations 1 whether the instantaneous power demand at the present vehicle speed exceeds the motive power threshold in and 2 whether the anticipated time at which the demand for power at the present accelerator position and rate of vehicle acceleration will become less than the time it will take to start the engine conservatively 0.7 seconds . A representative demand function is shown in at .

When using the disclosed embodiment and the above described engine startup procedure the anticipator function uses the value and rate of change of the input parameters. In this case the driver accelerator position and vehicle speed v which together can be used to compute power demand P and estimate the time remaining until the power demand exceeds some threshold near the maximum capability of the electric drive system.

In the described embodiment of the invention the anticipator for the first of these transitions get ready to drive is used to pre spin the drive motor to its idle speed. This generates hydraulic pressure in preparation for delivering torque to the wheels. The motor generator is turned off and the inverter is put in a sleep mode as much as possible to minimize the parasitic electric load. The get ready to drive anticipator will consider vehicle speed motion in either direction signals the need or motive power throttle touch any finite value that signals the intent to launch brake switch e.g. removing the foot from the brake signals the intent to launch brake master cylinder pressure MCP and the rate of decrease in brake pressure given by the formula d MCP dt i.e. a rapid decrease in brake pressure signals the intent to launch .

Of these four the rapid decrease in brake pressure is of special interest. A decreasing brake pressure even with finite pressure remaining can signal the intent to launch well in advance of the actual driver expectation of torque in response to the throttle touch that will occur a large fraction of a second later. Thus the anticipator can bring the motor generator drive unit to its idle speed before the demand actually appears. Therefore it is anticipated .

The second critical transition switch to engine power is somewhat more complex. Here it is important to avoid false starts in which the engine is started just above the motive power threshold only to be shut off a moment later while also avoiding stumbles in which the demand power exceeds the capabilities of the drive motor before the engine can be brought in. The HEV system design must leave ample margin between the motive power threshold the motor generator capabilities. The switch to engine anticipator will consider 

Mass grade It may be possible to identify the actual vehicle mass and possibly road grade and adjust the operating strategy accordingly.

The anticipator strategy of the invention requires the motor generator drive unit to operate as a pseudo engine such that overall vehicle control remains largely unchanged irrespective of whether the engine is running. The torque capabilities of each in isolation and in combination are illustrated in . is intended as a starting point for defining a relationship between driver demand as determined by accelerator position and vehicle speed and motor engine torque.

If the tip of the anticipator falls below the motive power threshold due to decreasing speed and or demand the engine should not be started. When the anticipator vector lies within the motor capability the decision to start the engine is made on the basis of efficiency. This decision is based on some combination of a running average of demand power and imposed hysteresis in the motive power threshold e.g. using an upper threshold for starting and a lower one for engine shutoff . Accidentally running on the engine power just below the threshold or running the motor generator just above does not impose a significant fuel economy penalty. The wide gap between the motive power threshold and motor generator capability is deliberately designed into the HEV system to allow occasional but brief periods of high motive power without forcing the engine to start for what may prove to be only a very short time.

Because the system spends very little time in this rather inefficient mode because the running power average mounts very rapidly this strategy does not undermine fuel economy. With calibration of the anticipator functions possibly including higher order polynomials or other non linear functions and careful construction of the power averaging function the optimal energy management strategy can be realized with no operational annoyance false starts and stumbles.

In the disclosed embodiment of the present invention motive power threshold where the engine needs to be started can be shown algebraically as 

dP dt a T dV dt a Speed dT dt where a is a constant. The time T remaining before crossing the threshold is given by If there is also a maximum torque limit as in the time to reach that limit must also be computed as If for example it takes one second to start the engine and bring it up to some target power output the start process of engine will be initiated when the anticipator time falls below one second. Use of the anticipator function to determine whether to start the engine in response to increasing power demand will minimize the frequency of false starts after which the demand power is high only for a brief period and never exceeds that of the motor generator while ensuring that the engine will start in time to provide power if needed.

Anticipators can also determine whether to shut the engine off in response to a sudden decrease in demand power simply by choosing a lower power threshold. An HEV braking system s master cylinder pressure MCP and its time rate of change can also be included in this anticipator function.

The second portion of the forward clutch is operatively connected to a first sun gear S and the second portion of the direct clutch is operatively connected to a first ring gear R . As shown in a first planetary gear set which includes the ring gear R the sun gear S and planetary carrier P is operatively connected to a second planetary gear set. The secondary gear set includes a second sun gear S which is connected to a reverse clutch RC . As shown in the reverse clutch RC which includes a friction brake is also operatively connected to transmission input shaft .

The second planetary gear set also includes a planet carrier P which is connected on one side to the ring gear R and on the other side to a low and reverse brake L R . A ring gear R defines a sprocket for a chain drive indicated generally at . The chain drive drives a sprocket which in turn drives a sun gear S of a third planetary gear set.

A ring gear R for the third planetary gear set is grounded to a housing of the transmission while planetary carrier P is attached to differential gearing . The differential gearing is operable to transfer driving torque to each of two axle half shafts and . A detailed cross sectional view of an embodiment of a transmission such as the transmission of is shown in U.S. Pat. No. 6 585 066 issued to Koneda et al. on Jul. 1 2003 which is incorporated herein by reference. Also shown in is pump which is operable to provide pressure to the transmission clutches.

In the operation of the HEV system of the motor generator drive unit must be spinning in order for the transmission to carry torque. However to reduce energy consumption it is desirable to stop the motor generator when possible and turn it off always when the vehicle is at rest. In a simple implementation a touch of the accelerator any vehicle motion or removal of brake force can be used to trigger the restart of the motor generator drive unit . However such a simple control might result in an annoying delay in vehicle launch. An anticipator that observes the force on a brake and its rate of change to compute the time remaining before vehicle motion can begin or would begin in a conventional vehicle in which creep forward motion with no touch to either brake or accelerator can be used to signal the need to spin the motor. The system would be ready to deliver power even before the driver can actually demand it. In the case of the HEV in the disclosed embodiment of a false start of the motor generator consumes little energy and my not be detectable.

The braking capacity of the powertrain is shown in by the linear relationship . A positive torque typically is delivered from the engine to the traction wheels when the throttle is closed as shown by the portion of line on the left side of the zero crossover point . As the speed increases a regenerative braking torque is established in the negative braking zone .

Curve represents an internal combustion engine torque curve. The sum of the motor torque and the engine torque is represented by curve .

During the acceleration mode the speed and torque value at time T shown in is in the motor drive efficient operating zone . If the value for speed and torque again is measured in a subsequent control loop at time T the value of the torque will be greater during acceleration. If the acceleration mode continues progressively increasing torque values are effected at times T T T T and T as shown at . If the time required to start the engine is 700 ms for example and the estimated time at point T is 700 ms from the anticipated time needed to reach the available capacity of the motor drive the engine will be commanded to start. Thus when the motor loses sufficient driving torque capability while the powertrain is operating within region the engine will have come up to speed and is capable of delivering the needed driving torque in a seamless fashion.

The speed torque values detected during operation in the motor drive zone are defined by a plot which has an upward trend representative of the acceleration mode. If the vehicle is being accelerated while climbing a hill the slope of the speed torque plot is much steeper as shown at . The speed torque values detected at various instants corresponding to time T T T etc. are shown in respectively at etc.

If as in the case of plot the time at which the plot approaches the limit of the motor driving capability is equal to the pre calculated time to start the engine e.g. 700 ms the engine will be started. Thus vehicle acceleration is one of the conditions that can be used in an anticipatory strategy.

If the vehicle is in a downhill coast the plot of speed and torque values at times corresponding to time T T T etc. is shown at . Speed and torque values may be determined at times etc. When a point on plot is 700 ms from the motor generator capability plot for example the vehicle wheel brakes will be applied.

If the motor is operating in the braking zone repetitive speed torque readings are made for example at time values and it is determined at point that a time of 700 ms separates that point from the motor generator capability plot the vehicle friction brakes will complement regenerative braking.

At the peak of the engine curve as shown at the fraction of the motor power is low or zero as shown at . This is in contrast to the fraction of the motor power at lower speeds which is 100 percent as shown at . At the motive power threshold the motor power is replaced with engine power. After the peak engine efficiency is reached at engine efficiency drop occurs. This would correspond to an increase in the motor power fraction as shown at .

The overall power is equal to the sum of the battery power plus internal combustion engine power. The effective overall efficiency for the entire powertrain is a product of the efficiency of the power transmitted by the engine to the transmission and the power required to charge the battery times the efficiency of the generator during charging of the battery times the efficiency of the battery during charging times the efficiency of the battery during discharge times the efficiency of the motor during discharge.

Other vehicle conditions and control parameters can be used in anticipator strategies. Also functions more complex than the simple linear relationships described here can also be used to improve the overall driving characteristics of the system.

The powertrain configuration of is a divided power parallel series configuration. It includes an internal combustion engine as shown at . A planetary gear set includes a ring gear which is connected driveably to a torque input countershaft gear element . The engine torque output shaft is connected driveably to carrier for the planetary gear unit . Sun gear of the planetary gear unit is connected driveably to generator . The generator is electrically coupled as shown at to a high voltage electric motor which may be an induction motor. The output rotor of the motor is connected to gear element of torque output countershaft gearing . Countershaft gear engages gear . A countershaft gear of larger pitch diameter shown at driveably engages motor output drive gear element . A smaller pitch diameter countershaft gear element driveably engages torque output gear which distributes torque to a differential and axle assembly to deliver driving torque to vehicle traction wheels .

A generator brake when applied anchors the rotor of generator which also anchors sun gear . When the generator brake is applied a mechanical torque flow path from the engine to the differential and axle assembly is established. This is referred to as a parallel driving mode. When the brake is released reaction torque of the generator establishes torque reaction for the sun gear because of the direct mechanical coupling between the sun gear and the generator rotor. Engine speed thus can be controlled by controlling the generator torque.

The generator torque is under the control of transmission control module which communicates with vehicle system controller . Input variables for the vehicle system controller include a driver controlled drive range selection at and a signal from an accelerator pedal position sensor . Another driver input for the vehicle system controller is a regenerative braking command from module which receives a brake pedal position sensor signal .

Battery is connected to the generator and to the motor through a high voltage bus . The battery is under the control of the vehicle system controller by means of a contactor control signal at .

The transmission control module receives from the vehicle system controller a desired wheel torque signal a desired engine speed signal and a generator brake command as shown at . The transmission control module distributes a generator control signal through signal flow path that extends from the module to the brake .

The power flow paths between the various elements of the power dividing powertrain shown in are illustrated in . Fuel is delivered to the engine under the control of the operator in known fashion using an engine throttle. Engine power delivered to the planetary gearset is expressed as T where Tis engine torque and is engine speed. Power delivered from the planetary ring gear to the countershaft gears is expressed as T which is the product of ring gear torque and ring gear speed. Power out from the transmission is represented by the symbols Tand the torque of gear and the speed gear respectively.

The generator when it is acting as a motor can deliver power to the planetary gearing. Alternatively it can be driven by the planetary gearing as represented in by the torque flow path . Similarly power distribution between the motor and the countershaft gears can be distributed in either direction as shown in by the torque flow path . Driving power from the battery or charging power to the battery is represented by the bi directional arrow . Power flow between battery and motor is represented by bi directional arrow .

As shown in engine output power can be divided into two paths by controlling the generator speed. The mechanical power flow path T is from the engine to the carrier to the ring gear to the countershaft. The electrical power flow path is from the engine to the generator to the motor to the countershaft. The engine power thus is divided so that the engine speed is disassociated from the vehicle speed during a so called positive split mode of operation. This condition is illustrated in where the engine delivers power to the planetary gearing which delivers power to the countershaft gears and . These gears in turn drive the traction wheels . A portion of the planetary gearing power is distributed to the generator which delivers charging power to the high voltage battery . The speed of the generator then is greater than zero or positive and the generator torque is less than zero. The battery drives the motor which distributes power to the countershaft. This condition seen in has positive power division.

If the generator due to the mechanical properties of the planetary gear unit acts as a power input to the planetary gear unit to drive the vehicle the operating mode can be referred to as a negative power division. This condition is shown in where the generator speed is negative and the generator torque also is negative.

The generator in delivers power to the planetary gear unit as the motor acts as a generator and the high voltage battery is charging. It is possible however that under some conditions the motor may distribute power to the countershaft gearing if the resulting torque at the traction wheels from the gearing does not satisfy the driver demand. Then the motor must make up the difference.

If the generator brake is activated a parallel operating mode is established. This is shown in where the engine is on and the generator is braked. The high voltage battery powers the motor which powers the countershaft gearing simultaneously with delivery of power from the engine to the planetary gearing and then to the countershaft gearing.

The first power source as previously described can deliver torque only for forward propulsion because there is no reverse gear in the countershaft gearing. The engine requires either generator control or a generator brake to permit transfer of power to the wheels for forward motion.

The second source of power as previously described is the high voltage battery motor generator subsystem. This is illustrated in . In this driving mode the engine is braked by the overrunning coupling . The electric motor draws power from the high voltage battery and effects propulsion independently of the engine with either forward or reverse motion. The generator may draw power from the high voltage battery and drive against the reaction of one way coupling . The generator in this operating mode operates as a motor.

As previously indicated the two power sources are integrated so that they seamlessly work together to meet the driver s demand for power while maintaining optimum powertrain efficiency and performance. The system will determine the driver s demand for torque and achieve an optimum division of power between the two power sources.

Although one embodiment of the invention has been disclosed it will be apparent to persons skilled in the art that modifications may be made without departing from the scope of the invention. All such modifications and equivalents thereof are within the scope of the following claims.

