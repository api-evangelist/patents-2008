---

title: Customizing of computer aided design models
abstract: A CAD model customized, which represents a mechanical design of an artifact comprising a set of parts with respective dimensions. A configuration model defines an exhaustive range of ways to customize the CAD model by changing a subset the dimensions. A model translation module is arranged to convert the configuration model into: (i) a CSP representing all possible customizations defined by the configuration model, the CSP is defined by: (a) set of integer variables, wherein each variable may attain a finite number of different values, and (b) a set of constraints restricting which variable values that are simultaneously possible for the variables, (ii) a set of CSP variable-dimension pairs, and (iii) a set of CSP variable-parameter pairs. A configuration engine is arranged to: calculate a solution to the CSP, which solution is optimal with respect to a value assigned to each variable in the CSP relative to a predefined optimizing criterion, and assign a parameter value for each CSP variable-parameter pair, the allocated parameter value corresponding to the value assigned to the CSP variable in the optimal solution. A CAD interface is arranged to assign a dimension in the CAD model for each CSP variable-dimension pair, where the assigned dimension corresponds to a value assigned to the CSP variable in the optimal solution.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08200457&OS=08200457&RS=08200457
owner: Tacton Systems AB
number: 08200457
owner_city: Stockholm
owner_country: SE
publication_date: 20080425
---
This application is a continuation in part of U.S. patent application Ser. No. 11 205 941 filed on Aug. 17 2005 now U.S. Pat. No. 7 457 789 issued Nov. 25 2008 which is incorporated herein by reference in its entirety.

The present invention relates generally to Computer Aided Design CAD systems. More particularly the invention relates to a system for customizing a CAD model representing a mechanical design of an artifact. It is here presumed that the artifact contains a set of parts with respective dimensions and that a configuration model defines an exhaustive range of ways to customize the CAD model. Specifically the customization involves changing a subset of the dimensions in the set of parts.

The invention also relates to a method of customizing a CAD model a computer program product and a computer readable medium.

CAD systems for mechanical engineering have existed for many decades. In this document the term CAD system is based on a 3 dimensional 3D model of a product geometry. Hence a CAD model of a mechanical product is an assembly of parts where each part has a 3D shape defined by solid features with various dimensions. The parts and the assembly can be modeled to a level of detail which is sufficient for precision fabrication of the parts and the assembly and to predict their physical behavior. Pro ENGINEER by Parametric Technology Corporation www.ptc.com SolidWorks and CATIA by Dassault Syst mes www.3ds.com and Inventor by AutoDesk www.autodesk.com represent 3D CAD systems for mechanical engineering to which the present invention is applicable. These systems also provide direct integrations to Computer Aided Manufacturing CAM systems which renders it possible to automatically fabricate physical artifacts according to the 3D CAD model e.g. by using Computer Numerically Controlled CNC machines. Generally the accuracy of a 3D CAD model is also sufficient for computer software to calculate accurate predictions of the physical behavior of the corresponding physical artifact.

CAD models are created by engineers using the CAD systems. Thus an engineer may generate the model by defining all the features and dimensions of all the parts included and define how these elements shall be assembled into a product. Preferably the system also allows the engineer to include parts or sub assemblies that have already been defined in a CAD system by other parties.

Usually there is a need to customize an existing CAD model. For example different users of the physical artifact may require a respective customized version of the artifact which is adapted to their specific use of the artifact. The customization may be accomplished manually by a designer through a modification of the CAD model e.g. by changing some of the dimensions of a number of the parts in the CAD model by replacing parts with other alternative parts with other characteristics and or by suppressing or unsuppressing parts therein i.e. revealing parts having been temporarily hidden . For instance in a CAD model a dimension may be the distance between two points an angle or a coordinate system position. Traditionally CAD systems have had the ability to perform such changes with a high degree of automation. If a dimension is changed or a part is replaced the remainder of the CAD model and the associated drawings can be automatically updated by the CAD system and a 3D image of the customized product is automatically rendered. This allows the user to browse the 3D image and review that the changes are correct.

However normally a large number of changes are required in order to customize the CAD model as desired. Moreover there may be a vast number of dependencies between such changes. This means that there is a relatively large risk that a combination of changes results in a CAD model of a product which cannot be assembled or that will not work properly. These difficulties render it a very time consuming process for the designer to manually customize the CAD model correctly.

As an attempt to address these difficulties many of today s CAD systems have built in programming tools for enabling a program to be designed which program automatically performs all the changes needed to customize the CAD model based on a predefined form. Hence a customer s requirements can be captured in terms of a set of predefined parameters with a finite set of possible values. These programming tools utilize what we herein call a CAD interface which is provided by the CAD system a so called Application Programming Interface API . This interface renders it possible for a program to perform the same type of changes as a designer can make manually i.e. having the same automatic update of the CAD model and allowing the designer to review the changes directly in the CAD system as if he had made the modifications manually . In addition to built in programming tools there are also third party vendors such as DriveWorks www.driveworks.co.uk and RuleStream www.rulestream.com offering solutions for programming the customization of CAD models using the CAD interface.

The existing solutions for automatically customizing a CAD model often allow the user to define a procedure of rules for customizing the design based on predefined parameters which can be entered by the designer running the procedure in order to define the specific customer requirements for customization. However this is disadvantageous because a it is very difficult to define a procedure which will always comply with the dependencies between the changes prescribed by the procedure and which also represents an optimal customization of the product for the specific customer requirements and b the designer running the procedure to automate his her customization work must follow the same sequence of entering parameters to define the specific customer requirements. This causes difficulties for the designer when make trade offs between incompatible parameter value choices. Furthermore the designer must enter values for all parameters even though a subset of these parameters may be unspecified by the customer. This in turn means that it is an intricate task for the designer to customize the product in an optimal manner.

The published U.S. Patent Application No. 2005 0071135 describes a knowledge management system for CAD modeling wherein rules for modeling geometric objects are applied. The published U.S. Patent Application No. 2002 0156698 discloses a process for configuring products on a personal computer. Here a designer may use menus to select components to be included in a given product.

Although the solutions described in these references may be advantageous for various reasons none of the documents describes or proposes modifying the CAD model based on a formal constraint satisfaction approach. The known solutions cannot guarantee that the resulting CAD model is globally optimal in respect of a predefined criterion either.

The object of the present invention is therefore to provide a straightforward and flexible solution for customizing a CAD model which alleviates the above problems and thus offers an efficient and highly user friendly CAD tool.

According to one aspect of the invention the object is achieved by a system for customizing a CAD model representing a mechanical design of an artifact. The artifact includes a set of parts with respective dimensions and a configuration model defines an exhaustive range of ways to customize the CAD model by changing a subset of the dimensions. The proposed system includes a model translation module a configuration engine and a CAD interface. The model translation module is arranged to convert the configuration model into i a constraint satisfaction problem CSP representing all possible customizations defined by the configuration model the CSP in turn is defined by a set of integer variables wherein each variable may attain a finite number of different values and b a set of constraints restricting which variable values that are simultaneously possible for the variables in the set of variables ii a set of CSP variable dimension pairs and iii a set of CSP variable parameter pairs. The configuration engine is arranged to calculate a solution to the CSP such that the calculated solution is optimal with respect to a value assigned to each variable in the CSP relative to a pre defined optimizing criterion. The configuration engine is also arranged to assign a parameter value for each CSP variable parameter pair where the allocated parameter value corresponds to the value assigned to the CSP variable in the optimal solution. The CAD interface is arranged to assign a dimension in the CAD model for each CSP variable dimension pair where the assigned dimension corresponds to a value assigned to the CSP variable in the optimal solution derived by the configuration engine.

This system is advantages because the CSP based configuration tool is integrated tightly into the CAD system via the CAD interface of the CAD system. This in turn enables the designer to enter parameter values in any sequence e.g. based on an order of importance for the customer. Moreover an optimal solution can always be presented to the designer where the solution is based on the parameter values entered so far.

Furthermore the invention allows the dependencies between design changes as well as the dependencies between parameter values and the design changes to be defined explicitly for instance as mathematical and or logical relations between design choices. Hence there is no need to define a sequence of rules to be executed in a procedure. Implicitly this guarantees that the design will comply with the dependencies. The proposed CSP based configuration engine is arranged to automatically find a customization solution which is compliant with the dependencies between design choices in the product. This is highly advantageous because each dimension may have a range of millions of possible values. Consequently the number of possible customizations may be extremely large. Nevertheless a CSP based configuration engine is capable of handling this kind of complexity very well.

According to one preferred embodiment of this aspect of the invention the configuration engine is further arranged to for each CSP variable parameter pair derive a set of possible values compatible with the set of constraints. Hence ranges of all valid alternative parameter values can be presented to the designer at all times.

According to another preferred embodiment of this aspect of the invention the system further includes a user interface module. This module is arranged to receive a user generated input defining a parameter as committed to a particular value of the set of possible values for the parameter. The user interface module is also arranged to cause presentation of ranges of possible parameter values that are compatible with the at least one committed parameter. Thereby the designer may be provided with immediate feedback pertaining to the effects of fixating one or more parameters in the design.

According to yet another preferred embodiment of this aspect of the invention the configuration engine is further arranged to calculate an updated optimal solution to the CSP based on at least one committed parameter. In response thereto the CAD interface is arranged to assign an updated dimension in the CAD model for each CSP variable dimension pair where the assigned updated dimension corresponds to the value assigned to a CSP variable in the updated optimal solution. The CAD interface is likewise arranged to cause presentation of updated allocated parameter values corresponding to the values assigned to the CSP variables in the updated optimal solution and cause presentation of ranges of possible parameter values compatible with the set of constraints relative to the at least one committed parameter. Thereby the designer may conveniently realize the effects caused by committing one or more parameters in the design to certain values.

According to still another preferred embodiment of this aspect of the invention it is presumed that at least one part in the CAD model is replaceable with a part from a respective set of at least one alternative part. The replaceable part here corresponds to a CSP variable that has a first integer value and each of the at least one alternative part corresponds to a respective second integer value of the CSP variable. The configuration engine is arranged to assign the second integer value of the CSP variable via the optimal solution i.e. if the optimal solution implies selecting a given alternative part this part will be included in the resulting CAD model.

According to a further preferred embodiment of this aspect of the invention the model translation module is additionally arranged to convert the configuration model into a hierarchy having nodes. These nodes contain said CSP variables and parts of the CAD model. Moreover at least one node defines at least one of its CSP variables as a state variable whose value may be either one or zero. The configuration engine is here further arranged to for each node investigate if there is a state variable. If so and if the value assigned to the state variable in the optimal solution is equal to zero the configuration engine is arranged to cause suppression of the parameters associated with CSP variables in the node containing the state variable as well as parameters associated with CSP variables in any nodes descending from this node. Each node which is associated with a suppressed CSP variable is defined as a suppressed node. The CAD interface is further arranged to for each node investigate if there is a state variable. If so and if the value assigned to the state variable in the optimal solution is equal to zero the CAD interface is arranged to cause suppression of the CAD parts in the node itself and any CAD parts descending from this node. Consequently logic behind what is shown in the CAD model may be simplified significantly.

According to another preferred embodiment of this aspect of the invention the CAD interface is arranged to update the CAD model based on the suppressed nodes cause presentation of the updated CAD model and cause presentation of ranges of possible parameter values compatible with the set of constraints relative to the updated CAD model. Thus if the CAD model is simplified this can be shown to the designer.

According to another aspect of the invention the object is achieved by a method of customizing a CAD model representing a mechanical design of an artifact comprising a set of parts with respective dimensions. It is assumed that a configuration model defines an exhaustive range of ways to customize the CAD model by changing a subset of said dimensions. The method involves the steps of converting the configuration model into i a CSP representing all possible customizations defined by the configuration model the CSP being defined by a set of integer variables wherein each variable may attain a finite number of different values and b a set of constraints restricting which variable values that are simultaneously possible for the variables in the set of variables ii a set of CSP variable dimension pairs and iii a set of CSP variable parameter pairs calculating a solution to the CSP which solution is optimal with respect to a value assigned to each variable in the CSP relative to a predefined optimizing criterion and assigning a parameter value for each CSP variable parameter pair where the allocated parameter value corresponds to the value assigned to the CSP variable in the optimal solution and assigning a dimension in the CAD model for each CSP variable dimension pair where said assigned dimension corresponds to a value assigned to the CSP variable in the optimal solution.

The advantages of this method as well as the preferred embodiments thereof are apparent from the discussion hereinabove with reference to the proposed system.

According to a further aspect of the invention the object is achieved by a computer program product which is directly loadable into the internal memory of a computer and includes software for controlling the above proposed method when said program is run on a computer.

According to another aspect of the invention the object is achieved by a computer readable medium having a program recorded thereon where the program is to control a computer to perform the above proposed method.

Due to the tight integration of the proposed configurator and the CAD system the designer may at any time while in the process of customizing the design see in the CAD system what the design looks like and perform various kinds of performance analyses in the CAD system such as collision detections simulations of physical behavior etc. Based on those analysis results the designer may then decide to change a parameter value. Such a change in turn may be visualized and analyzed directly in the CAD system. Thereby the designer may determine how the change in question affects the overall design of the product. Moreover the designer can use his her familiar design tool and perform any manual changes to the CAD model e.g. to meet customer requirements which have not been anticipated in the rules for customizing the product . Subsequently the designer may continue using the configurator according to the invention to make further customizations defined by the configuration model of the proposed configurator. In addition the resulting CAD model is available for CAM in CNC machines etc. Because the CAD system is capable of automatically updating all aspects of the CAD model based on a few changes of dimensions and parts there is no need to have ready made 3D models of all the possible parts in a customized CAD model. Instead the configuration model only needs to reference those changes that would otherwise have to be made manually.

Further advantages advantageous features and applications of the present invention will be apparent from the following description and the dependent claims.

We refer initially to which schematically illustrates how a CAD model may be customized based on a CSP according to the invention. We also refer to showing a block diagram over a system according to one embodiment of the invention.

The CAD model represents a mechanical design of an artifact which in turn includes a set of parts and with respective dimensions d. Here first and second dimensions d and d are explicitly illustrated for a rectangular part in the set of parts. A configuration model defines an exhaustive range of ways as to how the CAD model may be customized by changing a subset d of said dimensions d. In this example we assume that it is at least possible to thus change the first and second dimensions d and d i.e. d contains d and d . The proposed system includes a model translation module a configuration engine and a CAD interface .

The model translation module is arranged to convert the configuration model into i a CSP ii a set of CSP variable dimension pairs here V P V P V P and V P respectively and iii a set of CSP variable parameter pairs. The CSP represents all possible customizations defined by the configuration model . The CSP is defined by a set of integer variables V V V V V V V and V wherein each variable may attain a finite number of different values and b a set of constraints c c c c c c c and c respectively restricting which variable values that are simultaneously possible for the variables V V V V V V V and V in the set of variables.

The configuration engine is arranged to calculate a solution Sto the CSP where the calculated solution Sis optimal with respect to a value assigned to each variable V V V V V V V and V in the CSP relative to a predefined optimizing criterion. The configuration engine is also arranged to assign a parameter value for each CSP variable parameter pair V P V P V P and V P where the allocated parameter value corresponds to the value assigned to the CSP variable V V V V V V V and V in the optimal solution S.

The CAD interface is arranged to assign a dimension in the CAD model for each CSP variable dimension pair. The assigned dimension in the CAD model here corresponds to a value assigned to the CSP variable V V V V V V V and V in the optimal solution S. Specifically in this example a first CSP variable V corresponds to the first dimension d i.e. the V value assigns d.

Here the model translation module is further arranged to convert the configuration model into a hierarchy having nodes N N N and N respectively. The nodes N N N and N contain the CSP variables V V V V VS V V and V and parts of the CAD model .

In this example one CSP variable VS in a node N is defined as a state variable whose value may be either one or zero. For each node N N N and N in the CSP the configuration engine is arranged to investigate if there is a state variable. For each node having a state variable i.e. here the node N the configuration engine is arranged to check the value of the state variable i.e. here VS and if the assigned value in the optimal solution Sis equal to zero the configuration engine causes suppression of the parameters associated with CSP variables VS and V in the node N containing that variable VS. Additionally the configuration engine causes suppression of the parameters associated with CSP variables V and V in any nodes N descending from the node in which the zero valued state variable is located. Each node which is associated with a suppressed CSP variable is defined as a suppressed node.

In this example provided that VS zero the parameters P P and P are all suppressed because P and P are associated with the CSP variables V and V respectively in the node N descending from the node N and the parameter P is suppressed because its associated CSP variable V is located in the node N containing the zero valued state variable VS.

However of course if instead the state variable VS has the value one none of the parameters P P P or P is suppressed in this example.

According to the embodiment of the invention illustrated in for each node N N N and N the CAD interface is further arranged to investigate if there is a state variable i.e. here VS in the node N and if the value assigned to the state variable VS in the optimal solution Sis equal to zero the CAD interface causes suppression of the CAD parts in that node N as well as any CAD parts descending from the node N. Here we assume that the node N contains the CAD part illustrated by means of a dotted line in . Thus if VS zero the CAD interface suppresses the CAD part in the resulting CAD model .

Preferably to this aim the CAD interface is arranged to update the CAD model based on the suppressed nodes N and N cause presentation of the updated CAD model and cause presentation of ranges of possible parameter values compatible with the set of constraints relative to the updated CAD model . For reasons of clarity in the constraints are merely shown as lines without labels interconnecting specific CSP variables V V V V VS V V and V.

It is advantageous if a user interface module is included which is arranged to receive a user generated input for influencing the values of one or more of the parameters P P P and P. To this aim the user interface module may include input means in the form of a keyboard a touch screen etc. It is further advantageous if the user interface module includes output means e.g. a display arranged to cause presentation of ranges of possible values for the parameters P P P and P.

Again if there is no state variable in the optimal solution S or if the state variables of the optimal solution Sare all equal to one no parameters or CAD parts are suppressed.

Here the configuration engine is further arranged to for each CSP variable parameter pair i.e. V P V P V P and V P respectively derive a set of possible values that are compatible with the set of constraints c c c c c c c and c.

Moreover the user interface module is arranged to receive a user generated input e.g. via the input means defining at least one parameter P P P and or P as committed to a respective value of the set of possible values for the parameter in question. Additionally the user interface module is arranged to cause presentation e.g. via the output means of ranges of possible parameter values compatible with the at least one committed parameter P P P and or P.

In the example shown in we initially assume that a first parameter P has the possible values 1 2 and 5 a second parameter P has the possible values 1 2 and 3 a third parameter P has the possible values 1 2 3 and 4 and a fourth parameter P has the possible values 0 1 2 and 3 respectively. We further assume that the user wishes that the first parameter P be 1. Therefore he she enters a corresponding command e.g. via the input means and thus defines the first parameter P to the value 1 as illustrated in

In response thereto the configuration engine is preferably arranged to calculate an updated optimal solution Sto the CSP i.e. based on the first parameter P being committed to the value 1.

The CAD interface in turn is arranged to assign an updated dimension d in the CAD model for each CSP variable dimension pair V P V P V P and V P respectively. The assigned updated dimension d corresponds to the value assigned to a CSP variable V V V V V V V and V in the updated optimal solution S. The CAD interface also causes presentation of updated allocated parameter values corresponding to the values assigned to the CSP variables V V V V V V V and V in the updated optimal solution S. Additionally The CAD interface causes presentation of ranges of possible parameter values that are compatible with the set of constraints c c c c c c c and c relative to the at least one committed parameter P 1. In this example the commitment of the first parameter P to the value 1 leads to a restriction of the second parameter P to the possible values 1 and 3 a restriction of the third parameter P to the possible values 1 and 4 and restriction of the fourth parameter P to the possible value 3 as shown in

In this example there is a first dependency which means that the total height his equal to the height of the foot hplus the height of the frame h here fixed to 100 plus a constant distance e.g. corresponding to the leg beam.

Using the proposed CSP based configurator this kind of customization may be defined by two constraints explicitly capturing said first and second dependencies. Consequently the designer is able to make trade offs between different values of the three design choices represented by the total height h the height of the foot hand the motor size.

In addition to using the configurator according to the invention interactively in the CAD system it also possible and useful to apply the configurator in order to customize a design based on parameter values given up front e.g. when a complete specification of customer requirements is provided or has been created by a different system.

To sum up the general method of controlling a computer apparatus to customize a CAD model according to the invention will now be described with reference to the flow diagram in .

An initial step converts a configuration model into a CSP. We here presume that the CAD model represents a mechanical design of an artifact having a set of parts with respective dimensions and that the configuration model defines an exhaustive range of ways to customize the CAD model by changing a subset of said dimensions. Moreover as described above the resulting CSP represents all possible customizations defined by the configuration model. Specifically the CSP is defined by a set of integer variables wherein each variable may attain a finite number of different values and b a set of constraints restricting which variable values that are simultaneously possible for the variables in the set of variables. Step also produces a set of CSP variable dimension pairs and a set of CSP variable parameter pairs based on the configuration model.

A step subsequent to step calculates a solution to the CSP which solution is optimal with respect to a value assigned to each variable in the CSP relative to a predefined optimizing criterion.

Thereafter a step assigns a parameter value for each CSP variable parameter pair. The allocated parameter value here corresponds to the value assigned to the CSP variable in the optimal solution generated in step .

Finally a step assigns a dimension in the CAD model for each CSP variable dimension pair where the assigned dimension corresponds to a value assigned to the CSP variable in the optimal solution generated in step .

Naturally as discussed previously steps through may very well be repeated for instance in response to various user inputs causing step to be updated.

Here steps to are identical to those described above with reference to . A step subsequent to step investigates whether or not a user generated command has been received which defines at least one parameter to a particular value. If so a step follows. Otherwise the procedure loops back and stays in step .

Step commits each variable to the respective value defined in the user generated command received in step . Thereafter the procedure loops back to step wherein an updated optimal solution to the CSP is calculated.

All of the steps as well as any sub sequence of steps described with reference to above may be controlled by means of a programmed computer apparatus. Moreover although the embodiments of the invention described above with reference to the drawings comprise computer apparatus and processes performed in computer apparatus the invention thus also extends to computer programs particularly computer programs on or in a carrier adapted for putting the invention into practice. The program may be in the form of source code object code a code intermediate source and object code such as in partially compiled form or in any other form suitable for use in the implementation of the procedure according to the invention. The program may either be a part of an operating system or be a separate application. The carrier may be any entity or device capable of carrying the program. For example the carrier may comprise a storage medium such as a Flash memory a ROM Read Only Memory for example a DVD Digital Video Versatile Disk a CD Compact Disc an EPROM Erasable Programmable Read Only Memory an EEPROM Electrically Erasable Programmable Read Only Memory or a magnetic recording medium for example a floppy disc or hard disc. Further the carrier may be a transmissible carrier such as an electrical or optical signal which may be conveyed via electrical or optical cable or by radio or by other means. When the program is embodied in a signal which may be conveyed directly by a cable or other device or means the carrier may be constituted by such cable or device or means. Alternatively the carrier may be an integrated circuit in which the program is embedded the integrated circuit being adapted for performing or for use in the performance of the relevant procedures.

