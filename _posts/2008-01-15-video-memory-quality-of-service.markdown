---

title: Video memory quality of service
abstract: Apparatus, methods, and systems are disclosed to manage memory in an embedded system. The system registers video applications and video sources with a memory manager. The memory manager in turn provides memory to the video applications and video sources. The system has an input to receive an output from at least one video source. The memory manager receives a frame from the video source and transfers the frame to memory. Once the frame is in memory the video application may work with the frame. All of these operations are conducted with the memory manager actively managing and allocating the memory resources.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08502831&OS=08502831&RS=08502831
owner: Digi International Inc.
number: 08502831
owner_city: Minnetonka
owner_country: US
publication_date: 20080115
---
Video systems utilize video applications which may be described as components in software that manipulate video particularly video acquired from a camera. Video applications require large amounts of memory. Video applications manipulate one or more frames of video often in a way that requires the entire frame or frames to be in memory all at once. Examples include sending video out via TCP sending video out via UDP rendering video on a local display transcoding to a different video type such as a series of raw images to JPEGs motion detection etc. The individual frames may be quite large so running multiple video applications simultaneously each holding multiple video frames results in very high memory usage.

Video applications work with the embedded system to manipulate or utilize information provided from video sources such as cameras. Video applications are best designed to be encapsulated from the details of the video source. This allows for the optimal reusability and extensibility of the video application and the video source software i.e. the camera driver .

The embedded systems often have a small amount of memory especially when compared to modern PCs. It is a challenge to provide an optimal amount of PC like features in an embedded device with much less memory than a PC has. For embedded systems there is a wide spectrum of available horsepower and costs for processor speed and the size of available memory. Generally as cost decreases horsepower and the available memory decreases. As available memory decreases supporting video becomes more of a challenge because of the memory requirements of video.

Embedded system is enabled to accept from cameras and video in a format such as JPEG. JPEG is a commonly used method of compression for photographic images. The name JPEG stands for Joint Photographic Experts Group the name of the committee that created the standard. While the specification shall discuss the operation utilizing the JPEG format other formats of video capture may be utilized with the embodiments of the invention.

Embedded system may be connected to peripherals a network such as an Ethernet network or the internet via the router and or a modem . Modem may be connected to a server through the internet . The embedded system may be connected to a personal computer via an Ethernet connection . Personal computer may also be connected to a printer . Embedded system may also be connected to a monitor . Monitor may be connected as shown directly to the embedded system through a USB connection or through an Ethernet connection not shown via router . A personal computer may also be connected directly to embedded system via a USB connection . Personal computer may also be connected to a printer .

The embedded system may communicate with peripherals via wireless connections. For example embedded system may communicate to a personal computer having an antenna via antenna connected to transceiver or antenna through router . Additionally a PDA personal digital assistant having an antenna may be connected wirelessly to embedded system via antenna or antenna . The wireless connections may utilize a Wi Fi infrared or other wireless connection means. Wi Fi refers to a family of related specifications the IEEE 802.11 group Institute of Electrical and Electronics Engineers which specify methods and techniques of wireless local area network operation. It is understood that other wireless connection methods may be utilized provided the wireless connection method provides at least one way communication either to or from the embedded system to the wireless device.

Embedded system may incorporate memory such as RAM random access memory to receive the direct line inputs from one or more cameras or . Embedded system may also incorporate a processor and operating software . The operating software may be stored in non volatile memory and may be stored either in the non volatile memory or in the memory for execution. Non volatile memory may be a hard drive flash memory or other non volatile memory. Video Management Quality of Service software VMQOS may also be stored in non volatile memory . VMOQS may be moved to volatile memory for execution or operated from non volatile memory . VMQOS software may specify that a memory reserve be allocated in RAM to receive video inputs from cameras and or or for software applications that may be stored in non volatile memory . The size of the specified memory reserve may be set by VMQOS VMQOS may receive inputs from a user through one of the peripheral devices or by an API from a camera or other device. An application programming interface API is a software interface that a computer application operating system or library provides to support requests for services to be made of it by a computer program. The memory reserve size may not be a fixed size and may vary based upon the operation and requirements of the embedded system . In addition to specifying the volatile memory allocations for incoming video VMQOS may also specify the amount of memory available for embedded software in the embedded system .

Method describes the operation of a new pluggable quality of service software component. Activity may be to create a new software component by implementing the pluggable quality of service API of the memory manager and by exposing configuration information. Activity may be to register the new software component with the memory manager. By registering the memory manager is made aware of the new software component. Activity may be for the new software component to wait for the memory manager to either activate the software component or to un register the software component. Activity may be to determine if software component has been activated or un registered. If it has been activated activity may be to wait until either a video event is provided by the memory manager or a deactivation instruction is provided by the memory manager. Activity may determine if the software component has received a video event from the memory manager. If a video event has been received activity may be for the software component to perform an action based on the video event. The action performed in activity may be that the software component modifies the configuration of the memory manager any video sources and or video applications. The video event may be for example that a new frame is available from a video source or a video application has requested a long lived buffer or a video application has freed a long lived buffer.

If activity determines that a video event has not been provided in activity but a deactivate command has been received activity may be to deactivate the software component. Once the software component is deactivated activity is repeated.

If activity determines the software component was to be unregistered activity may be to un register the software component and perform any cleanup of resources the software component needs to as determined by the software component activity. If the system or user determines that the software component needs to be used again it may be registered in activity .

The Abstract of the Disclosure is provided to comply with 37 C.F.R. 1.72 b requiring an abstract that will allow the reader to quickly ascertain the nature of the technical disclosure. It is submitted with the understanding that it will not be used to interpret or limit the scope or meaning of the claims. The above description and figures illustrate embodiments of the invention to enable those skilled in the art to practice the embodiments of the invention. Thus the following claims are hereby incorporated into the Detailed Description with each claim standing on its own as a separate embodiment.

