---

title: Adaptively applying network acceleration services with an intermediate network device
abstract: In general, techniques are described for adaptively applying network acceleration services within an intermediate network device. In particular, the intermediate network device comprises a classifier module that receives network traffic and a servicing engine. The servicing engine applies the network acceleration services to the network traffic in accordance with a service configuration and monitors the application of network acceleration services to determine whether the application of each of the network acceleration services improves the efficiency with which the network traffic is serviced. The servicing engine then dynamically adapts the service configuration to alter the application of the network acceleration services based on the determination. Thereafter, the servicing engine applies the network acceleration services to the network traffic in accordance with the dynamically adapted service configuration to more efficiently service the network traffic.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08018866&OS=08018866&RS=08018866
owner: Juniper Networks, Inc.
number: 08018866
owner_city: Sunnyvale
owner_country: US
publication_date: 20080826
---
The invention relates to computer networks and more particular communicating within computer networks.

In a typical network environment client devices request and download content stored within network servers. Exemplary content includes web pages that may contain one or more of text graphics video and sound data. Other examples of content include files multimedia data streams e.g. audio or video data streams electronic messages and data tables. Upon receiving the content requests the network servers typically retrieve the requested content break the requested content into packets and transmit the packets to the requesting client device. Routers and other network infrastructure direct these packets through the network to the client devices which in turn reconstruct the content from the packets and present the content to users via applications residing on the client devices.

The network may experience a variety of issues that result in decreased download speeds at the client devices. These issues include a large volume of content requests to a single network server that overload or otherwise diminish the capacity of the network server to timely service the requested content. Moreover network congestion and limited network bandwidth may impact client download speeds. To increase download speeds and reduce bandwidth consumption a network administrator may deploy one or more intermediate network devices referred to as network acceleration devices located between the client devices and the servers. These intermediate network devices may apply one or more network acceleration services to network traffic passing between the client devices and the servers in order to address the above listed issues or other issues that adversely affect download speeds.

For example a network acceleration device may apply a compression service that compresses the network traffic according to one of a plurality of compression algorithms. Each of the plurality of compression algorithms may be tailored to a specific application e.g. a HyperText Transfer Protocol HTTP application or specific protocol and each may represent a particular service. Other network acceleration services may comprise application specific acceleration techniques that may accelerate or optimize the retrieval of content. The network acceleration device may classify each packet flow of the network traffic as belonging to a particular application and or protocol and apply the corresponding network acceleration services e.g. compression algorithms or application specific accelerations to efficiently compress the content carried by the packet flows and or optimize the retrieval of the requested content.

By compressing and optimizing the network traffic in this manner the network acceleration devices may preserve bandwidth or reduce bandwidth consumption thereby increasing the amount of traffic that may be transmitted over a given network. The increased capacity may reduce network congestion and as a result the network acceleration devices may increase downloads speeds as more data may be downloaded in a given amount of time when compared to networks that do not employ network acceleration devices.

In general the invention is directed to adaptive application of network acceleration services within an intermediate network device such as a network acceleration device. As one example the intermediate network device monitors the application of one or more network acceleration services to determine how effective each of the one or more services are in increasing the performance of the network. The intermediate network device may then dynamically adapt a static service configuration to improve the application of the one or more services. Thereafter the intermediate network device may apply the services in accordance with the dynamically adapted service configuration rather than the static service configuration. In this manner the intermediate network device may automatically adapt the application of the one or more network acceleration services to dynamically account for changing network conditions.

For example an intermediate network device may comprise a classifier engine that stores an initial statically configured service configuration. This service configuration may be defined by an administrator or other user and maintain a plurality of associations between network acceleration services and an identifiable characteristic of the network traffic such as a port number protocol application destination Internet Protocol IP address source IP address and the like. When the intermediate network device intercepts network traffic the classifier engine may classify each packet of the network traffic by parsing these identifiable characteristics from each packet. The classifier engine may then look up which network acceleration services apply to each packet using the parsed characteristics as a key into the service configuration.

The intermediate network device may further include a servicing engine that applies those network acceleration services identified by the classifier module. The servicing engine may further monitor the application of those network acceleration services and determine whether the application of network acceleration services improves the efficiency with which the network traffic is serviced. In some instances the intermediate network device may be a compression device that maintains a cache of previously compress data strings for each application and the servicing engine may monitor an internal cache hit to miss ratio or a compression ratio over time with respect to each application and store such metrics in one or more internal tables. The servicing engine may then determine the efficacy on a relative basis of the compression techniques as applied to the different network applications by analyzing trends in each metric e.g. cache hit to miss ratio increasing . Based on this determination the servicing engine may dynamically adapt the application of network acceleration services to the network traffic so as to improve the efficiency with which the network traffic is serviced. For example the servicing engine may determine that the efficiency of certain network acceleration services are below a threshold and may dynamically elect to avoid application of those services to those network applications. Conversely the servicing engine may determine that the efficiency of certain network acceleration services are above a threshold and may dynamically elect to expand the application of those services to network traffic sourced from or destined to additional portions of the network. Thereafter the servicing engine may apply the network acceleration services in accordance with the dynamically adapted service configuration.

The techniques may provide one or more advantages. For example by dynamically adapting the application of network acceleration services the intermediate network device may improve the efficiency with which the network acceleration services are applied to network traffic within a particular network. In other words the intermediate network device may reduce any wasted processor cycles and other internal device resources utilized when applying certain network acceleration services that may be considered ineffective e.g. caching content when there is a low cache hit to miss ratio . As another example the intermediate network device may apply network acceleration services not previously configured to be applied to the network traffic or perhaps configured for limited traffic and in this way the intermediate network device may thereby reduce bandwidth consumption within the network. In this respect the intermediate network device may improve the efficiency with which the network traffic is processed by more efficiently utilizing bandwidth which may be a key concern in such networks where links are leased or otherwise purchased.

In one embodiment a method comprises receiving with an intermediate network device network traffic from a first network for delivery to a second network applying with the intermediate network device a first set of at least two network acceleration services to the network traffic in accordance with a service configuration to improve efficiency with which the network traffic communicated and monitoring with the intermediate network device the application of the first set of the network acceleration services to the network traffic to determine whether the application of each of the network acceleration service of the first set improves the efficiency with which the network traffic is communicated. The method also comprises after monitoring the application of the first set of network acceleration services dynamically adapting with the intermediate network device the service configuration to apply a second set of the plurality of network acceleration services to the network traffic based on the determination wherein the first set and second set of network acceleration services differ in at least one of the network acceleration services. The method further comprises applying with the intermediate network device the second set of the network acceleration services to the network traffic in accordance with the dynamically adapted service configuration such that the network traffic is more efficiently communicated.

In another embodiment an intermediate network device comprises a classifier module that receives network traffic from a first network for delivery to a second network and a servicing engine. The servicing engine of the intermediate network device applies a first set of at least two network acceleration services to the network traffic in accordance with a service configuration to improve efficiency with which the network traffic communicated and monitors the application of the first set of the network acceleration services to the network traffic to determine whether the application of each of the network acceleration service of the first set improves the efficiency with which the network traffic is communicated. The servicing engine further after monitoring the application of the first set of network acceleration services dynamically adapts the service configuration to apply a second set of the plurality of network acceleration services to the network traffic based on the determination wherein the first set and second set of network acceleration services differ in at least one of the network acceleration services and applies the second set of the network acceleration services to the network traffic in accordance with the dynamically adapted service configuration such that the network traffic is more efficiently communicated.

In another embodiment a network system comprises a first network that includes a plurality of endpoint devices and a second network that includes one or more devices that provide content. The network system wherein the first network includes an intermediate network device comprising a classifier module that receives network traffic from one or more of the plurality of endpoint devices of the first network for delivery to the second network and a servicing engine. The servicing engine of the intermediate network device applies a first set of at least two network acceleration services to the network traffic in accordance with a service configuration to improve efficiency with which the network traffic communicated and monitors the application of the first set of the network acceleration services to the network traffic to determine whether the application of each of the network acceleration service of the first set improves the efficiency with which the network traffic is communicated. The servicing engine further after monitoring the application of the first set of network acceleration services dynamically adapts the service configuration to apply a second set of the plurality of network acceleration services to the network traffic based on the determination wherein the first set and second set of network acceleration services differ in at least one of the network acceleration services and applies the second set of the network acceleration services to the network traffic in accordance with the dynamically adapted service configuration such that the network traffic is more efficiently communicated.

In another embodiment a computer readable medium comprising instructions for causing a programmable processor to receive with an intermediate network device network traffic from a first network for delivery to a second network apply with the intermediate network device a first set of at least two network acceleration services to the network traffic in accordance with a service configuration to improve efficiency with which the network traffic communicated and monitor with the intermediate network device the application of the first set of the network acceleration services to the network traffic to determine whether the application of each of the network acceleration service of the first set improves the efficiency with which the network traffic is communicated. The instructions further cause the programmable processor to after monitoring the application of the first set of network acceleration services dynamically adapt with the intermediate network device the service configuration to apply a second set of the plurality of network acceleration services to the network traffic based on the determination wherein the first set and second set of network acceleration services differ in at least one of the network acceleration services and apply with the intermediate network device the second set of the network acceleration services to the network traffic in accordance with the dynamically adapted service configuration such that the network traffic is more efficiently communicated.

The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features objects and advantages of the invention will be apparent from the description and drawings and from the claims.

Moreover although shown in as a separate stand alone or independent device client WX may be incorporated within any other network device including a router a switch a hub a firewall and an intrusion detection prevention IDP device. The techniques therefore should not be limited to a client WX but may be implemented by any intermediate network device. An intermediate network device may comprise any network device that resides between client or endpoint devices and servers or other network devices that store content such as files web pages images videos data objects etc.

As shown in client WX couples to a Wide Area Network A WAN A via links A and B and WAN B via link C. WANs A B WANs may each comprise a public or private network that is available for lease or purchase by private entities or businesses so as to couple remote locations and or networks together. For purposes of illustration it is assumed that WAN A is owned and operated by one service provider such as American Telephone and Telegraph AT T Company and WAN B is owned and operated by another service provider such as Verizon Communications Inc.

Although not shown in for ease of illustration purposes WANs may provide access to a public network which may include any publicly accessible network such as the Internet. Typically the public network comprises a packet based network that transmits packets according to an Internet Protocol IP Transmission Control Protocol TCP .

Client WX resides at the edge of a remote or branch network . Likewise each of server WXs resides at the edge of an enterprise or campus network . Branch network may represent a small network used by a remote location or office of a large enterprise or business. Branch network may comprises a local area network LAN that operates according to one of the family of Institute of Electrical and Electronics Engineers IEEE 802.X Ethernet standards. Campus network may represent a larger network used by the main office or location of the large enterprise or business. Campus network may also comprise a LAN that operates according to one of the family of IEEE 802.X Ethernet standards. Typically data and other resources such as templates documents manuals accounting figures employee information applications and any other information or application pertinent to operation of both the remote and main offices of the large enterprise are stored in a centralized location.

Campus network also includes a plurality of servers A C servers which may each store in a centralized fashion the above described data applications and other resources. This data and other resources may be referred to herein generally as content. Each of servers may include one or more of a data server a web server an application server a database a computer cluster a mainframe computer or any other type of server computing element and or database commonly employed by an enterprise or business to facilitate the operation of the enterprise or business. Each of servers may support one or more of a variety of protocols or software interfaces such as a HyperText Transfer Protocol HTTP a Common Internet File System CIFS protocol a File Transfer Protocol FTP a Secure Socket Layer SSL protocol a Messaging Application Programming Interface MAPI a Transmission Control Protocol TCP and a Session Initiation Protocol SIP by which these servers may serve the content. Each of these servers may comprise blades or other cards that are inserted into large racks. Commonly these servers may reside within a centralized data center. The racks may provide a common backplane or switch fabric to interconnect the various servers to campus network .

By connecting to campus network servers may be accessible by any devices included within campus network and any devices e.g. one or more of a plurality of endpoint devices A N endpoint devices of branch network . Each of endpoint devices may comprise a laptop computer a desktop computer a workstation a mainframe computer a personal digital assistant PDA a cellular phone a smart phone or any other device capable of accessing a network. Campus network may provide such a centralized location for the storage of data applications or other computing resources to reduce costs associated with distributed data storage.

Distributed data storage architectures typically required each location to maintain its own separate database or server for use in storing data pertinent to each respective location. For example assuming for purposes of illustration that campus and branch networks and implemented distributed data storage branch network may also have included a remote data center e.g. servers similar to servers for storing data and other resources or content pertinent to the operation of the branch office. In this distributed data storage example servers would usually only store and serve content pertinent to the operation of campus network .

As network infrastructure lies in both of networks and the enterprise or business may be required to have dedicated Information Technology IT staff at both the remote location e.g. the branch office and the main location e.g. the main office to service both the remote and central data centers which may increase expenses. Even if no dedicated IT staff is provided for servicing the remote data center the enterprise may be required to send IT staff to the remote location e.g. branch network to service the remote servers which may increase costs and otherwise impinge upon the operation of the branch office. Moreover issues e.g. data loss may arise when the data and other resource or more generally the content of branch network needs to be synchronized with content stored to servers of the main office or campus.

Centralized storage of the content however reduces if not eliminates many of these issues by placing all of the equipment necessary for data storage within a centralized location that is easily accessible by a dedicated and centrally located IT staff. Furthermore as a result of next generation Internet network acceleration services and web development centrally located servers may serve web based applications that enable remote users to access data and other resources stored to servers through a web browser executed by each of endpoint devices . Because only a web browser is required branch offices may no longer require dedicated IT staff on site. Moreover because content may be deployed remotely the IT staff need not travel to the remote office. Again by virtue of centralizing the content IT costs may be significantly reduced. As a result centralized data centers such as those in which servers may each resides are setting the standard by which large enterprises or businesses store and maintain data as well as remotely distribute new and update old applications.

While centralized storage of content may decrease costs this centralized architecture typically requires that branch network maintain access to campus network . Commonly large enterprises or businesses may lease or purchase a dedicated line or connection that couples branch network and campus network together to ensure privacy or otherwise prevent unauthorized access to networks and . A network service provider may lease or sell this line to the enterprise or business and usually charges various prices depending on the speed and or bandwidth of the line. For example a service provider may offer for lease a digital signal 1 DS1 or T carrier 1 T1 line e.g. a dedicated line having 1.536 mega bits per second of bandwidth for a first price per month and a DS3 or T3 line e.g. a dedicated line having 44.736 mega bits per second of bandwidth for a second higher price per month. Depending on the bandwidth required between branch network and campus network the enterprise or business may choose either to purchase one or more of either or both the T1 or T3 line.

For purposes of illustration it is assumed that links A C links are leased or purchased from one or more network service providers that own and operate WANs e.g. the above mentioned AT T and Verizon. Notably the term link may used herein to refer to the physical connection such as the cables or other communications mediums running between one or more central offices of WANs and networks while line refers to a service such as a T1 line or T3 line carried by the link. Often however the terms are used interchangeably as a T1 or T3 line generally accompanies the leasing of one or more links. That is a customer may request a T1 line service and as part of that service the service provider leases a dedicated link to the customer as part of providing the T1 line service. As a result links may also be referred to herein as lines . 

Considering that bandwidth concerns may in part control the selection of lines the business or enterprise may attempt to reduce the bandwidth required between branch network and campus network in order to again reduce costs by enabling the enterprise to subscribe to a line that provides and lease a link capable of supporting less bandwidth. To this end branch network and campus network may include one or more respective intermediate network devices e.g. client WX and server WXs to reduce bandwidth consumption through application of one or more network acceleration services to traffic traversing WANs .

Network acceleration services may include any action by client WX and server WXs to improve performance of network system e.g. by reducing bandwidth consumption and thereby increasing available bandwidth. In other words network acceleration services may include for example caching of content compressing packets or other discrete data units of the network traffic application acceleration or any combination of the above as well as any other action that improves network performance. Example data compression network acceleration techniques are described in U.S. Pat. No. 7 167 593 entitled SYSTEM AND METHOD FOR INCREMENTAL AND CONTINUOUS DATA COMPRESSION issued Jan. 23 2007 incorporated herein by reference.

These intermediate network devices e.g. client WX and server WXs may represent proxy devices that divide each TCP or other protocol sessions into three discreet TCP session 1 a first TCP session having terminations at an endpoint device and client WX 2 a second TCP session having terminations at client WX and one of server WXs and 3 a third TCP session having terminations at one of server WXs and one of servers . In this respect client WX and server WXs may represent TCP proxies that apply network acceleration services to the second or intermediate TCP session. That is endpoint device A may intend to establish a single TCP session with a particular destination e.g. server A by which to access content stored to that destination. Client WX may intercept this TCP session request and reply to the session as if client WX was the intended destination thereby establishing the first TCP session of the three.

Client WX may then establish a second or intermediate TCP session with either of server WXs depending on whether those server WXs couple to the intended or particular destination. For example assuming server A is the intended destination client WX may establish a second TCP session with server WX A as server WX A is the only intermediate server WX that connects to server A. This server WX A may then establish a third TCP session with server A. As a separate TCP session exits between client WX and server WX A these client and server WXs and A may apply network acceleration services to traffic destined for and received from the particular or intended destination server A without interfering with the first and second TCP sessions.

The intermediate network device e.g. client WX may for example locally cache content previously requested by a client device such as one or more of endpoint devices in order to reduce if not eliminate bandwidth consumption directed to subsequent requests for the same data. That is client WX may instead of issuing the request for the same content previously requested and thereby consuming bandwidth cache the previously requested content and without sending the request to servers or the public network service the request using the locally cached content thereby preserving bandwidth.

The intermediate network devices e.g. client WX and server WXs may also communicate with one another via the second TCP session so as to compress traffic and thereby reduce bandwidth consumption by replacing identified sequences of data with for example symbols where the symbols represent the respective identified sequences using fewer bits. Client WX may for example apply a compression service that compresses the network traffic according to one of a plurality of compression algorithms. Each of the plurality of compression algorithms may be tailored to a specific application e.g. a HyperText Transfer Protocol HTTP application or specific protocol and each may represent a particular compression service.

Client WX may also apply an application specific acceleration service having a particular algorithm designed to accelerate or optimize the retrieval of content for a specific network application. For example an HTTP acceleration service may enable more efficient retrieval of HyperText Markup Language HTML pages. Typically each HTML page comprises a plurality of objects e.g. images templates Java Scripts etc. and client WX may apply an HTTP acceleration service to each HTML request to more efficiently download the plurality of objects thereby accelerating the retrieval of HTML pages requested via HTTP.

To determine an application to which each packet belongs intermediate network devices may classify each packet of the network traffic as belonging to a particular application and or protocol and apply one or more corresponding network acceleration services e.g. caching compression or application specific acceleration to improve network performance. In this manner client WXs may apply network acceleration services to improve the performance of network system .

In accordance with the techniques described herein one or more of client WX and server WXs may adaptively apply network acceleration services to more efficiently in terms of both the consumption of resources of devices and bandwidth of links apply these network acceleration services. For example client WX may initially receive network traffic from a first network e.g. branch network requesting content stored within a second network e.g. campus network . Typically client WX receives the network traffic from one or more of endpoint devices . The network traffic may comprise a plurality of packets where one or more of the packets request content stored to for example servers of campus network . Client WX may next apply at least one of the above described network acceleration services in accordance with a service configuration to the network traffic to improve the efficiency with which the network traffic is serviced or processed.

The service configuration may comprise a configuration associating one or more network acceleration services with a particular Internet Protocol IP port protocol application destination carrier e.g. one of links or any other characteristic of a packet or other discrete data unit of the network traffic or network. An administrator or other user may define the service configuration and in doing so tailor the service configuration to meet particular needs of network system . That is an administrator may tailor the service configuration to apply two or more network acceleration services for a particular type of network traffic e.g. HTTP traffic because this particular type of traffic e.g. HTTP traffic constitutes a large percentage of the network traffic traveling between branch network and campus network . The administrator may also tailor service configuration to apply no network acceleration services to another type of network traffic e.g. FTP traffic as this other type of network traffic e.g. FTP traffic may constitute a relatively small or minor percentage of the network traffic. In this manner the administrator may statically configure or provision the application of network acceleration services within client WX .

The administrator may however not fully understand or otherwise be able to constantly monitor and predict the efficacy of the statically provisioned application of network acceleration services and may further configure client WX in accordance with the techniques described herein to monitor the application of the at least one of a plurality of network acceleration services to the network traffic. Client WX may in response to this configuration monitor the application of these network acceleration services to determine whether any of the at least one service results in an improvement of the efficiency with which the network traffic is processed. That is client WX may determine whether the network acceleration services currently applied to the network traffic are actually improving the performance of network system by for example adequately reducing bandwidth consumption. Due to the complex algorithms that may be applied for a network acceleration service any ineffective network acceleration services may actually delay the delivery of network traffic and needlessly consume resources e.g. processor cycles and or memory of client WX as well as fail to adequately address bandwidth download speed and other network concerns.

Client WX may monitor the efficacy or benefits of a particular service in one or more ways. Client WX may monitor application of the network acceleration services with respect to a particular client or endpoint device a particular destination or server a particular link or carrier service provider that operates WANs and a particular adjacent intermediate network device such as server WX A. Client WX may quantize this monitoring using a number of metrics and store these metrics within a table corresponding to the above four categories e.g. a clients table a destinations table a links or carrier table and an adjacency table. While described with respect to four tables the techniques described herein may store the metrics in any number of tables divided according to any conceivable categorization. Also these tables may be combined into a single interrelated table or stored in more than four tables.

For example client WX may monitor the efficacy of a cache service by monitoring a ratio of cache hits to cache misses for a particular application flow session protocol or any other classification. Client WX may store this cache hits to miss ratio in the clients table within a client entry associated with the particular client requesting the content. Client WX may monitor the efficacy of a compression service by monitoring a packet size for example pre and post compression and calculating a percentage of compression based on these pre and post compression sizes. Client WX may store this information within the client table in a client entry corresponding to the client or one of endpoint devices from which the packet was received. Client WX may also monitor the efficacy of an acceleration service by monitoring the amount of time e.g. a so called response time to process a given request from one of endpoint devices for content. Again client WX may store this metric within the client table in a client entry corresponding to the one of endpoint devices from which the packet was received.

While described with respect to the particular service type e.g. caching compression and acceleration the above metrics e.g. cache hit to miss ratio compression percentage and response time may be applied to monitor any one of the above service types and or may be combined to monitor a single service type. When two or more network acceleration services are combined and applied to a particular packet the efficacy of each service may be monitored and combined to determine a single efficacy of the application of the two or more network acceleration services.

Client WX may also monitor the efficacy of network acceleration services by monitoring patterns within the network traffic generated by particular client or endpoint devices . For example client WX may determine that network traffic originating from endpoint device A generate large amounts of HTTP traffic whose content length is generally less than 1000 bytes. Client WX may to monitor such efficacy maintain threshold or other data or information relevant to each of the plurality of network acceleration services and determine by comparing the service specific information to each traffic pattern that one or more of the plurality of network acceleration services are not suitable for traffic having the determined pattern or characteristic e.g. 1000 byte maximum length. Client WX may therefore perform some form of deep packet inspection to determine these characteristics which may include an application type a content length a length of message or packet a port number or other deep packet inspection properties. These properties or characteristics are referred to as deep in that these properties involve more than a cursory packet header inspection. Client WX may store this information within a client entry of the client table corresponding to the client device for which the traffic pattern was determined.

Client WX may also monitor the efficacy of the application of network acceleration services by monitoring a time required by each of servers to respond to requests issued from endpoint devices . In this manner client WX may determine a sluggishness of servers that may represent an overall delay of servers to respond to requests. For example client WX may monitor the number of connection dropped by a particular destination over a set amount of time and update within the destination table the number of dropped connections of a destination entry corresponding to the monitored destination of the destination table.

Client WX may further monitor the above application of network acceleration services as applied to a particular line or link . Thus client WX may determine the efficacy of network acceleration services based on monitored link characteristics. In this respect client WX may apply network acceleration services on a per connection basis in that client WX may apply certain network acceleration services for traffic forwarded via each of links A B and C depending on one of or both server WXs capabilities and or characteristics of links . Client WX may store this information to an entry of the carrier or link table corresponding to the link for which the characteristics were determined.

Client WX may in some instances monitor the efficacy of the network acceleration services by monitoring a performance of adjacent intermediate network devices e.g. one or more of server WXs . Client WX may monitor these adjacent server WXs and learn of the efficacy or performance of network acceleration services as applied by each of server WXs for example. Client WX may also determine that one of server WXs provide a plurality of network acceleration services while the other one of server WXs apply only some or a smaller subset of the plurality of network acceleration services. Client WX may store this information to an adjacency entry in the adjacency table corresponding to the particular adjacent one of server WXs for which the information was learned.

Client WX may include one or more of the above tables to maintain records of each of the above metrics on a per flow basis over a period of time. While described herein as storing this data on a per flow or connection basis client WX may store this information on a per session application protocol or any other discrete classification basis over a period of time. In other words client WX may maintain a data structure to preserve a historical accounting of each of the above metrics on any applicable basis.

Next client WX may analyze these historical tables to determine the efficacy of each service as applied to a particular flow or connection. For example client WX may upon receiving a packet from a particular one of endpoint devices and destined for a particular destination e.g. server A determine the efficacy of network acceleration services applied for that particular one of endpoint devices and server A by accessing a client and destination entry of the client and destination tables respectively corresponding to that one of endpoint devices and server A. Client WX may evaluate analyze or otherwise service or process these entries to determine the efficacy of the network acceleration services in the past. Based on this determination client WX may dynamically adapt the service configuration to alter the application of the at least one service to the network traffic.

To adapt the network acceleration services client WX may for example remove one or more network acceleration services that were previously being applied for that particular client or destination. More particularly client WX may again for example determine that the cache hit to miss ratio for a particular flow has decreased over time and remove from the service configuration the caching service for that particular flow. As a further example client WX may based on information received from another intermediate network device e.g. server WX A determine that a particular service being applied by server WX A is ineffective when applied to content received from server A. Client WX A may then remove that service within the service configuration for a flow of the network traffic associated with server A.

As another example client WX may maintain historical records that identify the sluggishness of one of servers . Based on this sluggishness measure e.g. a time to respond to a request client WX may add network acceleration services such as acceleration network acceleration services to compensate for this sluggishness. If the sluggishness is measured by the number of dropped connections client WX may instead of adding network acceleration services remove network acceleration services as these would be a waste of the resources of client WX considering that the connection is likely to be dropped. As yet another example based on traffic patterns client WX A may dynamically adapt the application of network acceleration services by altering the service configuration to apply certain types of compression network acceleration services to traffic having a monitored maximum length pattern for example of one size.

With respect to the connection based historical records client WX may identify particular adjacent intermediate devices that can reach the same content. In for example both of server WXs may access or connect to server B. Client WX may determine this joint access by server WXs and then determine for example which network acceleration services and the number of connections each of server WXs support. Client WX may then adapt the service configuration to direct packets requesting content from server B to one of these server WXs over the other one of server WXs based on this monitored connection information.

After adapting the application of network acceleration services by way of editing or overriding the service configuration client WX may apply the plurality of network acceleration services to the network traffic in accordance with the dynamically adapted service configuration. In some embodiments client WX may apply the plurality of network acceleration services by not applying the one of the plurality of network acceleration services to a particular flow. By dynamically adapting the application of network acceleration services when such network acceleration services may be ineffectively applied client WX may avoid unnecessary application of network acceleration services that provide little benefit.

As a result client WX may automatically and dynamically tailor the application of network acceleration services to meet particular circumstances of network system . Moreover client WX may not needlessly consume resources of client WX e.g. processor cycles and memory by applying network acceleration services that have little if any benefit. This may reduce latency and improve client WX s throughput with respect to processing network traffic especially when compared to statically configured or provisioned intermediate network devices.

Control unit may include a routing engine module routing engine a classifier module a user interface module and a servicing engine module servicing engine . Routing engine represents a module comprising hardware and or software to receive incoming large area network LAN traffic from branch network via one or more interfaces not shown in processor or otherwise route LAN traffic and forward LAN traffic via one or more of the plurality of interfaces to either of WANs as WAN traffic A B. It is assumed for purposes of illustration that WAN traffic A is forwarded to WAN A via one of links A B and WAN traffic B is forward to WAN B via link C.

Classifier module represents a module comprising hardware and or software to receive packets from a network such as branch network and classify those packets based on information contained within a header a payload or both the header and the payload of the packet. Classifier module may determine based on this information to which of a plurality of flows session connection and or application each of LAN packets corresponds.

Classifier module may determine to which flow a particular one of LAN packets corresponds by extracting information referred to as a five tuple from each packet. Each flow represents a flow of packets in one direction within the network traffic. A five tuple comprises a source Internet Protocol IP address a destination IP address a source port a destination port and a protocol. Typically the five tuple is found within the header of each of LAN packets and classifier module may parse or otherwise extract the five tuple from the header of each of LAN packets to identify to which flow each of LAN packets corresponds. Classifier module may also extract and utilize additional information to identify a flow such as a source media access control MAC address and a destination MAC address.

Classifier module may also based on this information identify an application specific protocol or application to which each of LAN packets corresponds. Classifier module may for example determine based on a source port of the five tuple whether each of packets corresponds to an HTTP application e.g. a web browser.

Classifier module may maintain service configuration where service configuration represents data rules or other information that defines associations among network acceleration services such as the below described servers and a flow a session a connection an application a protocol a port or other classifiable characteristic of network traffic . In this respect service configuration may comprise one or more rules that define associations between network acceleration services and one or more identifiable characteristic of network traffic such as a port number. Service configuration may represent the above described static configuration. Service configuration may also store the configuration that enables servicing engine to apply the adaptive service application techniques described herein.

User interface module represents a module that presents one or more user interfaces by which an administrator such as administrator admin may interact to configure client WAN . Servicing engine represents a module for processing or servicing LAN packets . Processing in the context of client WX refers to servicing LAN packets by responding to each of LAN packets with an appropriate response. For example one of LAN packets may request content from campus network and servicing engine may process this packet by retrieving this content from a memory local to client WX e.g. a cache or directly from campus network and responding to the packet with the retrieved content. Servicing of a packet may also refer to servicing engine compressing the packet such that the compressed version of the packet may be sent to one of server WXs to reduce the consumption of bandwidth over links and WANs . Servicing may also refer to the above described application acceleration. Servicing of a packet may therefore generally refer to the application of one or more network acceleration services to LAN traffic .

Servicing engine includes a plurality of network acceleration services A N network acceleration services a override service configuration a cache and an adaptive service selection module . Network acceleration services include a number of different network acceleration services such as Non uniform Spectral Compression NSC service A NSC A a Lempel Ziv LZ compression service B LZ B a HyperText Transfer Protocol HTTP acceleration service C HTTP C a File Transfer Protocol FTP acceleration service D FTP D and a Common Internet File System CIFS acceleration service CIFS N .

Service configuration represents data or other information e.g. a configuration file table or other data structure that defines associations among network acceleration services and a flow a session a connection an application a protocol a port or other classification type of network traffic that override or refine the corresponding associations in whole or in part defined by service configuration . In this respect override service configuration may comprise one or more override rules that define associations between network acceleration services and one or more identifiable characteristics such as a port number that override the similar configuration in whole or in part defined by service configuration . Cache represents one or more memories either static or dynamic that stores content retrieved from remote locations. Cache may be employed by servicing engine to provide the above described caching service. Service configuration and override service configuration may identify which flow session connection application protocol or other classification type of network traffic for which servicing engine caches data to cache .

Adaptive service selection module represents a module for implementing at least in part the adaptive aspect of the techniques described herein. That is adaptive service selection module may represent a module that dynamically adapts the application of network acceleration services by updating service configuration by altering override service configuration in response to a monitored efficacy of each of network acceleration services as applied to network traffic . To this end adaptive service selection module may include a service monitoring module a service monitoring module a plurality of tables A D tables and data analysis module .

Service monitoring module may monitor an efficacy for each of the plurality of network acceleration services in the manner described below in more detail. Tables may comprise a client table A a destination table B a carrier table C and an adjacency table D for storing data or other information concerning the monitored efficacy of each of the plurality of network acceleration services . Data analysis module may determine the efficacy of the application of the plurality of network acceleration services to packets of network traffic .

Initially admin may interact with a user interface presented by user interface module to configure client WX . Admin may provide input via the user interface to define service configuration and thereafter update alter or otherwise edit service configuration . Admin may for example input an association via a user interface presented by user interface module that associates HTTP acceleration service C with a particular port e.g. port . User interface module may receive this input and update service configuration according to the input. In this manner admin may interact with user interface module to define service configuration .

Typically as admin need interact with client WX to define service configuration and this configuration remains unchanged until the next admin interaction. As a result this type of configuration may be referred to as a static configuration. Statically configured service configuration may apply regardless of the efficacy of the application of network acceleration services to LAN traffic . Often such manual or static configuration may result in the above described inefficiencies. To overcome these inefficiencies admin via interactions with the same or another user interface presented by user interface module may enable dynamic or adaptive application of the plurality of network acceleration services which may override in whole or in part the original or static service configuration . That is for a particular association or for one or more associations including all of the current associations of service configuration admin may define a rule to apply network acceleration services on a best effort basis thereby enabling dynamic application of those associated network acceleration services . Once enabled client WX may implement the dynamic service application techniques described herein with respect to the identified associations.

For example routing engine may receive LAN traffic via one or more of the plurality of interfaces whereupon routing engine may forward LAN traffic to classifier module . Classifier module may classify each packet of LAN traffic by identifying to which flow session connection application protocol and or other identifiable classification type each packet of LAN traffic corresponds. Classifier module may employ one or more protocol and or application specific modules to identify particular applications or protocols.

Classifier module may then perform a lookup of service configuration using one or more of the identified characteristics or so called classification information as a key to determine whether any rules exists with respect to that packet within service configuration . If no rule exists and wholesale dynamic service application has not been enabled e.g. a system wide configuration option that enables dynamic application of network acceleration services classifier module may return that packet back to routing engine for forwarding via one of links . If a rule exists including the best effort rule that enables the dynamic application of network acceleration services classifier module may forward each classified packet as well as the identifying information and the corresponding one or more rules including the best effort rule to servicing engine .

Servicing engine may receive each packet the identifying information and the rules and apply those network acceleration services identified by the corresponding rules. After servicing each packet of LAN traffic servicing engine may forward the packet to classifier module which in turn forwards each packet to routing engine . Routing engine may then forward each packet via the plurality of interfaces to either of WANs as respective WAN traffic A B WAN traffic .

Throughout or simultaneous to the application of network acceleration services service monitoring module monitors the efficacy of those network acceleration services applied to LAN traffic . Service monitoring module may monitor the efficacy of those network acceleration services for which the above described best effort rule was defined by admin . As described above service monitoring module may monitor the efficacy of applying those network acceleration services with respect to clients destination links and adjacent intermediate network devices.

For example service monitoring module may monitor the efficacy of applying network acceleration services with respect to a particular client in a number of ways. Service monitoring module may in some instances monitor a caching service as applied to a particular one of client or endpoint devices by monitoring a cache hit to miss ratio for packets originating from a particular client that request content. Service monitoring module may also monitor the above described compression ratio of each packet originating from a particular client or endpoint device and or a response time to process each packet for a particular client or endpoint device .

Service monitoring module may also monitor the efficacy of applying network acceleration services with respect to a particular destination in a number of ways. Service monitoring module may in some instances monitor the efficacy of applying network acceleration services to content served by a particular destination such as one of servers . That is often compressing packet headers where data is frequently reused is highly effective but compressing the actual payload or content data may result in a poor compression ratio as this content is dynamic or changes frequently. Because dynamic data such as frequently updated web or HTTP pages may require rebuilding the dictionary of symbols used to compress the payload compressing packets used to convey this dynamic data may result in high levels of resource utilization for little if any bandwidth savings. Service monitoring module may therefore monitor the compression ratio of packets received from a particular destination.

Service monitoring module may also monitor the above described sluggishness of each destination by monitoring a time to respond to each packet sent to that destination or better stated a time between sending a packet requesting content and receiving a response packet that includes the requested content. Service monitoring module may also monitor the number of connections e.g. TCP session dropped by a particular destination.

Service monitoring module may further monitor the efficacy of applying network acceleration services with respect to a particular link or carrier. For example service monitoring module may monitor the throughput of each of links A C by monitoring the number of packets transmitted over each of those links A C over a set period of time. Based on throughput service monitoring module may also determine saturation or other derivative or throughput such as bandwidth consumption as well. Service monitoring module may monitor each link leased by the same carrier such as links A and B and sum the monitored metrics to reflect a particular carrier.

In some respects service monitoring module may also determine a cost associated with transmitting data via each of links . In this instance the network service providers may charge for use of links based the amount of data sent over links or charges for overrunning a set amount of bandwidth consumption. Service monitoring module may for example be configured with or retrieve from one of tables e.g. carrier table C this data rate e.g. a price per unit of data transmitted and calculate the a cost per link or carrier based not only on this rate.

Additionally service monitoring module may monitor the efficacy of applying network acceleration services with respect to adjacent intermediate network devices. That is service monitoring module may also communicate with other intermediate network devices to which client WX couples to apply certain network acceleration services e.g. so called adjacent intermediate network devices. That is some network acceleration services such as compression network acceleration services require the cooperation of both client WX and another intermediate network device such as server WX A. In considering compression network acceleration services for example client WX may use a dictionary that maps symbols to data patterns or particular patterns of data bits. The symbols may represent the pattern of bits using less bits and thereby compress a given portion of data. However server WX A typically maintains a similar database of symbols or dictionary to decompress the portion of data. Thus client WX may maintain connections with adjacent server WXs to provide these joint network acceleration services.

Service monitoring module may also determine destination e.g. servers serviced by each of server WXs . That is service monitoring module may for example determine that both of server WXs service packets destined for server B. Service monitoring module based on this determination may begin monitoring the network acceleration services provided by each of adjacent intermediate network devices e.g. service WXs A B to determine the best link or connection by which to reach server B. Service monitoring module may also evaluate the connection by determining which network acceleration services each of server WXs support.

During negotiation of the connection client WX and more particularly service monitoring module may learn of the network acceleration services provided by each adjacent intermediate network device e.g. server WXs in order to establish which network acceleration services client WX and those adjacent intermediate network devices e.g. server WXs may apply. Service monitoring module may after negotiating these network acceleration services requiring such cooperation also receive updates to the dictionary or other databases or information used to apply these cooperative network acceleration services. In this manner service monitoring module may monitor the application of network acceleration services provided by adjacent intermediate network devices e.g. server WXs .

Service monitoring module may store the above monitored metrics or results to one or more of tables . Typically service monitoring module stores the metrics as a function of time and therefore each entry of each of tables may store a historical data describing each metric at an instance in time. Therefore tables may in some instances store historical data pertaining to the application of the plurality of network acceleration services to LAN traffic over time.

Client table A may for example comprise a client entry that stores historical information for each of endpoint devices for which client WX previously received a packet. Each client entry may be associated with a source Internet Protocol IP address assigned to each of endpoint devices and store the above described metrics monitored on a per client or endpoint device basis. The following Table 1 illustrates an exemplary configuration of a client table A 

For the client assigned IP address 192.168.100.8 only one metric was evaluated e.g. cache hit to miss ratio at two instances in time showing an increase in cache hit to miss ration from 14.35 to 29.45 . The above Table 1 is illustrative of one exemplary embodiment of a client table A and should not be construed as limiting to the techniques described herein. Moreover for ease of illustration purposes Table 1 is shown above in simplified form and may comprise any number of metrics related to any of the above described metrics monitored on a per client or endpoint device such as endpoint devices basis.

Destination table B may for example comprise a destination entry that stores historical information for each of servers for which client WX previously received a packet. Each destination entry may be associated with an Internet Protocol IP address assigned to each of servers and store the above described metrics monitored on a per destination basis. The following Table 2 illustrates an exemplary configuration of a destination table B 

For the destination assigned IP address 192.188.111.2 only one metric was evaluated e.g. connections dropped at two instances in time showing a decrease in connections dropped from 14 to 3. The above Table 2 is illustrative of one exemplary embodiment of a destination table B and should not be construed as limiting to the techniques described herein. Moreover for ease of illustration purposes Table 2 is shown above in simplified form and may comprise any number of metrics related to any of the above described metrics monitored on a per destination e.g. server basis.

Carrier table C may for example comprise a carrier entry that stores historical information for each of carrier e.g. WANs or links such as links through which client WX transmits traffic. Each carrier or link entry may be associated with a particular interface of client WX not shown in used to interface with a particular one of links and store the above described metrics monitored on a per carrier or link basis. The following Table 3 illustrates an exemplary configuration of a carrier table C 

Adjacency table D may comprise an adjacency entry that stores historical data or information for each adjacent intermediate network device e.g. server WXs with which client WX connects to apply joint network acceleration services. Each adjacent entry may be associated with an IP address assigned to that one of server WX and store the above described metrics monitored on a per adjacency basis. The following Table 4 illustrates an exemplary configuration of an adjacency table D 

Based on this historical information stored to tables data analysis module may analyze tables to determine the efficacy of the application of the plurality of network acceleration services to LAN traffic . Data analysis module may in some instances evaluate the application of two or more network acceleration services to particular types or classifications of LAN traffic and determine a single efficacy representing the application of the two or more network acceleration services . Data analysis module may also determine the efficacy on a relative basis. That is data analysis module may comprise past or prior data to current data to determine an efficacy with respect to past performance. In this manner data analysis module may analyze trends or other statistics of relevance to the application of network acceleration services and determine whether one or more of the plurality of network acceleration services as currently applied to LAN traffic according to service configuration is efficient or effective.

For example data analysis module may access client table A to lookup a particular client or endpoint device for which a packet is currently being processed by servicing engine . Servicing engine may forward the source IP address assigned to this one of endpoint devices to adaptive service selection module whereupon data analysis module performs a lookup in client table A to retrieve a client entry corresponding to that IP address.

Data analysis module may then determine the efficacy of particular network acceleration services applied to packets originating from that one of endpoint devices . If a caching service had been previously applied for example data analysis module may inspect historical data stored for the cache hit to miss ratio metric. If this metric is trending downward data analysis module may determine this caching service is ineffective. Alternatively or in conjunction with the above caching service data analysis module may also determine the efficacy of a compression service applied to packets originating from this particular one of endpoint devices by inspecting historical data corresponding to a compression ratio metric. Likewise data analysis module may perform a similar analysis for any other metric monitored on a per client basis.

Next data analysis module may determine the efficacy of particular network acceleration services applied to packets destined for a particular destination. Again servicing engine may determine a destination IP address from the packet and forward this destination IP address to data analysis module . Data analysis module may use this destination IP address as a key to performing a lookup of destination table B to retrieve a destination entry associated with the destination IP address. Data analysis module may then evaluate the sluggishness and other metrics to determine the efficacy of applying a particular service to packets destined for the destination associated with the destination IP address. For example data analysis module may determine that the particular destination assigned the forwarded destination IP address has begun to drop an increasing number of connections. Data analysis module may therefore determine that it would be a waste of system resources and therefore ineffective to apply any compression network acceleration services to packets destined for this destination.

In network environments where only one WAN link couples branch network to campus network data analysis module may be configured only to inspect these first two tables A B as only one carrier and adjacency typically exists in these situations. Likewise service monitoring module may only be configured to monitor metrics on a per client and destination basis and therefore both of carrier and adjacency tables C and D may not store any information in these instances. However in network environments such as that shown in data analysis module may next analyze carrier table C and adjacency table D to further refine on which of links to forward the packets and as a result with which of adjacent intermediate network devices to establish the middle TCP session.

For example data analysis module may access adjacency table D by using the destination IP address described above as a key to determine that more than one adjacency device couples to the same destination. In other words data analysis module may perform a lookup of a destination column of adjacency table D such as that shown in Table 4 above using the destination IP address as a key whereupon data analysis module may determine that two or more adjacency entries have the destination IP address listed in the destination column. Adjacency table D although not shown above in Table 4 may further list the interface used to reach this adjacent intermediate network device e.g. server WXs and these adjacency entries may also list the interface. Using this interface as a key data analysis module may then access carrier table C to retrieve carrier entries corresponding to those links. Given the historical data stored to both the two or more adjacency entries and corresponding interface or carrier entries data analysis module may further refine the selection of which link and as a result adjacent intermediate network device to use to reach particular destination.

Data analysis module may therefore implement an algorithm or otherwise perform operations that balance all of historical data corresponding to the metrics determined through lookup of tables to determine the efficacy of network acceleration services as applied to a particular flow or connection and in some instances given a particular link and adjacent intermediate network devices . Data analysis module may determine this on a per flow basis as metrics are maintained and analyzed on a per client and destination basis and a flow typically describes a single direction or flow of traffic from a given client to a given destination. Thus by analyzing metrics corresponding to a particular client and destination data analysis module may determine the efficacy of network acceleration services as applied to a particular flow or connection.

Based on this determination or analysis adaptive service selection module may adaptively or dynamically reconfigure the application of network acceleration services to LAN traffic . Adaptive service selection module may adapt the application of network acceleration services by dynamically updating service configuration to adaptively add or remove network acceleration services within current associations defined by service configuration . Typically as shown in adaptive service selection module updates service configuration by creating an override association in override service configuration .

This override association overrides the static configuration maintained in service configuration in that servicing engine only applies those network acceleration services maintained by override service configuration unless no associates are defined for a particular packet. Thereafter adaptive service selection module may alter the override association corresponding to a particular association of static service configuration by editing the override association. In instances where no override associations exist servicing engine may apply the associations defined in the rules received from classifier module . Adaptive service selection module may also adapt the application of network acceleration services by creating new override associations between network acceleration services and one or more of flows sessions connections e.g. link applications protocols etc. In this way adaptive service selection module may adapt the application of network acceleration services to more efficiently utilize system resources and possibly improve network performance.

After dynamically adapting the application of network acceleration services in the above manner servicing engine may continue to receive LAN packets from classifier module and apply the plurality of network acceleration services in accordance with the override service configuration . As a result control unit may require less cycles to process particular packets associated with flows sessions connections applications protocols etc. for which one or more network acceleration services were disassociated or removed within override service configuration . Moreover as some network acceleration services may be added or new associations may be created additional network acceleration services may be applied to possibly improve network performance and decrease the consumption of bandwidth thereby possibly reducing costs and increasing download speeds.

In parallel or simultaneous to the application of network acceleration services adaptive service selection module monitors the application of the plurality of network acceleration services to traffic to determine whether the application of network acceleration services results in an improvement of the efficiency with which traffic is serviced. As described above service monitoring module may monitor a plurality of different metrics in order to generate information by which such efficiency may be measured. Modules may store this information to tables either by replacing previous information or adding this new information to one or more entries of each of tables to create historical records data or information pertaining to each monitored metric. Based on the information stored to these tables data analysis module may determine trends and perform other statistical analysis to evaluate the efficiency or efficacy of application of network acceleration services .

If each and every monitored one of network acceleration services is effective adaptive service selection module may not dynamically adapt or adjust the application of network acceleration services as specified by the rules or associations of service configuration . Instead client WX may continue to receive traffic apply network acceleration services in accordance with service configuration and continue monitoring the efficacy the application of these network acceleration services . However if data analysis module determines that one or more of the monitored ones of network acceleration services are ineffective adaptive service selection module may dynamically adapt service configuration by creating or otherwise updating one or more override rules or associations within override service configuration to alter the application of the plurality of network acceleration services to traffic . Upon receiving additional traffic servicing engine may apply network acceleration services in accordance with dynamically adapted service configuration e.g. override service configuration such that traffic is more efficiently serviced .

By adapting the application of network acceleration services in this manner client WX may override static rules defined by admin to more efficiently apply these network acceleration services. For example admin may statically define a rule within service configuration that applies one or more network acceleration services to a particular port e.g. port of client WX . Client WX may then monitor the application of those network acceleration services to the traffic that includes a port header value of 80 and determine the efficacy of these network acceleration services . If not effective client WX may override that static configuration by adapting the rule to remove those network acceleration services determined not to be effective. That is client WX may define an override rule or association within override service configuration that specifies for traffic including the port header value of 80 none of network acceleration services should be applied thereby overriding the above rule.

After receiving the packet classification information and rules servicing engine may first access override service configuration using the classification information to determine whether to override the network acceleration services identified by the rules e.g. which define statically configured associations of network acceleration services . If servicing engine determines that an override rule or association exists in override service configuration servicing engine may as described above then apply those network acceleration services in accordance with the override rule or more generally override service configuration YES . If servicing engine determines that on override rule does not exist in override service configuration servicing engine may as described above apply those network acceleration services identified by the rules received from classifier module or more generally apply network acceleration services in accordance with service configuration NO . After applying those network acceleration services servicing engine may forward each packet to classifier module which in turn forwards each packet to routing engine . Routing engine may forward each packet as either of WAN traffic .

In parallel or simultaneous to the application of network acceleration services adaptive service selection module may monitor the efficacy of applying those network acceleration services to each packet by client destination carrier and adjacency as described above . As described above adaptive service selection module and more particularly service monitoring module may only monitor the efficacy of network acceleration services by client and destination in instances where only a single link or carrier and as a result a single adjacent intermediate network device e.g. server WX A can be used to reach a given destination e.g. server A. In these instances monitoring the efficacy of both links and adjacencies provides little if any benefit as adaptive service selection module may not further refine the application of network acceleration services based on these monitored metrics e.g. there is not a choice of links or adjacent intermediate network devices. Thus while described herein with respect to monitoring the application of network acceleration services by these metrics the techniques may monitor the efficacy of applying network acceleration services based on one or more metrics of one or more categories and should not be so limited to the exemplary monitoring and dynamic adaption described herein.

Data analysis module may routinely or periodically or in some instances continually analyze tables to determine the efficacy of applying network acceleration services . As described above data analysis module may analyze the efficacy on a per flow or connection basis by analyzing each of the three TCP sessions described above which may represent three separate segments of a given flow from client e.g. one of endpoint devices to destination e.g. one of servers . That is data analysis module may analyze the efficacy of applying network acceleration services on the first segment of the flow by analyzing client table A. Next data analysis module may analyze the efficacy of applying network acceleration services on the last or third segment of the flow by analyzing destination table B. Third data analysis module may analyze the efficacy of applying network acceleration services on the middle or second segment of the flow by analyzing both carrier table C and adjacency table D. Similar to service monitoring module data analysis module may only perform this middle flow segment analysis if a plurality of links and therefore adjacencies are available to reach a given destination. Data analysis module may then based on each of these separate analysis determine whether the application of network acceleration services improves the efficiency with which the network traffic is serviced.

As described above data analysis module may determine this efficiency on any of the above metrics e.g. compression ratio cache hit to miss ratio throughput latency bandwidth remaining etc. Additionally data analysis module may factor in costs to transmit data over particular links and as a result the efficiency with which data is serviced may refer to cost or monetary efficiency. Thus data analysis module may implement algorithm or otherwise perform operations that balance all of historical data corresponding to the metrics determined through lookup of tables to determine the efficacy of network acceleration services as applied to a particular flow or connection and in some instances given a particular link and adjacent intermediate network devices .

If data analysis module determines that at least one of those network acceleration services applied to traffic are ineffective NO adaptive service selection module may edit override service configuration to add and or remove one or more of network acceleration services specified as applying to that flow . In this respect override service configuration may be flow specific and maintain override rules on a per flow basis. However if data analysis module were to determine the efficacy of network acceleration services based on a different basis e.g. a per protocol basis instead of a per flow basis or on one or more bases override service configuration may maintain these override rules on those other one or more bases as well. That is override service configuration may mirror the analysis algorithm in this way. If data analysis module however determines that each of those network acceleration services for which an analysis was performed are effective adaptive service selection module may not update or otherwise edit override service configuration and client WX may continue to receive traffic classify each packet apply network acceleration services analyze the application dynamically adapt the application and otherwise perform the principles of the invention in the manner described herein .

As shown in router includes a control unit that comprises a routing engine and a forwarding engine . Routing engine is primarily responsible for maintaining routing information to reflect the current topology of a network and other network entities to which it is connected. In particular routing engine updates routing information to accurately reflect the topology of the network and other entities. In accordance with routing information forwarding engine maintains forwarding information that associates network destinations with specific next hops and corresponding interfaces ports.

Router includes a set of interface cards IFCs A N IFCs for communicating packets via inbound links A N inbound links and outbound links A N outbound links . Each of IFCs couple to and communicate with control unit via switch . Switch may comprise any communication medium capable of communicatively coupling one or more endpoints e.g. IFCs control unit and client Wide Area Network WAN accelerator X service card . Forwarding engine may receive packet forwarded via switch from IFCs and forward those packets via switch and IFCs on outbound links A N according to forwarding information . In this manner forwarding engine provides the forwarding functionality of router .

Router also includes a client wide area network WAN accelerator X service card client WX service card . Client WX service card may be substantially similar to client WX in that client WX service card may include a control unit that comprises substantially the same user interface classifier module servicing engine including adaptive service selection module etc. as that of client WX . In this respect client WX service card may perform the techniques described above with respect to client WX in substantially the same manner as that of client WX .

Client WX service card may however not include a routing engine similar to that of client WX as control unit may perform the routing functions. In this regard client WX service card may differ from client WX described above. That is router may receive the packets via incoming links whereupon IFCs forward those packets via switch to forwarding engine . Forwarding engine may maintain information requiring that packets associated with particular flows as one example should be first sent to client WX service card prior to forwarding those packets via one of outbound links .

Forwarding engine may then forward these packets to client WX service card for processing or servicing in the manner described above. These packets may therefore arrive similar to LAN traffic however these packets may be received directly by classifier module in this instance. Client WX service card may also dynamically adapt the application of network acceleration services e.g. network acceleration services in accordance with the techniques described herein. After servicing client WX service card may forward the packets back to forwarding engine via switch whereupon forwarding engine forwards the packets via one of outbound links .

Client WX service card may therefore comprise any card or other removable processing unit that may be inserted into a slot. Client WX service card may once inserted into the slot interface with switch whereby client WX service card may receive service and forward packets in accordance with the principles of the invention. In this manner any network device may implement the techniques described herein to improve the efficiency with which network traffic is processed.

Various embodiments of the invention have been described. These and other embodiments are within the scope of the following claims.

