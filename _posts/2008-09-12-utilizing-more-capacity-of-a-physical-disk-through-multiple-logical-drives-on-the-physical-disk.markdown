---

title: Utilizing more capacity of a physical disk through multiple logical drives on the physical disk
abstract: A first physical capacity of a first physical storage device is determined. A second physical capacity of a second physical storage device that has a physical capacity greater than the first physical capacity is determined. A storage space pool comprising at least a first logical drive, a second logical drive, and a third logical drive is created. The first logical drive corresponds to the first storage device and has the same capacity as the first physical capacity. The second logical drive corresponds to a first portion of the second storage device. The third logical drive corresponds to a second portion of the second storage device. The first portion and the second portion having at least the first physical capacity. Thus, two portions having at least the first physical capacity are utilized on the second physical drive instead of just one portion.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08261015&OS=08261015&RS=08261015
owner: LSI Corporation
number: 08261015
owner_city: Milpitas
owner_country: US
publication_date: 20080912
---
Mass storage systems continue to provide increased storage capacities to satisfy user demands. Photo and movie storage and photo and movie sharing are examples of applications that fuel the growth in demand for larger and larger storage systems.

A solution to these increasing demands is the use of arrays of multiple inexpensive disks. These arrays may be configured in ways that provide redundancy and error recovery without any loss of data. These arrays may also be configured to increase read and write performance by allowing data to be read or written simultaneously to multiple disk drives. These arrays may also be configured to allow hot swapping which allows a failed disk to be replaced without interrupting the storage services of the array. Whether or not any redundancy is provided these arrays are commonly referred to as redundant arrays of independent disks or more commonly by the acronym RAID . The 1987 publication by David A. Patterson et al. from the University of California at Berkeley titled A Case for Redundant Arrays of Inexpensive Disks RAID discusses the fundamental concepts and levels of RAID technology.

RAID storage systems typically utilize a controller that shields the user or host system from the details of managing the storage array. The controller makes the storage array appear as one or more disk drives or volumes . This is accomplished in spite of the fact that the data or redundant data for a particular volume may be spread across multiple disk drives.

An embodiment of the invention may therefore comprise a method of operating a redundant array of independent disks RAID storage system comprising determining a first capacity of a first storage device determining a second capacity of a second storage device that is greater than said first capacity and creating a storage space pool comprising at least a first logical drive a second logical drive and a third logical drive said first logical drive corresponding to said first storage device said second logical drive corresponding to a first portion of said second storage device said third logical drive corresponding to a second portion of said second storage device the first portion and the second portion having at least said first capacity.

An embodiment of the invention may therefore further comprise a redundant array of independent disks RAID storage system comprising a first storage device having a first capacity a second storage device having a second capacity that is greater than said first capacity and a storage space pool comprising at least a first logical drive a second logical drive and a third logical drive said first logical drive corresponding to said first storage device said second logical drive corresponding to a first portion of said second storage device said third logical drive corresponding to a second portion of said second storage device the first portion and the second portion having at least said first capacity.

An embodiment of the invention may therefore further comprise a computer readable medium having instructions stored thereon for operating a redundant array of independent disks RAID storage system that when executed by a computer at least direct the computer to determine a first capacity of a first storage device determine a second capacity of a second storage device that is greater than said first capacity and create a storage space pool comprising at least a first logical drive a second logical drive and a third logical drive said first logical drive corresponding to said first storage device said second logical drive corresponding to a first portion of said second storage device said third logical drive corresponding to a second portion of said second storage device the first portion and the second portion having at least said first capacity.

In physical drives are typically separate physical storage devices such as hard disk drives. Map and RAID control are typically software modules or processes that run on a storage array controller. However map and or RAID control may be assisted by hardware accelerators. Storage pool logical drives and virtual volumes are functional abstractions intended to convey how various software components such as map and RAID control interact with each other and hardware components such as host computers . An example of a functional abstraction is a software application programming interface API . Map and RAID control may be implemented on a computer. Instructions for implementing map and RAID control may be stored on a computer readable medium.

In an embodiment storage system identifies that physical drive has a capacity that is at least twice the capacity of physical drives . Storage system configures map to logically divide physical drive into at least a first portion and a second portion . Thus physical drive includes a first portion and a second portion .

In an embodiment the capacity of the first portion is equal to the capacity of physical drives . In an embodiment the capacity of the second portion is equal to the capacity of physical drives . In an embodiment the capacity of physical drive is greater than or equal to an integer multiple greater than two 2 of the capacity of physical drives . Thus the capacity of the second portion may be greater than or equal to the capacity of physical drives . Likewise the capacity of the first portion may be greater than or equal to the capacity of physical drives .

Map may be or include a module process or hardware that creates storage pool and projects logical drives to RAID control . In an embodiment map creates storage pool by projecting the first portion the second portion and physical drives to RAID control as logical drives . Logical drives all are projected as having equal capacities. For example map may project first portion to RAID control as logical drive . Logical drive may be projected to RAID control as having a capacity that is equal to the capacity of physical drives . Map may project second portion to RAID control as logical drive . Logical drive may be projected to RAID control as having a capacity that is equal to the capacity of physical drives . Physical drive and physical drive may be projected to RAID control as logical drive and logical drive respectively. Logical drives may be projected to RAID control as having a capacity that is equal to the native capacity of physical drives . In an example map may utilize a reference table to determine a mapping from the first portion and the second portion to logical drive and logical drive respectively.

RAID control may be or include a module process or hardware that creates various RAID levels utilizing logical drives as created and projected by map . RAID control may distribute storage data across logical drives using RAID techniques to create virtual volumes . In an embodiment RAID control may create RAID levels 1 through 6 utilizing the logical drives as created and projected by map .

RAID control may project virtual volumes to one or more hosts not shown . RAID controller may also project additional virtual volumes. However these are omitted from for the sake of brevity. Once created from the RAID configurations virtual volumes may be accessed by host computers. Virtual volumes may each have different RAID levels. For example virtual volume may be configured as RAID level 1. Virtual volume may be configured as RAID level 5.

In an embodiment RAID controller groups logical drives into RAID groups. A RAID group may correspond to a virtual volume . In an example RAID controller may group logical drive that corresponds to first portion with logical drive that corresponds to physical drive . This RAID group may be projected to a host computer as virtual volume . In an embodiment storage system ensures that the same RAID group does not have more than one logical drive from the same physical drive . In other words storage system ensures that the first portion and the second portion are not both used for the same RAID group.

In an embodiment the first portion or the second portion may be configured by storage system to cache data for storage system . In an embodiment the first portion or the second portion may be configured by storage system as a hot spare for storage system .

Storage system may identify that physical drive has a greater capacity than other physical drives when physical drive is placed in physical drive group as a replacement. For example when a physical drive fails it needs to be replaced with another physical drive. When this happens the capacity of the failing drive may not be available due to a variety of reasons that include the failing drive capacity no longer being sold by the manufacturer. Thus the failing drive may be replaced by a physical drive that has a greater capacity than other physical drives in storage system . Storage system may be configured as describe previously to create new RAID volumes utilizing the unused extra capacity of physical drive . In addition storage system may be configured to utilize the extra unused capacity of physical drive for file I O caching or as a hot spare.

A first capacity of a first storage device is determined . For example storage system may determine the capacity of physical drive . A second capacity of a second storage device that is greater than the first capacity is determined . For example storage system may determine that the capacity of physical drive is greater than the capacity of physical drive . Physical drive may be a replacement for a physical drive that has failed.

A storage pool is created using the first storage device and a plurality of portions of the second storage device that have the first capacity . For example storage system may create storage pool using at least physical drive first portion and second portion . At least one of the plurality of portions of the second storage device are utilized . For example storage system may utilize second portion as a logical drive that is part of a RAID group. In another example storage system may utilize second portion as a logical drive configured as hot spare. In another example storage system may utilize second portion as a logical drive for file I O caching.

In another example storage system may utilize second portion as a logical drive that is part of a RAID group with storage data distributed across two or more logical drives using RAID techniques to create virtual volumes . In another example RAID control may create RAID levels 1 through 6 utilizing second portion as one of the logical drives as created and projected by map .

The foregoing description of the invention has been presented for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed and other modifications and variations may be possible in light of the above teachings. The embodiment was chosen and described in order to best explain the principles of the invention and its practical application to thereby enable others skilled in the art to best utilize the invention in various embodiments and various modifications as are suited to the particular use contemplated. It is intended that the appended claims be construed to include other alternative embodiments of the invention except insofar as limited by the prior art.

