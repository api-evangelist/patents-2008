---

title: Delegated network connection management and power management in a wireless device
abstract: A method and system for advanced media access control delegated from a host device, such as a WiFi device, to a smart wireless communications module. In an embodiment, the host signals to the wireless module a list of one or more preferred networks. The wireless module offloads from the host the processing required to scan for the preferred network(s), as well as possibly other management tasks. The wireless communications module may automatically reassign the network connection from an existing network to a preferred network, or may report to the host when a preferred network is discovered. In either case, the wireless communications module may monitor the wireless environment, and scan for preferred networks, in parallel with maintaining an existing connection. The method and system allows rapid adaptation to a changing network environment, and enables lower system power consumption by distributing management functions between the host and the lower-powered wireless communications module.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08305958&OS=08305958&RS=08305958
owner: Broadcom Corporation
number: 08305958
owner_city: Irvine
owner_country: US
publication_date: 20080711
---
This patent application claims the benefit of U.S. Provisional Patent Application No. 60 929 888 filed Jul. 16 2007 entitled Low Powered 802.11 Wireless Device and also claims the benefit of U.S. Provisional Patent Application No. 61 046 170 filed Apr. 18 2008 entitled Delegated Network Connection Management And Power Management In A Wireless Device both of which are incorporated herein by reference in their entirety.

The present invention relates generally to wireless communications. It relates further to advanced media access control MAC capabilities and also to power management in a wireless communications device.

Wireless communications systems such as wireless enabled laptop computers PDAs portable music players portable televisions personal digital assistants PDAs WiFi cards cell phones and similar mobile digital devices and mobile analog devices pose multiple challenges for design engineers and users alike.

For all portable electronic devices and for wireless devices in particular power management is a concern as battery life is always limited. Reduced power consumption means longer battery life and better system performance. Even routine management of an existing network connection can be a significant drain on battery power. Further maintaining optimum network connections and other network management tasks can consume substantial battery power.

Users in a wireless environment are typically mobile and so may come in and out of range of wireless access points APs . Not all APs may support the connections desired by a user and not all APs provide optimal access such as high speed wireless links . In addition other environmental factors such as a constantly changing multipath environment may also influence the quality and availability of network connections. Therefore establishing maintaining and optimizing network connections is an ongoing task with significant power demands. For example if a network connection is lost altogether substantial power may be consumed simply by continuing to monitor a dead network environment and further power may be consumed by actively sending probes into the network environment to reestablish the connection as quickly as possible.

As another example if a user is currently linked to a network via a low speed or low quality network connection a better network connection should be established as soon as it is available. Similarly a user may be seeking to use a preferred network connection but may also be willing to use alternative network connections until a preferred network connection becomes available. This may therefore entail searching for the preferred network connection even while an existing network connection is in place.

A closely related challenge lies in maintaining awareness of the network environment. Wireless hardware benefits from knowing the speed and quality of network connections. The wireless hardware and wireless user may benefit from learning of the availability of alternative or additional network connections apart from a connection the user may have at the current moment. Maintaining this wireless environmental awareness again places significant power demands on the system.

A further challenge is to provide optimized network connectivity and communications management including reduced power consumption while not overly taxing the resources of a primary processor of the wireless communications system. Excessive use of a primary processor for network connectivity support may degrade other aspects of system performance.

What is needed then is a system and method in a wireless device for advanced wireless network discovery while minimizing system power consumption. Furthermore it should also provide for advanced management and maintenance of network connections that simultaneously provides robust intelligent connection management and minimizes the impact on a primary processor of the wireless communications system.

The embodiments described herein meet the above identified needs by providing a system and method for advanced network connection management with lower power consumption. In particular the configuration described herein distributes network management functions between a host device and a dedicated wireless communications module. In an embodiment the wireless communications module provides network discovery and connection management functions relieving the host module of some or all of these responsibilities. This may result in lower system power consumption more advanced network management features and more effective use of a processor or processors on the host device. In particular the host device can use a lower power mode or turn off when not required to support communications functions resulting in lower overall system power consumption.

The present invention is directed to a system and method for advanced media access control delegated in part or in whole from a host device to a wireless communications module. The following detailed description of the present invention refers to the accompanying drawings that illustrate exemplary embodiments consistent with this invention. Other embodiments are possible and modifications may be made to the embodiments within the spirit and scope of the invention. Therefore the detailed description is not meant to limit the invention. Rather the scope of the invention is defined by the appended claims.

The following definitions characterize some features properties components behaviors elements or functions of the systems or methods discussed in this document. Further defining aspects or characteristics may be introduced in the detailed discussion in remaining portions of this document. In addition elements so defined may have additional features properties components behaviors elements or functions which are not enumerated in this document but which may be familiar to those skilled in the relevant arts.

Some systems or methods may be defined or characterized here in whole or in part by exemplary instances of such systems or methods for example by a particular exemplary type of wireless device such as an 802.11 enabled device a personal digital assistant etc. . It should be understood however that such systems or methods may encompass other specific instances or embodiments not listed in the definitions below or elsewhere herein.

Wireless device The terms wireless device wireless communications device wireless communications system and wireless system are used synonymously herein. These terms may typically refer to a self contained fully featured portable device used for processing transmitting and or receiving voice music other sounds still images video text e mail Web page content digital documents a variety of other digital files and other data or content matter of interest. Other synonymous terms which may be used in the art include mobile digital device and mobile analog device .

Such devices may include for example and without limitation 802.11 enabled devices in general laptop computers portable music players portable televisions personal digital assistants PDAs and similar devices. Devices using other wireless communications protocols such as Bluetooth or any of several cell phone communications protocols are also wireless devices within the scope of the present system and method. Such devices include some mobile phones laptop computers GPS devices wireless video game consoles and cell phones.

Such devices may be principally dedicated to communications or may be principally dedicated to a variety of other data processing tasks but have enabled within a capability for wireless communications for example laptop computers portable music players . Wireless devices typically have a host CPU which may be configured to support in whole in or in part the communications tasks of the wireless device but at a minimum is generally capable of supporting higher level network management tasks associated with media access control MAC services. Wireless devices may or may not have a radio chip for actual modulation demodulation transmission and reception of the radio frequency RF waves used to carry wireless signals in some cases they may depend on a wireless communications module defined below for a radio chip.

In some cases the terms wireless device wireless communications system or wireless system may refer to a built in or removable component part of a larger device wherein the component part is dedicated to providing wireless communications capabilities and services. For example a WiFi card which may be attached to a USB port or inserted into a PCMCIA slot of a laptop computer may be regarded as a wireless device or wireless communications system .

As used in this document the terms wireless device wireless communications device wireless communications system or wireless system will have a component referred to in this document as a host or host device defined further immediately below. A wireless device may also have a component referred to in this document as a wireless communications module or a dongle also defined further below.

 Wireless device and synonymous terms may refer to a device which operates without the wireless communications module of the present invention. Wireless device and synonymous terms may also refer to a device which incorporates the wireless communications module of the present invention. For example a WiFi card or a PDA without the wireless communications module of the present invention may be considered a wireless device. Also a WiFi card or a PDA with the wireless communications module of the present invention may be considered a wireless device.

Host Host device The terms host wireless host and host device are used synonymously herein to refer to a wireless device as defined immediately above which specifically does not include the wireless communications module of the present invention. However a host device may be coupled or be capable of being coupled to a wireless communications module.

For example a WiFi enabled cell phone or a PDA with an SDIO slot for accepting a variety of adapters may be considered a host device. Similarly a laptop computer configured for wireless communications may be considered a host device. Such host devices may be coupled to the wireless communications module of the present invention by for example inserting a suitable adapter into an SDIO slot PCMCIA slot USB connector or any other bus interface.

A WiFi card such as an 802.11 PCMCIA card or 802.11 SDIO adapter which is configured to accept a wireless communications module for example by having a socket on a circuit board which can accept a wireless communications module chip may be considered a host device. Such a WiFi card may be coupled to the wireless communications module of the present invention by inserting a suitable chip that is a suitable integrated circuit into the socket.

Wireless communications module Dongle The terms dedicated wireless communications module wireless communications module wireless module and dongle are used synonymously herein to refer to an electronics module which may provide communications services to a host device.

A wireless communications module may be a single microchip or may be a circuit board possibly enclosed in a case with suitable connectors with one or more microchips. A wireless communications module typically comprises or includes a media access control MAC device such as a dedicated MAC chip or a microprocessor programmed or configured to operate as a MAC device. A wireless communications device may include additional elements such as memory I O hardware component for example a USB or SDIO interface possibly a radio hardware component and possibly other components as well.

In this document and as described further below a wireless communications module may be connected or coupled to a host device via a general purpose I O connection or via a system bus. Such connection or coupling may be via a hardwired connection which may therefore place the wireless communications module in a location which is interior to a case or housing of the host device or by inserting the wireless communications device into a port or slot of the host device or by attaching the wireless communications device to a port slot or similar connector of the host device.

Network The term network as used in this document may be broadly understood as referring to a wide variety of possible sources of wireless data streams. For example two different networks may be distinguished as being provided by two different vendors of network services such as different vendors of WiFi services in a public network environment for example AOL vs. Microsoft .

However in some cases and for purposes of the present system and method networks which are distinguished herein as being separate sources of data streams may still be part of a common underlying network system. For example a first source of low speed data transmission and a second source of high speed data transmission from a common network services vendor may be construed as separate networks.

Access Point AP The terms access point and AP as used synonymously in this document may refer to any communications node that manages a WiFi network and provides the means for wireless devices to communicate with each other and or a distributed system DS . The term AP is conventionally used to refer to such nodes for WiFi networks and the term base station or cell tower is conventionally used in relation to cellular phone networks. Other terms may be employed in conjunction with other types of wireless networks. APs are typically connected to network servers or other sources of network data via landline connections for example via Ethernet .

Network connection The term network connection as used in this document may refer to an established or potential wireless linkage between a wireless device and a network. As commonly understood in the art establishing such a linkage may entail creating an authenticated linkage via a handshake process between the wireless device and the network. However the term network connection may also be understood in some contexts to refer to a more local connection between a wireless device and an AP of a particular network. So for example when a cell phone changes association from one cell phone tower to another or when a WiFi device changes association from one AP to another AP of the same network this may be understood in some contexts as changing a network connection or establishing a new network connection.

Preferred network connection A preferred network connection as the term is used herein may refer to any network connection which is designated as being preferred over or prioritized in relation to other alternative network connections. The designation of a preferred network connection may be indicated in real time during network usage or may be indicated in advance of any network usage for example as a pre coded list of preferred networks. or may be changed dynamically during network usage.

A preferred network connection may refer to any of several different aspects of network connection including for example and without limitation a preferred connection to a specific data source such as a preferred news service or network server a preferred connection to a specific network node or network user a preferred connection to a specific vendor for example a specific vendor of wireless services a preferred network communications protocol such as 802.11a or 802.11b etc. a preferred network connection speed or data rate a preferred network security method or protocol a preferred cost of using a network or linking to a network or a preferred connection error rate. Other types of network communications preferences may be designated as well.

Preferences among network connections may be designated by a user of a wireless device by a system administrator of a communications system by a designer of a network communications device and other parties. Various priorities may be set among preferred network connections using a variety of priority systems and more than one set of preferences and or priorities may be implemented at a time. Such preferences or priorities among network connections may be stored maintained re prioritized and or otherwise modified in hardware software firmware and or any of numerous kinds of dynamic storage as are well known in the art.

The above enumerated elements of preferred network connections are exemplary only and other types of preferred network connections and prioritized network connections may be envisioned as well consistent with the present system and method.

For example at a given time a wireless device may have a pre programmed set of priorities among types of network connections for example a preference for an 802.11a connection over an 802.11b connection a network administrator designated set of priorities among network vendors and a user designated set of priorities among connections to specific data sources and or network nodes. Consistent with the present system and method an exemplary wireless device may maintain a first network connection while simultaneously searching for a second network connection which is preferred that is has a higher priority with respect to any one two or three of the priorities of network connection type network vendor and or data source nodes.

Embedded system The term embedded system typically refers to a computer system with a specialized dedicated function which may typically be integrated down to a few components. Examples of embedded systems may include cell phones PDAs portable media players and similar devices. As understood in this document and in U.S. Provisional Patent Application No. 60 929 888 filed Jul. 16 2007 from which the present application claims priority the combination of a host device and a wireless communications module may be viewed as an embedded system.

However for purposes of the present invention the term embedded system may also be construed more broadly and be viewed as synonymous with the term wireless device as defined above. The term embedded system may therefore encompass for example a general purpose computer such as a personal computer either without or in combination with the wireless communications module discussed further below.

WiFi The term WiFi as used herein may refer both to technologies which are based on the IEEE 802.11 communications protocol and also more generally to technologies which employ communications protocols which may have substantial elements in common with the 802.11 protocol. The 802.11 protocols include the 802.11a 802.11b and 802.11g protocols as well as other related protocols which may currently be under development or may be forthcoming in the future and which are specified in IEEE documents as is known to persons skilled in the relevant arts. The pertinent IEEE standards for 802.11a 802.11b and 802.11g as of the filing date of this application are incorporated herein by reference as if the entire text were reproduced below.

Exemplary environment may include one or more wireless devices configured for user access to wireless networks. illustrates an exemplary wireless device which may for example be a WiFi enabled mobile communications device including for example and without limitation a personal digital assistant PDA a laptop computer with built in WiFi or a WiFi card a portable music player a wireless television receiver a cell phone or one of many kinds of similar wireless devices. Other examples of wireless devices may include various kinds of portable medical monitoring and reporting devices a variety of portable communications devices used in law enforcement and or military applications location determination devices such as those associated with the Global Positioning System GPS and a variety of wireless technologies which may be used in various industrial and enterprise contexts for such purposes as inventory tracking and monitoring.

A wireless device may contain within or have attached to it a wireless communications module not illustrated or may have a port or card slot configured to access a wireless communications module such module being discussed below in greater detail in conjunction with below.

Network environment may also contain one or more access points APs configured to transmit and receive network information and which are typically also configured to support a plurality of wireless devices . As noted above examples of APs may include WiFi APs cellular towers used in cell phone networks and other wireless applications and similar distribution points for wireless signals.

Network environment may support one or more networks which provide data to APs for broadcast and which also receive data from wireless devices via APs . Persons skilled in the relevant arts will recognize that various hardware not illustrated may be required to support network activities in network environment . Such hardware may include but is not limited to network servers authentication servers routers modems and various kinds of radio frequency RF equipment. Persons skilled in the relevant arts will further recognize that in some cases hardware associated with networks may be substantially collocated with APs . In other cases hardware associated with networks may be remote from APs and linked to APs via cabling such as electrical cables or fiber optics cables.

For purposes of the present invention networks may be viewed as sources of data for wireless transmission by APs and sinks for data received at APs the latter data being received from wireless devices .

Exemplary network environment as illustrated in may provide access to a plurality of networks or to a plurality of network configurations or both. For example a first network Network may be linked to a first AP AP while a second Network may be linked to a second AP AP. A third network Network may be linked to a plurality of APs such as AP. and AP.. Further a plurality of networks such as Network .A and Network .B may be accessed through a plurality of APs such as AP. and AP..

Persons skilled in the relevant arts will recognize that the above connections between networks and APs are exemplary only. In general a given AP may provide access to a plurality of networks and a given network may be accessible via a plurality of APs .

It will be further apparent to persons skilled in the relevant arts that between various APs what may vary may be not only the available networks but also the quality of service. Quality of service factors for a network connection may include the speed of network connection the security level of network connection the types of services supported by a network connection the connection reliability and bandwidth guarantees and other factors which may affect the nature and quality of the network connection available to a user of a wireless device .

The above named network connection factors may also vary depending not only on the particular AP but also depending on variable factors within the network environment. For example movement of objects within a network environment can affect the link quality. In addition factors entirely external to the network environment may affect network connections. For example a given network may temporarily go offline for a variety of reasons for example due to power failures disruptions in communications lines network server crashes problems with intermediary or linking networks deliberate electronic network attacks etc. only to become available again at a later time.

As a result for a user in network environment both networks and the quality of network connections available to the user s wireless device may vary over time and may also vary as the user physically moves through the network environment . The user may have preferences among various network connections with various priorities regarding those preferences. Consequently it is desirable that wireless device be capable of adapting to a network environment which changes over time and moreover wherein the nature and quality of network connections may change as the user moves through the environment.

According to embodiments of the present invention power consumption of a wireless communications device such as the exemplary wireless device of element and discussed below can be lowered by distributing management functions between a host module with a primary processor and a wireless communications module with a secondary processor. In an embodiment the wireless communications module may perform network discovery and connection management functions. Offloading these tasks from the primary processor of the host module to the secondary processor of the wireless communications module can be used to lower power consumption. In particular the host module may use a lower power mode or be turned off altogether for periods of time resulting in lower overall system power consumption.

In addition when network discovery and connection management functions are offloaded to a wireless communications module the wireless communications module can be configured to assist the host module with power management functions. In particular the wireless communications module can assist the host module in making power management decisions regarding system components including a host bus controller and or a communications port controller at the wireless communications module itself. For example the wireless communications module can assist the host module to make power management decisions when no network is discovered when no data is available excluding management packets and in the smart adaptive scan mode described below .

Further offloading network discovery and connection management functions to the wireless communications module allows higher level applications running on the primary processor to quickly switch between networks when necessary. In an embodiment a background scan is used at the wireless communications module even when the system is associated with a network so that the overall system that is the wireless device always has full awareness of all available network connections.

Host and wireless communications module may be structurally contained in a surrounding exemplary case . Case may also include any number of ports buttons control devices or other user interface elements not illustrated. Exemplary wireless device also includes an exemplary antenna which may be either interior to or exterior to case .

Exemplary host includes an exemplary host central processing unit CPU . Host further comprises an exemplary host bus controller . Bus controller controls electronics necessary for communications over bus . For example host bus controller may be a controller for a USB port SDIO port a PCI bus or similar bus or connector.

Host may also comprise any number of additional chips elements or components schematically represented as elements . Host CPU may perform any number of tasks pertaining to the general purpose or general operations of wireless device . For example for a cell phone host CPU may perform tasks related to digital signal processing and other management tasks related to sending and receiving a telephone call. For a general purpose laptop computer host CPU may perform all the tasks necessary to support software operations and the running of programs on the laptop computer. For a specialized wireless device such as a portable music player host CPU may have additional special operations to support such tasks as the playback of music.

In a wireless device which does not have a wireless communications module that provides and manages wireless network connectivity to various degrees host CPU may be further configured to support a variety of high level communications tasks. For example host CPU may be configured to support those tasks which are typically associated with media access control MAC operations in a communications device. A disadvantage of such a configuration is that it may consume substantial bandwidth or substantial resources on host CPU to support such communications tasks. As a consequence host CPU may draw substantial power in order to support those communications tasks. Further by supporting communication tasks on host CPU the performance of host CPU may be degraded with respect to other tasks which are to be performed by host CPU .

The present system and method addresses this potential drain on the resources on the host CPU by introducing a wireless communications module such as exemplary wireless communications module . As already indicated wireless communications module is coupled to host CPU via bus . Wireless communications module may include such elements as an exemplary media access control MAC element an exemplary memory an exemplary input output device such as exemplary USB SDIO device and an exemplary clock .

These various exemplary components MAC memory USB SDIO device and clock are coupled to each other as necessary in order to support the operations of wireless communications module . The connections or couplings between these components as illustrated in are exemplary only and other couplings are possible. In some embodiments of the present system and method MAC memory USB SDIO device and clock may be on separate integrated circuits ICs . In some embodiments of the present system and method some or all components of wireless communications module may actually be on a single chip or single IC.

In some embodiments of the present system and method MAC may be a dedicated MAC chip or chips. In other embodiments of the present system and method MAC may actually be implemented via a general purpose central processing unit CPU . CPU may be referred to as dongle CPU or wireless communications module CPU . In such an embodiment dongle CPU may be configured to operate as a MAC via instructions stored in memory . In particular management communications tasks discussed in further detail below in this document may be encapsulated in an application or application software referred to as exemplary management application .

Management application is illustrated in with a dotted line bubble representing its role as software. Persons skilled in the relevant arts will recognize that management application may be implemented via dedicated hardware via firmware and or via software and may be embodied and implemented via one or more of MAC dongle CPU and or memory along with possibly other components. Management application may be implemented as a computer program product implemented on a computer readable medium that causes dongle CPU to implement various instructions.

Persons skilled in the relevant arts will recognize that in many wireless applications the MAC functionality is partitioned between an upper MAC and a lower MAC. In an embodiment many of the operations and features of management application of the present system and method would be implemented or supported via an upper MAC but in some embodiments some or all features may be implemented or supported in part or in whole via a lower MAC as well. In the remainder of this document it will be indicated only that features of the present system and method are implemented via MAC which may in turn be implemented in part or whole via dongle CPU it being understood that the partition of specific features or operations between an upper MAC and a lower MAC may be implementation dependent.

In an embodiment of the present system and method MAC or dongle CPU are specifically configured to be electronics which draws less power than host CPU of host . For example in one embodiment of the present system and method dongle CPU may be implemented with a microprocessor which is less complex or has a simpler architecture than host CPU . For example dongle CPU may be smaller in physical size have fewer transistors have smaller on board cache memory and or fewer cache levels have fewer pipelines have a narrower internal bus width have fewer microprocessor cores or have other architectural and design differences as compared with host CPU . The different architecture results in overall reduced power consumption for dongle CPU as compared with host CPU based on suitable comparisons for example a comparison of the power consumed by each CPU when performing the same substantially similar or analogous processing tasks .

In an alternative embodiment dongle CPU may be the same or substantially similar in complexity or architecture to host CPU but dongle CPU may be run at a slower clock speed than host CPU while still enabling dongle CPU to fully and effectively perform all tasks required of dongle CPU . In an alternative embodiment dongle CPU may use a component level architecture for example a type of transistor logic which inherently draws less current or less voltage than that employed by host CPU . In an alternative embodiment dongle CPU may employ a combination of the above indicated techniques that is have a simpler architecture run at a slower clock speed and or implement a reduced current or voltage component level architecture as compared with host and or host CPU .

Other means of achieving reduced power consumption of dongle CPU or MAC as compared with host CPU may be envisioned as well. As a consequence and apart from any other power saving features of the present system and method any communications operations or any processing which is performed by wireless communications module and in particular those operations performed by MAC or dongle CPU will inherently draw less power than would be drawn by host CPU in performing the same operations.

MAC CPU of wireless communications module is configured or is programmed to perform a variety of high level tasks for the purpose of managing and establishing network associations between wireless device and network environment . As already indicated these features capabilities and related programs may be implemented in a management application . The details of some of these exemplary network connection and network connection management operations will be described further below in conjunction with .

A further component of exemplary wireless device is exemplary radio chip . Radio chip may configured to modulate outgoing wireless messages for transmission via antenna . Radio chip may be further configured to demodulate transmissions received via antenna . As illustrated in radio chip is coupled to host or to wireless communications module or to both.

Persons skilled in the relevant arts will recognize that depending on the particular configuration of wireless device radio chip may in fact be physically a part of host . In an alternative embodiment radio chip may be part of wireless communications module . In an alternative embodiment a first radio chip may be part of host and may be used by host for communications when wireless communications module is not installed. However wireless communications module may have its own radio chip which may be put into use in place of or along with radio chip associated with host .

In addition to its function for managing network connections and maintaining network connections exemplary wireless communications module is further configured to provide power management services to wireless device . Wireless communications module may send power management commands or power management recommendations to host via bus or if bus is not available for example because bus has been previously powered down then via GPIO . Wireless communications module may be further configured to provide power management control commands or power management recommendations to radio chip .

In addition wireless communications module may be configured to provide power management control to itself. For example if it is determined that communication services are not required with the host module for a period of time wireless communications module may shut down power or reduce power to USB SDIO device . Similarly if wireless communications services are not required for a period of time a MAC CPU component of wireless communications module may reduce power or shutoff power for a lower MAC component of MAC .

At step a communications task is delegated from host to wireless communications module . A communications task for example may be a task to establish a network connection or to establish a preferred network connection from among a list of prioritized network connections. Detailed exemplary communications tasks are discussed later in this document.

At step wireless communications module performs the communications task. Following step a power management task may be performed by wireless communications module . The details of power management task are described in further detail below in conjunction with exemplary method of .

At step a determination is made as to whether or not a result or outcome of the delegated task is to be reported back to host . This determination may for example be based on an indication in the originally delegated task as to whether results need to be reported from wireless communications module to host . If results are to be reported then at step results are reported from wireless communications module to host . The method then continues at step . If at step results of the task are not to be reported method continues directly with step .

At step a determination is made as to whether or not the delegated task may need to be repeated. This determination may be based on several factors. First it may be determined whether or not any repetition criteria were included in the original task. For example if the task is to establish a network connection the task may further comprise the detailed steps of searching for a suitable network connection and then establishing the network connection. If the network has not been found it may be necessary to repeat the task of searching for the network connection. In general at step a determination is made as to whether the task has any steps which may require repetition then a further specific determination may be made as to whether repetition is required based on the results of performing the task or attempting to perform the task.

In one embodiment if no repetition of the task is necessary step may continue with step which may entail determining whether or not power management actions are required by wireless communications module . If power management actions are required they are performed at step . The details of the power management task are described in further detail below in conjunction with exemplary method of .

In an alternative embodiment even if a repetition of the task is necessary step may still be followed by power management step as well as by step determine if task frequency is to be adjusted and possibly step adjust task frequency discussed below.

At step a determination is made as to whether the task repetition frequency should be adjusted. Some tasks may have associated with them a repetition frequency wherein depending on the outcome of the task the frequency of the task should be repeated or the frequency of the task should be reduced. The frequency in question is a frequency in time at which a task should be performed. It is not a frequency associated with a repetition of a cycle of an electro magnetic wave. 

If in step it is determined there is no need to adjust the repetition frequency then method continues by returning to step where the communications task is performed again. If at step it is determined that an adjustment needs to be made to the repetition frequency then a suitable adjustment is made at step . For example a timer which determines the timing between repetitions of the delegated task may be adjusted to establish the new repetition frequency.

Method has a second beginning path starting at step . In the second path method may continue with step .

In step wireless communications module detects a task related change in network environment . Step may continue with step . As a result of the task related change at step a communications task is restarted. Method then continues with step which entails performing the communications task at wireless communications module .

Further in response to detecting a task related change in the network environment at step method may continue with power management step . Power management step is discussed further below in conjunction with method of .

Finally as a result of a detected change in network environment step may continue with step which may report the change to the host .

As discussed above step determines whether a communications task is to be repeated. If the determination is that no repetition is needed then step continues with step of power management. If in step if it is determined that repetition is needed then in a first embodiment step continues with step related to task frequency as discussed above and does not continue with step .

In an alternative embodiment even if at step it is determined that repetition of the communications task is required entailing a continuation to step step may also continue with step of dongle power management. Following step step of dongle power management may be performed before step or step may be performed substantially concurrently with step or step may be performed after step .

In one embodiment of the present system and method step of determining whether to adjust task repetition frequency and possibly step of adjusting task repetition frequency may occur independently of step of power management.

In an alternative embodiment specific decisions involved in steps pertaining to task repetition frequency and specific decisions involved in step of power management may be linked. In the latter embodiment and as will be recognized by persons skilled in the relevant arts necessary code data and or operational logic may be shared between steps and step to achieve both suitable task repetition frequency and power management. As an exemplary case a decision to reduce power consumption may entail in whole or in part a decision to reduce a frequency at which a task is repeated.

In exemplary method as illustrated in links from various steps such as steps and to power management step are illustrated with dotted lines. These dotted lines indicate that there may be a variety of paths to power management step some of which may be optional and that other paths may be employed in the alternative to or in addition to those shown. Persons skilled in the relevant arts will appreciate that depending on the nature of a particular task or depending on the nature of a detected change in network environment power management may be initiated at any number of points during a particular method or process. Thus the steps illustrated leading to power management step are exemplary only.

Persons skilled in the relevant arts will further appreciate that in general the steps illustrated for method are exemplary. Fewer steps additional steps or steps performed in a different order may still be substantially within the scope and spirit of the present system and method.

In method steps and already discussed above in conjunction with method are repeated as possible starting points. Steps and are combined into one element in method as they both represent performance of a communications task or possible performance of a communications task which may be followed by a power management task . Referring back to in step a task related change in the network environment is detected. In step a communications task is performed by wireless communications module . From either step or step method continues with step the step of power management of method . As discussed above in one embodiment of the present system and method even if at step it is determined that repetition of the communications task is required entailing a continuation to step step may also continue with step of dongle power management.

As shown in the decision as to whether to evaluate power considerations after each repetition of a communications task is illustrated as being step of method in . However persons skilled in the relevant arts will recognize that this is exemplary only and that such a decision could be incorporated as an element of method of or could be distributed in a variety of ways across methods and .

Starting with step as an entry point into step at step a task related change in the network environment is detected. For example a change may be detected wherein a preferred network connection is not found or wherein no network connection is detectable or a change may be found in which a network connection has become available after a period of time when no network connection was previously available. In any of these cases it may be desirable to either decrease or stop power being supplied to certain system components or to increase or start power delivery to certain system components.

Step may be followed by step . At step a determination is made as to whether the detection task was a one time only task which has been completed. If the detection task has been completed the method continues with step .

At step a determination is made as to whether a power recommendation should be made or whether a power policy should be implemented. The exact decision will depend upon a specific task and a specific environmental change. For example if the task is to detect that no network connection is available after a period of time in which there has been a network connection available the power policy or power recommendation may be to power down certain chips which support communications tasks. Similarly if a determination is made that a network connection is now available after a period of time when a network connection was not available the power policy or power recommendation may be to deliver power or increase power delivery to certain components which perform certain communications task.

Similarly a decision as to whether wireless communications module will only recommend a power policy to host CPU or whether on the other hand wireless communications module will actively implement a power policy may depend on how wireless communications module has been previously configured either for a recommendation role or for an active power management role.

If in step it is determined that it is appropriate to make or implement a power recommendation the method continues with step . At step a recommendation or command is sent from wireless communications module to host device to implement or recommend a power recommendation.

For example wireless communications module may discover that a network connection is not currently available. In that event a recommendation may be sent from wireless communications module to host device to implement a policy to enter a sleep mode or otherwise reduce power consumption due to the lack of network availability and consequent lack of need for data processing. Or for example it may be that a network connection has not been available for some past period of time but a network connection is now currently found by wireless communications module . In that event a recommendation may be sent from wireless communications module to host device to implement a policy to enter a wake mode or otherwise increase power consumption in preparation for processing of network data by host device .

If at step a determination is made that no power policy should be recommended or implemented then the method stops at step .

Returning to step if the detection task is not a one time only task the method may continue at step . At step a determination is made as to whether power policy should be evaluated after each repetition of a detection cycle. This assumes that there is a task for environmental monitoring which is repeated more than once and further that at the conclusion of each repetition some detection may be made of a change in the network environment.

If at step power policy is to be evaluated after each repetition of the detection task then the method continues with step . As described above step and following steps entail a determination as to whether a power recommendation should be made or power policy implemented depending on a specific detected condition of the environment.

Returning to step if it is determined that a power policy or power recommendation should not be evaluated after each repetition of a task then the method continues at step . At step a determination is made as to whether the repeated task is completed. In other words a determination is made as to whether or not the task which is to be repeated has been repeated for the final time. If the task has been completed for the final time for example if a final monitoring has been done of the environmental condition then the method continues at step already described above.

If at step the repeated task is not completed meaning that there are additional repetitions of the task to perform then the method continues at either step again detecting a task related change in the network environment or at step performing a communication task at wireless communications module .

As noted above method may also start at step which entails performing a communication task at wireless communications module . Following step power management or power recommendations may commence either at step which entails determining if the task is a one time only task and has been completed or power management or power recommendations may commence at decision step where a determination is made as to whether to consider power management or power recommendations after each repetition of the task .

As already described in detail above steps and all entail determinations as to whether a task is completed or whether a repeated task is completed and also possibly determinations as to whether power management or power recommendations should be considered after each repetition of a repeated task. If determinations are made in the affirmative for any of steps or the method continues with step . In step a determination is made depending on the specifics of the task at hand as to whether to make a power policy recommendation or to implement a power policy.

In some embodiments environmental detection task performance and power management may occur at substantially the same time and the order of steps described above with regards to exemplary methods and may not be followed exactly or may be modified. For example a wireless communications module may detect at that it is in the vicinity of an AP which is delivering a high powered signal. A task related action may be to associate with the high power signal AP and a further task related action may be to reduce the power consumed by a radio chip for example by lowering a level of signal amplification required of the chip or to recommend a reduction in the power required by radio chip . These tasks could be performed even when the 802.11 wireless device is already associated to an existing AP.

The exact order in which such steps as association and power reduction may occur may depend on a specific detected condition a specific connection task and the specific power related requirements associated with the detected condition and or the connection task. It is to be understood then that the order of steps described above in conjunction with methods and is exemplary only. The same steps or similar steps may be performed in a different order within the scope and spirit of the present system and method.

Exemplary method starts at step . Method may continue with either step or step . At step a search task is received by wireless communications module from host . The search task may include several task elements including for example and without limitation 

In an embodiment the list of preferred networks may include a number of networks listed in order of preference so that the criteria for prioritizing the networks is simply the order in which the networks are presented in the list.

In an alternative embodiment other priority criteria may be used. For example it may be preferred to seek a network with a strongest signal strength or a network with a highest connection speed or a network which supports a certain type of data connection for example a cellular network which supports both Web and voice access may be preferred over a cellular network which supports only voice access . It may also be preferred to seek a network supported by a particular network vendor. Other priority criteria may be used as well.

The search task may include additional elements as well. For example the search task may include a request to scan the radio frequency RF environment for certain conditions for example certain kinds of packets or for clear channels . The data so obtained may be used for instance as part of establishing a priority among networks in the list of networks.

Alternatively at step wireless communications module may determine that a previous network association is no longer available in other words that a previously established network connection has been lost . Therefore it may be necessary to begin a new network scan based on the same task elements received in a previous search task.

Step entails initiating a directed scan for a preferred network from the list of networks. For example step may entail initiating a directed scan for a given network identifier such as a Service Set Identifier SSID from the list of preferred network identifiers.

Step includes determining whether the end of the list of preferred networks has been reached. If the end of the list has not been reached step includes continuing the directed scan for a given network identifier such as a Service Set Identifier SSID from the list of preferred networks.

At the end of the directed scan in step step includes checking whether or not a network has been found. If no network has been found the process returns to step . Otherwise if a network has been found the process proceeds to step which includes sending a message to host to notify host of the discovered network before returning to step .

Step may also include adding the found network to a list of found networks maintained in memory of wireless communications module . In this way once the search is completed wireless communications module will have a list of all preferred networks found during the search.

On other the hand if in step the end of the list of preferred networks has been reached the process proceeds to step . Step includes checking whether or not a network has been found after having processed the entire list of preferred networks. If no network has been found the process proceeds to step which includes setting a timer to schedule a future network scan. This is discussed further below in conjunction with . However if one or more networks have been found the process proceeds to step .

Step includes selecting a network to associate with from the one or more discovered networks based on switching criteria. The switching criteria may include 

The pre defined rules may pertain to any number of factors including for example and without limitation the quality or speed of the available network connections available battery power historical information on the quality of network connections connection security level and other factors. Such rules may be defined in whole or in part by rules built into a non volatile memory of wireless communications module rules defined by a user system administrator or other person associated with host rules defined by driver software of wireless communications module and by other rule sources as well.

Step includes checking whether or not an auto connect feature is enabled. If auto connect is enabled in step wireless communications module automatically associates wireless device with the selected network before sending a message to host in step . On the other hand if auto connect is not enabled in step wireless communications module sends a message to host . Host may then decide whether to associate with the selected network or not.

In various embodiments of method and consistent with the description already provided above in conjunction with methods and wireless communications module may be configured to initiate power management operations at any of several points during the implementation of method . This is graphically illustrated in by the use of dotted line connectors between various steps of method and step . 

For example at either step or step both entailing network discovery determination if a network is not found or if a network connection is not active a decision may be made to power down or reduce power to certain elements of host or wireless communications module . Similarly if at either step or step a network is found or a dormant network connection becomes active a decision may be made to restore power or increase power to certain elements of host or wireless communications module . Decision factors may include for example and without limitation the amount of time that has elapsed without finding a preferred network the number of repetitions of the network search process whether available packets in the network environment are data packets or management packets a received power level such as a received signal strength indication or RSSI of an available network and other factors as well. Similarly power management operations may be associated with or triggered by step which entails initiating an association between wireless device and a network .

While power management operations are illustrated as being possibly associated with steps and or of method in some embodiments power management operations may not be associated with these steps or with only one or two of these steps or may be associated with other steps in the alternative or in addition to steps and or .

Certain steps of exemplary method are the same or similar to steps of exemplary method described above. They are repeated here to provide context. However some details which are described above in conjunction with exemplary method and which remain applicable to method have nonetheless been omitted for brevity.

Exemplary method starts at step . Method continues with step where a search task is received by wireless communications module from host . The search task may include several task elements including for example and without limitation 

The search task may include other elements as well as described above in conjunction with exemplary method of .

Step includes determining whether the end of the list of preferred networks has been reached. If the end of the list has not been reached step includes continuing the directed scan for a given network identifier from the list of preferred networks.

At the end of the directed scan in step step includes checking whether or not a network has been found. If no network has been found method returns to step . Otherwise if a network has been found method proceeds to step which includes sending a message to host to notify host of the discovered network before returning to step .

Step may also include adding the found network to a list of found networks maintained in memory of wireless communications module . In this way once the search is completed wireless communications module will have a list of all preferred networks found during the search.

Returning to step if in step the end of the list of preferred networks has been reached method proceeds to step .

Step includes checking whether or not a network has been found after having processed the entire list of preferred networks. If no network has been found method proceeds to step which includes setting a timer to schedule a future network scan. This is discussed further below in conjunction with . 

However if at step one or more networks have been found method proceeds to step . Step includes determining whether or not auto switching is enabled.

If in step auto switching is enabled wireless communications module may automatically terminate the present network association if any and establish a new network association without further intervention from host . Method may therefore proceed to step which includes re assessing the network association based on the switching criteria.

Step includes selecting a network to associate with from the one or more discovered networks based on switching criteria. The switching criteria may include the priority criteria received in the search task in step and pre defined rules to control the switching of the system between networks . Additional aspects of the switching criteria were discussed above in relation to method in conjunction with .

Subsequent to step step may include starting an association between wireless device and a preferred discovered network where the association is established by wireless communications module . In step wireless communications module automatically associates wireless device with the selected network before sending a message to host in step . Step may be followed by step discussed further below.

Returning to step it is possible that in step when the network association is re evaluated it is found that the current association is also the preferred association. In this case the current network association will be maintained at step . A message may still be sent at step to host to signal maintenance of the present association. In an alternative embodiment a message is not sent.

Returning to step if auto switching is not enabled method proceeds to step which includes determining whether or not wireless system is currently associated with a network. If wireless system is associated with a network method continues directly with step a reporting only step discussed further below. Since auto switching is not enabled wireless communications module may not autonomously terminate a current network connection or establish a new network connection.

If in step wireless system is not associated with a network method proceeds to step which includes selecting a preferred network to associate with from the one or more discovered networks based on switching criteria. The details of the switching criteria and associated rules have already been discussed above and the discussion will not be repeated here.

Subsequent to step step includes determining whether or not auto connect is enabled. If auto connect is enabled method proceeds to step . In step wireless communications module automatically associates wireless device with the selected preferred network before sending a message to host in step .

On the other hand if in step auto connect is not enabled in step wireless communications module sends a message to host . Host may then decide whether to associate with the selected network or not. Step may be followed by step .

In step wireless communications module may collect results of network monitoring which may include both monitoring for preferred networks and additional network monitoring and report the results in an event message or event messages to host .

In various embodiments of method and consistent with the description already provided above in conjunction with methods and wireless communications module may be configured to initiate power management operations at any of several points during the implementation of method . This is graphically illustrated in by the use of dotted line connectors between various steps of method and step . 

For example at either step or step both entailing network discovery determination if a network is not found or if a network connection is not active a decision may be made to power down or reduce power to certain elements of host or wireless communications module . Similarly if at either step or step a network is found or a dormant network connection becomes active a decision may be made to restore power or increase power to certain elements of host or wireless communications module . Decision factors may include for example and without limitation the amount of time that has elapsed without finding a preferred network the number of repetitions of the network search process whether available packets in the network environment are data packets or management packets a received power level such as a received signal strength indication or RSSI of an available network and other factors as well. Similarly power management operations may be associated with or triggered by step which entails initiating an association between wireless device and a network .

While power management operations are illustrated as being possibly associated with steps and or of method in some embodiments power management operations may not be associated with these steps or with only one or two of these steps or may be associated with other steps in the alternative or in addition to steps and or .

Persons skilled in the relevant arts will recognize that the steps described in methods and are exemplary. In some embodiments additional steps or alternative steps may be employed to implement the present system and method of network connection management network background scanning and associated power management. In addition some steps may be performed in a different order or omitted altogether without departing from the spirit and scope of the present invention.

According to further embodiments of the present invention the management application at wireless communications module enables an adaptive scanning algorithm which may enables wireless system to conserve energy. In a scanning algorithm embodiment illustrated in adaptive scanning algorithm includes performing directed network scans according to adaptively variable frequencies. The term frequency as used in the present context refers to a frequency in time of performing a step or action pertaining to network scanning and not frequency as a measure of repetitions of cycles of a radio wave . 

For example as shown in network scanning may begin by performing a directed network scan which may entail sending out a probe and scanning for a network response . If no network response is received the probe scan activity may be repeated after a time interval T has elapsed from the first probe scan . If no response is received this sequence may be repeated multiple times each with a time interval T between the start of probe scan events.

In an embodiment a directed network scan may include scanning through the entire preferred network list once. In an alternative embodiment a directed network scan may entail scanning through the entire preferred network list two times or a specified number of times. Assuming no network response is received this sequence with time intervals T between probe scan events may be repeated over a total time interval spanning a time duration X . in order to perform one or more directed network scans.

If no probe response is received at the end of time duration X the scan frequency for directed scan is decreased such that a directed scan or directed scans are performed according to a scanning interval T where T is larger than T. As a result directed scan or directed scans . may require a total time duration Y where Y is longer than X. Because the probe scan events are less frequent less power is consumed per unit time which may result in a more extended battery life.

Similarly if no probe response is received at the end of time duration Y a larger scanning interval T is used for a subsequent time duration where T is greater than T. As a result directed scan or directed scans . may require a total time duration Z where Z is longer than Y. Because the probe scan events are again less frequent than before less power is consumed per unit time which may result in a more extended battery life.

In an further embodiment wireless communications module can enter a minimum power consumption MPC mode at the end of time duration Z for example. An MPC mode may entail for example shutting down all wireless communications probes and scanning for some extended period of time. An MPC mode may entail reducing power consumption on wireless communications module on the host device as controlled in whole or in part by wireless communications module or both.

In an embodiment an MPC mode may entail automatically waking the system at infrequent intervals for an additional round of network probing scanning.

Further features and advantages according to embodiments of the present invention will now be described.

Embodiments of the present invention include a method to configure network settings within wireless communications module . For example this includes configuring a number of preferred network settings. In an embodiment preferred network settings include full support for several security types including for example Open WEP WPA and WPA2 encryption.

Further configuration of preferred network settings can be performed using configurable parameters where network specifications may contain meta specifications to cover more than one particular network. These preferred network settings may be delegated to wireless communications module for example at step of exemplary method see above and received by wireless communications module for example at steps of exemplary method or at step of exemplary methods and see and respectively .

Configuration may further include selecting between an auto connect and a manual mode. In the manual mode upon network discovery the wireless communications module communicates events to host which decides based on the events whether to associate with a network or not. In the auto connect mode wireless communications module automatically associates with a preferred network upon discovery. In addition the auto connect mode may provide the ability to dynamically control behavior after connecting to an existing network.

As already discussed above in conjunction with method configuration features include the ability to set a network scan frequency by wireless communications module . This includes providing configurable timing values to control the network scan frequency by the wireless communications module . In an embodiment the timing values are adaptively configurable based on at least one of load on dongle CPU of wireless communications module probe responses received and beacons received.

As already noted above for example in conjunction with method embodiments of the present invention further provide a mechanism that allows background network scanning by wireless communications module even when the system is associated with a network. The mechanism can be configured to stop or continue scanning after network association. Embodiments further provide the ability to perform active scans sending out probes and passive scans only listening for data packets and or management packets .

Another feature according to embodiments of the present invention includes automatic network switching by wireless communications module based on configurable parameters including for example signal strength. Embodiments of the present invention further provide an event filtering mechanism which determines what events are reported to host module from the wireless communications module . This allows greater control of how much and when a host module needs to intervene resulting in reduced host software complexity reduced host memory space and CPU requirements and reduced bus traffic all resulting in reduced power consumption of the overall system. In an embodiment event reporting to host module is independent of whether or not the wireless device is associated with a network .

In the following an exemplary communication interface between host module and wireless communications module is described. The communication interface includes a host dongle Application Programming Interface API . Example function calls and events used by the host module and the dongle module are described below.

Set Preferred Scanlist This is a function which may be used by host module to set the preferred network scan list and other global parameters at wireless communications module . The function allows host to control the behavior of management application at wireless communications module . Global data members of the function include 

No Network Found This is an event sent from the management application to host to indicate its inability to find any of the networks in the preferred network list.

No Data This is an event sent from the management application to the host to indicate that it has not received data from the radio card for a specified time period the time period is specified by the host .

Network Found This is an event sent from the management application to the host to indicate the availability of a network from the preferred network list.

Network Lost This is an event sent from the management application to the host to indicate the disappearing of a network from the preferred network list.

According to embodiments of the present invention several power management functions can be implemented based on the above described functions and events. For example when the host receives a no network found or a no data available event from the wireless communications module host can instruct the wireless communications module through out of band GPIO to shut down its bus device e.g. USB SDIO Device in . The host can further shut down its own bus controller. Subsequently when any of the bus devices host bus controller or wireless communications module bus device wants to communicate over the bus it uses the out of band GPIO to indicate this desire to communicate to the other side and to wake up the bus.

As will be appreciated by persons skilled in the relevant art s the system s and method s described here represent only one possible embodiment of the present invention. Many of the elements described herein could in alternative embodiments of the present invention be configured differently within the scope and spirit of the present invention. In addition additional elements or a different organization of the various elements could still implement the overall effect and intent of the present system and method. Therefore the scope of the present invention is not limited by the above disclosure and detailed embodiments described therein but rather is determined by the scope of the appended claims.

