---

title: Methods and apparatus to dynamically control access from virtual private networks to network-based shared resources
abstract: Methods and apparatus to dynamically control access from VPNs to shared resources are disclosed. A disclosed example route reflector comprises a memory to implement a database, a user interface module to receive a request to permit access for a VPN to a shared resource, a BGP engine to process BGP advertisements, a network interface to receive a first BGP advertisement from a PE router associated with the VPN that includes a first RT associated with the VPN, and a shared resource access controller to update the database based on the request, to query the database to determine whether the VPN has access to the shared resource in response to the first BGP advertisement, and to direct the BGP engine to form a second BGP advertisement based on the first BGP advertisement that includes a second RT associated with the shared resource when the VPN has access to the shared resource.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08549616&OS=08549616&RS=08549616
owner: AT&T Intellectual Property I, L.P.
number: 08549616
owner_city: Atlanta
owner_country: US
publication_date: 20081031
---
This disclosure relates generally to virtual private networks VPNs and more particularly to methods and apparatus to dynamically control access from VPNs to network based shared resources.

Enterprise customers are increasingly adopting multiprotocol label switching MPLS based VPN services to implement a communication network among their respective customer sites via a service provider s network. Such MPLS based VPNs provide direct any to any reachability among an enterprise s customer sites.

Example methods and apparatus to dynamically control access from virtual private networks VPNs to network based shared resources are disclosed. A disclosed example route reflector includes a memory to implement a shared resource access control database a user interface module to receive a request to permit access for a VPN to a network based shared resource a multi protocol border gateway protocol BGP engine to process BGP advertisements a network interface to receive a first BGP advertisement from a provider edge PE router associated with the VPN the first BGP advertisement including a first route target RT associated with the VPN and a shared resource access controller to update the shared resource access control database based on the request to query the database to determine whether the VPN has access to the network based shared resource in response to the first BGP advertisement and to direct the multi protocol BGP engine to form a second BGP advertisement based on the first BGP advertisement when the VPN has access to the network based shared resource the second BGP advertisement including a second RT associated with the network based shared resource.

A disclosed example method includes receiving a first BGP advertisement from a network based shared resource the first BGP advertisement including a first RT associated with the network based shared resource automatically querying a shared resource access control database to determine whether a VPN has access to the network based shared resource in response to the first BGP advertisement forming a second BGP advertisement based on the first BGP advertisement when the VPN has access to the network based shared resource the second BGP advertisement including a second RT associated with the VPN and broadcasting the second BGP advertisement.

In the interest of brevity and clarity throughout the following disclosure references will be made to an example communication system of . However the methods and apparatus described herein to dynamically control access from VPNs to network based shared resources are applicable to other types of networks constructed using other network technologies topologies and or protocols.

To route and or transport data between and or among the example CE routers the example MPLS based service provider network of includes a plurality of PE routers four of which are designated at reference numerals and . The example PE routers of are communicatively coupled to each other via any number and or type s of communication paths not shown that allow any particular PE router to communicate with at least some but not necessarily all of the other PE routers .

For each VPN implemented by the MPLS based service provider network each of the example PE routers of has a corresponding VPN routing and forwarding VRF table. For instance for the VPN A the PE routers have a VRF A and for the VPN B the PE routers have a VRF B. The VRF tables A and B are used by the PE routers to route and or forward a packet received at a particular PE router to and or toward its final destination. In general when a packet is received at a PE router from a CE router associated with a particular VPN the PE router uses the final destination specified and or identified in the packet to perform a query of the VRF table associated with that VPN. Based on a result of the query the PE router determines how the packet is to be routed or forwarded within the service provider network and or delivered to a particular CE router .

By sending for example BGP route advertisements each of the example PE routers of publishes and or exports information concerning the CE router s that are communicatively coupled to the PE router . Isolation between different VPNs is achieved via RTs and import policies. Specifically all routes of a particular VPN are tagged with an RT parameter and or value associated with the VPN. For example when the example PE router sends a BGP advertisement containing information regarding the CE router associated with VPN A that is communicatively coupled to the PE router the BGP advertisement includes the RT A that is associated with VPN A. Based on received BGP route advertisements the example PE routers of build compile update maintain and or construct a VRF table for each VPN. Specifically when the example PE routers receive BGP advertisements tagged with an RT associated with a particular VPN they import those routes only into the VRF table associated with that VPN as dictated by VPN s import policy.

To facilitate sharing of routing information among the example PE routers the example service provider network of includes any number of route reflectors route servers intelligent route reflectors and or intelligent route service control points one of which is designated at reference numeral . Because not all of the example PE routers are necessarily communicatively coupled in a full mesh topology for example when at least one PE router does not have a direct communication path to another PE router the example route reflector of forwards BGP advertisements among and or to the PE routers . By forwarding each received BGP advertisement the example route reflector enables each of the PE routers to build compile and or construct a VRF table for each VPN that can be used by the PE router to route data from any CE router of a particular VPN to any other CE router of the VPN even if such routing of data requires use of one or more intervening PE routers .

To dynamically control access from neither either or both of the example VPNs A and B to network based shared resources four of which are designated at reference numerals and the example route reflector of forms a copy of a BGP advertisement that it receives modifies the copy of the received BGP advertisement and sends and or broadcasts the modified BGP advertisement. The example route reflector also forwards the received BGP advertisement without modification. For example when devices of the example VPN B are to have access to the example shared device and the example route reflector of receives a BGP advertisement that includes the RT B the example route reflector broadcasts a version of the BGP advertisement that includes an RT C associated with the shared device . Likewise when the example route reflector receives a BGP advertisement that includes the RT C the example route reflector broadcasts a version of the BGP advertisement that includes the RT B associated with the VPN. When a particular VPN is not to have access to a network based shared resource the route reflector forwards the originally received BGP advertisements and without making modifying and or sending a copy of the received BGP advertisements and or .

To determine whether devices of a particular VPN are to have access to any of the network based shared resources the example route reflector queries a shared resource control access database . An example manner of implementing the example route reflector of is described below in connection with . As described below in connection with a user can configure when and to which network based shared resources devices of a particular VPN have access.

Example network based shared resources include but are not limited to a network based firewall an Internet gateway a cloud computing server an application server and or distributed computing server. In the illustrated example of a pair of network based application accelerators and facilitate application acceleration via an acceleration tunnel . In the illustrated example of a shared network address translation NAT server facilitates the creation of an extranet between two different VPNs. In the illustrated examples of the shared resources are not associated with and or do not belong to either of the VPNs A and B. As such the example router reflector controls access from a particular VPN A B to shared resources that are logically outside of that VPN A B.

In the illustrated example of the example route reflector creates modifies and sends two copies of the BGP advertisement . A first copy is modified to include the RT C associated with the first application accelerator . A second copy is modified to include an RT F associated with the second application server . While not illustrated in a BGP advertisement received from the second application server would be copied modified to include the RT B and broadcast. Similarly BGP advertisements received from either of application servers and would be copied modified to include the other application server s RT and broadcast thereby allowing the application servers and to communicate. In the example of the application servers and establish the example application acceleration tunnel through the MPLS based service provider network . The example application acceleration tunnel of is used to accelerate applications between the example CE routers and .

In the illustrated example of both of the example VPNs A and B have access to the example NAT server . The example NAT server of is associated with two different RTs C and D that allow the two VPNs A and B to have separate access to the NAT server at the PE router without the two VPNs becoming communicatively coupled at and or by any of the other PE routers . That is the example route reflector associates the example VPN A with the NAT server via a first RT D of the NAT server and the example VPN B with the NAT server via a second RT C of the NAT server as shown in . Via the example NAT server devices of the VPNs A and B are able to communicate. For example data packets transmitted via the example CE router that are destined for a device communicatively couple to the example CE router are routed to the NAT server where appropriate address translation occurs and then the modified packets are forwarded by the NAT server to the CE router for delivery to the destination device.

While example communication systems have been illustrated in one or more of the interfaces data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example PE routers and or the example route reflector of may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Thus for example any of the example PE routers and or the example route reflector may be implemented by one or more circuit s programmable processor s application specific integrated circuit s ASIC s programmable logic device s PLD s and or field programmable logic device s FPLD s etc. Further still a communication system may include interfaces data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated interfaces data structures elements processes and or devices.

To send receive and process BGP route advertisements the example route reflector of includes a multi protocol BGP engine . When a BGP route advertisement is received from a PE router via the example network interface the example multi protocol BGP engine of forwards the received BGP route advertisement to the other PE routers . The example multi protocol BGP engine also queries a shared resource access controller to determine whether one or more modified copies of the received BGP router advertisement are to be broadcast.

To control the access from VPNs to network based shared resources the example route reflector of includes the example shared resource access controller . When queried by the example multi protocol BGP engine the example shared resource access controller of queries the example shared resource access control database to determine whether BGP advertisements associated with a first RT are to be re broadcast with a second RT. When such access to network based shared resources is enabled for a particular RT the example shared resource access controller returns to the multi protocol BGP engine the one or more additional RTs with which the received BGP route advertisement is to be broadcast.

In response to the one or more additional RTs the example multi protocol BGP engine of creates corresponding copies of the received BGP advertisement modifies the associated RT to correspond with a respective one of the one or more additional RTs and broadcasts the modified copy ies of the received BGP advertisement.

Access control information may be stored in the example shared resource access control database using any number and or type s of data structures. An example data structure that may be used to implement the example shared resource control access database of is described below in connection with . The example shared resource control access database may be stored using any number and or type s of memory ies memory device s and or storage device s .

To allow a user to configure access to network based shared resources for a VPN the example route reflector of includes any number and or type s of user interface modules one of which is designated at reference numeral . The example user of may be associated with a particular VPN be associated with an operator of the MPLS based service provider network and or be associated with a particular network based shared resource. The example user interface module of enables the user to interact with the example shared resource access controller to update the database to configure access to network based shared resources for a VPN. In some examples access to shared resources can be configured for a particular period of time. For instance an extranet between two VPNs can be temporarily configured for a particular length of time and then be automatically terminated by the example shared resource access controller . Example user interface modules include but are not limited to a web based interface a voice activated response system and or an application programming interface accessible to another computer system.

While an example route reflector has been illustrated in one or more of the interfaces data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example shared resource access control database the example network interface the example multi protocol BGP engine the example shared resource access controller the example user interface module and or more generally the example route reflector of may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Thus for example any or the example shared resource access control database the example network interface the example multi protocol BGP engine the example shared resource access controller the example user interface module and or more generally the example route reflector may be implemented by one or more circuit s programmable processor s ASIC s PLD s and or FPLD s etc. Further still a route reflector may include interfaces data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated interfaces data structures elements processes and or devices.

To identify the RT associated with another VPN to which the VPN associated with the source RT is to be coupled each of the example entries of includes a destination RT field . The example destination RT field of contains one or more values and or strings that uniquely identify one or more RTs.

When a BGP advertisement is received the example database of can be queried to determine whether any of the source RT fields contains the RT associated with the received BGP advertisement. If an entry is thus located the example shared resource access controller returns the one or more RTs listed in the destination RT field associated with the identified entry to the multi protocol BGP engine .

To store an expiration date and or time for configured access from a VPN to a shared resource each of the example entries of includes an expiration field . The example expiration field of includes one or more values and or strings that identify when the corresponding entry is no longer valid.

While an example data structure that may be used to implement the example shared resource access control database of is illustrated in the example data structure of may be implemented using any number and or type s of other and or additional entries fields and or data. Further the entries fields and or data illustrated in may be combined divided re arranged eliminated and or implemented in any way. Further still the example data structures may include entries fields and or data in addition to or instead of those illustrated in and or may include more than one of any or all of the illustrated entries fields and or data. Moreover the example data structure of may be queried using any additional and or alternative methods.

The example process of begins with the example user interface module of determining whether updated shared resource control information has been received block . If updated shared resource control information has been received block the example shared resource access controller makes corresponding updates the example shared resource access control database block . Control then returns to block .

If updated shared resource control information was not received block the example multi protocol BGP engine of determines whether a BGP advertisement was received via the example network interface block . If a BGP advertisement was not received block control returns to block .

If a BGP advertisement was received block the multi protocol BGP engine broadcasts the received BGP advertisement block . The multi protocol BGP engine queries the shared resource access controller to determine whether modified copies of the received BGP advertisement are to be broadcast block . If the shared resource access controller determines that no modified copies of the received BGP advertisement are to be broadcast block control returns to block .

If based on a query of the example shared resource access control database the shared resource access controller returns one or more RTs block the multi protocol BGP engine creates one or more corresponding copies of the received BGP advertisement block modifies the RT of the copy ies with respective ones of the returned RT s block and broadcasts the modified BGP advertisement s block . Control then returns to block .

The processor platform P of the example of includes at least one general purpose programmable processor P. The processor P executes coded instructions P and or P present in main memory of the processor P e.g. within a RAM P and or a ROM P . The processor P may be any type of processing unit such as a processor core a processor and or a microcontroller. The processor P may execute among other things the example process of to implement the example methods and apparatus described herein.

The processor P is in communication with the main memory including a ROM P and or the RAM P via a bus P. The RAM P may be implemented by DRAM SDRAM and or any other type of RAM device and ROM may be implemented by flash memory and or any other desired type of memory device. Access to the memory P and the memory P may be controlled by a memory controller not shown . One or both of the example memories P and P may be used to implement the example shared resource access control database of .

The processor platform P also includes an interface circuit P. The interface circuit P may be implemented by any type of interface standard such as an external memory interface serial port general purpose input output etc. One or more input devices P and one or more output devices P are connected to the interface circuit P. The input devices P and or output devices P may be used to for example implement the network interface of .

Although certain example methods apparatus and articles of manufacture have been described herein the scope of coverage of this patent is not limited thereto. On the contrary this patent covers all methods apparatus and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents.

