---

title: Method, apparatus and system to automate detection of anomalies for storage and replication within a high availability disaster recovery environment
abstract: A method, apparatus and system for improving failover within a high-availability computer system are provided. The method includes obtaining one or more parameters associated with at least one resource of any of the first cluster, second cluster and high-availability computer system. The method also includes detecting, as a function of the parameters, one or more anomalies of any of the first cluster, second cluster and high-availability computer system, wherein the at least one anomaly is a type that impacts the failover. These anomalies may include anomalies within the first and/or second clusters (“intra-cluster anomalies”) and/or anomalies among the first and second clusters (“inter-cluster anomalies”). The method further includes generating an alert in response to detecting one or more of the anomalies.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08135981&OS=08135981&RS=08135981
owner: Symantec Corporation
number: 08135981
owner_city: Mountain View
owner_country: US
publication_date: 20080630
---
The following generally relates to disaster recovery for computing systems services and or data and more particularly to a method apparatus and system for improving failover within a high availability disaster recovery environment.

Uninterrupted continuity of business functions is vital to attain an edge in the competitive market of today s world. Various business groups such as data centers production factories stock exchanges financial or banking companies and other entities have a need for a certain absolute degree of operational continuity during their operations To meet such objective which is commonly referred to as business continuity the business groups generally rely high availability HA computing services to service needs of their employees customers general members of the public and or others collectively clients . These business groups typically employ use are provided with or otherwise take advantage of HA computing systems to provide such HA computing services and in turn provide seemingly uninterrupted availability of data data availability to the clients.

To facilitate providing the HA computing services and the seemingly uninterrupted data availability each of the HA computing systems employ a number of computing resources e.g. hardware resources and or software resources . These computing resources typically include computing resources for operating the HA computing services operating resources and computing resources redundant to the operating computing resources redundant resources along with protocols disaster recovery protocols for recovering from a failure.

The failure may include and or result from one or more man made and or natural disasters including for example human errors power failures damaged corrupt unavailable and or failed computing resources earthquakes floods etc. effecting one or more of the HA computing services operating on the operating resources. Generally the HA computing services failover to the redundant resources in accordance with the disaster recovery protocols in response to an occurrence of the failure.

As with other physical assets the HA computing systems periodically undergo alteration to accommodate for example additional and or alteration in the HA computing services or the computing resources underlying the HA computing services . The alteration of the HA computing systems typically include adding updating re configuring and or upgrading the computing resources Such alteration however may create anomalies that affect the ability of the HA computing systems to failover properly or worse yet failover at all i.e. an abortive failover and thereby fail to meet requirements of the business continuity.

A method apparatus and system for improving failover within a high availability computer system are provided. The method includes obtaining a plurality of parameters associated with at least one resource of any of the first cluster second cluster and high availability computer system detecting as a function of the plurality of parameters at least one anomaly of any of the first cluster second cluster and high availability computer system wherein the at least one anomaly is a type that impacts the failover and generating an alert in response to detecting the at least one anomaly.

The HA computing system may optionally include one or more additional primary and or secondary clusters shown collectively as other clusters . These other clusters may include architecture the same as or analogous to the architecture of the primary and or secondary clusters and or operate in the same or in a manner analogous to the primary and or secondary clusters . For simplicity of exposition the architecture and operation of the other clusters is assumed herein to be the same as the primary and or second clusters unless otherwise stated.

The primary cluster generally handles providing HA computing services during normal operation and the secondary cluster generally handles providing one or more of the HA computing services responsive to a failover from the primary cluster . To facilitate this the primary and secondary clusters may include a number of primary and secondary cluster resources primary cluster resources and secondary cluster resources respectively. Details of example architectures of primary cluster and secondary cluster resources which may be representative of respective architectures of the primary cluster and secondary cluster resources are described with reference to respectively.

The primary cluster resources may include may include a large number of elements most of which are not shown for simplicity of exposition. As shown the primary cluster resources include primary cluster processing resources and primary cluster storage resources that are communicatively coupled via a communication link intra cluster link . The intra cluster link may be formed in accordance with one or more protocols of wired wireless satellite and or optical communications including for example Ethernet and synchronous optical networking SONET protocols.

The primary cluster processing resources may include a number of clustered and or virtualized processing platforms which may each include attendant data storage not shown for carrying out the HA computing services during normal operation. The primary cluster storage resources may include a primary intra cluster data store that is accessible to and provisioned to storing information associated with the HA computing services carried out by one or more the processing platforms .

Analogous to the primary cluster resources the secondary cluster resources may include may include a large number of elements most of which are not shown for simplicity of exposition. As shown the second cluster resources include secondary cluster processing resources and secondary cluster storage resources that are communicatively coupled via another communication link intra cluster link . The intra cluster link may be formed in accordance with one or more protocols of wired wireless satellite and or optical communications including for example Ethernet and SONET protocols.

The secondary cluster processing resources may include a number of clustered and or virtualized processing platforms which may each include attendant data storage not shown for carrying out one or more of the HA computing services after the failover. The secondary cluster storage resources may include a secondary intra cluster data store that is accessible to and provisioned to storing information associated with the HA computing services carried out by one or more the processing platforms .

The network may provide one or more communication paths among any of any combination of any multiple of any combination of multiples of etc. collectively any of the primary cluster secondary cluster and other clusters . The network may be a partial or full deployment of most any communication or computer network including any of a public or private terrestrial wireless or satellite or wireline network. As such the network may include network elements from a Public Switch Telephone Network PSTN the Internet core and proprietary public networks wireless voice and packet data networks such as 1 G 2 G 2.5 G 3 G and or 4 G telecommunication networks wireless office telephone systems WOTS and or wireless local area networks WLANs including Bluetooth and or IEEE 802.11 WLANs wireless personal area networks WPANs wireless metropolitan area networks WMANs and the like.

The network elements may include circuit switched as well as packet data elements to provide transport of information any of the primary cluster secondary cluster and other clusters . The network elements may be configured to communicate such information using any number of protocols and in any manner consistent with exchanging e.g. sending and or receiving such information among any of the first cluster second cluster and other clusters . These protocols may include standardized proprietary open source and freely available communication protocols for communicating content in circuit switching and or packet data networks and the like.

During operation the primary cluster resources may exchange with the secondary cluster one or more states of the primary cluster resources including one or more states of any of the primary cluster processing resources and or the primary cluster storage resources . The secondary cluster may use these states inter cluster states to replicate the primary cluster resources at the secondary cluster resources .

The primary cluster processing resources may exchange with the primary cluster storage resources one or more states of primary cluster resources including for example one or more states of the attendant data storage of each of the processing resources . These states intra cluster states may be used to replicate such resources within the primary cluster . Analogously the second cluster processing resources may exchange with the secondary cluster storage resources intra cluster states of the secondary cluster resources including for example one or more states of the attendant data storage of each of the processing resources .

To facilitate this the primary cluster may maintain one or more parameters associated with primary cluster resources cluster parameters . The primary cluster may also obtain and or maintain one or more parameters associated with any of the second cluster resources resources associated with the other clusters and or the HA computing system system parameters .

Analogously the secondary cluster may maintain cluster parameters associated with the secondary cluster resources . The secondary cluster may also obtain and or maintain system parameters associated with any of the first cluster resources resources associated with the other clusters and or the HA computing system .

As described in more detail below the primary cluster or secondary cluster may function to obtain the cluster and or system parameters analyzing such parameters to determine dependencies among them detect one or more anomalies that affect the failover including those i within the primary cluster intra cluster anomalies and or ii among the primary and secondary or other clusters respectively inter cluster anomalies and generate an alert responsive to the anomalies. By performing the foregoing functions corrective action may be taken to resolve the anomalies to improve failover upon an occurrence of a failure. Beneficially the foregoing functions may allow the HA computing system to satisfy fairly stringent requirements for business continuity.

The primary cluster resources may include the primary cluster processing resources and the primary cluster storage resources which are communicatively coupled via the intra cluster link . As above the primary cluster processing resources may include the processing platforms and the primary cluster storage resources may include the primary intra cluster data store .

The primary cluster data store may include a number of storage devices and a controller . The storage devices and a controller may be arranged as be configured to and or otherwise operate as any of a redundant array of independent disks RAID a storage area network SAN array and the like.

Each of the processing platforms may include architecture the same as or analogous to the architecture of the processing platform and or operate in the same or in a manner analogous to the processing platform . For simplicity of exposition only the architecture and operation of the processing platform is described below.

The processing platform include a server and attendant data storage that communicatively couple via respective a communication link local communication link . The local communication link may be formed in accordance with one or more protocols of wired wireless satellite and or optical communications including for example Ethernet and SONET protocols.

The attendant data storage may be or employ any of random access memory read only memory optical storage magnetic storage removable storage erasable programmable read only memory and variations thereof content addressable memory and variations thereof flash memory disk drive storage removable storage and the like. The attendant data storage may be positioned remotely from the server and act as a network data store via the local communication link . The attendant data storage generally operates as a data store for the server and is generally dedicated to handle storage requirements for only the server .

The attendant data storage may also handle storage requirements for servers of the other processing platforms when the processing platforms form the virtual processing platform. As described in more detail below the server may use the attendant data storage to facilitate performing its functions.

The server may be deployed in one or more general or specialty purpose computers personal computers mainframes minicomputers server type computers and or any processor based platform that operates on any suitable operating system such as Microsoft Windows UNIX Linux and or Symbian and that is capable of executing software.

The server may include a large number of elements many of which are not shown in for simplicity of exposition. The elements of server may be formed in a single unitary device and concentrated on a single server client peer or other type node. Alternatively the elements of the server may be formed from two or more separate devices and as such may be distributed among a number of server client peer or other type nodes.

The server may be deployed in accordance with the scale up and or scale out approaches. Using the scale up approach the server may have its processing power amount of memory and number of networkable connections increased by utilizing a symmetrical multi processor architecture so as to provide additional capacity. A benefit of this scale up approach is that such approach provides for simplified configuration and management as compared to the scale out approach.

Using the scale out approach the server may have its processing power amount of memory and number of networkable connections increased by incrementally adding and or removing capacity as needed balancing workload across multiple processors multiple servers dedicating specific processors and or servers for performing specific tasks using physical or logical servers e.g. a multi node cluster approach etc. In addition the server may be configurable to communicate with servers of the other processing platforms via the intra cluster link so as to form be arranged or otherwise be combined to form a clustering or virtual processing platform environment within the HA computing system .

As shown the server may include one or more processing units collectively processor memory supports circuits input output I O interface and bus . The processor may be one or more conventional processors microprocessors multi core processors microcontrollers and the like.

The bus provides for transmissions of digital information among the processor memory support circuits I O interface and other portions of the server not shown . The support circuits facilitate operation of the processor and may include well known circuitry or circuits including for example one or more I O interfaces one or more network interface units NIUs cache clock circuits power supplies and the like.

The I O interface provides an interface to control the transmissions of digital information between components of processing platform shown and not shown and between the processing platform and the other portions of the HA computing system . To facilitate this the I O interface may include i a NIU for facilitating exchange e.g. sending and or receiving of information including the intra cluster states and cluster parameters with the attendant storage via the local communication link ii a NIU for facilitating exchange of information including the intra cluster states and cluster parameters with the other portions of the cluster resources via the intra cluster link and or iii a NIU for facilitating exchange of information including the inter cluster states cluster parameters and server parameters with the secondary and or other clusters via the network . Accordingly the NIUs may be adapted for communicating in accordance with one or more protocols of wired wireless satellite and or optical communications including for example Ethernet and SONET protocols

In addition the I O interface provides an interface to control the transmissions of digital information between I O devices not shown associated with or otherwise attached to the server . The I O devices not shown may be embodied as any of i storage devices including but not limited to a tape drive a floppy drive a hard disk drive or a compact disk drive ii a receiver ii a transmitter iii a speaker iv a display v a speech synthesizer vi an output port and vii a pointing device such as a mouse joystick trackball touchpad pointing stick light pen head pointer soap mouse eye tracking devices digitizing tablet and stylus data glove that translates the user s movements to computer gestures and a key in device such as a keyboard or a touchpad vii and the like.

The memory may be or employ any of random access memory read only memory optical storage magnetic storage removable storage erasable programmable read only memory and variations thereof content addressable memory and variations thereof flash memory disk drive storage removable storage and the like. The memory may be generally positioned within and or resident to the server . The memory may also be extended e.g. by way of the operating system to include the attendant data storage . For simplify of exposition the memory and the attendant data storage operate in conjunction and as such are collectively referred to herein after as memory unless otherwise stated.

The memory may store and may be queries by the processor to obtain various software packages to be executed locally on the server . These software packages may include an operating system one or more software applications for clustering the processing platforms cluster applications and one or more software applications for carrying out the HA computing services HA service applications .

The cluster applications may be executed by the processor and processors of the other processing platforms to cause clustering of and or formation of a virtual processing platform from the processing platforms for executing any some or all of the HA service applications . In addition the cluster applications may include an inter cluster replication application and an intra cluster replication application.

The inter cluster replication application may be executed by the processor to obtain one or more of the inter cluster states and to exchange with or cause replication of such inter cluster states on the secondary cluster . The intra cluster replication application may be executed by the processor to obtain one or more states of the intra cluster states and to exchange with or cause replication of such intra cluster states on the primary intra cluster data store . The cluster applications may include for example VERITAS Clustering Software VCS with its global clustering option GCO VERITAS Volume Replicator VVR Symmetrix Remote Data Facility SRDF Hitachi True Copy HTC and the like.

The software applications may also include an anomaly detection application and optionally dependency map and alert generators . The memory may further store operands operators dimensional values configurations parameters and other data collectively information that may be used by any of the operating system cluster applications HA service applications anomaly detection application dependency map generator and alert generator to control the operation of and or facilitate performing the functions of the server and in turn the cluster resources and the HA computing system .

The information may include any of the inter cluster states and the intra cluster states not shown . The information may also include one or more records associated with the primary cluster resources resources records one or more records associated with parameter definitions parameter definition records and one or more records associated with a dependency map dependency map .

The resources records may include information denoting the computing resources of any of the primary cluster secondary cluster other clusters and or the HA computing system in whole or in part. As described in more detail below with respect to the resources records may include information denoting the computing resources or or allocated to consumed by or otherwise associated with one of the HA service applications including any of an application resource file system and or volume resource a disk group resource a replication resource and a virtualization resource.

The parameter definition records may include definitions for a respective number of parameters associated with resources of the computing resources of any of the primary cluster secondary cluster other clusters and or the HA computing system in whole or in part. These definitions may include definitions for system parameters the primary cluster parameters which in turn may include definitions for the server server parameters .

The server parameters may include one or more parameters associated with the computing resources or allocated to consumed by or otherwise associated with one of the HA service applications including parameters associated with the i application resource application resource parameters ii file system and or volume resource file system volume resource parameter iii disk group resource disk group resource parameter and iv replication resource replication resource parameter .

The dependency map may store and be configured to provide to the anomaly detection module one or more dependencies among the computing resources denoted in the resources records . The dependency map may include for example a dependency computed between the disk group resource and the primary cluster storage resources .

The dependencies stored in the dependency map may be obtained by detecting via one or more interfaces of the clustering applications . These interfaces may be for example a command line interface and or an application programming interface. Alternatively and or additionally the interfaces of clustering software may be used for detecting dependencies. As another alternative or addition interfaces of disk management software including for example interfaces of array level disks disk groups volumes file systems may be used for detecting the dependencies. The optional dependency map generator which may be change management software may be used to detect the dependencies and generate the dependency map using such dependencies.

The anomaly detection module may detect one or more anomalies associated with the server parameters cluster parameters and or system parameters. The anomaly detection module may for example detect the inter cluster anomalies e.g. by performing a comparison among system parameters associated with the primary cluster and the secondary cluster . The anomaly detection module may also detect the inter cluster anomalies by for example detecting a mismatch in the file system resource of the primary cluster and the replicated file system resource of the secondary cluster .

Alternatively and or additionally the anomaly detection module may detect one or more of the intra server anomalies associated with the server and or cluster parameters. The anomaly detection module may for example detect the intra cluster anomalies by detecting a mismatch between the disk group resource and the replication resource.

The alert generator module operates to generate an alert response to the anomaly detection module detecting any of the inter cluster and intra cluster anomalies.

With reference now to the secondary cluster resources may include architecture the same as or analogous to the architecture of the primary cluster resources and or operate in the same or in a manner analogous to the primary cluster resources except as described herein. The second cluster resources may include the secondary cluster processing resources and the secondary cluster storage resources which are communicatively coupled via the intra cluster link . As above the secondary cluster processing resources may include the processing platforms and the primary cluster storage resources may include the secondary intra cluster data store .

The secondary cluster data store may include a number of storage devices and a controller . The storage devices and a controller may be arranged as be configured to and or otherwise operate as any of a RAID a SAN array and the like.

Each of the processing platforms may include architecture the same as or analogous to the architecture of the processing platform and or operate in the same or in a manner analogous to the processing platform . For simplicity of exposition only the architecture and operation of the processing platform is described below.

The processing platform include a server and attendant data storage that communicatively couple via respective a local communication link . The local communication link may be formed in accordance with one or more protocols of wired wireless satellite and or optical communications including for example Ethernet and SONET protocols.

The attendant data storage may be or employ any of random access memory read only memory optical storage magnetic storage removable storage erasable programmable read only memory and variations thereof content addressable memory and variations thereof flash memory disk drive storage removable storage and the like. The attendant data storage may be positioned remotely from the server and act as a network data store via the local communication link . The attendant data storage generally operates as a data store for the server and is generally dedicated to handle storage requirements for only the server .

The attendant data storage may also handle storage requirements for servers of the other processing platforms when the processing platforms form the virtual processing platform. The server may use the attendant data storage to facilitate performing its functions.

The server has an architecture substantially the same of the architecture of the server of . As show the memory of the server includes resource records parameter definition records and dependency map .

The resources records may include information denoting the computing resources of any of the primary cluster secondary cluster other clusters and or the HA computing system in whole or in part. As described in more detail below with respect to the resources records may include information denoting the secondary computing resources or 112 allocated to consumed by or otherwise associated with one of the HA service applications including any of an application resource file system and or volume resource a disk group resource a replication resource and a virtualization resource.

The parameter definition records may include definitions for a respective number of parameters associated with resources of the computing resources of any of the primary cluster secondary cluster other clusters and or the HA computing system in whole or in part. These definitions may include definitions for system parameters the primary cluster parameters which in turn may include definitions for the server parameters of server .

The server parameters may include one or more parameters associated with the secondary computing resources or allocated to consumed by or otherwise associated with one of the HA service applications including any of the application resource file system volume resource disk group resource and replication resource parameters.

The dependency map may store and be configured to provide to the anomaly detection module one or more dependencies among the secondary computing resources or denoted in the resources records . The dependency map may include for example a dependency computed between the disk group resource and the secondary cluster storage resources .

The dependencies stored in the dependency map may be obtained by detecting via one or more interfaces of the clustering applications . These interfaces may be for example a command line interface and or an application programming interface. Alternatively and or additionally the interfaces of clustering software may be used for detecting dependencies. As another alternative or addition interfaces of disk management software including for example interfaces of array level disks disk groups volumes file systems may be used for detecting the dependencies. The optional dependency map generator which may be change management software may be used to detect the dependencies and generate the dependency map using such dependencies.

The primary cluster resources may include within the primary cluster processing resources an application resource a file system and or volume resource a disk group resource and a replication resource . The application resource may be one the HA services applications given HA service application which may be or embody any of financing software designing software e.g. Auto CAD weather forecasting software production monitoring software. The given HA service application may also be and or embody any of a DBMS based application and or a database application such as ORACLE SAP or DB2.

The application resource may be mounted on the file system and or volume resource which may be formed in accordance with one or more file system volume protocols including for example File Allocation Table FAT New Technology File System NTFS Virtual File System VFS Journaled File System JFS Virtual Machine File System VMFS and the like. The application resource may use mounting points e.g. mnt opt and or the like of the volume resource of the file system and or volume resource .

The primary cluster resources may use the disk group resource for its storage configuration of the memory . The disk group resource generally includes volume manager software such as Logical Volume Manager LVM VERITAS Volume Manager VVM and the like which may for example provide storage level virtualization. The disk group resource may configure multiple numbers of physical storage disks of the memory into one or more disk groups and each of the disk groups may have a common configuration. The disk group resource may also include a virtual machine disk resource . This virtual machine disk resource may configured for handling a virtual machine environment such as VMware ESX.

The replication resource may be and or employ a software module that manages replication of the intra cluster states within the primary cluster resources . The replication resource may for example select one or more of the disk groups of the disk group resource for replication of these disk groups in the primary intra cluster data store . The replication resource may for example use the one of the clustering applications such as VERITAS Volume Replicator WR for managing replication of the intra cluster states.

The primary cluster resources may include within its primary cluster storage resource a virtualization resource along with the primary intra cluster data store . The primary intra cluster data store may include one of more logical unit number LUN configured in the device and or one or more LUN group at an array level. The storage virtualization resources may be for example an EMC INVISTA or an IBM SAN volume controller to provide an efficient storage management within the primary cluster .

The secondary cluster resources may include architecture the same as or analogous to the architecture of the primary cluster resources and or operate in the same or in a manner analogous to the primary cluster resources . For simplicity of exposition the architecture and operation of the other clusters is assumed herein to be the same as the primary and or second clusters unless otherwise stated

The secondary cluster resources may include within its secondary cluster processing resources replicated versions of the application resource the file system and or volume resource disk group resource virtual machine disk resource and replication resource namely replicated application resource replicated file system and or volume resource replicated disk group resource replicated virtual machine disk resource and replicated replication resource These replicated version may perform functions similar to their counterpart elements in the primary cluster resources . The secondary cluster resources may also include within its secondary cluster storage resources replicated versions of the primary intra cluster data store and virtualization resource namely the secondary intra cluster data store and virtualization resource .

In a high availability computing system in order to recover the application on the same and or across site the storage resources of the given HA services application such as the file system or volume resource disk groups resource and or the like needs to be replicated. Mismatches in the configuration of resources within and or across the primary cluster and or secondary cluster resources may produce the inter cluster and or intra cluster anomalies respectively and thereby prevent the failover of the given HA services application on occurrence of the failure.

For example a mismatch of the disk group resource parameter such as logical unit number LUN between the processing platforms and the primary intra cluster data store may produce one of the intra cluster anomalies. Alternatively a mismatch between the disks and or the virtual machine disks in the disk group resource of the primary cluster resources and the corresponding LUNs in the primary intra cluster data store may produce one of the intra cluster anomalies.

As another alternative a mismatch between configuration of the one or more LUNs for the given HA services application in the primary intra cluster data store and the secondary intra cluster data store may produce one of the inter cluster anomalies. A mismatch of array level storage objects across the primary cluster and or secondary cluster resources may produce one of the inter cluster anomalies.

A mismatch of disk group resource such as LUN between the one or more processing platforms of the primary cluster resources and the secondary computer cluster site may produce one of the inter cluster anomalies. A mismatch of between or a different number of file systems and or file system mounts points across the primary cluster resources and the secondary cluster resources may produce the intra cluster anomaly.

The process contemplates detecting one or more of the intra cluster and inter cluster anomalies for storage and or file system objects of the given HA services application of the primary cluster and secondary cluster resources . The process may be used to detect other intra cluster and inter cluster anomalies as well. In addition the following assumes that the process is carried out in large part using the various software packages of the processing platform of the primary cluster resources including for example the anomaly detection application . The process may alternatively be carried out using the various software packages of any of i the processing platforms individually combined or in virtual form and ii the processing platforms of the secondary cluster resources individually combined or in virtual form .

The process starts at termination block after an occurrence of an event such as the processing platform executing e.g. launch generate run maintain etc. the anomaly detection application . The event may be other trigger or stimulus as well. After termination block the process may transition to process block .

At process block the anomaly detection application accesses the dependency map . The anomaly detection application may then analyze inspect and or interrogate the dependency map to obtain any of the system cluster and or server parameters associated with the storage objects including for example any of the storage objects for carrying out process . After obtaining these cluster parameters the process transitions to decision block .

At decision block the anomaly detection application detects whether an intra cluster anomaly exists among host level storage objects of the primary cluster resources and array level storage objects of the primary intra cluster data store . This may include for example the anomaly detection application detecting whether the intra cluster anomaly exists among the number of disks in the disk group resource and the LUNs of the primary intra cluster data store .

To facilitate determining whether the intra cluster anomaly exists the anomaly detection application may compare the cluster and or server parameters associated with the host level storage objects host level storage parameters with the cluster and or server parameters associated with the array level storage objects array level storage parameters to determine whether one or more of the host level storage and array level storage parameters differ. If such parameters differ then the anomaly detection application detects that the intra cluster anomaly exists otherwise the anomaly detection application does not detect that the intra cluster anomaly exists. The anomaly detection application may detect whether the intra cluster anomaly exists in other ways as well.

If the anomaly detection application does not detect that the intra cluster anomaly exists then the process may transition to decision block . If the anomaly detection application detects that the intra cluster anomaly exists then the process may transition to process block .

At process block a first anomaly flag is set. The process may then transition to decision block as described in more detail below or transition to decision block .

At decision block the anomaly detection application detects whether a first inter cluster anomaly exists among array level LUN group of the primary intra cluster data store and an array level LUN group of the secondary inter cluster data store . To facilitate determining whether the first inter cluster anomaly exists the anomaly detection application may compare the system cluster and or server parameters associated with the array level storage objects of the primary intra cluster data store with the system cluster and or server parameters associated with the array level storage objects of the secondary intra cluster data store to determine whether one or more of the such parameters differ. If these parameters differ then the anomaly detection application detects that the first inter cluster anomaly exists otherwise the anomaly detection application does not detect that the first inter cluster anomaly exists. The anomaly detection application may detect whether the first inter cluster anomaly exists in other ways as well.

If the anomaly detection application does not detect that the first inter cluster anomaly exists then the process may transition to decision block . If the anomaly detection application detects that the first inter cluster anomaly exists then the process may transition to process block .

At process block a second anomaly flag is set. The process may then transition to decision block as described in more detail below or transition to decision block .

At decision block the anomaly detection application detects whether a second inter cluster anomaly exists among host level storage objects of the primary cluster resources and the host level storage objects of the secondary cluster resources . This may include the anomaly detection application detecting whether the second inter cluster anomaly exists among the disk group resource and the replicated disk group resource .

To facilitate determining whether the second inter cluster anomaly exists the anomaly detection application may compare the system cluster and or server parameters associated with the host level storage objects of the primary cluster resources with the system cluster and or server parameters associated with the host level storage objects of the secondary cluster resources to determine whether one or more of the such parameters differ. If these parameters differ then the anomaly detection application detects that the second inter cluster anomaly exists otherwise the anomaly detection application does not detect that the second inter cluster anomaly exists. The anomaly detection application may detect whether the second inter cluster anomaly exists in other ways as well.

If the anomaly detection application does not detect that the second inter cluster anomaly exists then the process may transition to decision block . If the anomaly detection application detects that the second inter cluster anomaly exists then the process may transition to process block .

At process block a third anomaly flag is set. The process may then transition to decision block as described in more detail below or transition to decision block .

At process block the anomaly detection application detects whether a third inter cluster anomaly exists among a host level file system of the primary cluster resources and a host level file system of the secondary cluster resources . This may include the anomaly detection application detecting whether the third inter cluster anomaly exists among the file system and or the volume resource and the replicated file system and or volume resource .

To facilitate determining whether the third inter cluster anomaly exists the anomaly detection application may compare the system cluster and or server parameters associated with the host level file system objects of the primary cluster resources with the system cluster and or server parameters associated with the host level file system objects of the secondary cluster resources to determine whether one or more of the such parameters differ. If these parameters differ then the anomaly detection application detects that the third inter cluster anomaly exists otherwise the anomaly detection application does not detect that the third inter cluster anomaly exists. The anomaly detection application may detect whether the third inter cluster anomaly exists in other ways as well.

If the anomaly detection application does not detect that the third inter cluster anomaly exists then the process may transition to decision block . If the anomaly detection application detects that the third inter cluster anomaly exists then the process may transition to process block .

At decision block the anomaly detection application determines whether any of the first second and third anomaly flags are set. If determined affirmatively then the process may transition to termination block . If determined negatively then the process may transition to process block .

At process block an alert is generated e.g. by the alter generator of . The alert may in turn cause a report to be generated and reported to one or more users of the HA computing system including for example a system administrator. The report may include notations indicating which of the intra cluster and inter cluster anomalies cause the alert to be set. Alternatively and or additionally the alert and or report may be used to guide one or more of the users to take appropriate actions to alter the HA computing system to resolve the intra cluster and inter cluster anomalies causing the alter to be set. After process block the method may transition to termination block .

At termination block the process may end. Alternatively the process may be repeated periodically in continuous fashion or upon being triggered as a result of a condition or event.

The various embodiments described herein offer various advantages. The inventive method and apparatus may be embedded within the clustering software s for providing better protection against data loss on occurrence of various kinds of failures. Moreover the detection of anomalies within a high availability system achieves better data recovery protection and thereby assures the business continuity of an organization.

Those skilled in the art will appreciate that the present invention according to its various embodiments Variations of the method apparatus and system described above are possible without departing from the scope of the invention. In view of the wide variety of embodiments that can be applied it should be understood that the illustrated embodiments are exemplary only and should not be taken as limiting the scope of the following claims.

For example although not specifically stated above the network may be integral to or integrated with other private and public satellite terrestrial wireless and wireline networks to provide a wide ranging coverage area. Furthermore it is recognized that differences between private and public networks and differences between circuit switched and packet data networks may only be a matter of semantics due to convergence between telecommunication and computing technologies.

In addition the network may include a few or alternatively many network elements none of which are shown. Using sophisticated and or simple routing schemas the network may provide connectivity between the elements of the HA computing system using few or many of its network elements. The network may be configured in accordance with any number of communication and or security protocols.

In accordance with above these communication protocols may include any of 1 G 2 G 2.5 G 3 G and 4 G telecommunication protocol which may include any the commonly used protocols such as Advanced Mobile Phone Service AMPS Time Division Multiple Access TDMA Global System for Mobile Communications GSM and Code Division Multiple Access CDMA Universal Mobile Telecommunications Service UMTS Wide band CDMA WCDMA ultra wideband CMDA CDMA2000 Generic Packet Radio Services GPRS Telecommunications Industry Association s TIA IS 94 specifications and any combination or variation thereof.

The communication protocols may also include any WLAN WMAN and or PAN protocols which may include any of the commonly used protocols such as the Institute of Electrical and Electronic Engineers IEEE 802.11 et seq. IEEE 802.16 protocol the IEEE 802.15 protocol the ZigBee specification the Bluetooth Specification the WOTS specification the HiperLAN specification the HomeRF specification and or any other wireless networking protocol that promulgates rules to use licensed and or freely available unlicensed spectrum which in the United States includes the Industrial Scientific and Medical ISM bands.

Moreover in the embodiments described above processing platforms computing systems controllers and other devices containing processors are noted. These devices may contain at least one Central Processing Unit CPU and memory. In accordance with the practices of persons skilled in the art of computer programming reference to acts and symbolic representations of operations or instructions may be performed by the various CPUs and memories. Such acts and operations or instructions may be referred to as being executed computer executed or CPU executed. 

One of ordinary skill in the art will appreciate that the acts and symbolically represented operations or instructions include the manipulation of electrical signals by the CPU. An electrical system represents data bits that can cause a resulting transformation or reduction of the electrical signals and the maintenance of data bits at memory locations in a memory system to thereby reconfigure or otherwise alter the CPU s operation as well as other processing of signals. The memory locations where data bits are maintained are physical locations that have particular electrical magnetic optical or organic properties corresponding to or representative of the data bits. It should be understood that the exemplary embodiments are not limited to the above mentioned platforms or CPUs and that other platforms and CPUs may support the described methods.

The data bits may also be maintained on a computer readable medium including magnetic disks optical disks and any other volatile e.g. Random Access Memory RAM or non volatile e.g. Read Only Memory ROM mass storage system readable by the CPU. The computer readable medium may include cooperating or interconnected computer readable medium which exist exclusively on the processing system or are distributed among multiple interconnected processing systems that may be local or remote to the processing system. It should be understood that the exemplary embodiments are not limited to the above mentioned memories and that other platforms and memories may support the described methods.

It will be apparent to one of ordinary skill in the art that aspects of the invention as described above may be implemented in many different forms of logic including software firmware and hardware in the examples illustrated in the Figures. Actual software code e.g. computer or logic executed instructions or specialized hardware used to implement aspects consistent with the present invention is not limiting of the present invention. Thus the operation and behavior of the aspects may not have been described with reference to any specific logic including specific software code and or specific hardware logic. It should be understood that a person of ordinary skill in the art would be able to design software and control hardware to implement the aspects of the present invention based on the description herein.

The foregoing description provides illustration and description but is not intended to be exhaustive or to limit the invention to the precise form disclosed. Modifications and variations are possible in light of the above teachings or may be acquired from practice of the invention.

No element act or instruction used in the description of the present application should be construed as critical or essential to the invention unless explicitly described as such. Also as used herein the article a is intended to include one or more items. Where only one item is intended the term one or similar language is used.

Exemplary embodiments have been illustrated and described. Further the claims should not be read as limited to the described order or elements unless stated to that effect. In addition use of the term means in any claim is intended to invoke 35 U.S.C. 112 6 and any claim without the word means is not so intended.

