---

title: Method and system for congestion control
abstract: Aspects of the disclosure provide a method for congestion control by implementing congestion aware applications. The congestion aware applications can adjust an occupancy of network resource according to a network congestion status. The method for congestion control can include transmitting data from an application to a transport protocol at a first data rate, transmitting the data over a channel, receiving a feedback signal from the transport protocol that is indicative of a congestion status of the channel, communicating the congestion status of the channel from the transport protocol to the application, and transmitting data from the application to the transport protocol at a second data rate based on the congestion status.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07903562&OS=07903562&RS=07903562
owner: Lockheed Martin Corporation
number: 07903562
owner_city: Bethesda
owner_country: US
publication_date: 20080205
---
Network congestion can affect communication quality especially for real time communications such as voice over internet protocol VoIP online gaming video conference and the like. In a video conference example video image data packets can be piled up in a buffer of a router during times of heavy network congestion and therefore video image transmission delay can be long. Worse yet the video image data packets can be dropped by the router when the buffer is low on storage space which can result in a video conference image that is choppy. On the other hand real time communications can attempt to occupy a large amount of network communication resources which can increase network congestion. For example a video conference may transmit high resolution video image in an already congested network and thus exacerbate an already bad network congestion situation.

In a technique to relieve network congestion transport protocols such as TCP can slow down packet sending rate and thus reduce an amount of packets that enter the network. In another technique a router can selectively drop low priority packets while permitting high priority packets go through.

However the transport protocol based technique may increase undesirable latency that can be noticeable to clients. Therefore the transport protocol based technique may not be applicable to applications that require low latency and a substantially constant sending rate such as the video conference application. Further the router based technique may entirely block a low priority application which can result in unfair network allocation to owners of the low priority applications. In addition unawareness of network congestion status may lead to congestion collapse which can be difficult to recover.

Aspects of the disclosure provide a method for congestion control by implementing congestion aware applications. The congestion aware applications can adjust an occupancy of network resource according to a network congestion status. The network congestion status can include high congestion that the network does not have enough resources for existing applications and low congestion that the network has enough resources for existing applications in the network. The method for congestion control can include transmitting data from an application to a transport protocol at a first data rate transmitting the data over a channel receiving a feedback signal from the transport protocol that is indicative of a congestion status of the channel communicating the congestion status of the channel from the transport protocol to the application and transmitting data from the application to the transport protocol at a second data rate based on the congestion status.

According to an aspect of the disclosure the feedback signal can include at least one of loss rate round trip time explicit congestion notification ECN error rate and receiver estimated receiving data rate. The congestion status can correspond to an average of the feedback signal or the congestion status can correspond to a sample of the feedback signal.

To transmit data from the application to the transport protocol at the first data rate the method can further include encoding the data with a first coder that matches the first data rate. Similarly to transmit data from the application to the transport protocol at the second data rate based on the congestion status the method can include switching to a second coder that matches the second data rate based on the congestion status.

According to aspects of the disclosure when the network experiences high congestion the second data rate is lower than the first data rate. On the other hand when the network experiences low congestion the second data rate is higher than the first data rate.

Furthermore to transmit data over the channel the disclosure can include transmitting extra data with the encoded data by the first coder over the channel to test if the channel can adapt to higher data rate.

Aspects of the disclosure also provide a system for congestion control the system can include a transport protocol configured to transmit data over a channel and receive a feedback signal that is indicative of a congestion status of the channel and an application configured to transmit the data to the transport protocol at a first data rate receive the feedback signal from the transport protocol and transmit the data to the transport protocol at a second data rate based on the congestion status.

Further the system can include an interface that is coupled to the transport protocol and the application the interface being configured to transmit data from the application to the transport protocol and communicate the feedback signal from the transport protocol to the application. In an embodiment the interface includes an application programming interface API of an operating system.

In addition the application can include a first coder that is configured to match the first data rate and a second coder that is configured to match the second data rate. The application can be configured to encode data with the first coder transmit the encoded data to the transport protocol receive the feedback signal that is indicative of the congestion status and switch to the second coder based on the congestion status.

When the second data rate is higher than the first data rate the application can be further configured to transmit extra data with the encoded data by the first coder to the transport protocol and switch to the second coder when the network experiences low congestion.

Aspects of the disclosure further provide a computer readable medium storing program instructions causing a controller to perform congestion control steps that can include transmitting data from an application to a transport protocol at a first data rate transmitting the data over a channel receiving a feedback signal from the transport protocol that is indicative of a congestion status of the channel communicating the congestion status of the channel from the transport protocol to the application and transmitting data from the application to the transport protocol at a second data rate based on the congestion status.

The network and the communication link can provide communication channels among the plurality of terminals . The network can be wired wireless a local area network LAN a wide area network WAN a peer to peer network the Internet etc. or any combination of these that interconnects terminal . The communication link can be any type of wired or wireless link including but not limited to multiple twisted pair cables DSL coaxial cable fiber optics RF cable modems over the air frequency over the air optical wavelength e.g. infrared local area networks wide area networks intranets internet virtual private networks cable TV terrestrial broadcast radio or television satellite transmission simple direct serial parallel wired connections or the like or combinations of the these.

The terminals can include various applications such as the congestion aware application that can utilize the network and the communication link to communicate with other terminals. The congestion aware application may monitor a congestion status of the network and can adjust resource occupancy of the network such as bandwidth according to the congestion status of the network . The congestion status can include a high congestion that the network does not have enough bandwidth for existing applications in the network and a low congestion that the network has enough bandwidth for exiting applications in the network .

As an example of the congestion aware application a congestion aware voice over internet protocol VoIP application can include a time domain voicing cutoff TDVC vocoder and an internet low bit rate codec iLBC vocoder. Between the TDVC and the iLBC vocoders the iLBC vocoder can have higher quality with larger network bandwidth occupancy while the TDVC vocoder can have lower but acceptable quality with less network bandwidth occupancy.

During operation the congestion aware VoIP application can monitor the network congestion status and switch to the appropriate vocoder according to the monitored network congestion status. More specifically while the iLBC vocoder is in utilization the congestion aware VoIP application can monitor if the network experiences high congestion. When the network experiences high congestion the congestion aware VoIP application can switch to the TDVC vocoder to occupy less network bandwidth in an attempt to relieve the network congestion. On the other hand while the TDVC vocoder is in utilization the congestion aware VoIP application can monitor if switching to iLBC vocoder can result in high congestion of the network . When the network can adapt to the iLBC vocoder without high congestion the congestion aware VoIP application may switch to the iLBC vocoder.

Furthermore the exemplary congestion control terminal can include an application specific device such as input device and storage medium coupled with the terminal controller . In the congestion aware VoIP application example the input device such as a standard telephone can convert voice into an electrical signal and transmit the electrical signal to the terminal controller . The terminal controller can digitalize the electrical signal into a digital signal. Further the terminal controller can encode the digital signal into an encoded digital signal according to the congestion status of the network and control the transmitter to transmit the encoded digital signal over the network . More specifically the terminal controller can use a coder having high data rate to encode the digital signal when the network experiences low congestion thus to provide high quality of service. On the other hand the terminal controller can use a coder having low data rate to encode the digital signal when the network experiences high congestion. On a receiver terminal not shown the encoded digital signal can be decoded and output to an output device not shown . It should be understood that a terminal can include an input device and an output device integrated such as a telephone.

In a video broadcasting example the storage medium can store previously recorded video data. The terminal controller can process the video data such as compress the video data according to the congestion status of the network and control the transmitter to transmit the processed video data. More specifically the terminal controller may use a lossless compressor to compress the video data when the network experiences low congestion and use a lossy compressor to compress the video data when the network experiences high congestion. The compressed video data can be received by a receiver terminal not shown . The receiver terminal can decompressed the received video data and can include a video display device not shown that can display the video image according to the decompressed video data.

The network connection device such as USB Ethernet IEEE 1394 wireless signal emitting device and the like can enable the congestion control terminal to be connected to a network. The network connection device can integrate a transmitter and a receiver and can be configured to transmit data to the network and receive data from the network.

The input device such as telephone camera keyboard and PDA can be configured to convert inputs such as voice image key strike handwriting and the like into electrical signals either analog or digital. The output device such as telephone monitor PDA and the like can be configured to convert the received data to a user perceivable format such as sound and image.

The terminal controller can perform data operation and coordinate components of the terminal . For example the terminal controller can receive an electrical signal then process such as digitalize and encode the electrical signal into a digital data stream and control the network connection device to send the data stream. In addition the terminal controller can observe the data received by the network connection device and determine the network congestion status based on the received data.

The terminal controller can further include a processor a random access memory RAM a non volatile memory an I O interface and a network interface coupled as shown. The I O interface can enable various input devices output devices or input and output devices to connect to the terminal controller . The network interface can enable various network connection devices to connect to the terminal controller .

The processor can execute system instructions to maintain the terminal controller . More specifically the processor may execute an operating system such as Linux to maintain the congestion control terminal . The operating system can perform various system functions such as memory management task scheduling interrupt handling and the like. In addition the operating system can generally include network software such as network protocols that can provide network service.

Further the processor can execute application instructions to perform specific applications. Some applications may require access to network service such as a VoIP application. Generally those applications can be implemented in a network architecture which can include network protocols that can provide communication ability over the network and an application programming interface API provided by the operating system which can enable the communication ability between those applications and the network protocols.

The non volatile memory can hold information even when power is off. Therefore the non volatile memory can be used to store system and application instructions. It should be understood that the non volatile memory may include various non volatile memory devices such as battery backup RAM read only memory ROM programmable ROM PROM flash PROM electrical erasable PROM EEPROM magnetic storage optical storage and the like.

The RAM is readable and writable. Generally the RAM can have fast access speed. It can be preferred that data and instructions are stored in the RAM during operation such that the processor can access the RAM for instructions and data instead of the non volatile memory . Thus the system performance can be improved.

In an embodiment the congestion aware application can be implemented as congestion aware application instructions stored in the non volatile memory . The congestion aware application instructions can cause the processor to perform congestion control operations. In another embodiment the congestion aware application can be implemented as hardware such as application specific integrated circuit ASIC included with the processor . Moreover the congestion aware application can be implemented as a combination of application instructions and hardware.

During operation of a congestion aware application the processor can execute the system instructions and application instructions stored in the RAM or non volatile memory . The processor can control the I O interface to receive input data such as sampled digital data of voice and then process the input data and send the processed input data to the network via network interface . Further the processor can observe data received from the network interface . The processor can determine a congestion status of the network based on the data received and adjust input data processing accordingly.

Further the terminal controller may include a bus that can couple various components of the terminal controller together and coordinate operations of the various components. For the easy and clarity of description the embodiments are presented with a bus type architecture however it should be understood that any other architectures can also be used to couple components inside the terminal controller .

The congestion aware application of the exemplary congestion control network architecture can perform a specific application according to the network congestion status. For example a congestion aware VoIP application can encode voice data using a high data rate vocoder when the network experiences low congestion and encode voice data using a low data rate vocoder when the network experiences high congestion.

The transport protocol can send data to the network according to a network transport protocol such as transmission control protocol TCP user datagram protocol UDP datagram congestion control protocol DCCP and the like. Further the transport protocol may receive information such as data or acknowledgment ACK from the network . According to the disclosure the information received can indicate a congestion status of the network such as low congestion or high congestion. In an embodiment the transport protocol can include DCCP therefore the received information can include a receiver estimated sending rate. The receiver estimated sending rate can be used to indicate a congestion status of the network . For example when the receiver estimated sending rate does not match the real sending rate which can mean that the network experiences high congestion and thus data can be lost in the network therefore the receiver does not receive all the data sent out. When the receiver estimated sending rate matches the real sending rate the network can experience low congestion that substantially all the sent data can be received by the receiver.

In addition to the receiver estimated sending rate other parameters such as round trip time loss rate and the like can be used to indicate the congestion status of the network . Moreover the transport protocol can include an explicit congestion notification ECN bit. Therefore routers that can detect the congestion can toggle the ECN bit to inform the congestion status of the network . Furthermore the receiver may calculate a parameter such as an error rate from the data received that can be independent of transport protocols to indicate the congestion status of the network and inform the congestion aware application of the parameter.

During an exemplary operation the congestion aware application can send application data to the transport protocol via the API . The transport protocol can packetize the application data and transport the application data to the network . Further the transport protocol can receive information that can indicate the network congestion status and communicate the received information to the congestion aware application via the API . Therefore the congestion aware application can adjust data rate of the application data according to the received information.

The data source can provide input data to the plurality of coders. In the congestion aware VoIP example the data source can be an I O interface that can provide digitalized voice sampling data. In a video broadcasting example the data source can be a storage interface connecting to a storage medium that can provide the pre stored video data.

The plurality of coders may encode the input data with different quality. In the congestion aware VoIP example the plurality of coders can be a plurality of vocoders that can encode a voice signal with different quality. For example the vocoder can be an iLBC vocoder that can encode the voice signal with higher quality while the vocoder can be a TDVC vocoder that can encode the voice signal with relatively lower quality. On the other hand the iLBC vocoder can have higher data rate compared to the TDVC vocoder . Therefore the iLBC vocoder can require larger network bandwidth compared to the TDVC vocoder . The data sink can format and packetize the encoded data and send the data to a transport protocol via the API .

During an exemplary operation process the application controller can control the switch to select a default coder at an initial time. The default coder can encode the input data from the data source and output the encoded data to the data sink . The data sink can then send the encoded data to the transport protocol via API . The transport protocol can then transport the encoded data to the network. In addition the transport protocol can receive information that can indicate the congestion status of the network and communicate the congestion status of the network to the application controller via API . Then the application controller can control the switch to select an appropriate coder based on the congestion status of the network.

In the congestion aware VoIP example the application controller can control the switch to select the iLBC vocoder initially. The iLBC vocoder can encode the input voice data with high quality. The encoded data can have high data rate that can require larger network bandwidth. If the network does not have enough bandwidth the network can experience high congestion. Therefore some encoded data can be dropped by the network and cannot arrive at the receiver. In an embodiment the receiver can estimate a sending rate based on the data received and send this information back to the sender via the network. On the sender side the transport protocol can receive the receiver estimated sending rate and communicate the receiver estimated sending rate to the application controller via the API . The application controller can compare the receiver estimated sending rate with the data rate of the iLBC vocoder. Due to the lost data in the network the receiver estimated sending rate cannot match the data rate of the iLBC vocoder. Therefore the application controller can determine that the network experiences high congestion. The application controller can control the switch to choose the TDVC vocoder that requires less network bandwidth.

Subsequently the process proceeds to step where a network congestion status can be determined. In an embodiment the transport protocol can receive information such as receiver estimated sending rate that can indicate of network congestion status. The transport protocol can communicate this received information with the congestion aware application such as via API. The congestion aware application can determine whether the network experiences high congestion based on the received information.

In an embodiment the congestion aware application can determine the network congestion status based on an average parameter such as an average receiver estimated sending rate over a period. In another embodiment the congestion aware application can determine the network congestion status based on a sample of the parameter such as a sample of the receiver estimated sending rate therefore the congestion aware application can response to network congestion quickly.

If the network experiences high congestion the process proceeds to step S where the congestion aware application can choose a second coder having lower data rate to encode the input data. Then the process proceeds to step S and stops. It should be understood that the second coder can include a coder that stops encoding therefore the congestion aware application can stop sending data to the network.

If the network experiences low congestion the process proceeds to step S the congestion aware application can continuously use the first coder to encode the input data. The process then proceeds to step S where the encoded data can be sent to the transport protocol and then the transport protocol can transmit the encoded data to the receiver via the network. In addition extra data such as dummy data or extra informative data can be transmitted via the network. Thus more data can be sent via the network and the sending rate can increase. In an embodiment the extra data may provide information that can assist the congestion control process such as transition to a next coder. The process then proceeds to step S.

In step S the network congestion status can be determined. The network congestion status may change due to the extra data sent to the network or changes in other part of the network. If the network experiences high congestion the congestion aware application can determine to continue using the first coder and stop sending extra data and then the process proceeds to step S and terminates. If the network experiences low congestion the congestion aware application can choose a third coder having even higher data rate and then the process proceeds to step S and terminates.

As described above the congestion aware application can choose a coder having lower data rate when the network experiences high congestion and choose a coder having higher data rate when the network can adapt without high congestion. Various algorithms can be used by the congestion aware application to determine whether the network can adapt to a higher data rate coder without high congestion. In an embodiment the congestion aware application can apply a three step process.

The three step process starts at the initialization period. During the initialization period the congestion aware application can use the first coder and monitor the congestion status of the network. In an embodiment the congestion aware application can receive a receiver estimated sending rate. The congestion aware application can determine if the receiver estimated sending rate matches the real data sending rate as illustrated in the . When the network continues in low congestion during the initialization period the process may proceed to the data rate increase period. During the data rate increase period the congestion aware application can still use the first coder. In addition the congestion aware application can send extra data to the network in order to increase the data sending rate. The data sending rate can increase from a rate matching the first coder to a rate matching the third coder as illustrated in . When the network continues experiencing low congestion during the data rate increase period the process may proceed to the data rate stabilization period. During the data rate stabilization period the congestion aware application can still use the first coder. In addition the congestion aware application can send extra data that can make the data sending rate match the third coder. When the network keeps in low congestion during the data rate stabilization period the congestion aware application can switch to the third coder.

During the three step process the congestion aware application can monitor the congestion status of the network. If the network experiences high congestion the congestion aware application can respond accordingly. For example if the network experiences high congestion during the initialization period the congestion aware application can choose the second coder having lower data rate than the first coder. If the network experiences high congestion during the data rate increase period the congestion aware application can continue using the first coder and stop sending extra data. If the network experiences high congestion during the data rate stabilization period the congestion aware application can continue using the first coder and stop sending extra data.

As can be seen initially both of the VoIP applications can use high data rate coder to provide high quality of service when the network has enough bandwidth. Around time 7.5 seconds the available bandwidth drops below the required bandwidth of the high data rate coder which can result in losing data in the network for the VoIP application using the high data rate coder therefore the received data rate as shown by line can drop. On the other hand the congestion aware VoIP application can select the low data rate coder that requires less bandwidth. When the available bandwidth keeps low such as between time 7.5 seconds to 15 seconds the VoIP application using the high data rate coder can continue losing data in the network. In addition the high data sending rate can result in the network experiencing high congestion having no bandwidth for more applications. On the other hand the congestion aware VoIP application can continue using the low data rate coder therefore the network congestion can be relieved. In addition the congestion aware VoIP application may attempt to raise the data rate by sending extra data if the network experiences low congestion for a while such as around time 12 seconds and 17 seconds. If the network cannot adapt to the raised data rate such as around time 13 seconds or the available network bandwidth increase is spontaneous such as round time 18 the congestion aware VoIP application can stop sending extra data and continue using the low data rate coder.

Further around time 21 seconds when the available bandwidth increases the congestion aware VoIP application can first continue using the low data rate such as between time 21 seconds to 25 seconds. If the network still experiences low congestion the congestion aware VoIP application can increase the data rate by sending extra data such as around time 25 seconds. If the network can adapt to the increased data rate without high congestion such as around time 28 seconds the congestion aware application may switch to the high data rate coder.

As can be seen while the VoIP using the high data rate coder keeps using the high data rate coder when the network experiences high congestion which may result in losing packets the congestion aware VoIP application can switch to the low data rate coder thus relieving the network congestion and communication integrity e.g. less lost packets can be improved. On the other hand when the network has enough bandwidth the congestion aware VoIP application can switch to the high data rate coder in a reliable style.

While the invention has been described in conjunction with the specific exemplary embodiments thereof it is evident that many alternatives modifications and variations will be apparent to those skilled in the art. Accordingly exemplary embodiments of the invention as set forth herein are intended to be illustrative not limiting. There are changes that may be made without departing from the spirit and scope of the invention.

