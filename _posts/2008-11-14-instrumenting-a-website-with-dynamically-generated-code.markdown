---

title: Instrumenting a website with dynamically generated code
abstract: A method, system, and medium are provided that relate to dynamically instrumenting a website. In general, an exemplary aspect of the invention includes storing configuration information in a datastore. A unique identifier, which corresponds to configuration information, is inserted within code of one or more web pages that relate to the website. When content is requested from the website, such as by a browser, the unique identifier can be used to retrieve corresponding configuration information. Using corresponding configuration information, instrumenting code may be generated and communicated, thereby instrumenting the website.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09251283&OS=09251283&RS=09251283
owner: Microsoft Technology Licensing, LLC
number: 09251283
owner_city: Redmond
owner_country: US
publication_date: 20081114
---
Websites often utilize instrumentation services which perform various functions in connection with website performance. Such services may be implemented by code instructions located within web pages of the website. Different services may be implemented using different code instructions. Whenever it is desired to change from one service to an alternative service code instructions within the website may need to be replaced with different code instructions of the alternative service. Improperly modifying code instructions may result in poor website and instrumentation service performance.

Embodiments of our technology are defined by the claims below not this summary. A high level overview of various aspects of the technology is provided here for that reason to provide an overview of the disclosure and to introduce a selection of concepts that are further described below in the detailed description section. This summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in isolation to determine the scope of the claimed subject matter.

Our technology relates to instrumenting a website such as by supplying a code statement for implementing information gathering features. An example of such a code statement includes instrumentation code for enabling instrumentation services that are utilized by a website. Configuration information is stored in a datastore. Configuration information might include data relating to the website in addition to data relating to an instrumentation service utilized by the website. In response to a request for content of the website the configuration information may be retrieved and utilized to generate instrumentation code. The instrumentation code may then be communicated to enable the instrumentation service utilized by the website.

Embodiments of our technology relate to systems and methods for instrumenting a website. In a general exemplary embodiment configuration information is maintained in a datastore. A unique identifier which corresponds to the configuration information is inserted within code of one or more web pages that form a portion of the website. When content is requested from the website such as by a browser the unique identifier facilitates retrieval of configuration information needed to dynamically generate code. Service implementing code is dynamically generated and communicated thereby instrumenting the website in one embodiment. Some of the wording and form of description is done so herein to meet applicable statutory requirements. Although the terms step and or block or module etc. might be used to connote different components of methods or systems employed the terms should not be interpreted as implying any particular order among or between various steps unless and except when the order of individual steps is explicitly described.

Embodiments of our technology may be embodied as among other things a method system or set of instructions embodied on one or more computer readable media. Computer readable media include both volatile and nonvolatile media removable and nonremovable media and contemplates media readable by a database a switch and various other network devices. By way of example and not limitation computer readable media comprise media implemented in any method or technology for storing information. Examples of stored information include computer useable instructions data structures program modules and other data representations. Media examples include but are not limited to information delivery media RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile discs DVD holographic media or other optical disc storage magnetic cassettes magnetic tape magnetic disk storage and other magnetic storage devices. These technologies can store data momentarily temporarily or permanently.

With initial reference to an illustrative operating environment suitable for practicing an embodiment of the technology is provided and referenced generally by the numeral . shows a consolidation component connected to a variety of other elements including a website customer a service provider a client browser a customer webpage server and a service browser . Consolidation component includes subcomponents including an instrumentation aspect manager a datastore and a dynamic instrumentation provider . Consolidation component may be a single computing device which includes subcomponents or may be a series of connected computing devices that perform functions of subcomponents and . Moreover sub components and may each include one or more computing devices or may all comprise a single computing device.

Several components of the operating environment of as well as other components of embodiments of the technology might include one or more computing devices. Therefore a general overview of an exemplary computing device will now be described in reference to . In a diagrammatic block diagram of computing device is provided which device might take the form of a conventional computer as well as a consumer electronics device such as an Internet connected watch mobile phone and the like. Computing device may take on a variety of forms including for example a computing device such as a gaming console a client computer a server computer variations thereof such as laptop computers and palm top computers and in some embodiments devices such as PDAs and smart phones. As shown in a bus couples one or more memory components to one or more processors various presentation components input output ports input output components and at least one power supply . Other devices including lower level aspects of the shown devices are not shown so as to not obscure the technology.

Memory components include things such as a hard drive volatile memory such as RAM buffers and the like. The one or more processors control overall data communications throughout a computing device. Illustrative presentation components include a video card as well as a monitor or other presentation device. Input output ports provide connectivity to peripheral components such as printers digital cameras and the like. Actual input output components may be things like printers and the like. A power supply provides power to run computing device . Not all of the components shown in need to be present in order to make up a computing device but are shown for illustrative purposes in connection with describing an embodiment of the technology.

Although the various blocks of are shown with lines for the sake of clarity in reality delineating various components is not so clear and metaphorically the lines would more accurately be grey and fuzzy. For example one may consider a presentation component such as a display device to be an I O component. Also processors have memory. We recognize that such is the nature of the art and reiterate that the diagram of is merely illustrative of an exemplary computing device that can be used in connection with one or more embodiments of our technology.

Computing device typically includes a variety of computer readable media. By way of example and not limitation computer readable media may comprise Random Access Memory RAM Read Only Memory ROM Electronically Erasable Programmable Read Only Memory EEPROM flash memory or other memory technologies CDROM digital versatile disks DVD or other optical or holographic media magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices carrier wave or any other medium that can be used to encode desired information and be accessed by computing device .

Returning now to the operating environment shown is one in which a website is instrumented to enable services. As used herein the terms instrument instrumenting and instrumented describe supplying code which may be placed at strategic locations within code. Accordingly instrumenting a website describes supplying a website with code that may be strategically placed within code of the website. In exemplary embodiments code supplied to a website is useful to facilitate operation of instrumentation services on a website. Services include applications that enable a variety of capabilities such as instrumentation and are performed by one or more service providers. As used herein the phrase instrumentation aspects describes services that provide instrumentation capabilities. For example instrumentation aspects include advertising services and or analytics services. Advertising services perform a variety of functions including displaying advertisements on a web page and tracking performance of the advertisements. Analytic services perform a variety of functions including monitoring and analyzing traffic and other visitation metrics of a web page. Advertising services and analytic services are merely examples of services and embodiments of our technology are broad enough to include instrumenting for other services as well.

In an aspect of the technology consolidation component registers instrumentation aspects of service provider . Registering includes receiving and storing information that is related to each instrumentation aspect of the service provider . Although we sometimes refer to certain items in the singular we do not mean to imply that only one of such items is implicated. For example service provider is used singularly for illustrative purposes in and throughout this description however in reality the consolidation component may register instrumentation aspects from multiple service providers. This concept is applicable to a great many items throughout this disclosure. Qualifying terms is persistently avoided so as to enhance readability of this description but not to substantively indicate singularity of items. Other examples illustratively include website customer customer webpage server client browser service browser instrumentation aspect manager datastore and dynamic instrumentation provider all of which may include one or more of the respective component.

In an embodiment registering instrumentation aspects includes receiving instrumentation details from service provider . The instrumentation details describe data that identifies and defines instrumentation aspects provided by service provider . Instrumentation details assist a computing device in executing a service. Instrumentation details include for example a name and description of a particular service e.g. XYZ Analytics for tracking website traffic . Instrumentation details may include definitional template related and schematic information necessary for a service to be properly implemented e.g. entry points data function points for population validation rules for APIs etc.

Instrumentation details of various service providers include similar types of information however in the absence of standardization the format and content of the information might vary to a great extent between service providers. Because switching from one instrumentation aspect to another might require modifying code based on corresponding instrumentation details a lack of standardization can create opportunities for instrumenting error as there is more content to modify. In an exemplary embodiment consolidation component receives instrumentation details from service provider by way of an instrumentation template which describes a predefined format that can be populated with instrumentation details. Referring to consolidation component communicates to service provider an instrumentation template . Consolidation component may receive from service provider instrumentation details in a format consistent with the instrumentation template . In one embodiment consolidation component provides service provider with an XML XSD template. Consolidation component receives instrumentation details from service provider by way of an XML XSD template.

In one aspect of the technology consolidation component receives multiple sets of instrumentation details in a format consistent with instrumentation template . With consistently formatted instrumentation details consolidation component is enabled to more efficiently process updates across multiple sets of instrumentation details. Instrumentation template creates a common set of concepts between service providers as well as a common method for exposing data and APIs. With common metadata instrumentation details can be auto filled with updated data.

In a further embodiment consolidation component includes an instrumentation aspect manager . Instrumentation aspect manager serves as a subcomponent of consolidation component and functions to interact with service provider during registration of instrumentation aspects. For example instrumentation aspect manager collects and stores instrumentation details . Instrumentation aspect manager also provides centralized storage of instrumentation details of various instrumentation aspects. Centralized storage facilitates efficient and standardized presentation of instrumentation aspects for selection by website customer .

In a further aspect of the technology consolidation component interacts with website customer to facilitate selection of instrumentation aspects of service provider . Website customer may adopt instrumentation aspects for use with a website of website customer . Examples of instrumentation aspects that website customer may adopt include advertising services and analytics services. In an illustrative aspect the website of website customer is maintained on customer webpage server .

Consolidation component presents registered instrumentation aspects to website customer for selection. In an embodiment registered instrumentation aspects are presented and selected through a user interface. The user interface allows website customers to view registered instrumentation aspects in a standardized format and to select registered instrumentation aspects for application to a website. For example website customer might select an instrumentation aspect which corresponds to instrumentation details .

In another embodiment through the user interface website customer inputs and consolidation component receives website customer parameters . Website customer parameters are useful to generate code for enabling instrumentation aspects on a website of website customer . Examples of website customer parameters include web site URL web pages associated with the website code blocks with unique identifiers within web pages groupings of code blocks identification of services selected caching rules and experimentation groups.

Once consolidation component has received website customer parameters including a selection of instrumentation aspects in an exemplary embodiment consolidation component groups together website customer parameters and instrumentation details of instrumentation aspects selected by the website customer . For example if website customer selected an instrumentation aspect having instrumentation details website customer parameters would be grouped with instrumentation details .

In another aspect consolidation component assigns and communicates to website customer one or more unique identifiers . Unique identifiers might serve various functions including identifying a customer website and identifying a web page of the customer website. Unique identifiers might also identify customer parameters and instrumentation details of instrumentation aspects selected by website customer . In other aspects unique identifiers identify a location on a webpage. Moreover unique identifiers might provide additional source necessary to generate code related to instrumentation aspects.

Both the quantity and content of the one or more unique identifiers assigned to website customer might depend on instrumentation aspects selected. For example if an instrumentation aspect which applies uniformly across one or more web pages within a website is selected it might be appropriate to assign only one unique identifier for placement at a location within each of the one or more web pages. In such an embodiment the unique identifier might include a short string of text which functions to identify the customer website and or web pages and identify website customer parameters and instrumentation details. An example of a single unique identifier is shown in and identified by the numeral . Referring to a set of unique identifiers and might be assigned wherein unique identifier identifies the customer website and or web pages and unique identifier identifies website customer parameters and instrumentation details associated with the selected instrumentation aspect. Referring to in a further example if several different instrumentation aspects are selected for placement at different locations within one web page it might be appropriate to assign multiple unique identifiers and for separate placement within the web page. In such an embodiment the multiple unique identifiers and might each include a unique string of text for carrying out a different function. For example unique identifier might identify the customer website and or webpage unique identifier might identify website customer parameters and instrumentation details pertaining to one instrumentation aspect e.g. analytics and unique identifier might identify website customer parameters and instrumentation details pertaining to an alternative instrumentation aspect e.g. advertising . Unique identifier might also identify a location on the web page and provide additional information specific to static areas in the web page.

In one aspect of the technology each website customer is assigned one or more unique identifiers that are distinct from all other unique identifiers assigned to other website customers. As previously described consolidation component includes an instrumentation aspect manager which stores implementation details for registered instrumentation aspects. In another aspect instrumentation aspect manager interacts with website customer to facilitate selection of instrumentation aspects as described hereinabove.

In one embodiment of the technology website customer parameters instrumentation details for selected instrumentation aspects and one or more assigned unique identifiers are stored in a manner that enables near simultaneous retrieval. Collectively these categories of data comprise configuration information for website customer . Configuration information describes information necessary to generate instrumentation code. In one aspect configuration information is stored in a datastore of consolidation component . For example datastore might include a SQL database.

In order to retrieve configuration information and facilitate generation of instrumentation code website customer communicates one or more unique identifiers which have been assigned to website customer to consolidation component in various ways. In exemplary embodiments referring to unique identifiers and are inserted within source code of a web page for which the website customer has selected services. Unique identifiers and include a string of text and are inserted within an instrumentation tag . Instrumentation tag might be a URL which in an exemplary embodiment includes an address for consolidation component . Instrumentation tag is inserted within source code of web page . Instrumentation tag might replace instrumentation code for implementing a service. In embodiments in which the instrumentation tag includes an address for the consolidation component when a browser requests content of the web page the instrumentation tag and unique identifiers and inserted therein are communicated to consolidation component .

Web pages might be coded in a variety of ways to include one or more unique identifiers. In one embodiment the manner in which a web page is coded depends on instrumentation aspects selected for application to the web page. For example where a website customer has selected only general traffic measuring analytics to evaluate each web page within a website each web page might be coded once with the same unique identifier such as shown in and . In unique identifier might identify both the customer website web page and configuration information related to website customer and unique identifier might be coded into multiple web pages. In unique identifier might identify the customer website web page and unique identifier might identify configuration information. In another example where a website customer has selected a variety of instrumentation aspects for application at different locations on a web page e.g. banner ads and or skyscraper ads each unique identifier within a set of varying unique identifiers might be coded into different locations within the web page as shown in . In such an example a unique identifier might only be coded into one web page to best facilitate a related instrumentation aspect. For example if unique identifier relates to advertising instrumentation for a banner ad unique identifier might only be coded into one specific location within web page . Upon receipt of unique identifier consolidation component can retrieve related and necessary configuration information and dynamically generate browser renderable code for specific placement on web page .

Referring to in an operating environment for practicing the technology consolidation component client browser customer webpage server and service browser are networked. In one embodiment those components are networked by way of the Internet . In aspects of the technology one or more unique identifiers of website customer are communicated to consolidation component to retrieve configuration information of website customer stored in the datastore . For example referring to client browser requests content from web page of website customer by communicating with customer web page server . Customer web page server communicates data to client browser such as source code containing instrumentation tag . Because instrumentation tag includes unique identifier and an address for consolidation component unique identifier is communicated to consolidation component . Similar aspects of the technology shown in include client browser requesting content from a web page server at step and communicating unique identifier s to consolidation component at step .

In an exemplary embodiment consolidation component includes a dynamic instrumentation provider . Referring to dynamic instrumentation provider is connected to datastore of consolidation component . Dynamic instrumentation provider functions to receive unique identifier s retrieve configuration information and dynamically generate instrumentation code.

Returning to after receiving the unique identifier s at step dynamic instrumentation provider references datastore . Datastore stores configuration information that is identifiable by unique identifier s . When dynamic instrumentation provider references datastore using unique identifier s datastore communicates configuration information related to unique identifier s to dynamic instrumentation provider .

Dynamic instrumentation provider utilizes configuration information to dynamically generate browser renderable code at step . In another aspect dynamic instrumentation provider might also use uniquely identified static code to dynamically generate browser renderable code . Where a set of static blocks of code are simultaneously received as a result of an interaction with one web page dynamic instrumentation provider may dynamically generate multiple sets of dynamic instrumentation. Browser renderable code describes blocks of code for enabling instrumentation aspects selected for a website. For example browser renderable code may include JavaScript Source Static HTML IFRAME Source and or Silverlight Assembly. illustrates an example of a block of code . In aspects of the technology information provided in instrumentation details is leveraged to dynamically build code segments that reference appropriate resources of the service provider . In addition configuration information is used to dynamically construct appropriate API calls to submit data. At step of dynamically generated code is communicated to client browser by way of a script . Client browser having received code for enabling services selected for the web page that was requested at step renders the instrumentation and appropriate service calls are communicated at step .

As shown in in an exemplary embodiment the technology comprises a method indicated generally by numeral of instrumenting a website. The method includes at step incident to a browser interacting with an instrumentation tag within source code of a web page receiving a unique identifier that is assigned to the website. In addition at step the unique identifier is used to retrieve configuration information which describes instrumentation aspects that are to be implemented by way of the web page wherein the configuration information is stored in a datastore. At step a script is dynamically generated that will facilitate the instrumentation aspects. Step includes communicating the script to the browser thereby resulting in a modification of the source code to include the script wherein the script when activated implements the instrumentation aspects.

In aspects of the technology instrumentation tasks associated with adopting and changing services are largely removed from the responsibility of website customer and are borne by the consolidation component . Website customer interacts with the consolidation component user interface to select or modify services for application to a website. In turn the consolidation component may create or update configuration information for the website customer. Upon receipt of unique identifier for website customer the consolidation component is prepared to immediately dynamically generate instrumentation code consistent with newly created or updated configuration information.

In other aspects of the technology when service providers need to update instrumentation details instead of updating each individual web page that utilizes corresponding services the service provider only updates instrumentation details once through the consolidation component. In turn the consolidation component may update configuration information for generating instrumentation code.

In other embodiments the consolidation component facilitates a one to many instrumentation relationship. For example website customer only needs to strategically place the unique identifier to enable the consolidation component to generate multiple blocks of code which may initiate multiple service calls.

It will be understood that certain features and subcombinations are of utility and may be employed without reference to other features and subcombinations and are contemplated within the scope of the claims. Not all steps listed in the various figures need be carried out in the specific order described.

