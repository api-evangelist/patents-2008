---

title: Method and apparatus for tuning delay
abstract: Aspects of the disclosure provide a fine tunable digital delay circuit that can be applied in a high frequency digital circuit. Further, the digital delay circuit can utilize a level restoring technique to enable a wide tunable delay range. The delay circuit can include a delay element configured to receive an input signal at an input node and output a controlled signal having a controlled rise time and a controlled fall time at a controlled node, a first plurality of transistors configured to bias a supply node of the delay element to govern the controlled rise time of the controlled signal, and a second plurality of transistors configured to bias a ground node of the delay element to govern the controlled fall time of the controlled signal. The delay circuit can further include a restoring circuit configured to charge or discharge the controlled node.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07679414&OS=07679414&RS=07679414
owner: Marvell Israel (MISL) Ltd.
number: 07679414
owner_city: Yokneam
owner_country: IL
publication_date: 20080710
---
This application claims the benefit of U.S. Provisional Application No. 60 948 789 LEVEL RESTORING SCHEME FOR A HIGH FREQUENCY WIDE RANGE DELAY FINE TUNE DIGITAL DELAY ELEMENT filed on Jul. 10 2007 which is incorporated herein by reference in its entirety.

A digital circuit can include a delay component that can adjust timings of the digital circuit to optimize circuit performances. For example a digital circuit may include a plurality of internal clock signals that can be generated based directly or indirectly on a reference clock signal. The plurality of clock signals may have significant skews due to for example different propagation delays from the reference clock signal. A clock skew may adversely affect a circuit performance. To optimize the circuit performance a delay component can be used to compensate for the clock skew. In another example a circuit operation may require a specific timing sequence of multiple signals such as clock signals control signals and the like. The specific timing sequence can be enabled by suitably applying delay components to the multiple signals.

Aspects of the disclosure can provide a fine tunable digital delay circuit that can be applied in a high frequency digital circuit. Further the digital delay circuit can utilize a level restoring technique to enable a wide tunable delay range.

The delay circuit can include a delay element configured to receive an input signal at an input node and output a controlled signal having a controlled rise time and a controlled fall time at a controlled node a first plurality of transistors configured to bias a supply node of the delay element to govern the controlled rise time of the controlled signal and a second plurality of transistors configured to bias a ground node of the delay element to govern the controlled fall time of the controlled signal.

According to an aspect of the disclosure the first plurality of transistors can be p type transistors. Similarly the second plurality of transistors can be n type transistors. Additionally the first plurality of transistors can be configured to have a substantially same driving strength as the second plurality of transistors. Alternatively the first plurality of transistors are configured to have a different driving strength from the second plurality of transistors. More specifically a pull up strength of the first plurality of transistors can be substantially same as a pull down strength of the second plurality of transistors. Alternatively a pull up strength of the first plurality of transistors can be different from a pull down strength of the second plurality of transistors.

Additionally the delay circuit can further include a restoring circuit configured to charge or discharge the controlled node. Further the delay circuit can include a delay path that is coupled between the input node and the restoring circuit the delay path causing the restoring circuit to receive a delayed input signal. Alternatively the delay circuit can include an output circuit that is coupled between the controlled node and an output node the output circuit generating an output signal corresponding to the controlled signal and a feedback path that is coupled between the output node and the restoring circuit.

According to another aspect of the disclosure the delay circuit can further include a clock cycle delay circuit configured to provide a delay of an integer number of clock cycles.

According to an aspect of the disclosure the delay element can include an inverter that can invert the controlled signal relative to the input signal. Additionally the first plurality of transistors may include a configurable number of transistors to govern the controlled rises time of the controlled signal and the second plurality of transistors can also include a configurable number of transistors to govern the controlled fall time of the controlled signal.

An alternatively delay circuit may include a delay configuration unit coupled between an input node and a controlled node the delay configuration unit being configured to generate a controlled transition at the controlled node corresponding to an input transition at the input node by charging or discharging the controlled node to a transition level and a restoring unit coupled to the controlled node the restoring unit being configured to accelerate charging or discharging the controlled node after the controlled node reaches the transition level.

Aspects of the disclosure can also provide a method for delay generation. The method can include receiving an input signal having an input transition generating a controlled transition having a configurable delay corresponding to the input transition at a controlled node by charging or discharging the controlled node and restoring the controlled node to a full swing level.

Additionally the IC chip such as an SOC a controller a processor and the like may include other circuit components such as an analog unit a memory unit and the like. These elements can be coupled together to perform desired functions.

The clock cycle delay generator may delay the input signal with an integer number of clock cycles. Further the high frequency wide range fine tune delay generator can additionally delay the input signal for example with a time smaller than a clock cycle.

In an embodiment configurations of the clock cycle delay generator and the high frequency wide range fine tune delay generator can be determined prior to manufacturing for example during design. Therefore the clock cycle delay generator and the high frequency wide range fine tune delay generator can be configured by design for example by configuring transistor sizes and transistor numbers and can be manufactured accordingly. In another embodiment configurations of the clock cycle delay generator and the high frequency wide range fine tune delay generator can be determined during the manufacturing for example based on an in manufacturing testing. Therefore the clock cycle delay generator and the high frequency wide range fine tune delay generator can be configured by rest manufacturing process for example using a different mask. In another embodiment configurations of the clock cycle delay generator and the high frequency wide range fine tune delay generator may be determined after manufacturing for example during system implementation. In such embodiment the controller can be optionally included to configure the clock cycle delay generator and the high frequency wide range fine tune delay generator to proper states in order to generate a specific delay.

It also should be noted that when a desired delay is smaller than a clock cycle the clock cycle delay generator may be absent from the digital delay component .

Additionally it should be noted that the controller can be coupled to multiple improved digital delay components to configure the multiple improved digital delay components for example in order to enable a timing sequence of multiple signals.

The delay configuration portion can provide a configurable delay between an input node and a controlled node. Therefore a signal transition of the input node such as a rise transition or a fall transition can result in a signal transition of the controlled node with the configurable delay.

The output driving portion can provide an output signal at an output node. The output signal can have a desired transition characteristic for example sharp transition corresponding to the signal transition at the controlled node. For example a signal at the controlled node may have a shallow slope transition due to a large delay. Generally a sharp transition can be desired for circuit operations due to benefits such as precise timing power saving and the like. The output driving portion can generate the output signal with a sharp transition corresponding to the shallow slope transition at the controlled node.

The level restoring portion can be coupled to the controlled node to restore a voltage at the controlled node for example to a full swing level after resulting in a transition of the output node. Generally a transition of the output node can be initiated when a voltage of the controlled node reaches a transition level such as an intermediate voltage between the power supply and the ground. For example when the voltage of the controlled node is larger than the transition level the output node can have a voltage of substantially ground level when the voltage of the controlled node is smaller than the transition level the output node can have a voltage of substantially power supply level. After reaching the transition level the controlled node voltage may continue varying towards a full swing level such as the power supply level or the ground level. However due to for example large delay configurations or high frequency input the controlled node voltage may not be able to reach the full swing level before a next transition of the input node and thus distort circuit timings. In order to enable high frequency applications and a wide tunable range the level restoring portion can restore the voltage of the controlled node to the full swing level after the voltage of the controlled node reaches a transition level.

During operation the high frequency wide range fine tune delay generator may receive an input transition at the input node. The input transition may initiate a controlled transition at the controlled node. The controlled transition may have a specific delay corresponding to the input transition by suitably configuring the delay configuration portion . After the controlled transition reaches a transition level which can initiate an output transition of the output node the level restoring portion can be actuated for example by a delay technique or a feedback technique to restore the controlled node to a full swing level so as to be ready for a next transition. Further in accordance with the controlled transition the driving portion may provide the output transition at the output node with a desired transition characteristic for example a sharp transition.

The delay configuration element can include a delay element such as an inverter a buffer and the like having configurable pull up and pull down strengths. For the ease of description an inverter is used for presenting the disclosure. However the circuit example can be suitably adjusted to use other suitable delay elements. The inverter can couple the input node of the high frequency wide range fine tune delay generator to the controlled node. In the example the inverter can include a transistor pair such as a PMOS transistor MP and an NMOS transistor MN coupled as shown in . Further a group of transistors for example PMOS transistors MP MP can provide a configurable pull up strength for the inverter. Similarly a group of transistors for example NMOS transistors MN MP can provide a configurable pull down strength for the inverter. Accordingly a rise delay of the inverter can depend on the configurable pull up strength and a fall delay of the inverter can depend on the configurable pull down strength. For example when the group of PMOS transistors MP MP are configured to provide a large pull up strength to the inverter the rise delay of the inverter can be small. Similarly when the group of NMOS transistors MN MN are configured to provide a large pull down strength to the inverter the fall delay of the inverter can be small for example. In an embodiment the pull up strength and the pull down strength can be configured to be substantially the same to achieve matching rise and fall time. In another embodiment the pull up strength and the pull down strength can be configured to be different.

The group of PMOS transistors MP MP can be configured to provide a suitable pull up strength by controlling a group of switches. In the example as shown in MP is configured in a turn on state that can provide pull up current for the inverter. Additionally MP and MP can be configured in either turn on or turn off state by controlling switches S and S respectively. Therefore the transistors MP and MP can be individually controlled to provide additional pull up current to obtain the suitable pull up strength for the inverter.

Similarly the group of NMOS transistors MN MN can be configured to provide a suitable pull down strength by controlling a group of switches. In the example as shown in MN is configured in a turn on state to provide pull down current for the inverter. Additionally MN and MN can be configured in either turn on state or turn off state by controlling switches S and S respectively. Therefore the transistors MN and MN can be individually controlled to provide additional pull down current to obtain the suitable pull down strength for the inverter.

As noted the strength of the pull up current can be configured for example by determining a number of PMOS transistors MP MP that contribute to the pull up current the strength of the pull down current can be configured for example by determining a number of NMOS transistors MN MN that contribute to the pull down current.

The output driving circuit portion can be configured to generate output transitions with desired properties. For example sharp transitions can be desired to provide benefits such as precise timing power saving and the like. However signals at the controlled node can have shallow transitions due to large delays. In the example the output driving circuit portion may include an inverter and a buffer with large width length ratios. Therefore the output driving circuit portion can output a sharp transition at the output node corresponding to a slow transition at the controlled node.

The level restoring circuit portion can be coupled to the controlled node. The level restoring circuit portion can be configured to restore a full swing voltage level of the controlled node after the controlled node reaches a transition level. For example the level restoring circuit portion may include a PMOS transistor MP that can be configured to provide additional pull up strength for the inverter after the controlled node reaches a rise transition level. In addition the level restoring circuit portion may include an NMOS transistor MN that can be configured to provide additional pull down strength for the inverter after the controlled node reaches a fall transition level.

In a technique to control the MP and MN which is shown in gates of the MP and MN can be coupled to the input node via a delay path for example via a series of buffers B B. The delay path can be configured to be longer than a longest delay of the inverter which can ensure the MP or MN being actuated after the controlled node reaches a transition level. It should be noted that other suitable techniques can be applied to restore the controlled node to a full swing level.

Similar to the example shown in the high frequency wide range fine tune delay generator may include a delay configuration circuit portion an output driving circuit portion and a level restoring circuit portion coupled together as shown in . The delay configuration circuit portion and the output driving circuit portion can be configured in a similar manner as the circuit example in .

Similar to the level restoring circuit portion in the level restoring circuit portion can also include a PMOS transistor MP and an NMOS transistor MN. The PMOS transistor MP can be configured to provide additional pull up strength for restoring the controlled node to for example the supply voltage level. The NMOS transistor MN can be configured to provide additional pull down strength for restoring the controlled node to for example the ground level.

In the example showing in gates of the MP and MN which can control the states of the MP and MN can be coupled to the output node of the output driving circuit portion . Therefore the additional current providers MP or MN can be actuated when an output transition at the output node has been initiated by a controlled transition at the controlled node and feed back to the gates of the MP and MN. For example when the controlled node reaches a rise transition level due to a rise transition at the controlled node the output driving circuit portion can output a sharp fall transition correspondingly. Further the sharp fall transition of the output node can feed back to the MP and actuate the MP to provide additional pull up strength which can accelerate the controlled node to rise to a full swing level.

On the other hand when the controlled node reaches a fall transition level due to a fall transition at the controlled node the output driving circuit portion can output a sharp rise transition corresponding to the fall transition of the controlled node. Further the sharp rise transition of the output node can feed back to the MN and actuate the MN to provide additional pull down strength which can accelerate the controlled node to fall to a full swing level.

As can be seen from the above examples the level restoring circuit portions can ensure the controlled node to restore to a full swing level to prepare for a next transition after a current transition and thus avoid distortion of timing. Therefore the above circuit examples can be used in high frequency applications. In addition the above circuit examples can have a wide tunable delay range.

As shown in when the delay component is configured in the small delay configuration the controlled node can reach a full swing before the input node initiates a next transition. For example the input signal can have a first transition which is a rise transition at 1 ns and a second transition which is a fall transition at 1.75 ns as shown in . Due to the first transition the controlled node can substantially reach the ground level at about 1.2 ns before the second transition of the input node. Therefore the controlled node can start the second transition from its full swing level which is the ground level in the example.

However when the delay component is configured in the large delay configuration the controlled node may not be able to reach the full swing before the input node initiates the second transition. In the example shown in the solid line which represents the large delay configuration can not reach the ground level before the second transition as shown around 1.8 ns. Subsequently the controlled node may start the second transition which is a rise transition from a voltage level that is higher than the ground level. Thus the controlled node may reach the rise transition level in an early time and result in the output node having an early transition corresponding to the second transition of the input node which can distort circuit timing. In an example when the signal at the input node is a clock signal a duty cycle of the clock signal can be modified by the delay component which can result in circuit malfunction.

Comparing the level restoring technique can be actuated to restore the controlled node after the controlled node reaches a transition level thus the level restoring technique may have little impact on an inserted delay. In addition the level restoring technique can enable the delay component to operate in high frequency applications without timing distortion. Further the level restoring technique can enable the delay component to operate in large delay configuration without timing distortion.

It should be noted that while the above examples use configurable driving strength in the delay configuration portion other suitable configurable delay techniques can be used to implement the high frequency wide range fine tune delay generator.

In the example the delay configuration portion can include an inverter driving a configurable capacitance load. The inverter may include a transistor pair such as a PMOS transistor MP and an NMOS transistor MN. Further the delay configuration portion may include a current providing portion such as a PMOS transistor MP to provide a pull up strength and an NMOS transistor MN to provide a pull down strength in the example.

The configurable capacitance load can include multiple capacitances controlled by multiple switches such as capacitances C C controlled by switches SC SC in the example. Therefore a capacitance load at the controlled node can be configured by selectively turning on the switches SC SC.

The level restoring portion can be coupled to the controlled node to restore the control node to a full swing level after the controlled node reach a transition level. The level restoring portion can be implemented in a similar manner as the circuit examples in and in with suitable adjustments. For example as shown in the level restoring portion can include a PMOS transistor MP that can be configured to provide additional pull up strength and an NMOS transistor MN that can be configured to provide additional pull down strength. Additionally the level restoring portion may include circuit logics that can control the MP and MN such as a logic circuit including NAND1 AND1 XOR1 and a plurality of buffers represented by B B. The logic circuit can generate control signals A and B based on an output signal at the output node to control the MP and MN. Specifically the logic circuit can provide a one shot signal that can activate either the MP or MN for a specific time and de activate the MP or MN afterwards.

In step S an input node of the delay component such as a high frequency wide range fine tune delay generator may receive an input signal having an input transition. The process then proceeds to step S.

In step S the received input transition can result in a controlled transition at a controlled node of the delay component. The controlled transition can have a specific delay to the input transition according to a delay configuration of the delay component. Then the process proceeds to step S.

In step S a restoring circuit can be actuated after the controlled node reaches a transition level. The restoring circuit can restore the controlled node to a full swing level to prepare for a next transition. In an embodiment the restoring circuit can be actuated via a delay path from the input node. The delay path can be configured to actuate the restoring circuit after the controlled node reaches the transition level. In another embodiment the restoring circuit can be actuated via a feedback path from an output node of an output driving circuit. The output driving circuit can be configured to output a transition having a desired property such as a sharp transition when the controlled node reaches the transition level. Then the outputted transition can actuate the restoring circuit. Therefore the restoring circuit can be actuated after the controlled node reaches the transition level. Then the process proceeds to S and terminates.

It should be noted that step S can be skipped for example when the delay component is configured by design and manufacturing.

While the invention has been described in conjunction with the specific embodiments thereof that are proposed as examples it is evident that many alternatives modifications and variations will be apparent to those skilled in the art. Accordingly embodiments of the invention as set forth herein are intended to be illustrative not limiting. There are changes that may be made without departing from the spirit and scope of the invention.

