---

title: End-user system of preventing unauthorized rerecording of multimedia content
abstract: An end-user system for the blocking of recording digital content at during the rendering of encrypted digital multimedia files. Before the process of rendering of encrypted digital multimedia can be started all rendered media stream during playback are opened to ensure that this multimedia content is not recorded. This blocks the usage of the multimedia interfaces including devices and/or ports that can be used to store un-encrypted content that has been decrypted for the purposes of playing or rendering. The method also includes an exception, which allows recording with permission from the present invention.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07962413&OS=07962413&RS=07962413
owner: International Business Machines Corporation
number: 07962413
owner_city: Armonk
owner_country: US
publication_date: 20080407
---
This application is a divisional of prior U.S. application Ser. No. 11 201 809 filed Aug. 11 2005 now U.S. Pat. No. 7 383 228 which is a divisional of prior U.S. application Ser. No. 09 938 401 filed Aug. 23 2001 now U.S. Pat. No. 7 346 580 which is a continuation in part of application Ser. No. 09 376 102 filed Aug. 17 1999 now U.S. Pat. No. 6 611 812 which is a continuation in part of Ser. No. 09 177 096 filed Oct. 22 1998 now U.S. Pat. No. 6 389 538 which is a continuation in part of application Ser. No. 09 133 519 filed Aug. 13 1998 now U.S. Pat. No. 6 226 618. The entire disclosure of prior application Ser. No. 09 938 401 and Ser. No. 09 376 102 are herein incorporated by reference in their entirety.

All of the material in this patent application is subject to copyright protection under the copyright laws of the United States and of other countries. As of the first effective filing date of the present application this material is protected as unpublished material. However permission to copy this material is hereby granted to the extent that the copyright owner has no objection to the facsimile reproduction by anyone of the patent documentation or patent disclosure as it appears in the United States Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

The invention disclosed broadly relates to the field of rendering multimedia content on an end user system and more particularly to inhibiting the unauthorized re recording of multimedia content while playing the multimedia content on the end user system.

The use of global distribution systems such as the Internet for distribution of digital assets such as music film computer programs pictures games and other content continues to grow. At the same time owners and publishers of valuable digital content have been slow to embrace the use of the Internet for distribution of digital assets for several reasons. One reason is that owners are afraid of unauthorized copying or pirating of digital content. The electronic delivery of digital content removes several barriers to pirating. One barrier that is removed with electronic distribution is the requirement of the tangible recordable medium itself e.g. diskettes or CD ROMs . It costs money to copy digital content on to tangible media albeit in many cases less than a dollar for a blank tape or recordable CD. However in the case of electronic distribution the tangible medium is no longer needed. The cost of the tangible medium is not a factor because content is distributed electronically. A second barrier is the format of the content itself i.e. is the content stored in an analog format versus a digital format. Content stored in an analog format for example a printed picture when reproduced by photocopying the copy is of lesser quality than the original. Each subsequent copy of a copy sometimes called a generation is of less quality than the original. This degradation in quality is not present when a picture is stored digitally. Each copy and every generation of copies can be as clear and crisp as the original. The aggregate effect of perfect digital copies combined with the very low cost to distribute content electronically and to distribute content widely over the Internet makes it relatively easy to pirate and distribute unauthorized copies. With a couple of keystrokes a pirate can send hundreds or even of thousands of perfect copies of digital content over the Internet. Therefore a need exists to ensure the protection and security of digital assets distributed electronically.

Providers of digital content desire to establish a secure global distribution system for digital content that protects the rights of content owners. The problems with establishing a digital content distribution system includes developing systems for digital content electronic distribution rights management and asset protection. Digital content that is distributed electronically includes content such as print media films games programs television multimedia and music.

The deployment of an electronic distribution system provides the digital content providers the ability to achieve fast settlement of payment through immediate sales reporting and electronic reconciliation as well as gain secondary sources of revenue through redistribution of content. Since the electronic digital content distribution system is not affected by physical inventory outages or returns the digital content providers and retailers may realize reduced costs and improved margins. Digital content providers could facilitate new or augment existing distribution channels for better timed release of inventory. The transactional data from the electronic distribution system could be used to obtain information regarding consumer buying patterns as well as to provide immediate feedback on electronic marketing programs and promotions. In order to meet these goals a need exists for digital content providers to use an electronic distribution model to make digital content available to a wide range of users and businesses while ensuring protection and metering of digital assets.

Other commercially available electronic distribution systems for digital content such as real audio A2B from AT T Liquid Audio Pro from Liquid Audio Pro Corp. City Music Network from Audio Soft and others offer transmission of digital data over secured and unsecured electronic networks. The use of secured electronic networks greatly reduces the requirement of digital content providers of distributing digital to a wide audience. The use of unsecured networks such as the Internet and Web allows the digital content to arrive to an end user securely such as through the use of encryption. However once the encrypted digital content is de encrypted on the end user s machine the digital content is readily available to the end user for unauthorized re distribution. Therefore a need exists for a secure digital content electronic distribution system that provides protection of digital assets and ensures that the Content Provider s rights are protected even after the digital content is delivered to consumers and businesses. A need thus exists for rights management to allow for secure delivery licensing authorization and control of the usage of digital assets.

Another reason owners of digital content have been slow to embrace electronic distribution is their desire to maintain and foster existing channels of distribution. Most content owners sell through retailers. In the music market these U.S. retailers include Tower Records Peaches Blockbuster Circuit City and others. Many of these retailers have Web sites that allow Internet users to makes selections over the Internet and have selections mailed to the end user. Example music Web sites include tower Music Boulevard and Columbia House. The use of electronic distribution can remove the ability of the retail stores from differentiating themselves from each other and differentiate themselves from the content owners especially on the Web. Therefore a need exists to provide retailers of electronic content such as pictures games music programs and videos a way to differentiate themselves from each other and the content owners when selling music through electronic distribution.

Content owners prepare their digital content for electronic distribution through distribution sites such as electronic stores. Electronic stores on the Internet or through other online services want to differentiate themselves from each other by their product offerings and product promotions. A traditional store i.e. the non electronic non online analogs to electronic stores use product promotions product sales product samples liberal return policies and other promotional programs to differentiate themselves from their competitors. However in the online world where the content providers impose usage conditions on the digital content the ability of electronic stores to differentiate themselves may be severely limited. Moreover even if the usage conditions can be changed electronic stores are faced with the difficult task of processing the metadata associated with the digital content from the content providers to promote and sell products electronically. Electronic stores need to manage several requirements when processing the metadata. First the electronic store is required to receive the metadata associated with the digital content from the content providers. Many times parts of this metadata may be sent encrypted so the content provider must create a mechanism to decrypt the encrypted content. Second the electronic store may wish to preview metadata from the content provider either before the content is received from the content provider or after the content is received by the electronic store in order to assist with product marketing product positioning and other promotional considerations for the content. Third the electronic store is required to extract certain metadata used for promotional materials such as graphics and artist information. Often this promotional material is used directly by the electronic store in its online promotions. Fourth the electronic stores may wish to differentiate themselves from one another by modifying some of the permitted usage conditions to create different offerings of the digital content. Fifth the electronic store may have to insert or alter certain address such as URLs in the metadata to direct payment reconciliation to an account reconciliation house automatically by the purchaser without the need to go through the electronic store for payment clearance. Sixth the electronic store may need to create licenses for the permitted use of the copyrighted digital content that match usage conditions. For example the license may grant the permission to make a limited number of copies of the digital content. A license is needed to reflect the terms and conditions of the permission granted.

In light of all these requirements to process the metadata related to the digital content many electronic stores write customized software programs to handle these requirements. The time cost and testing needed to create these customized software programs can be large. Accordingly a need exists to provide a solution to these requirements.

Still another reason owners of digital content have been slow to embrace electronic distribution is the difficulty in preparing content for electronic distribution. Today many providers of content have thousands or even tens of thousands of titles in their portfolio. In a music example it is not unusual for a content owner to have a single master sound recording available on several different formats simultaneously e.g. CD tape and MiniDisc . In addition a single format can have a master sound recording re mastered or re mixed for a specific distribution channel. As an example the mixing for broadcast radio may be different than the mixing for a dance club sound track which may be different than a generally available consumer CD. Inventorying and keeping track of these different mixes can be burdensome. Moreover many owners of master recordings often times re issue old recordings in various subsequent collections such as The Best Of or in compilations for musical sound tracks to movies and other collections or compilations. As more content is offered digitally the need to re mix and encode the content for electronic distribution grows. Many times providers need to use old recording formats as guides to select the correct master sound recordings and have these sound recordings reprocessed and encoded for release for electronic distribution. This may be especially true for content providers that wish to use their old formats to assist them in re releasing the old sound recording for electronic distribution. Providers will look through databases to match up titles artists and sound recordings to set the encoding parameters. This process of manually searching databases for recording portfolios is not without its shortcomings. One shortcoming is the need to have an operator manually search a database and set the processing parameters appropriately. Another shortcoming is the possibility of operator transcription error in selecting data from a database. Accordingly a need exists to provide content providers a method to automatically retrieve associated data and master recordings for content such as audio.

Content owners prepare their digital content for electronic distribution through a process known as encoding. Encoding involves taking the content digitizing it if the content is presented in an analog format and compressing it. The process of compressing allows the digital content to be transferred over networks and stored on recordable medium more efficiently because the amount of data transmitted or stored is reduced. However compression is not without its shortcomings. Most compression involves the loss of some information and is called lossy compression. Content providers must make decisions on what compression algorithm to use and the compression level required. For example in music the digital content or song may have very different characteristics depending on the genre of the music. The compression algorithm and compression level selected for one genre may not be the optimal choice for another genre of music. Content providers may find certain combinations of compression algorithms and compression levels work very well for one genre of music say classical but provide unsatisfactory results for another genre of music such as heavy metal. Moreover audio engineers must often equalize the music perform dynamic range adjustments and perform other preprocessing and processing settings to ensure the genre of music encoded produces the desired results. The requirement to always have to manually set these encoding parameters such as setting the equalization levels and the dynamic range settings for each digital content can be burdensome. Returning to the music example a content provider for music with a collection covering a variety of musical genre would have to manually select for each song or set of songs to be encoded the desired combination of encoding parameters. Accordingly a need exists to overcome the need for manually selection of process parameters for encoding.

The process to compress content can require a large amount of dedicated computational resources especially for larger content items such as full length feature movies. Providers of compression algorithms offer various tradeoffs and advantages associated with their compression techniques. These tradeoffs include the amount of time and computational resources needed to compress the content the amount of compression achieved from the original content the desired bit rate for playback the performance quality of the compressed content and other factors. Using an encoding program which take as input a multimedia file and generate an encoded output file with no interim indication of progress or status is a problem. Moreover in many circumstances other programs are used to call or to manage an encoding program with no interim indication of progress. This leaves the calling application with no way to gauge the amount of content that has been encoded as a percentage of the entire selection of designated to be encoded. In circumstances where the calling program is trying to schedule several different programs to run at once this can be a problem. Furthermore this can be especially burdensome in cases where batches of content have been selected for encoding and the content provider wants to determine the progress of the encoding process. Accordingly a need exists to overcome these problems.

Still another reason digital content providers have been slow to adopt electronic distribution for their content is lack of standards for creating digital players on end user devices for electronically delivered content. Content providers electronic stores or others in the electronic distribution chain may want to offer customized players on a variety of devices such as PCS set top boxes hand held devices and more. A set of tools that can handle the decryption of the digital content in a tamper resistant environment that is an environment to deter the unauthorized access to the content during playing by a third party is needed. Moreover a set of tools is needed to enable an end user to manage of a local library of digital content without allowing the end user to have access to the content for uses other than what was purchased.

Still another problem is with digital content electronic distribution systems is the length of time it takes to download content over standard telephone and cable lines. It is not uncommon for music that is compressed to be downloaded over telecommunication lines to take 15 minutes or more to download over standard telephone lines. The amount of time necessary for downloading video is even higher. Although other higher bandwidth delivery systems such as cable Internet access and broadband is growing in popularity these system are still not widely available in many towns and cities. Furthermore many of the higher bandwidth delivery systems may cost both the provider of digital content and the buyer of digital content high costs because of connect time. Accordingly a need exists for a method and apparatus to delivery content in a secured manner which has many of the advantages of electronic distribution without the need for large bandwidth telecommunications connections. The providing of a solution for distribution of digital content both over telecommunications line and on computer readable may result in two disparate systems being deployed. A need exists for a system that provides the distribution of digital content either via a telecommunications line or via computer readable medium without having to duplicate the tools and components for 1 rights management for the protection of ownership rights of the content proprietor 2 transaction metering for immediate and accurate compensation and 3 an open architecture.

Further information on the background of protecting digital content can be found from the following three sources. Music on the Internet and the Intellectual Property Protection Problem by Jack Lacy James Snyder David Maher of AT T Labs Florham Park N.J. available online URL http www.a2bmusic.com about papers musicipp.htm. Cryptographically protected container called DigiBox in the article Securing the Content Not the Wire for Information Commerce by Olin Sibert David Bernstein and David Van Wie InterTrust Technologies Corp. Sunnyvale Calif. available online URL http www.intertrust.com architecture stc.html. And Cryptolope Container Technology an IBM White Paper available online URL http cyptolope.ibm.com white.htm. refer to online URL www.microsoft.com for more information .

Yet still another reason digital content providers have been slow to adopt electronic distribution is the ability for end users to make unauthorized recordings of digital content once the content has been loaded on to an end user device. This is especially problematic when the content is being played or rendered on an end user device. Typically when the digital content is played the content must be decrypted. During this instance when the digital content is decrypted unauthorized digital copies are often times recorded One method that can be used to make a digital copy is to open a recorder application such as the Microsoft Media Recorder and record what is currently being played. Accordingly a need exists to overcome this shortcomings.

Continuing further another shortcoming is that most multimedia end user systems have the ability to play a multimedia file and to record a multimedia file using audio output and audio input devices and or ports and a patch cable. During the playing or rendering of digital content the audio being played is patched from the output line of the sound card to the input line of the sound card. Accordingly a need exists that will allow for encrypted digital content to be decrypted and played while blocking the recording of the content on the end user device using audio patch cable to wavein devices and or ports i.e. multimedia interfaces.

Still another shortcoming is that some multimedia systems have devices applications have the capability of capturing media streams but not for the purposes of recording the content or these devices and or ports are incapable of recording high quality content and thus should not be confused with devices or applications attempting to capture the high quality streams being played. An example of such is a Voice Modem or Answering System application which is capable of playing or recording low bitrate audio being received over a phone line. A need exists to discriminate and determine which devices applications are authorized and unauthorized to be active during the content rendering process.

Briefly according to the present invention a method system and computer readable medium for the blocking of recording of digital Content at an end user multimedia end user system during the rendering of encrypted digital multimedia files. Before the process of rendering of encrypted digital multimedia can be started all devices and or ports capable of capturing the rendered media stream during playback are opened to ensure that this multimedia content is not recorded. This blocks the usage of the devices and or ports that can be used to store un encrypted content that has been decrypted for the purposes of playing or rendering. The method also includes an exception which allows recording with permission from the present invention.

A Table of Contents is provided for this present invention to assist the reader in quickly locating different sections in this embodiment.

II. CRYPTOGRAPHY CONCEPTS AND THEIR APPLICATION TO THE SECURE DIGITAL CONTENT ELECTRONIC DISTRIBUTION SYSTEM

The Secure Digital Content Electronic Distribution System is a technical platform that encompasses the technology specifications tools and software needed for the secure delivery and rights management of Digital Content and digital content related content to an end user client device. The End User Device s include PCS set top boxes IRDs and Internet appliances. These devices and or ports may copy the content to external media or portable consumer devices and or ports as permitted by the content proprietors. The term Digital Content or simply Content refers to information and data stored in a digital format including pictures movies videos music programs multimedia and games.

The technical platform specifies how Digital Content is prepared securely distributed through point to point and broadcast infrastructures such as cable Internet satellite and wireless licensed to End User Device s and protected against unauthorized copying or playing. In addition the architecture of the technical platform allows for the integration and migration of various technologies such as watermarking compression encoding encryption and other security algorithms as they evolve over time.

The base components of the Secure Digital Content Electronic Distribution System are 1 rights management for the protection of ownership rights of the content proprietor 2 transaction metering for immediate and accurate compensation and 3 an open and well documented architecture that enables Content Provider s to prepare content and permit its secure delivery over multiple network infrastructures for playback on any standard compliant player.

Rights management in the Secure Digital Content Electronic Distribution System is implemented through a set of functions distributed among the operating components of the system. Its primary functions include licensing authorization and control so that content is unlocked only by authorized intermediate or End User s that have secured a license and control and enforcement of content usage according to the conditions of purchase or license such as permitted number of copies number of plays and the time interval or term the license may be valid. A secondary function of rights management is to enable a means to identify the origin of unauthorized copies of content to combat piracy.

Licensing authorization and control are implemented through the use of a Clearinghouse s entity and Secure Container SC technology. The Clearinghouse s provides licensing authorization by enabling intermediate or End User s to unlock content after verification of a successful completion of a licensing transaction. Secure Containers are used to distribute encrypted content and information among the system components. A SC is a cryptographic carrier of information or content that uses encryption digital signatures and digital certificates to provide protection against unauthorized interception or modification of electronic information and content. It also allows for the verification of the authenticity and integrity of the Digital Content. The advantage of these rights management functions is that the electronic Digital Content distribution infrastructure does not have to be secure or trusted. Therefore allowing transmission over network infrastructures such as the Web and Internet. This is due to the fact that the Content is encrypted within Secure Containers and its storage and distribution are separate from the control of its unlocking and use. Only users who have decryption keys can unlock the encrypted Content and the Clearinghouse s releases decryption keys only for authorized and appropriate usage requests. The Clearinghouse s will not clear bogus requests from unknown or unauthorized parties or requests that do not comply with the content s usage conditions as set by the content proprietors. In addition if the SC is tampered with during its transmission the software in the Clearinghouse s determines that the Content in a SC is corrupted or falsified and repudiate the transaction.

The control of Content usage is enabled through the End User Player Application running on an End User Device s . The application embeds a digital code in every copy of the Content that defines the allowable number of secondary copies and play backs. Digital watermarking technology is used to generate the digital code to keep it hidden from other End User Player Application and to make it resistant to alteration attempts. In an alternate embodiment the digital code is just kept as part of the usage conditions associated with the Content . When the Digital Content is accessed in a compliant End User Device s the End User Player Application reads the watermark to check the use restrictions and updates the watermark as required. If the requested use of the content does not comply with the usage conditions e.g. the number of copies has been exhausted the End User Device s will not perform the request.

Digital watermarking also provides the means to identify the origin of authorized or unauthorized copies of Content. An initial watermark in the Content is embedded by the content proprietor to identify the content proprietor specify copyright information define geographic distribution areas and add other pertinent information. A second watermark is embedded in the Content at the End User Device s to identify the content purchaser or licensee and End User Device s specify the purchase or license conditions and date and add any other pertinent information.

Since watermarks become an integral part of the Content they are carried in the copies independent of whether the copies were authorized or not. Thus the Digital Content always contains information regarding its source and its permitted use regardless of where the content resides or where it comes from. This information may be used to combat illegal use of the Content.

As part of its rights management functions the Clearinghouse s keeps a record of all transactions where a key exchange is cleared through the Clearinghouse s . This record allows for the metering of licensing authorization and the original conditions of use. The transaction record can be reported to responsible parties such as content proprietors or Content Provider s retailers and others on an immediate or periodic basis to facilitate electronic reconciliation of transaction payments and other uses.

The Secure Digital Content Electronic Distribution System System is an open architecture with published specifications and interfaces to facilitate broad implementation and acceptance of the System in the market place while maintaining rights protection for the content proprietors. The flexibility and openness of the System architecture also enable the System to evolve over time as various technologies transmission infrastructures and devices are delivered to the marketplace.

The architecture is open regarding the nature of the Content and its format. Distribution of audio programs multimedia video or other types of Content is supported by the architecture. The Content could be in a native format such as linear PCM for digital music or a format achieved by additional preprocessing or encoding such as filtering compression or pre de emphasis and more. The architecture is open to various encryption and watermarking techniques. It allows for the selection of specific techniques to accommodate different Content types and formats and to allow the introduction or adoption of new technologies as they evolve. This flexibility allows Content Provider s to pick and evolve the technologies they use for data compression encryption and formatting within the Secure Digital Content Electronic Distribution System.

The architecture is also open to different distribution networks and distribution models. The architecture supports content distribution over low speed Internet connections or high speed satellite and cable networks and can be used with point to point or broadcast models. In addition the architecture is designed so that the functions in the End User Device s can be implemented on a wide variety of devices including low cost consumer devices. This flexibility allows Content Provider s and retailers to offer Content to intermediate or End User s through a variety of service offerings and enables the users to purchase or license Content play it back and record it on various compliant player devices.

Turning now to there is shown a block diagram illustrating an overview of a Secure Digital Content Electronic Distribution System according to the present invention. The Secure Digital Content Electronic Distribution System encompasses several business elements that comprise an end to end solution including Content Provider s or the proprietors of the Digital Content Electronic Digital Content Store s Intermediate Market Partners not shown Clearinghouse s Content Hosting Site Transmission Infrastructures and End User Device s . Each of these business elements use various components of the Secure Digital Content Electronic Distribution System . A high level description of these business elements and system components as they pertain specifically to electronic Content distribution follows.

Content Provider s or content proprietor s are owners of original Content and or distributors authorized to package independent Content for further distribution. Content Provider s may exploit their rights directly or license Content to the Electronic Digital Content Store s or Intermediate Market Partners not shown usually in return for Content usage payments related to electronic commerce revenues. Examples of Content Provider s include Sony Time Warner MTV IBM Microsoft Turner Fox and others.

Content Provider s use tools provided as part of the Secure Digital Content Electronic Distribution System in order to prepare their Content and related data for distribution. A Work Flow Manager Tool schedules Content to be processed and tracks the Content as it flows through the various steps of Content preparation and packaging to maintain high quality assurance. The term metadata is used throughout this document to mean data related to the Content and in this embodiment does not include the Content itself. As an example metadata for a song may be a song title or song credits but not the sound recording of the song. The Content would contain the sound recording. A Metadata Assimilation and Entry Tool is used to extract metadata from the Content Provider s Database or data provided by the Content Provider s in a prescribed format for a music example the Content information such as CD title artist name song title CD artwork and more and to package it for electronic distribution. The Metadata Assimilation and Entry Tool is also used to enter the Usage Conditions for the Content . The data in Usage Conditions can include copy restriction rules the wholesale price and any business rules deemed necessary. A Watermarking Tool is used to hide data in the Content that identifies the content owner the processing date and other relevant data. For an embodiment where the Content is audio an audio preprocessor tool is used to adjust the dynamics and or equalize the Content or other audio for optimum compression quality compress the Content to the desired compression levels and encrypt the Content . These can be adapted to follow technical advances in digital content compression encoding encryption and formatting methods allowing the Content Provider s to utilize best tools as they evolve over time in the marketplace.

The encrypted Content digital content related data or metadata and encrypted keys are packed in SCs described below by the SC Packer Tool and stored in a content hosting site and or promotional web site for electronic distribution. The content hosting site can reside at the Content Provider s or in multiple locations including Electronic Digital Content Store s and Intermediate Market Partners not shown facilities. Since both the Content and the Keys described below are encrypted and packed in SCs Electronic Digital Content Store s or any other hosting agent can not directly access decrypted Content without clearance from the Clearinghouse s and notification to the Content Provider s .

Electronic Digital Content Store s are the entities who market the Content through a wide variety of services or applications such as Content theme programming or electronic merchandising of Content . Electronic Digital Content Store s manage the design development business operations settlements merchandising marketing and sales of their services. Example online Electronic Digital Content Store s are Web sites that provide electronic downloads of software.

Within their services Electronic Digital Content Store s implement certain functions of the Secure Digital Content Electronic Distribution System . Electronic Digital Content Store s aggregate information from the Content Provider s pack content and metadata in additional SCs and deliver those SCs to consumers or businesses as part of a service or application. Electronic Digital Content Store s use tools provided by the Secure Digital Content Electronic Distribution System to assist with metadata extraction secondary usage conditions SC packaging and tracking of electronic content transactions. The secondary usage conditions data can include retail business offers such as Content purchase price pay per listen price copy authorization and target device types or timed availability restrictions.

Once an Electronic Digital Content Store s completes a valid request for electronic Content from an End User s the Electronic Digital Content Store s is responsible for authorizing the Clearinghouse s to release the decryption key for the Content to the customer. The Electronic Digital Content Store s also authorizes the download of the SC containing the Content . The Electronic Digital Content Store s may elect to host the SCs containing the Digital Content at its local site and or utilize the hosting and distribution facilities of another Content hosting site.

The Electronic Digital Content Store s can provide customer service for any questions or problems that an End User s may have using the Secure Digital Content Electronic Distribution System or the Electronic Digital Content Store s may contract their customer service support to the Clearinghouse s .

In an alternate embodiment the Secure Digital Content Electronic Distribution System can be used to provide Content securely to other businesses called Intermediate Market Partners. These partners may include digital content related companies offering a non electronic service such as televisions stations or video clubs radio stations or record clubs that distribute Content . These Partners may also include other trusted parties who handle material as part of making or marketing sound recordings such as record studios replicators and producers. These Intermediate Market Partners requires clearance from the Clearinghouse s in order to decrypt the Content .

The Clearinghouse s provides the licensing authorization and record keeping for all transactions that relate to the sale and or permitted use of the Content encrypted in a SC. When the Clearinghouse s receives a request for a decryption key for the Content from an intermediate or End User s the Clearinghouse s validates the integrity and authenticity of the information in the request verifies that the request was authorized by an Electronic Digital Content Store s or Content Provider s and verifies that the requested usage complies with the content Usage Conditions as defined by the Content Provider s . Once these verifications are satisfied the Clearinghouse s sends the decryption key for the Content to the requesting End User s packed in a License SC. The key is encrypted in a manner so that only the authorized user can retrieve it. If the End User s request is not verifiable complete or authorized the Clearinghouse s repudiates the request for the decryption key.

The Clearinghouse s keeps a record of all transactions and can report them to responsible parties such as Electronic Digital Content Store s and Content Provider s on an immediate periodic or restricted basis. This reporting is a means by which Content Provider s can be informed of the sale of Content and the Electronic Digital Content Store s can obtain an audit trail of electronic delivery to their customers. The Clearinghouse s can also notify the Content Provider s and or Electronic Digital Content Store s if it detects that information in a SC has been compromised or does not comply with the Content s Usage Conditions. The transaction recording and repository capabilities of the Clearinghouse s database is structured for data mining and report generation.

In another embodiment the Clearinghouse s can provide customer support and exception processing for transactions such as refunds transmission failures and purchase disputes. The Clearinghouse s can be operated as an independent entity providing a trusted custodian for rights management and metering. It provides billing and settlement as required. Examples of electronic Clearinghouse s include Secure Bank.com and Secure Electronic Transaction SET from Visa Mastercard. In one embodiment the Clearinghouse s are Web sites accessible to the End User Device s . In another embodiment the Clearinghouse s is part of the Electronic Digital Content Store s .

The End User Device s can be any player device that contains an End User Player Application described later compliant with the Secure Digital Content Electronic Distribution System specifications. These devices may include PCS set top boxes IRDs and Internet appliances. The End User Player Application could be implemented in software and or consumer electronics hardware. In addition to performing play record and library management functions the End User Player Application performs SC processing to enable rights management in the End User Device s . The End User Device s manages the download and storage of the SCs containing the Digital Content requests and manages receipt of the encrypted Digital Content keys from the Clearinghouse s processes the watermark s every time the Digital Content is copied or played manages the number of copies made or deletion of the copy in accordance with the Digital Content s Usage Conditions and performs the copy to an external media or portable consumer device if permitted. The portable consumer device can perform a subset of the End User Player Application functions in order to process the content s Usage Conditions embedded in the watermark. The terms End User s and End User Player Application are used throughout this to mean through the use or running on an End User Device s .

The Secure Digital Content Electronic Distribution System is independent of the transmission network connecting the Electronic Digital Content Store s and End User Device s . It supports both point to point such as the Internet and broadcast distribution models such as digital broadcast television.

Even though the same tools and applications are used to acquire package and track Content transactions over various Transmission Infrastructures the presentation and method in which services are delivered to the customer may vary depending on the infrastructure and distribution model selected. The quality of the Content being transferred may also vary since high bandwidth infrastructures can deliver high quality digital content at more acceptable response times than lower bandwidth infrastructures. A service application designed for a point to point distribution model can be adapted to support a broadcast distribution model as well.

The Secure Digital Content Electronic Distribution System enables the secure delivery of high quality electronic copies of Content to End User Device s whether consumer or business and to regulate and track usage of the Content .

The Secure Digital Content Electronic Distribution System could be deployed in a variety of consumer and business to business services using both new and existing distribution channels. Each particular service could use a different financial model that can be enforced through the rights management features of the Secure Digital Content Electronic Distribution System . Models such as wholesale or retail purchase pay per listen usage subscription services copy no copy restrictions or redistribution could be implemented through the rights management of the Clearinghouse s and the End User Player Application copy protection features.

The Secure Digital Content Electronic Distribution System allows Electronic Digital Content Store s and Intermediate Market Partners a great deal of flexibility in creating services that sell Content . At the same time it provides Content Provider s a level of assurance that their digital assets are protected and metered so that they can receive appropriate compensation for the licensing of Content .

II. Cryptography Concepts and their Application to the Secure Digital Content Electronic Distribution System

License Control in the Secure Digital Content Electronic Distribution System is based on the use of cryptography. This section introduces basic cryptography technologies of the present invention. The use of public key encryption symmetric key encryption digital signatures digital watermarks and digital certificates is known.

In the Secure Digital Content Electronic Distribution System the Content Provider s encrypts the content using symmetric algorithms. They are called symmetric algorithms because the same key is used to encrypt and decrypt data. The data sender and the message recipient must share the key. The shared key is referred to here as the symmetric key. The Secure Digital Content Electronic Distribution System architecture is independent of the specific symmetric algorithm selected for a particular implementation.

Common symmetric algorithms are DES RC2 and RC4. Both DES and RC2 are block cipher. A block cipher encrypts the data using a block of data bits at a time. DES is an official US government encryption standard has a 64 bit block size and uses a 56 bit key. Triple DES is commonly used to increase the security achieved with simple DES. RSA Data Security designed RC2. RC2 uses a variable key size cipher and has a block size of 64 bits. RC4 also designed by RSA Data Security is a variable key size stream cipher. A stream cipher operates on a single data bit at a time. RSA Data Security claims that eight to sixteen machine operations are required for RC4 per output byte.

IBM designed a fast algorithm called SEAL. SEAL is a stream algorithm that uses a variable length key and that has been optimized for 32 bit processors. SEAL requires about five elementary machine instructions per data byte. A 50 MHZ 486 based computer runs the SEAL code at 7.2 megabytes second if the 160 bit key used has already been preprocessed into internal tables.

Microsoft reports results of encryption performance benchmark in its Overview of CryptoAPI document. These results were obtained by an application using Microsoft s CryptoAPI running on a 120 MHZ Pentium based computer with Windows NT 4.0.

In the Secure Digital Content Electronic Distribution System symmetric keys and other small data pieces are encrypted using public keys. Public key algorithms use two keys. The two keys are mathematically related so that data encrypted with one key can only be decrypted with the other key. The owner of the keys keeps one key private private key and publicly distributes the second key public key .

To secure the transmission of a confidential message using a public key algorithm one must use the recipient s public key to encrypt the message. Only the recipient who has the associated private key can decrypt the message. Public key algorithms are also used to generate digital signatures. The private key is used for that purpose. The following section provides information on digital signatures.

The most common used public key algorithm is the RSA public key cipher. It has become the de facto public key standard in the industry. Other algorithms that also work well for encryption and digital signatures are ElGamal and Rabin. RSA is a variable key length cipher.

Symmetric key algorithms are much faster than the public key algorithms. In software DES is generally at least 100 times as fast as RSA. Because of this RSA is not used to encrypt bulk data. RSA Data Security reports that on a 90 MHZ Pentium machine RSA Data Security s toolkit BSAFE 3.0 has a throughput for private key operations encryption or decryption using the private key of 21.6 kilobits second with a 512 bit modulus and 7.4 kilobits second with a 1024 bit modulus.

In the Secure Digital Content Electronic Distribution System the issuer of SC s protects the integrity of SC s by digitally signing it. In general to create a digital signature of a message a message owner first computes the message digest defined below and then encrypt the message digest using the owner s private key. The message is distributed with its signature. Any recipient of the message can verify the digital signature first by decrypting the signature using the public key of the message owner to recover the message digest. Then the recipient computes the digest of the received message and compares it with the recovered one. If the message has not being altered during distribution the calculated digest and recovered digest must be equal.

In the Secure Digital Content Electronic Distribution System since SC s contain several data parts a digest is calculated for each part and a summary digest is calculated for the concatenated part digests. The summary digest is encrypted using the private key of the issuer of the SC s . The encrypted summary digest is the issuer s digital signature for the SC s . The part digests and the digital signature are included in the body of the SC s . The recipients of SC s can verify the integrity of the SC s and its parts by means of the received digital signature and part digests.

A one way hash algorithm is used to calculate a message digest. A hash algorithm takes a variable length input message and converts it into a fixed length string the message digest. A one way hash algorithm operates only in one direction. That is it is easy to calculate the digest for an input message but it is very difficult computationally infeasible to generate the input message from its digest. Because of the properties of the one way hash functions one can think of a message digest as a fingerprint of the message.

The more common one way hash functions are MD5 from RSA Data Security and SHA designed by the US National Institute of Technology and Standards NITS .

A digital certificate is used to authenticate or verify the identity of a person or entity that has sent a digitally signed message. A certificate is a digital document issued by a certification authority that binds a public key to a person or entity. The certificate includes the public key the name of the person or entity an expiration date the name of the certification authority and other information. The certificate also contains the digital signature of the certification authority.

When an entity or person sends a message signed with its private key and accompanied with its digital certificate the recipient of the message uses the entity s name from the certificate to decide whether or not to accept the message.

In the Secure Digital Content Electronic Distribution System every SC s except those issued by the End User Device s includes the certificate of the creator of the SC s . The End User Device s do not need to include certificates in their SC s because many End User s do not bother to acquire a certificate or have certificates issued by non bona fide Certification Authorities. In the Secure Digital Content Electronic Distribution System the Clearinghouse s has the option of issuing certificates to the Electronic Digital Content Store s . This allows the End User Device s to independently verify that the Electronic Digital Content Store s have been authorized by the Secure Digital Content Electronic Distribution System .

This document uses a drawing to graphically represent SC s that shows encrypted parts non encrypted parts the encryption keys and certificates. Referring now to is an example drawing of SC s . The following symbols are used in the SC s figures. Key is a public or private key. The teeth of the key e.g. CLRNGH for Clearinghouse indicate the key owner. PB inside the handle indicates that it is a public key thus key is a Clearinghouse public key. PV inside the handle indicates that it is a private key. Diamond shape is an End User Digital Signature . The initials indicate which private key was used to create the signature thus in EU is the End User s digital signature from table below. Symmetric key is used to encrypt content. An encrypted symmetric key object comprising a symmetric key encrypted with a PB of CLRNGH. The key on the top border of the rectangle is the key used in the encryption of the object. The symbol or text inside the rectangle indicates the encrypted object a symmetric key in this case . Another encrypted object in this example a Transaction ID encrypted object is shown. And Usage Conditions for content licensing management as described below. The SC s comprises Usage Conditions Transaction ID encrypted object an Application ID encrypted object and encrypted symmetric key object all signed with an End User Digital Signature .

The tables and diagrams below provide an overview of the encryption and decryption process used to create and recover information from SC s . The SC s that is created and decrypted in this process overview is a general SC s . It does not represent any of the specific SC s types used for rights management in the Secure Digital Content Electronic Distribution System . The process consists of the steps described in for encryption process.

The Secure Electronic Digital Content Distribution System consists of several components that are used by the different participants of the system. These participants include the Content Provider s Electronic Digital Content Store s End User s via End User Device s and the Clearinghouse s . A high level system flow is used as an overview of the Secure Digital Content Electronic Distribution System . This flow outlined below tracks Content as it flows throughout the System . Additionally it outlines the steps used by the participants to conduct the transactions for the purchase unlocking and use of the Content . Some of the assumptions made in the system flow include 

It should be understood by those skilled in the art that these assumptions can be altered to accommodate the exact nature of the Digital Content e.g. music video and program and electronic distribution systems broadcast.

The Content Identification Layer allows for the verification of the copyright and the identity of the content purchaser. The content s copyright information and identity of the content purchaser enables the source tracking of any authorized or not copy of the Content . Thus the Content Identification Layer provides a means to combat piracy.

The Content Usage Control Layer ensures that the copy of the Content is used in the purchaser s device according to the Store Usage Conditions . The Store Usage Conditions may specify the number of plays and local copies allowed for the Content and whether or not the Content may be recorded to an external portable device. The functions in the Content Usage Control Layer keep track of the content s copy play usage and update the copy play status.

The Content Formatting Layer allows for the format conversion of the Content from its native representation in the content owner s facilities into a form that is consistent with the service features and distribution means of the Secure Digital Content Electronic Distribution System . The conversion processing may include compression encoding and its associated preprocessing such as frequency equalization and amplitude dynamic adjustment. For Content which is audio at the purchaser s side the received Content also needs to be processed to achieve a format appropriate for playback or transfer to a portable device.

The Rights Management Architectural Model is shown in and this illustrates the mapping of the architectural layers to the operating components making up the Secure Digital Content Electronic Distribution System and the key functions in each layer.

The general functions associated with the Content Formatting Layer are Content Preprocessing and Compression at the Content Provider s and Content De scrambling and Decompression at the End User Device s . The need for preprocessing and the examples of specific functions were mentioned above. Content Compression is used to reduce the file size of the Content and its transmission time. Any compression algorithm appropriate for the type of Content and transmission medium can be used in the Secure Digital Content Electronic Distribution System . For music MPEG 4 Dolby AC 2 and AC 3 Sony Adaptive Transform Coding ATRAC and low bit rate algorithms are some of the typically used compression algorithms. The Content is stored in the End User Device s in compressed form to reduce the storage size requirement. It is decompressed during active playback. De scrambling is also performed during active playback. The purpose and type of scrambling will be described later during the discussion of the Content Usage Control Layer .

The Content Usage Control Layer permits the specification and enforcement of the conditions or restrictions imposed on the use of Content use at the End User Device s . The conditions may specify the number of plays allowed for the Content whether or not a secondary copy of the Content is allowed the number of secondary copies and whether or not the Content may be copied to an external portable device. The Content Provider s sets the allowable Usage Conditions and transmits them to the Electronic Digital Content Store s in a SC see the License Control Layer section . The Electronic Digital Content Store s can add to or narrow the Usage Conditions as long as it doesn t invalidate the original conditions set by the Content Provider s . The Electronic Digital Content Store s then transmits all Store Usage Conditions in a SC to the End User Device s and the Clearinghouse s . The Clearinghouse s perform Usage Conditions Validation before authorizing the Content release to an End User Device s .

The enforcement of the content Usage Conditions is performed by the Content Usage Control Layer in the End User Device s . First upon reception of the Content copy from the Content Identification Layer in the End User Device s marks the Content with a Copy Play Code representing the initial copy play permission. Second the Player Application cryptographically scrambles the Content before storing it in the End User Device s . The Player Application generates a scrambling key for each Content item and the key is encrypted and hidden in the End User Device s . Then every time the End User Device s accesses the Content for copy or play the End User Device s verifies the copy play code before allowing the de scrambling of the Content and the execution of the play or copy. The End User Device s also appropriately updates the copy play code in the original copy of the Content and on any new secondary copy. The copy play coding is performed on Content that has been compressed. That is there is no need to decompress the Content before the embedding of the copy play code.

The End User Device s uses a License Watermark to embed the copy play code within the Content . Only the End User Player Application that is knowledgeable of the embedding algorithm and the associated scrambling key is able to read or modify the embedded data. The data is invisible or inaudible to a human observer that is the data introduces no perceivable degradation to the Content . Since the watermark survives several steps of content processing data compression D to A and A to D conversion and signal degradation introduced by normal content handling the watermark stays with the Content in any representation form including analog representation. In an alternate embodiment instead of using a License Watermark to embed the copy play code within the Content the End User Player Application uses securely stored Usage Conditions .

As part of the Content Identification Layer the Content Provider s also uses a License Watermark to embed data in the Content such as to the content identifier content owner and other information such as publication date and geographic distribution region. This watermark is referred to here as the Copyright Watermark . Upon reception the End User Device s watermarks the copy of the Content with the content purchaser s name and the Transaction ID see the License Control Layer section below and with other information such as date of license and Usage Conditions . This watermark is referred to here as the license watermark. Any copy of Content obtained in an authorized manner or not and subject to audio processing that preserves the content quality carries the copyright and license watermarks. The Content Identification Layer deters piracy.

The License Control Layer protects the Content against unauthorized interception and ensures that the Content is only released on an individual basis to an End User s that has properly licensed End User Device s and successfully completes a license purchase transaction with an authorized Electronic Digital Content Store s . The License Control Layer protects the Content by double Encryption . The Content is encrypted using an encryption symmetric key generated by the Content Provider s and the symmetric key is encrypted using the public key of the Clearinghouse s . Only the Clearinghouse s can initially recover the symmetric key.

License control is designed with the Clearinghouse s as the trusted party . Before releasing permission for the License Request i.e. the Symmetric Key for the Content to an End User Device s the Clearinghouse s verifies that the Transaction and the License Authorization are complete and authentic that the Electronic Digital Content Store s has authorization from the Secure Digital Content Electronic Distribution System for the sale of electronic Content and that the End User s has a properly licensed application. Audit Reporting allows the generation of reports and the sharing of licensing transaction information with other authorized parties in the Secure Electronic Digital Content Distribution System

License control is implemented through SC Processing . SC s are used to distribute encrypted Content and information among the system operation components more about the SC s detailed structure sections below . A SC is cryptographic carrier of information that uses cryptographic encryption digital signatures and digital certificates to provide protection against unauthorized interception and modification of the electronic information or Content . It also allows for the authenticity verification of the electronic data.

License control requires that the Content Provider s the Electronic Digital Content Store s and the Clearinghouse s have bona fide cryptographic digital certificates from reputable Certificate Authorities that are used to authenticate those components. The End User Device s are not required to have digital certificates.

It is also assumed in that the Electronic Digital Content Store s has downloaded the End User Player Application to an End User Device s based on standard Web protocols. The architecture requires that the Electronic Digital Content Store s assigns a unique application ID to the downloaded Player Application and that the End User Device s stores it for later application license verification see below .

The overall licensing flow starts at the Content Provider s . The Content Provider s encrypts the Content using an encryption symmetric key locally generated and encrypts the Symmetric Key using the Clearinghouse s public key . In an alternate embodiment the symmetric key instead of being locally generated my be sent to the Content Provider s from the Clearinghouse s . The Content Provider s creates a Content SC s around the encrypted Content and a Metadata SC s around the encrypted Symmetric Key Store Usage Conditions and other Content associated information. There is one Metadata SC s and one Content SC s for every Content object. The Content object may be a compression level one same song or the Content object may be each song on the album or the Content object may be the entire album. For each Content object the Metadata SC s also carries the Store Usage Conditions associated with the Content Usage Control Layer .

The Content Provider s distributes the Metadata SC s to one or more Electronic Digital Content Store s step and the Content SC s to one or more Content Hosting Sites step . Each Electronic Digital Content Store s in turn creates an Offer SC s . The Offer SC s typically carries much of the same information as the Metadata SC s including the Digital Signature of the Content Provider s and the Certificate not shown of the Content Provider s . As mentioned above the Electronic Digital Content Store s can add to or narrow the Store Usage Conditions handled by the Control Usage Control Layer initially defined by the Content Provider s . Optionally the Content SC s and or the Metadata SC s is signed with a Digital Signature of the Content Provider s .

After the completion of the Content purchase transaction between the End User Device s and the Electronic Digital Content Store s step the Electronic Digital Content Store s creates and transfers to the End User Device s a Transaction SC s step . The Transaction SC s includes a unique Transaction ID the purchaser s name i.e. End User s not shown the Public Key of the End User Device s and the Offer SC s associated with the purchased Content . Transaction Data in represents both the Transaction ID and the End User s name not shown . The Transaction Data is encrypted with the Public Key of the Clearinghouse s . Optionally the Transaction SC s is signed with a Digital Signature of the Electronic Digital Content Store s .

Upon reception of the Transaction SC s and the Offer SC s included in it the End User Player Application running on End User Device s solicits license authorization from the Clearinghouse s by means of an Order SC s step . The Order SC s includes the encrypted Symmetric Key and Store Usage Conditions from the Offer SC s the encrypted Transaction Data from the Transaction SC s and the encrypted Application ID from the End User Device s . In another embodiment the Order SC s is signed with a Digital Signature of the End User Device s .

If the verifications are successful the Clearinghouse s decrypts the Symmetric Key and the Transaction Data and builds and transfers the License SC s to the End User Device s step . The License SC s carries the Symmetric Key and the Transaction Data both encrypted using the Public Key of the End User Device s . If any verification is not successful the Clearinghouse s denies the license to the End User Device s and informs the End User Device s . The Clearinghouse s also immediately informs the Electronic Digital Content Store s of this verification failure. In an alternate embodiment the Clearinghouse s signs the License SC s with its Digital Signature .

After receiving the License SC s the End User Device s decrypts the Symmetric Key and the Transaction Data previously received from the Clearinghouse s and requests the Content SC s step from a Content Hosting Site s . Upon arrival of the Content SC s step the End User Device s decrypts the Content using the Symmetric Key step and passes the Content and the Transaction Data to the other layers for license watermarking copy play coding scrambling and further Content processing as described previously for .

Finally the Clearinghouse s on a periodic basis transmits summary transaction reports to the Content Provider s and the Electronic Digital Content Store s for auditing and tracking purposes step .

A Secure Container SC is a structure that consists of several parts which together define a unit of Content or a portion of a transaction and which also define related information such as Usage Conditions metadata and encryption methods. SC s are designed in such a way that the integrity completeness and authenticity of the information can be verified. Some of the information in SC s may be encrypted so that it can only be accessed after proper authorization has been obtained.

SC s include at least one bill of materials BOM part which has records of information about the SC s and about each of the parts included in the SC s . A message digest is calculated using a hashing algorithm such as MD 5 for each part and then included in the BOM record for the part. The digests of the parts are concatenated together and another digest is computed from them and then encrypted using the private key of the entity creating the SC s to create a digital signature. Parties receiving the SC s can use the digital signature to verify all of the digests and thus validate the integrity and completeness of the SC s and all of its parts.

The following information may be included as records in the BOM along with the records for each part. The SC s type determines which records need to be included 

SC s may include more than one BOM. For example an Offer SC s consists of the original Metadata SC s parts including its BOM as well as additional information added by the Electronic Digital Content Store s and a new BOM. A record for the Metadata SC s BOM is included in the Offer SC s BOM. This record includes a digest for the Metadata SC s BOM which can be used to validate its integrity and therefore the integrity of the parts included from the Metadata SC s can also be validated using the part digest values stored in Metadata SC s BOM. None of the parts from the Metadata SC s have records in the new BOM that was created for the Offer SC s . Only parts added by the Electronic Digital Content Store s and the Metadata SC s BOM have records in the new BOM.

SC s may also include a Key Description part. Key Description parts include records that contain the following information about encrypted parts in the SC s 

The Rights Management Language consists of parameters that can be assigned values to define restrictions on the use of the Content by an End User s after the Content purchase. The restrictions on the use of the Content is the Usage Conditions . Each Content Provider s specifies the Usage Conditions for each of its Content items. Electronic Digital Content Store s interpret the Usage Conditions in Metadata SC s and use the information to provide select options they wish to offer their customers as well as add retail purchase information for the Content . After an End User s has selected a Content item for purchase the End User Device s requests authorization for the Content based on Store Usage Conditions . Before the Clearinghouse s sends a License SC s to the End User s the Clearinghouse s verifies that the Store Usage Conditions being requested are in agreement with the allowable Usage Conditions that were specified by the Content Provider s in the Metadata SC s .

When an End User Device s receives the Content that was purchased the Store Usage Conditions are encoded into that Content using the Watermarking Tool or encoded in the securely stored Usage Conditions . The End User Player Application running on End User Device s insures that the Store Usage Conditions that were encoded into the Content are enforced.

Metadata SC s are built by Content Provider s and are used to define Content items such as songs. The Content itself is not included in these SC s because the size of the Content is typically too large for Electronic Digital Content Store s and End User s to efficiently download the containers just for the purpose of accessing the descriptive metadata. Instead the SC s includes an external URL Uniform Resource Locators to point to the Content . The SC s also includes metadata that provides descriptive information about the Content and any other associated data such as for music the CD cover art and or digital audio clips in the case of song Content .

Electronic Digital Content Store s download the Metadata SC s for which they are authorized and build Offer SC s . In short an Offer SC s consists of some of the parts and the BOM from the Metadata SC s along with additional information included by the Electronic Digital Content Store s . A new BOM for the Offer SC s is created when the Offer SC s is built. Electronic Digital Content Store s also use the Metadata SC s by extracting metadata information from them to build HTML pages on their web sites that present descriptions of Content to End User s usually so they can purchase the Content .

The information in the Offer SC s that is added by the Electronic Digital Content Store s is typically to narrow the selection of Usage Conditions that are specified in the Metadata SC s and promotional data such as a graphic image file of the store s logo and a URL to the store s web site. An Offer SC s template in the Metadata SC s indicates which information can be overridden by the Electronic Digital Content Store s in the Offer SC s and what if any additional information is required by the Electronic Digital Content Store s and what parts are retained in the embedded Metadata SC s .

Offer SC s are included in a Transaction SC s when an End User s decides to purchase Content from an Electronic Digital Content Store s . The Electronic Digital Content Store s builds a Transaction SC s and includes Offer SC s for each Content item being purchased and transmits it to the End User Device s . The End User Device s receives the Transaction SC s and validates the integrity of the Transaction SC s and the included Offer SC s .

An Order SC s is built by the End User Device s for each Content item being purchased. Information is included from the Offer SC s from the Transaction SC s and from the configuration files of the End User Device s . Order SC s are sent to the Clearinghouse s one at a time. The Clearinghouse s URL where the Order SC s is included as one of the records in the BOM for the Metadata SC s and included again in the Offer SC s .

The Clearinghouse s validates and processes Order SC s to provide the End User Device s with everything that is required to a License Watermark and access purchased Content . One of the functions of the Clearinghouse s is to decrypt the Symmetric Keys that are needed to decrypt the watermarking instructions from the Offer SC s and the Content from the Content SC s . An encrypted Symmetric Key record actually contains more than the actual encrypted Symmetric Key . Before executing the encryption the Content Provider s may optionally append its name to the actual Symmetric Key . Having the Content Provider s name encrypted together with the Symmetric Key provides security against a pirate Content Provider s that has built its own Metadata SC s and Content SC s from legal SC s . The Clearinghouse s verifies that the name of the Content Provider s encrypted together with the Symmetric Keys matches the name of the Content Provider s in the SC s certificate.

If there are any changes required to be made to the watermarking instructions by the Clearinghouse s then the Clearinghouse s decrypts the Symmetric Key and then modifies the watermarking instructions and encrypts them again using a new Symmetric Key . The Symmetric Key is then re encrypted using the Public Key of the End User Device s . The Clearinghouse s also decrypts the other Symmetric Keys in the SC s and encrypts them again with the Public Key of the End User Device s . The Clearinghouse s builds a License SC s that includes the newly encrypted Symmetric Keys and updated watermarking instructions and sends it to the End User Device s in response to the Order SC s . If the processing of the Order SC s does not complete successfully then the Clearinghouse s returns to the End User Device s an HTML page or equivalent reporting the failure of the authorization process.

A License SC s provides an End User Device s with everything that is needed to access a Content item. The End User Device s requests the appropriate Content SC s from the Content Hosting Site s . Content SC s are built by Content Provider s and include encrypted Content and metadata parts. The End User Player Application uses the Symmetric Keys from the License SC s to decrypt the Content metadata and watermarking instructions. The watermarking instructions are then affixed into the Content and the Content is scrambled and stored on the End User Device s .

The following table shows the parts that are included in a Metadata SC s . Each box in the Parts column is a separate object included in the SC s along with the BOM with the exception of part names that are surrounded by characters . The BOM contains a record for each part included in the SC s . The Part Exists column indicates whether the part itself is actually included in the SC s and the Digest column indicates whether a message digest is computed for the part. Some parts may not be propagated when a SC s is included in other SC s as determined by the associated template although the entire original BOM is propagated. This is done because the entire BOM is required by the Clearinghouse s to verify the digital signature in the original SC s .

The Key Description Part columns of the following table define the records that are included in the Key Description part of the SC s . Records in the Key Description part define information about the encryption keys and algorithms that were used to encrypt parts within the SC s or parts within another SC s . Each record includes the encrypted part name and if necessary a URL that points to another SC s that includes the encrypted part. The Result Name column defines the name that is assigned to the part after it is decrypted. The Encrypt Alg column defines the encryption algorithm that was used to encrypt the part. The Key Id Enc Key column defines either an identification of the encryption key that was used to encrypt the part or a base64 encoding of the encrypted Symmetric Key bit string that was used to encrypt the part. The Sym Key Alg column is an optional parameter that defines the encryption algorithm that was used to encrypt the Symmetric Key when the previous column is an encrypted Symmetric Key . The Sym Key ID column is an identification of the encryption key that was used to encrypt the Symmetric Key when the Key Id Enc Key column is an encrypted Symmetric Key .

The following table shows the parts that are included in the Offer SC s . The parts with the exception of some of the metadata parts and BOM from the Metadata SC s are also included in the Offer SC s .

The following describes the terms that are used in the above Offer SC s that were not previously described for another SC s 

The following table shows the parts that are included in the Transaction SC s as well as its BOM and Key Description parts.

The following describes the terms that are used in the above Transaction SC s that were not previously described for another SC s 

When the End User Device s receives a Transaction SC s the following steps may be performed to verify the integrity and authenticity of the SC s 

The following table shows the parts that are included in the Order SC s as well as its BOM and Key Description parts. These parts either provide information to the Clearinghouse s for decryption and verification purposes or is validated by the Clearinghouse s . The parts and BOM from the Offer SC s are also included in the Order SC s . The Some string in the Part Exists column of the Metadata SC s BOM indicates that the some of those parts are not included in the Order SC s . The BOM from the Metadata SC s is also included without any change so that the Clearinghouse s can validate the integrity of the Metadata SC s and its parts.

The following describes the terms that are used in the above Order SC s that were not previously described for another SC s 

The following table shows the parts that are included in the License SC s as well as its BOM. As shown in the Key Description part the Symmetric Keys that are required for decrypting the watermarking instructions Content and Content metadata have been re encrypted by the Clearinghouse s using the End User s Public Key . When the End User Device s receives the License SC s it decrypts the Symmetric Keys and use them to access the encrypted parts from the License SC s and the Content SC s .

The following describes the terms that are used in the above License SC s that were not previously described for another SC s 

The following describes the terms used in the above Content SC s that were not previously described for another SC s 

There is no Key Description part included in the Content SC s since the keys required to decrypt the encrypted parts are in the License SC s that is built at the Clearinghouse s .

The SC s Packer is a 32 bit Windows program with an API Application Programming Interface that can be called in either a multiple or single step process to create a SC s with all of the specified parts. The SC s Packer variety of hardware platforms supporting Windows program at the Content Provider s Clearinghouse s Electronic Digital Content Store s and other sites requiring SC s Packing. A BOM and if necessary a Key Description part are created and included in the SC s . A set of packer APIs allows the caller to specify the information required to generate the records in the BOM and Key Description parts and to include parts in the SC s . Encryption of parts and Symmetric Keys as well as computing the digests and the digital signature is also be performed by the packer. Encryption and digest algorithms that are supported by the packer are included in the packer code or they are called through an external interface.

The interface to the packer for building a SC s is done by an API that accepts the following parameters as input 

In an alternate embodiment the interface to the packer for building a SC s is done by APIs that accept the following parameters as input 

Either the packer or the entity calling the packer can use a SC s template to build a SC s . SC s templates have information that define parts and records that are required in the SC s that is being built. Templates can also define encryption methods and key references to use for encrypting Symmetric Keys and encrypted parts.

The packer has an API that is used to unpack a SC s . Unpacking a SC s is the process of taking a SC s and separating it into its individual parts. The packer can then be called to decrypt any of the encrypted parts that were unpacked from the SC s .

The BOM part is created by the packer when a SC s is being built. The BOM is a text file that contains records of information about the SC s and about the parts that are included in the SC s . Each record in the BOM is on a single line with a new line indicating the start of a new record. The BOM usually includes digests for each part and a digital signature that can be used to validate the authenticity and integrity of the SC s .

The Key Description part is created by the packer to provide information about encryption keys that are needed for decryption of SC s encrypted parts. The encrypted parts may be included in the SC s being built or may be in other SC s which are referred to by the SC s being built. The Key Description part is a text file that contains records of information about the encryption keys and the parts for which the encryption keys are used. Each record in the Key Description part is on a single line with a new line indicating the start of a new record.

The Clearinghouse s is responsible for the rights management functions of the Secure Digital Content Electronic Distribution System . Clearinghouse s functions include enablement of Electronic Digital Content Store s verification of rights to Content integrity and authenticity validation of the buying transaction and related information distribution of Content encryption keys or Symmetric Keys to End User Device s tracking the distribution of those keys and reporting of transaction summaries to Electronic Digital Content Store s and Content Provider s . Content encryption keys are used by End User Device s to unlock Content for which they have obtained rights typically by a purchase transaction from an authorized Electronic Digital Content Store s . Before a Content encryption key is sent to an End User Device s the Clearinghouse s goes through a verification process to validate the authenticity of the entity that is selling the Content and the rights that the End User Device s has to the Content . This is called the SC Analysis Tool . In some configurations the Clearinghouse s may also handle the financial settlement of Content purchases by co locating a system at the Clearinghouse s that performs the Electronic Digital Content Store s functions of credit card authorization and billing. The Clearinghouse s uses OEM packages such as ICVerify and Taxware to handle the credit card processing and local sales taxes.

An Electronic Digital Content Store s that wants to participate as a seller of Content in the Secure Digital Content Electronic Distribution System makes a request to one or more of the Digital Content Provider s that provide Content to the Secure Digital Content Electronic Distribution System . There is no definitive process for making the request so long as the two parties come to an agreement. After the digital content label such as a Music Label e.g. Sony Time Warner etc. decides to allow the Electronic Digital Content Store s to sell its Content the Clearinghouse s is contacted usually via E mail with a request that the Electronic Digital Content Store s be added to the Secure Digital Content Electronic Distribution System . The digital content label provides the name of the Electronic Digital Content Store s and any other information that may be required for the Clearinghouse s to create a digital certificate for the Electronic Digital Content Store s . The digital certificate is sent to the digital content label in a secure fashion and then forwarded by the digital content label to the Electronic Digital Content Store s . The Clearinghouse s maintains a database of digital certificates that it has assigned. Each certificate includes a version number a unique serial number the signing algorithm the name of the issuer e.g. the name of Clearinghouse s a range of dates for which the certificate is considered to be valid the name Electronic Digital Content Store s the public key of the Electronic Digital Content Store s and a hash code of all of the other information signed using the private key of the Clearinghouse s . Entities that have the Public Key of the Clearinghouse s can validate the certificate and then be assured that a SC s with a signature that can be validated using the public key from the certificate is a valid SC s .

After the Electronic Digital Content Store s has received its digital certificate that was created by the Clearinghouse s and the necessary tools for processing the SC s from the digital content label it can begin offering Content that can be purchased by End User s . The Electronic Digital Content Store s includes its certificate and the Transaction SC s and signs the SC s using its Digital Signature . The End User Device s verifies that the Electronic Digital Content Store s is a valid distributor of Content on the Secure Digital Content Electronic Distribution System by first checking the digital certificate revocation list and then using the Public Key of the Clearinghouse s to verify the information in the digital certificate for the Electronic Digital Content Store s . A digital certificate revocation list is maintained by the Clearinghouse s . The revocation list may be included as one of the parts in a License SC s that is created by the Clearinghouse s . End User Device s keep a copy of the revocation list on the End User Device s so they can use it as part of the Electronic Digital Content Store s digital certificate validation. Whenever the End User Device s receives a License SC s it determines whether a new revocation list is included and if so the local revocation list on the End User Device s is updated.

The Clearinghouse s receives an Order SC s from an End User s after the End User s has received the Transaction SC s which include the Offer SC s from the Electronic Digital Content Store s . The Order SC s consists of parts that contain information relative to the Content and its use information about the Electronic Digital Content Store s that is selling the Content and information about the End User s that is purchasing the Content . Before the Clearinghouse s begins processing the information in the Order SC s it first performs some processing to insure that the SC s is in fact valid and the data it contains has not been corrupted in any way.

The Clearinghouse s begins the validation of Order SC s by verifying the digital signatures then the Clearinghouse s verifies the integrity of the Order SC s parts. To validate the digital signatures first the Clearinghouse s decrypts the Contents of the signature itself using the Public Key of the signing entity included if signed. The signing entity could be the Content Provider s the Electronic Digital Content Store s the End User Device s or any combination of them. Then the Clearinghouse s calculates the digest of the concatenated part digests of the SC s and compares it with the digital signature s decrypted Content . If the two values match the digital signature is valid. To verify the integrity of each part the Clearinghouse s computes the digest of the part and compares it to the digest value in the BOM. The Clearinghouse s follows the same process to verify the digital signatures and part integrity for the Metadata and Offer SC s parts included within the Order SC s .

The process of verification of the Transaction and Offer SC s digital signatures also indirectly verifies that the Electronic Digital Content Store s is authorized by the Secure Digital Content Electronic Distribution System . This is based on the fact that the Clearinghouse s is the issuer of the certificates. Alternately the Clearinghouse s would be able to successfully verify the digital signatures of the Transaction SC s and Offer SC s using the public key from the Electronic Digital Content Store s but only if the entity signing the SC s has ownership of the associated private key. Only the Electronic Digital Content Store s has ownership of the private key. Notice that the Clearinghouse s does not need to have a local database of the Electronic Digital Content Store s . Since the store uses the Clearinghouse Public Key to sign the Transaction SC s Offer SC s public keys.

Then the Store Usage Conditions of the Content which the End User s is purchasing are validated by the Clearinghouse s to insure that they fall within the restrictions that were set in the Metadata SC s . Recall that the Metadata SC s is included within the Order SC s .

Processing of the encrypted Symmetric Keys and of the watermarking instructions are done by the Clearinghouse s after authenticity and the integrity check of the Order SC s the validation of the Electronic Digital Content Store s and the validation of the Store Usage Conditions have been completed successfully. The Metadata SC s portion of the Order SC s typically has several Symmetric Keys located in the Key Description part that were encrypted using the Public Key of the Clearinghouse s . Encryption of the Symmetric Keys are done by the Content Provider s when the Metadata SC s was created.

One Symmetric Key are used for decrypting the watermarking instructions and the others for decrypting the Content and any encrypted metadata. Since Content can represent a single song or an entire collect of songs on a CD a different Symmetric Key may be used for each song. The watermarking instructions are included within the Metadata SC s portion in the Order SC s . The Content and encrypted metadata are in the Content SC s at a Content Hosting Site s . The URL and part names of the encrypted Content and metadata parts within the Content SC s are included in the Key Description part of the Metadata SC s portion of the Order SC s . The Clearinghouse s uses its private key to decrypt the Symmetric Keys and then encrypts each of them using the Public Key of the End User Device s . The Public Key of the End User Device s is retrieved from the Order SC s . The new encrypted Symmetric Keys are included in the Key Description part of the License SC s that the Clearinghouse s returns to the End User Device s .

During the time of processing the Symmetric Keys the Clearinghouse s may want to make modifications to the watermarking instructions. If this is the case then after the Clearinghouse s decrypts the Symmetric Keys the watermarking instructions are modified and re encrypted. The new watermarking instructions are included as one of the parts within the License SC s that gets returned to the End User Device s .

If all of the processing of the Order SC s is successful then the Clearinghouse s returns a License SC s to the End User Device s . The End User Device s uses the License SC s information to download the Content SC s and access the encrypted Content and metadata. The watermarking instructions are also executed by the End User Device s .

If the Clearinghouse s is not able to successfully process the Order SC s then an HTML page is returned to the End User Device s and displayed in an Internet browser window. The HTML page indicates the reason that the Clearinghouse s was unable to process the transaction.

In an alternate embodiment if the user has purchased a copy of the Content prior to the release date set for the sale the License s SC is returned without the Symmetric Keys . The License s SC is returned to the Clearinghouse s on or after the release date to receive the Symmetric Keys . As an example the Content Provider s allow users to download a new song prior to the release date for the song to enable customers to download the song and be prepared to play the song before a date set by the Content Provider s . This allows immediate opening of the Content on the release date without having to content for bandwidth and download time on the release date.

Optionally the Clearinghouse s uses the domain name of the End User Device s and whenever possible the credit card billing address to determine the country location of the End User s . If there are any restrictions for the sale of Content in the country where the End User s resides then the Clearinghouse s insures that the transaction being processed is not violating any of those restrictions before transmitting License SC s to the End User Device s . The Electronic Digital Content Store s is also expected to participate in managing the distribution of Content to various countries by performing the same checks as the Clearinghouse s . The Clearinghouse s does whatever checking that it can in case the Electronic Digital Content Store s is ignoring the country specific rules set by the Content Provider s .

The Clearinghouse s maintains a Audit Logs of information for each operation that is performed during Content purchase transactions and report request transactions. The information can be used for a variety of purposes such as audits of the Secure Digital Content Electronic Distribution System generation of reports and data mining.

The Clearinghouse s also maintains account balances in Billing Subsystem for the Electronic Digital Content Store s . Pricing structures for the Electronic Digital Content Store s is provided to the Clearinghouse s by the digital content labels. This information can include things like current specials volume discounts and account deficit limits that need to be imposed on the Electronic Digital Content Store s . The Clearinghouse s uses the pricing information to track the balances of the Electronic Digital Content Store s and insure that they do not exceed their deficit limits set by the Content Provider s .

The following information is typically logged by the Clearinghouse s for an End User s credit card validation 

The following information is typically logged by the Clearinghouse s when a License SC s is sent to an End User Device s 

Reports are generated by the Clearinghouse s using the information that the Clearinghouse s logged during End User s purchase transactions. Content Provider s and Electronic Digital Content Store s can request transaction reports from the Clearinghouse s via a Payment Verification Interface so they can reconcile their own transaction databases with the information logged by the Clearinghouse s . The Clearinghouse s can also provide periodic reports to the Content Provider s and Electronic Digital Content Store s .

The Clearinghouse s defines a secure electronic interface which allows Content Provider s and Electronic Digital Content Store s to request and receive reports. The Report Request SC s includes a certificate that was assigned by the Clearinghouse s to the entity initiating the request. The Clearinghouse s uses the certificate and the SC s digital signature to verify that the request originated from an authorized entity. The request also includes parameters such as time duration that define the scope of the report. The Clearinghouse s validates the request parameters to insure that requesters can only receive information for which they are permitted to have.

If the Clearinghouse s determines that the Report Request SC s is authentic and valid then the Clearinghouse s generates a report and pack it into a Report SC s to be sent to the entity that initiated the request. Some reports may be automatically generated at defined time intervals and stored at the Clearinghouse s so they can be immediately sent when a request is received. The format of the data included in the report is defined in a later version of this document.

Billing of Content can be handled either by the Clearinghouse s or by the Electronic Digital Content Store s . In the case where the Clearinghouse s handles the billing of the electronic Content the Electronic Digital Content Store s separates the End User s order into electronic goods and if applicable physical goods. The Electronic Digital Content Store s then notifies the Clearinghouse s of the transaction including the End User s billing information and the total amount that needs to be authorized. The Clearinghouse s authorizes the End User s credit card and returns a notification back to the Electronic Digital Content Store s . At the same time the Clearinghouse s is authorizing the End User s credit card the Electronic Digital Content Store s can charge the End User s credit card for any physical goods that are being purchased. After each electronic item is downloaded by the End User Device s the Clearinghouse s is notified so the End User s credit card can be charged. This occurs as the last step by the End User Device s before the Content is enabled for use at the End User Device s .

In the case where the Electronic Digital Content Store s handles the billing of the electronic Content the Clearinghouse s is not notified about the transaction until the End User Device s sends the Order SC s to the Clearinghouse s . The Clearinghouse s is still notified by the End User Device s after each electronic item is downloaded. When the Clearinghouse s is notified it sends a notification to the Electronic Digital Content Store s so that the Electronic Digital Content Store s can charge the End User s credit card.

The Secure Digital Content Electronic Distribution System provides the ability to handle retransmissions of Content . This is typically performed by a Customer Service Interface . Electronic Digital Content Store s provides a user interface that the End User s can step through in order to initiate a retransmission. The End User s goes to the Electronic Digital Content Store s site where the Content item was purchased in order to request a retransmission of the Content .

Retransmissions of Content are done when an End User s requests a new copy of a previously purchased Content item because the Content could not be downloaded or the Content that was downloaded is not usable. The Electronic Digital Content Store s determines whether the End User s is entitled to do a retransmission of the Content . If the End User s is entitled to a retransmission then the Electronic Digital Content Store s builds a Transaction SC s that includes the Offer SC s of the Content item s being retransmitted. The Transaction SC s is sent to the End User Device s and the identical steps as for a purchase transaction are performed by the End User s . If the End User Device s has a scrambled key s in the key library for the Content item s undergoing retransmission then the Transaction SC s includes information that instructs the End User Device s to delete the scrambled key s .

In the case where the Clearinghouse s handles the financial settlement of Content purchases the Electronic Digital Content Store s includes a flag in the Transaction SC s that is carried forward to the Clearinghouse s in the Order SC s . The Clearinghouse s interprets the flag in the Order SC s and proceed with the transaction without charging the End User s for the purchase of the Content .

The Content Provider s in the Secure Digital Content Electronic Distribution System is the digital content label or the entity who owns the rights to the Content . The role of the Content Provider s is to prepare the Content for distribution and make information about the Content available to Electronic Digital Content Store s or retailers of the downloadable electronic versions of the Content . To provide the utmost security and rights control to the Content Provider s a series of tools are provided to enable the Content Provider s to prepare and securely package their Content into SC s at their premises so that the Content is secure when it leaves the Content Provider s domain and never exposed or accessible by unauthorized parties. This allows Content to be freely distributed throughout a non secure network such as the Internet without fear of exposure to hackers or unauthorized parties.

The end goal of the tools for the Content Provider s is to prepare and package a Content such as a song or series of songs into Content SC s and to package information describing the song approved uses of the song content Usage Conditions and promotional information for the song into a Metadata SC s . To accomplish this the following set of tools are provided 

The purpose of this tool is to schedule track and manage Content processing activities. This application enables multi user access as well as allowing scheduling of Content and status checking from remote locations within the Intranet or extranet of the Content Provider s . This design also allows for collaborative processing where multiple individuals can be working on multiple pieces of Content in parallel and different individuals can be assigned specific responsibilities and these individuals can be spread throughout the world.

Turning now to is a block diagram of the major processes of the Work Flow Manager corresponding to . The major processes in summarizes the Content processing functions provided by the tools described in this section. The Work Flow Manager is responsible for feeding jobs to these processes and directing jobs to the next required process upon completion of its current process. This is accomplished through a series of Application Programming Interfaces APIs which each processing tool calls to 

The Work Flow Manager also has a user interface an example Work Flow Manager User Interface is illustrated in which provides the following functions 

Each process has a queue associated with it managed by the Work Flow Manager . All processes requesting jobs from the Work Flow Manager results in the Work Flow Manager either suspending the process tool in a wait state if there are no jobs currently in its associated queue or returning to the process all information about the job needed to perform its respective process. If a process is suspended in a wait state it resumes processing when a job is placed on its queue by the Work Flow Manager .

The Work Flow Manager also manages the flow or order of processing based on a set of defined rules. These rules can be customized by the Content Provider s if it has special processing requirements or configures specific defaults rules. When a process reports completion of its assigned task it notifies the Work Flow Manager of this status and the Work Flow Manager decides what queue the job gets placed on next based on the defined rules.

Comments indicating special handling instructions or notices may also be attached to the product at any of the processing steps via either the programming API or manually through the Work Flow Manager User Interface or processor interfaces.

The processes in the Work Flow Manager are implemented in Java in the preferred embodiment but other programming languages such as C C Assembler and equivalent can be used. It should be understood that the processes described below for the Work Flow Manager can run on a variety of hardware and software platforms. The Work Flow Manager as a complete system or as any of it s constitute processes may be distributed as an application program in a computer readable medium including but not limited to electronic distribution such as the web or on floppy diskettes CD ROMS and removable hard disk drives.

Turning now to is a block diagram of the major processes of the Work Flow Manager corresponding to . The following sections summarize each process and describes the information or action required by each process.

Jobs are placed on specific processes queues once all information required by that process is available and the job has already successfully completed all dependent processing. A special queue exists in the Work Flow Manager which is used to hold jobs that are not currently available for processing due to missing information or a failure that prevent further processing. These jobs are placed in the Products Awaiting Action Information Process queue. Each job in this queue has associated status to indicate the action or information it is waiting on the last process that worked on this job and the next process es this job is queued to once the missing or additional information is provided or the required action is successfully completed.

Completion of any process causes the Work Flow Manager to check this queue and determine if any job in this queue was awaiting the completion of this process action or information provided by this process. If so that job is queued to the appropriate process queue.

The Content Provider s determines those products for example a product may be a song or a collection of songs it wishes to sell and deliver electronically. The initial function of the Work Flow Manager is to enable an operator to identify these products and to place them on the queue of the New Content Request Process . The Content Provider s may specify through configuration options what information is prompted for on the product selection interface. Enough information is entered to uniquely identify the product. Optionally additional fields may be included to request manual entry of the information required to initiate the audio processing phase in parallel with the metadata acquisition. If not provided manually this information can optionally be retrieved from default configuration settings or from the Database of the Content Provider s obtained in the first stage of Metadata Processing as in Automatic Metadata Acquisition Process . The makeup and capabilities of the Content in the Database of the Content Provider s determines the Content selection process.

If the required information needed to perform a query to the Database of the Content Provider s is specified the job is processed by the Automatic Metadata Acquisition Process . In a music embodiment to properly schedule the product for audio processing the product s genre and the desired compression levels are specified as well as the audio PCM or WAV filename s . This information may be entered as part of the product selection process or selected via a customized query interface or Web browser function. Specification of this information enables the product to be scheduled for content processing.

The product selection user interface provides an option enabling the operator to specify whether the product can be released for processing or whether it are held pending further information entry. If held the job is added to the queue of the New Content Request Process awaiting further action to complete data entry and or release the product for processing. Once the product is released the Work Flow Manager evaluates the information specified and determines which processes the job is ready to be passed to.

If adequate information is provided to enable an automated query to the Database of the Content Provider s the job is queued for Automatic Metadata Acquisition Process . If the database mapping table has not been configured for the Automatic Metadata Acquisition Process the job is queued for Manual Metadata Entry Process see Automatic Metadata Acquisition Process section for details on the Database Mapping Table .

If the required general information for audio processing and the specific information required for watermarking is specified the job is queued for Watermarking Process the first phase of content processing . If any of the required information is missing when the job is released the job is queued to the queue of the Products Awaiting Action Information Process along with status indicating the information that is missing.

If the status indicates that the filename of the Content for example where the Content is audio and the PCM or WAV file is missing this may indicate that a capture or digital extraction from digital media is required. The audio processing functions require that the song files be accessible via a standard file system interface. If the songs are located on external media or a file system that is not directly accessible to the audio processing tools the files are first be copied to an accessible file system. If the songs are in digital format but on CD or Digital Tape they are extracted to a file system accessible to the audio processing tools. Once the files are accessible the Work Flow Manager User Interface is used to specify or select the path and filename for the job so that it can be released to the watermarking process assuming all other information required for watermarking has also been specified.

The Automatic Metadata Acquisition Process performs a series of queries to the Database of the Content Provider s or a staging database where data has been imported in an attempt to obtain as much of the product information as possible in an automated fashion. The Automatic Metadata Acquisition Process requires the following information prior to allowing items to be placed on its queue 

An automated query is performed to the Database of the Content Provider s to obtain the information necessary to process this Content . For example if the Content is music the information needed to perform this query could be the album name or may be a UPC or a specific album or selection ID as defined by the Content Provider s . Of the information to be obtained some is designated as required see the section on Automatic Metadata Acquisition Process for details . If all required information is obtained the job is next queued for Usage Conditions Process . If any required information is missing the song is queued for Manual Metadata Entry Process . If any jobs in the Products Awaiting Action Information Process queue are waiting for any of the information obtained in this step the jobs status is updated to indicate that it is no longer waiting for this information. If that job no longer has any outstanding requirements it is queued to the next defined queue.

The Manual Metadata Entry Process provides a means for an operator to enter missing information. It has no dependencies. Once all required information is specified the job is queued for Usage Conditions Process .

The Usage Conditions Process allows specification of product uses and restrictions. The Usage Conditions Process may require some metadata. Upon completion of Usage Conditions specifications the job is eligible to be queued for Metadata SC s Creation Process unless the Supervised Release Process option has been requested or is configured as the default in the Work Flow Manager rules. In that case the job is queued for Supervised Release Process . Before queuing to Metadata SC s Creation Process the Work Flow Manager will first assure that all dependencies for that process have been met see below . If not the job is queued to the Products Awaiting Action Information Process .

The Supervised Release Process allows a quality check and validation of information specified for the digital content product. It does not have any dependencies. Comments previously attached to the job at any stage of the processing for this product can be reviewed by the Supervisor and appropriate action taken. After reviewing all information and comments the Supervisor has the following options 

The Metadata SC s Creation Process gathers together all the information collected above as well as other information required for the Metadata SC s and calls the SC s Packer Process to create the Metadata SC s . This tool requires the following as input 

This last dependency requires that the associated audio objects completed the audio processing phase before the Metadata SC s can be created. Upon completion of the Metadata SC s Creation Process the job is queued to either the queue for Final Quality Assurance Process or Content Dispersement Process based on defined work flow rules.

The Watermarking Process adds copyright and other information to the Content . For an embodiment where the Content is a song this tool requires the following as input 

Upon completion of the Watermarking Process the job is queued for Preprocessing and Compression Process if its required input is available or otherwise queued to the Products Awaiting Action Information Process .

The Preprocessing and Compression Process encodes the Content to the specified compression level performing any required preprocessing first. Queuing a job to this queue actually create multiple queue entries. A job is created for each compression level of the product desired. The encoding processes can be performed in parallel on multiple systems. This tool requires the following input 

Upon completion of the encoding process the jobs are queued to the Content Quality Control Process if configured by the work flow rules. If not the jobs are queued for Encryption Process .

If third party providers of encoding tools do not provide a method to display the percentage of the Content such as audio that has been processed or a method to indicate the amount of Content that has been encoded as a percentage of the entire selection of Content selected in there is shown a flow diagram of a method to determine the encoding rate of Digital Content for the Content Preprocessing and Compression tool of . The method begins with the selection of the desired encoding algorithm and a bit rate step . Next a query is made to determine if this algorithm and encoding rate has a previously calculated rate factor step . The rate factor is the factor used to determine the rate of compression for a specific encoding algorithm and a specific bit rate. If no previously calculated rate factor is stored a sample of the Content is encoded for a predetermined amount of time. The predetermined period of time in the preferred embodiment is a few seconds. This rate of encoding for a predetermined period of time is used to calculate a new rate factor RCalculating a new rate factor Rknowing the amount of time and the amount of Content encoded is R length of Digital Content encoded amount of time step . The Content is encoded and the encoding status is displayed using the previously calculate rate factor R step . This encoding rate factor Ris then stored step for future use for this encoding algorithm and encoding bit rate. If the selected algorithm has a previously calculated rate factor R step . The Content is encoded and the progression displayed using the previously calculated rate factor R step . In the meantime a current rate factor Ris calculated for this selected algorithm and bit rate step . This current rate factor Ris used to update the stored rate factor R AVERAGE OF R R step . The iterative update of the rate factor enables the determination of the encoding rate to become more and more accurate with each subsequent use for a particular encoding algorithm and bit rate. The new rate Ris then stored for future use step . The updating of Rmay not be made if the current rate factor Ris out range for the previously stored rate factor Rby a given range or threshold.

The display of the encoding status can then be presented. The encoding status includes along with the current encoding rate the display of the percentage of the total Content displayed as a progression bar based on the encoding rate and the total length of the file for the Content . The encoding status can also include the time remaining for the encoding. The time remaining for the encoding can be calculated by dividing the encoding rate calculated Rby the total length of the file for Content . The encoding status can be transferred to another program that may invoke the calling process. This can help supervisory programs to encoding or co dependent programs on encoding be operated and be batched for processing more efficiently. It should be understood in an alternative embodiment that encoding can include the step of watermarking.

The Content Quality Control Process is similar in function to the Supervised Release Process . It is an optional step allowing someone to validate the quality of the content processing performed thus far. This has no dependencies other than completion of the Watermarking Process and the encoding portion of the Preprocessing and Compression Process . Upon completion of the Content Quality Control Process the following options are available 

The last option requires that the unencoded watermarked version of the song file remain available until after Content Quality Control Process .

The Encryption Process calls the appropriate Secure Digital Content Electronic Distribution Rights Management function to encrypt each of the watermarked encoded song files. This process has no dependencies other than completion of all other audio processing. Upon completion of the Encryption Process process the job is queued for Content SC s Creation Process .

The Content SC s Creation Process Process may require some metadata files to be included in the Content SC s . If files other than the Content are required the files are gathered and the SC s Packer Process is called to create a Content SC s for each compression level of the Content e.g. a song created. Upon completion of the Content SC s Creation Process the song is queued to either the Final Quality Assurance Process or Content Dispersement Process queue based on defined work flow rules.

Final Quality Assurance Process is an optional step that allows a cross reference check between the associated Metadata and Content SC s to verify that they match up correctly and that all information and Content contained therein are correct. Upon completion of Final Quality Assurance Process the jobs are queued for Content Dispersement Process . If a problem is found the job in most cases has to be re queued to the failing stage. Rework at this stage is much more costly since the product has to go through re encryption and repacking in addition to the reprocessing required to correct the problem. It is highly recommended that the prior assurance stages be used to assure the quality of the Content and accuracy and completeness of the information.

The Content Dispersement Process Process is responsible for transferring the SC s to the appropriate hosting sites. After the successful transfer of the SC s the job completion status is logged and the job is deleted from the queue. If a problem occurs in transferring the SC s after a defined number of retries the job is flagged in the Workflow Manager Tool as having failed along with the error encountered.

The Content selection operator inputs a new product and it starts out queued onto A1 New Content Request Process .

Metadata consists of the data describing the Content for example in music title of the recording artist author composer producer and length of recording. The following description is based upon Content being music but it should be understood by those skilled in the art that other content types e.g. video programs multimedia movies and equivalent are within the true scope and meaning of the present invention.

This Subsystem brings together the data the Content Provider s provides to the Electronic Digital Content Store s to help promote the sale of the product e.g. for music sample clips by this artist history of this artist list of albums on which this recording appears genres associated with this artist and or product the data the Content Provider s provides to the End User s with the purchased product e.g. artist producer album cover track length and the different purchase options the Usage Conditions the Content Provider s wants to offer the End User s . The data is packaged into a Metadata SC s and made available to the Electronic Digital Content Store s . To accomplish this the following tools are provided 

These tools enable Content Provider s to implement the processes described above for Work Flow Manager . Tools described here are a toolkit based on Java in the preferred embodiment but other programming languages such as C C Assembler and equivalent can be used.

The Automatic Metadata Acquisition Tool provides a user the ability to implement the Automatic Metadata Acquisition Process described above. The Automatic Metadata Acquisition Tool is used to access the Database of the Content Provider s and to retrieve as much data as possible without operator assistance. Configuration methods are available to automate this process. The Content Provider s can tailor the default metadata template to identify the types of data this Content Provider s wants to provide to End User s e.g. composer producer sidemen track length and the types of promotional data the Content Provider s provides to the Electronic Digital Content Store s e.g. for a music example sample clips by this artist a history of this artist the list of albums on which this recording appears genres associated with this artist . The default metadata template includes data fields which are required by the End User Device s data fields which can be optionally provided to the End User Device s and a sample set of data fields targeted to the Electronic Digital Content Store s that promote the artist album and or single.

To extract the template data fields from the Database of the Content Provider s the Automatic Metadata Acquisition Tool uses a table that maps the type of data e.g. composer producer a biography of the artist to the location within the database where the data can be found. Each of the Content Provider s help specify that mapping table for their environment.

The Automatic Metadata Acquisition Tool uses a metadata template of the Content Provider s and mapping table to acquire whatever data is available from the Databases of the Content Provider s . The status of each product is updated with the result of the Automatic Metadata Acquisition Process . A product which is missing any required data is queued for Manual Metadata Entry Process otherwise it is available for packing into a Metadata SC s .

The Manual Metadata Entry Tool provides a user the ability to implement the Manual Metadata Entry Process described above. The Manual Metadata Entry Tool allows any properly authorized operator to provide the missing data. If the operator determines that the missing data is unavailable the operator can attach a comment to the product and request supervised release. The Content Provider s may require for quality assurance reasons that the product undergo supervised release. Once all the required data is present and if supervised release has not been requested then the product is available for packing into a Metadata SC s .

The Usage Conditions Tool provides a user the ability to implement the Usage Conditions Process described above. The process of offering Content for sale or rent limited use using electronic delivery involves a series of business decisions. The Content Provider s decides at which compression level s the Content is made available. Then for each compressed encoded version of the Content one or more usage conditions are specified. Each usage condition defines the rights of the End User s and any restrictions on the End User s with regard to the use of the Content .

As part of Content Processing Tools a set of usage conditions End User s rights and restrictions is attached to the product.

The Content Provider s may decide to test the North American market s acceptance to the re release of the children s song by a popular children s vocalist during the fourth quarter 1997. The test will make the song available in two different compression encoding versions 384 Kbps and 56 Kbps. The 384 Kbps version can be bought and one copy made onto MiniDisc or rented for two weeks while the 56 Kbps version can only be bought and no copies made . The watermarking instructions is the same for any purchase rental and the Content Provider s wants the Clearinghouse s to count every copy made. This would create Usage Conditions as follows 

Below are some of the kinds of data that the Metadata Assimilation and Entry Tool gathers for inclusion into the Metadata SC s . An attempt has been made to group the data into SC s parts by function and destination.

Supervised Release Tool provides a user the ability to implement the Supervised Release Process described above. An individual designated by the Content Provider s as having supervised release authority may call up a product awaiting supervised release i.e. a product on the queue of the Supervised Release Process examine its Contents and its accompanying comments and either

In another embodiment after the creation of the SC s there is another optional quality assurance step where the Content of the SC s can be opened and examined for completeness and accuracy and at that time final approval can be given or denied for the product s release to the retail channel.

The Content Processing Tools is actually a collection of software tools which are used to process the digital content file to create watermarked encoded and encrypted copies of the content. The tools makes use of industry standard digital content processing tools to allow pluggable replacement of watermarking encoding and encryption technologies as they evolve. If the selected industry tool can be loaded via a command line system call interface and passed parameters or provides a toolkit wherein functions can be called via a DLL interface the content processing can be automated to some degree. A front end application to each tool queries the appropriate queue in the Content Processing Tools for the next available job retrieves the required files and parameters and then loads the industry standard content processing tool to perform the required function. Upon completion of the task manual update to the queue may be required if the tool does not report terminating status.

A generic version of the Content Processing Tools is described but customization is possible. The Content Processing Tools can be written in Java C C or any equivalent software. The Content Processing Tools can be delivered by any computer readable means including diskettes CDS or via a Web site.

The Watermarking Tool provides a user the ability to implement the Watermarking Process as described above. This tool applies copyright information of the Content owner to the song file using audio Watermarking technology. The actual information to be written out is determined by the Content Provider s and the specific watermarking technology selected. This information is available to the front end Watermarking Tool so that it can properly pass this information to the watermarking function. This imposes a synchronization requirement on the Metadata Assimilation and Entry Tool to assure that it has acquired this information prior to for example allowing the song s audio file to be processed. This song will not be available for audio processing until the watermarking information has been obtained.

The watermark is applied as the first step in audio processing since it is common to all encodings of the song created. As long as the watermark can survive the encoding technology the watermarking process need only occur once per song.

Various watermarking technologies are known and commercially available. The front end Watermarking Tool though is capable of supporting a variety of industry Watermarking Tools.

The Preprocessing and Compression Tool provides a user the ability to implement the Preprocessing and Compression Process as described above. Audio encoding involves two processes. Encoding is basically the application of a lossy compression algorithm against for a music content example a PCM audio stream. The encoder can usually be tuned to generate various playback bit stream rates based on the level of audio quality required. Higher quality results in larger file sizes and since the file sizes can become quite large for high quality Content download times for high quality Content can become lengthy and sometimes prohibitive on standard 28 800 bps modems.

The Content Provider s may therefore choose to offer a variety of digital content qualities for download to appease both the impatient and low bandwidth customers who don t want to wait hours for a download and the audiophile or high bandwidth customers who either only buys high quality Content or has a higher speed connection.

Compression algorithms vary in their techniques to generate lower bit rate reproductions of Content . The techniques vary both by algorithm i.e. MPEG AC3 ATRAC and by levels of compression. To achieve higher levels of compression typically the data is re sampled at lower sampling rates prior to being delivered to the compression algorithm. To allow for more efficient compression with less loss of fidelity or to prevent drastic dropout of some frequency ranges the digital content may sometimes require adjustments to equalization levels of certain frequencies or adjustments to the dynamics of the recording. The content preprocessing requirements are directly related to the compression algorithm and the level of compression required. In some cases the style of Content e.g. musical genre can be successfully used as a base for determining preprocessing requirements since songs from the same genre typically have similar dynamics. With some compression tools these preprocessing functions are part of the encoding process. With others the desired preprocessing is performed prior to the compression.

Besides the downloadable audio file for sale each song also has a Low Bit Rate LBR encoded clip to allow the song to be sampled via a LBR streaming protocol. This LBR encoding is also the responsibility of the Content Processing Tools . This clip is either provided by the Content Provider s as a separate PCM file or as parameters of offset and length.

As with watermarking it is hoped that the encoding tools can be loaded via a DLL or command line system call interface and passed all the required parameters for preprocessing and compression. The front end Encoding Tool may have a synchronization requirement with the Metadata Assimilation and Entry Tool for example if the content is music and if it is determined that the song s genre is acquired from the Database of the Content Provider s prior to performing any audio preprocessing. This depends on the encoding tools selected and how indeterminate the genre for the song is. If the Content Provider s varies the choice of encoded quality levels per song this information is also be provided prior to the encoding step and agrees with the metadata being generated by the Metadata Assimilation and Entry Tool .

A variety of high quality encoding algorithms and tools are known today. The front end Encoding Tool though is capable of supporting a variety of industry encoding tools.

Turning now to is shown a flow diagram of one embodiment for the Automatic Metadata Acquisition Tool of according to the present invention. The process starts with reading an identifier from the media the Content Provider s is examining. One example of content in an audio CD embodiment. In an audio CD embodiment the following codes may be available Universal Price Code UPC International Standard Recording Code ISRC International Standard Music Number ISMN . This identifier is read in the appropriate player for the content for example an audio CD Player for audio CD DVD player for DVD movie DAT recorder for DAT recording and equivalent step . Next this Identifier is used to index a Database for the Content Provider s step . Some or all of the information required by the Work Flow Manager Process as described in is retrieved in Database and any other related sources step . This information can include the Content and the metadata related to it. In step the additional information retrieved is used to start the Work Flow Manager for creating electronic Content . It should be understood that several selections of media such as several audio CDS can be queued up so as to enable the Automatic Metadata Acquisition Tool to create a series of Content for electronic distribution. For example all the Content could be created from a series of CDS or even selected tracks from one or more CDS examined by the Content Provider s .

In an alternate embodiment the preprocessing parameters can be retrieve from the Database of the Content Provider s automatically. Referring now to is a flow diagram of a method to automatically set the Preprocessing and Compression parameters of the Preprocessing and Compression Tool of according to the present invention. In this embodiment. the Content is music. In step music Content is selected to be encoded in Content Processing Tools . The genre of the music selected is determined step . This can be entered manually or by using other meta data available such as the additional data retrieved from the process described in . The audio compression level and audio compression algorithms selected are than examined step . Next a lookup is made by genre compression settings and compression algorithms of what compression parameters should be used in the Preprocessing and Compression Process .

The Content Quality Control Tool provides a user the ability to implement the Content Quality Control Process as described above. This is an optional Content Processing Tool and provides an opportunity for a quality control technician to review the encoded and watermarked content files and approve or reject the content files based on quality judgments. He can re encode the content making manual preprocessing adjustments until the quality is adequate or can flag the song for reprocessing and attach a note describing the problem.

This process step can be configured by the Content Provider s as an optional or required step of the content processing work flow. An additional optional Final Quality Assurance Process step is provided after packaging of all the SC s for this content e.g. each SC s for songs on a CD at which time the quality of the content encoding can be tested but catching a problem early prior to encryption and packaging allows for more efficient content processing. It is therefore highly desirable that the content quality be assured at this step as opposed to waiting until final completion of all processing.

The Encryption Tool provides a user the ability to implement the Encryption Process as described above. Content encryption is the final step of the Content Processing Tools . Each of the versions of the content that were created by the Encoding Tool is now encrypted. The encryption tool is a function of the SC s Packer. The SC s Packer is called to encrypt the song and returns the generated encryption key used. This key is later passed into the SC s Packer for use in creation of the Metadata SC s .

Once all metadata has been gathered the Content SC s Creation Tool groups the metadata into categories based on their intended use. These groups of metadata are written into files to be passed in to the SC s Packer Tool as Metadata parts for the Metadata SC s . Each part file has unique processing requirements. Once the associated songs have been processed and encrypted and the target destination URL of Content Hosting Site s has been determined the Content SC s for the Content are ready to be created. The Content which have completed processing and have met all the requirements described above are queued for packing in the packer queue of the Work Flow Manager .

The Content SC s Creation Tool now retrieves all the required files created by the previous steps of the Metadata Assimilation and Entry Tool and calls the SC s Packer functions to create the Metadata SC s and Content SC s . This process creates a single Metadata SC s and multiple Content SC s for each song. For example if the content is music each of the audio files created during audio processing for the various quality levels of the full song is packed into separate Content SC s . The audio file created for the sample clip is passed as a metadata file to be included in the Metadata SC s .

The Final Quality Assurance Tool provides a user the ability to implement the Final Quality Assurance Process as described above. Once all the SC s have been built for a content file the content is available for a final quality assurance check. Quality assurance can be performed at various stages of the Content preparation process. The Content Provider s can choose to perform quality assurance as each major step is completed to prevent excessive rework later or may choose to wait until all audio preparation processes are complete and perform quality assurance on everything at once. If the latter is chosen quality assurance is performed at this point upon completion of the creation of the SC s . This tool allows each SC s for the song to be opened examined and the audio played.

Any problem discovered even minor text changes requires that the SC s be rebuilt due to internal security features of SC s . To avoid unnecessary re processing time it is highly recommended that the interim quality assurance steps be utilized to assure accuracy of the metadata and that this specific quality assurance step be reserved for validating appropriate cross references between the SC s associated with this song. If problems are found the assurer can enter a problem description to be attached to the song and have it re queued to the appropriate processing queue for reprocessing. Status is updated appropriately in the Work Flow Manager to indicate the status of all related components of the song. If no problems are discovered the Content is marked or flagged as ready for release.

The Content Dispersement Tool provides a user the ability to implement the Content Dispersement Process as described above. Once the Content has been approved for release the SC s for the Content are placed in the queue of the Content Dispersement Process. The Content Dispersement Tool monitors the queue and performs immediate transfer of the SC s files or batch transfer of a group of SC s files based on the configuration settings provided by the Content Provider s . The Content Provider s can also optionally configure the Content Dispersement Tool to automatically hold all SC s in this queue until they are manually flagged for release. This allows the Content Provider s to prepare content in advance of their scheduled release date and hold them until they wish to release them e.g. a new song movie or game. The SC s can also control access to Content based on a defined release date so there is no requirement for the Content Provider s to actually hold up delivery of the SC s but this manual release option can still be used for this purpose or used to manage network bandwidth required to transfer these large files.

When flagged for release the Content SC s for the Content are transferred via FTP to the designated Content Hosting Site s . The Metadata SC s is transferred via FTP to the Content Promotions Web Site . Here the SC s are staged to a new Content directory until they can be processed and integrated into the Content Promotions Web Site .

To most effectively disperse information on what the Content Provider s is making available for sale via digital download and to get the necessary files to the Electronic Digital Content Store s to enable it to make this Content available for download to its customers each Content Provider s should have a secure web site housing this information. This is similar to the method used today by some Content Provider s to make promotional content available to their retailers and others with a need for this information. In the case where this type of service already exists an additional section can be added to the web site where Electronic Digital Content Store s can go to see a list of the content available for sale via download.

The Content Provider s has complete control over the design and layout of this site or can choose to use a turnkey web server solution provided as part of the toolkit for Secure Digital Content Electronic Distribution System . To implement their own design for this service the Content Provider s need only provide links to the Metadata SC s for Electronic Digital Content Store s who access their site. This is accomplished using the toolkit for the Secure Digital Content Electronic Distribution System . The selection process and what information is shown is the discretion of the Content Provider s .

Metadata SC s received into a new content directory via FTP from the Content Dispersement Tool is processed by the Content Promotions Web Site . These containers can be opened with the SC s Preview Tool to display or extract information from the container. This information can then be used to update HTML Web pages and or add information to a searchable database maintained by this service. The SC s Preview Tool is actually a subset of the Content Acquisition Tool used by the Electronic Digital Content Store s to open and process Metadata SC s . See the Content Acquisition Tool section for more details. The Metadata SC s file should then be moved to a permanent directory maintained by the Content Promotions Web Site .

Once the Metadata SC s has been integrated into the Content Promotions Web Site its availability is publicized. The Content Provider s can send a notification to all subscribing Electronic Digital Content Store s as each new Metadata SC s is added to the site or can perform a single notification daily or any defined periodicity of all Metadata SC s added that day or period . This notification is performed via a standard HTTP exchange with the Electronic Digital Content Store s Web Server by sending a defined CGI string containing parameters referencing the Metadata SC s added. This message is handled by the Notification Interface Module of the Electronic Digital Content Store s which is described later.

The Entertainment Industry produces thousands of content titles such as CDS movies and games every year adding to the tens of thousands of content titles that are currently available. The Secure Digital Content Electronic Distribution System is designed to support all of the content titles available in stores today.

The numbers of content titles that the Secure Digital Content Electronic Distribution System may eventually download to customers on a daily basis is in the thousands or tens of thousands. For a large number of titles this requires a large amount of bandwidth. The computer disk space and bandwidth needs call for a distributed scalable implementation with multiple Content Hosting Site s . The system also supports customers all over the world. This requires overseas sites to speed delivery to the global customers.

Content hosting on the Secure Digital Content Electronic Distribution System is designed to allow the Content Provider s to either host their own Content or share a common facility or a set of facilities.

Content hosting on the Secure Digital Content Electronic Distribution System consists of multiple Content Hosting Site s that collectively contain all of the Content offered by the Secure Digital Content Electronic Distribution System and several Secondary Content Sites not shown that contain the current hot hits offered by the Content Provider s . The number of Content Hosting Site s changes depending on the number of End User s using the system. The Secondary Content sites host a limited number of songs but they will represent a large percentage of the bandwidth used on the system. The secondary sites are brought on line as the volume on the primary sites increases to the point of maximum capacity. The secondary sites can be located close to Network Access Points NAPs which helps speed up download times. They may also be placed in different geographic areas around the world to speed up download times.

Should the Content Provider s choose to host all of their Content in their own system they can act as a single Content Hosting Site with or without additional Secondary Content Sites. This allows them to build their own scalable distributed system. In another embodiment Electronic Digital Content Store s can also act as Content Hosting Site s for certain Content . This embodiment requires a special financial agreement between the Electronic Digital Content Store s and the Content Provider s .

Content is added to the Content Hosting Site s via FTP or HTTP by the Content Disbursement Tool described in the Content Provider s Section of this specification or via offline means such as content delivery on tape CD Rom flash or other computer readable media. The Metadata SC s created by the Content Provider s contain a field that indicates the URL locating the Content SC s for this Content . This URL corresponds to a Content Hosting Site s . Electronic Digital Content Store s can override this URL if allowed by the Content Provider s in the Offer SC s . The End User Device s communicates to this Content Hosting Site s when it wants to download the Content SC s .

The End User Device s initiates the request for a Content SC s by sending the License SC s to the Content Hosting Site s . This is the same License SC s returned by the Clearinghouse s . The Digital Signature of the License SC s can be verified to determine if it is a valid License SC s . If it is a valid License SC s either the download is initiated or the download request may be redirected to another Content Hosting Site s .

For the Secure Digital Content Electronic Distribution System the decision of which site should be used to download the Content is made by the primary content site that received the initial request for a Content SC s . This site uses the following information to make this decision 

Before transmitting the Content SC s to the End User Device s analysis and verifications are performed on the End User s request. A database is kept of all of the License SC IDs that have been used to download Content . This database can be checked to ensure that the End User Device s only makes one request for each piece of Content purchased. This prevents malicious users from repeatedly accessing the Content Hosting Site s in hopes of slowing down the Content Hosting Site s and prevents unauthorized download of the Content SC s .

The promotion and demotion of Content to the Secondary Content sites is done periodically based on customer demand for the individual pieces of Content .

The Content Hosting Router not shown resides in the Content Hosting Site s and receives all requests from End User s wanting to download Content . It performs validation checks on the End User s request to ensure they indeed bought the Content . A database is maintained on the status of the Secondary Content Sites that includes what Content is on them and their current status. This current status includes the amount of activity on the sites and whether a site is down for maintenance.

The only interface to the Content Hosting Router is the License SC s that is sent by the End User Device s when Content is required to be downloaded. The License SC s includes information that indicates the user is allowed to download the Content .

The Secondary Content Sites not shown host the popular Content of the Secure Digital Content Distribution System . These sites are geographically dispersed across the world and are located near Network Access Points NAPs to improve download times. These sites are added to the system as demand on the primary Content Hosting Site s nears maximum capacity.

Electronic Digital Content Store s are essentially the retailers. They are the entities who market the Content to be distributed to the customer. For distribution of Content this would include Digital Content Retailing Web Sites Digital Content Retail Stores or any business who wishes to get involved in marketing electronic Content to consumers. These businesses can market the sale of electronic Content only or can choose to just add the sale of electronic goods to whatever other merchandise they currently offer for sale. Introduction of downloadable electronic goods into the service offering of the Electronic Digital Content Store s is accomplished via a set of tools developed for the Electronic Digital Content Store s as part of the Secure Digital Content Electronic Distribution System .

The tools are designed to allow flexibility in how the Electronic Digital Content Store s wishes to integrate sale of downloadable electronic Content into its service. The tools can be used in such a way as to request that all financial settlements for downloadable Content purchased be handled by the Clearinghouse s although this is not required. These tools also enable Electronic Digital Content Store s to completely service their customers and handle the financial transactions themselves including providing promotions and special offers. The tools enable the Electronic Digital Content Store s to quickly integrate the sale of downloadable Content into its existing services. In addition the Electronic Digital Content Store s is not required to host the downloadable Content and does not have to manage its dispersement. This function is performed by the Content Hosting Site s selected by the Content Provider s .

The tools for the Electronic Digital Content Stores s are implemented in Java in the preferred embodiment but other programming languages such as C C Assembler and equivalent can be used. It should be understood that the tools described below for the Electronic Digital Content Stores s can run on a variety of hardware and software platforms. The Electronic Digital Content Stores s as a complete system or as any of it s constitute components may be distributed as an application program in a computer readable medium including but not limited to electronic distribution such as the web or on floppy diskettes CD ROMS and removable hard disk drives.

In another embodiment the components of the Electronic Digital Content Stores s is part of a programmer s software toolkit. This toolkit enables predefined interfaces to the components of the generic Electronic Digital Content Stores s components and tools discussed below. These predefined interfaces are in the form of APIs or Application Programming Interfaces. A developer using these APIs can implement any of the functionality of the components from a high level application program. By providing APIs to these components a programmer can quickly develop a customized Electronic Digital Content Stores s without the need to re created these functions and resources of any of these components.

Electronic Digital Content Store s are not limited to Web based service offerings. The tools provided are used by all Electronic Digital Content Store s wishing to sell downloadable electronic Content regardless of the transmission infrastructure or delivery mode used to deliver this Content to End User s . Broadcast services offered over satellite and cable infrastructures also use these same tools to acquire package and track electronic Content sales. The presentation of electronic merchandise for sale and the method in which these offers are delivered to the End User s is the main variant between the broadcast based service offering and the point to point interactive web service type offering.

Point to Point primarily means a one to one interactive service between the Electronic Digital Content Store s and the End User Device s . This typically represents an Internet web based service provided via telephone or cable modem connection. Networks other than the Internet are supported in this model as well as long as they conform to the Web Server Client Browser model. is a block diagram illustrating the major tools components and processes of an Electronic Digital Content Store s .

The Secure Digital Content Electronic Distribution System not only creates new online businesses but provides a method for existing businesses to integrate the sale of downloadable electronic Content to their current inventory. The suite of tools provided to the Electronic Digital Content Store s simplify this integration effort. The Content Acquisition Tool and SC s Packer Tool provides a method for the Electronic Digital Content Store s to acquire information from the participating Content Provider s on what they have available for sale and to create the files required to reference these downloadable objects as items in their own inventory. This process is batch driven and can be largely automated and is executed only to integrate new Content into the site.

The tools for the Secure Digital Content Electronic Distribution have been designed to allow integration of sale of electronic downloadable Content into typical implementations of web based Electronic Digital Content Store s i.e. Columbia House online Music Boulevard Tower and equivalent with minimal change to their current Content retailing paradigm. Several methods of integration are possible and in the preferred embodiment the Electronic Digital Content Store s provides support for all product searches previews selections shopping cart and purchases. Each Electronic Digital Content Store s establishes customer loyalty with its customers and continues to offer its own incentives and market its products as it does today. In the Secure Digital Content Electronic Distribution System it would simply need to indicate which products in its inventory are also available for electronic download and allow its customers to select the electronic download option when making a purchase selection. In another embodiment the customer s shopping cart could contain a mixture of electronic Content and physical media selections. After the customer checks out and the Electronic Digital Content Store s has completed the financial settlement and logged or notified its shipping and handling functions to process the physical merchandise purchased the commerce handling function of the Electronic Digital Content Store s then calls the Transaction Processor Module to handle all electronic downloads. It simply passes the required information and all processing from that point on is handled by the toolset for the Secure Digital Content Electronic Distribution System . In another embodiment other methods of transaction handling are also possible using tools for the Secure Digital Content Electronic Distribution System to handle the financial settlement should the Electronic Digital Content Store s wish to sell downloadable merchandise only or to segregate the financial settlement of physical and downloadable merchandise.

To handle the downloading of merchandise the Electronic Digital Content Store s is given a Product ID not shown for each downloadable product that it acquires from the Content Promotions Web Site for the Content Provider s . This Product ID is associated to a customer s purchase selection to the downloadable product. The Product ID is what the Electronic Digital Content Store s passes to the Transaction Processor Module to identify the product that the user has purchased. The SC s Offer SC s that were created to describe the products are isolated from the Electronic Digital Content Store s and kept in an Offer Database in an effort to simplify management of these objects and make their existence transparent to the Electronic Digital Content Store s .

The Transaction Processor Module and other additional functions are provided as web server side executables i.e. CGI and NSAPI ISAPI callable functions or simply APIs into a DLL or C object library. These functions handle run time processing for End User s interactions and optional interactions with the Clearinghouse s . These functions interact with the web server s commerce services to create and download to the End User Device s the files necessary to initiate the Content download process. They also handle optional interactions to provide authorizations and accept notifications of completion of activities.

An Accounting Reconciliation Tool is also provided to assist the Electronic Digital Content Store s in contacting the Clearinghouse s to reconcile accounts based on its own and the transaction logs of the Clearinghouse s .

The Content Acquisition Tool is responsible for interfacing with the Content Promotions Web Site to preview and download Metadata SC s . Since the Content Promotions site is a standard web site a web browser is used by the Electronic Digital Content Store s to navigate this site. The navigation features varies based on the site design of the Content Provider s . Some sites may provide extensive search capabilities with many screens of promotional information. Others may have a simple browser interface with lists of titles performers or new releases to select from. All sites include the selection of Metadata SC s containing all the promotional and descriptive information of a song or album.

Alternatively the Electronic Store s may subscribe to content updates and receive updates automatically via FTP.

The Content Acquisition Tool is a web browser helper application which launches whenever a Metadata SC s link is selected at the Content Promotions Web Site . Selection of the SC s causes it to be downloaded to the Electronic Digital Content Store s and launch the helper application. The Content Acquisition Tool opens the Metadata SC s and display the non encrypted information contained therein. Displayed information includes Extracted Metadata for a music example the graphic image s associated with the song and the information describing the song a preview clip of the song can also be listened to if included in the Metadata SC s . In an example where the Content is music promotional information about the song or album the album title and the artist is also shown if provided by the Content Provider s . This information is displayed as a series of linked HTML pages in the browser window. Purchasable Content such as the song and the lyrics and whatever other metadata the Content Provider s wishes to protect is not accessible to the Retail Content Web Site .

In another embodiment the Content Provider s provides optional promotional content for a fee. In this embodiment such promotional content is encrypted in the Metadata SC s . Financial settlement to open this data can be handled via the Clearinghouse s with the account for the Electronic Digital Content Store s being charged the designated fee.

Besides the preview capabilities this tool provides two additional features metadata extraction and preparation of an Offer SC s . Selection of the metadata extraction option prompts the Electronic Digital Content Store s to enter the path and filenames to where the metadata is to be stored. Binary metadata such as graphics and the audio preview clip is stored as separate files. Text metadata is stored in an ASCII delimited text file which the Retail Content Web Site can then import into its database. A table describing the layout of the ASCII delimited file is also be created in a separate TOC file. Additional options is available to allow extraction into other National Language Support NLS supported formats.

One important piece of information provided in the extracted data is the Product ID. This Product ID is what the commerce handling function for the Electronic Digital Content Store s needs to identify to the Transaction Processor Module for more information refer to Transaction Processing section the Content that the user has purchased. The Transaction Processor Module uses this Product ID to properly retrieve the appropriate Offer SC s from the Offer Database for subsequent download to the End User Device s . The Electronic Digital Content Store s has full control over how it presents the offer of downloadable Content on its site. It only needs to retain a cross reference of the Content being offered to this Product ID to properly interface with the tools for the Secure Digital Content Electronic Distribution System . Providing this information here allows the Electronic Digital Content Store s to integrate this product or Content into its inventory and sales pages database in parallel with the Offer SC s creation process since both processes uses the same Product ID to reference the product. This is described further below.

The Electronic Digital Content Store s is required to create an Offer SC s describing the downloadable Content that is for sale. Most of the information that goes into the Offer SC s is derived from the Metadata SC s . The Content Acquisition Tool creates the Offer SC s by 

Metadata to be displayed by the Player Application further described later on the End User Device s is kept in the Metadata SC s . Other promotional metadata that was only used by the Electronic Digital Content Store s as input to his web service database is removed from the Metadata SC s . Rights management information provided by the Content Provider s such as watermarking instructions encrypted Symmetric Keys and Usage Conditions defining the permitted uses of the object are also retained.

This stripped down Metadata SC s is then included in the Offer SC s . The Electronic Digital Content Store s also attaches its own Usage Conditions called Store Usage Conditions or purchase options to the Offer SC s . This can be accomplished interactively or automatically through a set of defaults. If configured to be processed interactively the Electronic Digital Content Store s is prompted with the set of permitted object Usage Conditions as defined by the Content Provider s . He then selects the option s he wishes to offer to his customers. These now become the new Usage Conditions or Store Usage Conditions . To process automatically the Electronic Digital Content Store s configures a set of default purchase options to be offered for all Content . These default options are automatically checked against the permitted Usage Conditions defined by the Content Provider s and is set in the Offer SC s if there are no discrepancies.

Once the Offer SC s is created it is stored in an Offer Database and is indexed with the Product ID pre assigned in the Metadata SC s . This Product ID is used later by the Electronic Digital Content Store s to identify the downloadable Content being purchased by a customer when interfacing with the Offer Database to retrieve the Offer SC s for packaging and transmittal to the End User s . See the Transaction Processor Module section for more details.

In another embodiment the Electronic Digital Content Store s hosts the Content SC s at his site. This embodiment requires changes to the Offer SC s such as the replacement of the URL of the Content Hosting Site s with the URL of the Electronic Digital Content Store s .

Electronic Digital Content Store s directs billing to Clearinghouse s . Alternatively the Electronic Digital Content Store s may request financial clearance direct from the Clearinghouse s . There are two basic modes for processing End User s purchase requests for downloadable Content . If the Electronic Digital Content Store s does not wish to handle the financial settlement of the purchase and has no special promotions or incentives governing the sale of the merchandise and does not use a shopping cart metaphor for batching the purchase requests it may opt to provide links on its Content download pages directly to the Offer SC s files. These Offer SC s would have to have been built with retail pricing information included in the metadata. Also included in the Offer SC s is a special HTML offer page presenting the purchase options with terms and conditions of the sale. This page is built from a template created when the Offer SC s was built. When the End User s clicks on the direct link to the Offer SC s the Offer SC s is downloaded to the browser End User Device s launching a helper application which opens the container and present the offer page included in the Offer SC s . This page contains a form to collect customer information including credit card information and purchase option selection. The form then gets submitted directly to the Clearinghouse s for financial settlement and processing. Optionally this form may contain the fields needed to use the End User s credit information or industry standard local transaction handler.

An embodiment where the Electronic Digital Content Store s handles billing is now described. The more typical mode of handling purchase requests is to allow the Electronic Digital Content Store s to process the financial settlement and then submit the download authorization to the End User s . This method allows the Electronic Digital Content Store s to integrate sale of downloadable Content with other merchandise offered for sale at his site allows batch processing of purchase requests with only one consolidated charge to the customer via a shopping cart metaphor instead of individual charges for each download request and allows the Electronic Digital Content Store s to directly track his customers buying patterns and offer special promotions and club options. In this environment the offer of downloadable Content is included in his shopping pages which get added to a shopping cart when selected by the End User s and get processed and financially settled as is done in the Electronic Digital Content Store s current shopping model. Once the financial settlement is completed the commerce handling process of the Electronic Digital Content Store s then calls the Transaction Processor Module to complete the transaction.

The role of the Transaction Processor Module is to put together the information needed by the End User Device s to initiate and process the download of the Content purchased. This information is packaged into a Transaction SC s which is sent back to the End User Device s by the Web Server as the response to the purchase submission. The Transaction Processor Module requires three pieces of information from the commerce handling process of the Electronic Digital Content Store s the Product IDs for the Content purchased Transaction Data and an HTML page or CGI URL acknowledging the purchase settlement.

The Product ID is the value provided to the Electronic Digital Content Store s in the Metadata SC s associated to the Content just sold. This Product ID is used to retrieve the associated Offer SC s from the Offer Database .

The Transaction Data is a structure of information provided by the transaction processing function of the Electronic Digital Content Store s which is later used to correlate the Clearinghouse s processing with the financial settlement transaction performed by the Electronic Digital Content Store s and to provide user identity information to be included in the watermark of the Content downloaded to the End User Device s . When the Clearinghouse s receives a valid Order SC s it logs a transaction indicating the Content that was sold which Electronic Digital Content Store s sold it and the associated Transaction Data including the End User s Name and a Transaction ID . The Transaction ID provides a reference to the financial settlement transaction. This information is later returned by the Clearinghouse s to the Electronic Digital Content Store s for use in reconciling its accounts with the billing statements received from the Content Provider s or his agent . The Clearinghouse Transaction Log can be used by the Content Provider s to determine what Content of his has been sold and enables him to create a bill to each Electronic Digital Content Store s for royalties owed him. Other electronic means besides billing can alternatively be used to settle accounts between the Content Provider s and Electronic Digital Content Store s .

The information provided in the Transaction SC s and the security and integrity of the Transaction SC s provide sufficient authenticity to the Clearinghouse s that the purchase transaction is valid and thus no further validation is required prior to the logging of this sale by the Clearinghouse s . The Electronic Digital Content Store s however has the option to request authentication before its accounts are charged transaction logged at the Clearinghouse s indicating to the Content Provider s that this Electronic Digital Content Store s has collected money for the sale of this Content . This request for authentication notification is indicated by a flag in the Transaction Data . In this scenario the Clearinghouse s contacts the Electronic Digital Content Store s and receive authorization from the Electronic Digital Content Store s before the charge to his account and the release of the encryption Key . The Transaction ID is passed to the Electronic Digital Content Store s from the Clearinghouse s as part of this authentication request to enable the Electronic Digital Content Store s to associate this request to a prior transaction performed with the End User s . This Transaction ID can be any unique value the Electronic Digital Content Store s wishes to use and is solely for its benefit.

The Transaction Data also contains a customer name. This name can be from the user name field of the purchase form filled out by the user when making his purchase or from information logged previously during some user registration process with the Electronic Digital Content Store s or the official name obtained from credit card information associated with the card used in this transaction. This name is later included in the License Watermark .

The Transaction Data also contains the Store Usage Conditions purchased by the End User s . This information is included in the License Watermark and used by the End User Device s in Copy and Play Control.

The final parameter required by the Transaction Processor Module is the HTML page or CGI URL acknowledging the purchase settlement. The purpose of this is to allow the Electronic Digital Content Store s to respond to the End User s with an acknowledgment of the financial settlement and whatever other information he wishes to include in the response. This HTML page or CGI URL is included in the Transaction SC s and is displayed in the browser window of the End User Device s when the Transaction SC s is received and processed.

The Transaction SC s is the HTTP response to the End User s from the Electronic Digital Content Store s after processing the purchase submission. Sending a SC s as the direct HTTP response forces the automatic loading on the End User Device s of a SC s Processor Helper Application thus allowing automatic completion of the transaction without depending on further End User s initiated actions. This process is described in more detail in the End User Device s and Player Application section later.

When the Transaction Processor Module is called with the required parameters it builds a Transaction SC s containing the Transaction Data the transaction acknowledgment HTML page or reference URL other required security features of the SC s and retrieves and imbeds the Offer SC s associated with the purchase. It also logs information about this transaction for later use by the Notification Interface Module and the Account Reconciliation Tool .

The Notification Interface Module is a Web Server side executable routine CGI or function callable by NSAPI ISAPI or equivalent . It handles optional requests and notifications from the Clearinghouse s the End User Device s the Content Hosting Site s and the Content Provider s . The events that the Electronic Digital Content Store s can optionally request notification for are 

None of these notifications are a required step in the Secure Digital Content Electronic Distribution System flows but are provided as options to allow the Electronic Digital Content Store s the opportunity to close its records on the satisfaction of completion of the sale. It also provides information that may be needed to handle customer service requests by letting the Electronic Digital Content Store s know what functions have transpired since financial settlement of the transaction or what errors occurred during an attempt to complete the sale. Alternatively much of this status can be obtained from the Clearinghouse s through the Customer Service Interface as needed.

Frequency of notification of new Content available at the Content Promotions Web Site is determined by the Content Provider s . Notification may be provided as each new Metadata SC s is added or just daily with all new Metadata SC s added that day.

All of these notifications result in entries being made to the Transaction Log . If the Electronic Digital Content Store s wishes to perform his own processing on these notifications he can intercept the CGI call perform his unique function and then optionally pass the request on to the Notification Interface Module .

This Account Reconciliation Tool contacts the Clearinghouse s to compare the Transaction Log with the log of the Clearinghouse s . This is an optional process which is available to help the Electronic Digital Content Store s feel comfortable with the accounting for the Secure Digital Content Electronic Distribution System .

In another embodiment this tool can be updated to provide electronic funds transfers for automated periodic payments to the Content Provider s and the Clearinghouse s . It can also be designed to automatically process payments upon reception of an electronic bill from the Clearinghouse s after reconciling the bill against the Transaction Log .

Broadcast primarily refers to a one to many transmission method where there is no personal interaction between the End User Device s and the Electronic Digital Content Store s to customize on demand viewing and listening. This is typically provided over a digital satellite or cable infrastructure where the Content is preprogrammed so that all End User Device s receive the same stream.

A hybrid model can also be defined such that an Electronic Digital Content Store s provides a digital content service organized in such a way that it can offer both a web distribution interface via an Internet connection as well as a higher bandwidth satellite or cable distribution interface via a broadcast service with a great deal of commonality to the site design. If the IRD backchannel serial interface were connected to the web and the IRD supported web navigation the End User s could navigate the digital content service in the usual way via the backchannel Internet interface previewing and selecting Content to purchase. The user can select high quality downloadable Content purchase these selections and receive the required License SC s all via an Internet connection and then request delivery of the Content Content SC s over the higher bandwidth broadcast interface. The Web service can indicate which Content would be available for download in this manner based on the broadcast schedule or could build the broadcast streams based totally on purchased Content . This method would allow a Web based digital content service to contract with a broadcast facility to deliver high quality Content to users equipped with the proper equipment making a limited number of specific Content e.g. songs or CDS available daily in this manner and the entire catalog available for download in lower quality via the web interface.

Other broadcast models can be designed where there is no web interface to the End User Device s . In this model promotional content is packaged in specially formatted digital streams for broadcast delivery to the End User Device s i.e. IRD where special processing is performed to decode the streams and present the End User s with the promotional content from which purchase selections can be made.

The actual purchase selections would still be initiated via backchannel communications from the End User Device s to the Clearinghouse s and would utilize SC s to perform all data exchange. The toolset provided to the Electronic Digital Content Store s has been architected and developed in such a way that most of the tools apply to both a point to point Internet service offering as well as a broadcast satellite or cable offering. The tools used by a Digital Content Web Site Electronic Digital Content Store s to acquire and manage Content as well as prepare SC s is also used by a satellite based Electronic Digital Content Store s to manage and prepare Content for distribution on a broadcast infrastructure. The SC s distributed over a Web service are the same as those distributed over a broadcast service.

The applications in the End User Device s for the Secure Digital Content Electronic Distribution System perform two main functions first the SC s processing and copy control and second playback of encrypted Content . Whether the End User Device s is a Personal Computer or a specialized electronic consumer device it has to be capable of performing these base functions. The End User Device s also provides a variety of additional features and functions like creating play lists managing the digital content library displaying information and images during content playback and recording to external media devices. These functions vary based on the services these applications are supporting and the type of devices the applications are designed for.

Referring now to shown is the major components and processes and End User Device s Functional Flow. The applications designed to support a PC based web interface Content service consists of two executable software applications the SC s Processor and the Player Application . The SC s Processor is an executable application which is configured as a Helper Application into the End User s Web Browser to handle SC s File MIME Types. This application is launched by the Browser whenever SC s are received from the Electronic Digital Content Store s the Clearinghouse s and the Content Hosting Site s . It is responsible for performing all required processing of the SC s and eventually adding Content to the Digital Content Library of the End User s .

The Player Application is a stand alone executable application which the End User s loads to perform Content in his Digital Content Library manage his Digital Content Library and create copies of the Content if permitted. Both the Player Application and SC s Processor applications can be written in Java C C or any equivalent software. In the preferred embodiment the applications can be downloaded from computer readable means such as website. However other delivery mechanisms are also possible such as being delivered on computer readable media such as diskettes or CDS.

The searching and browsing of Content information previewing of for example song clips and selecting songs for purchase is all handled via the End User s Web Browser . Electronic Digital Content Store s provides the shopping experience in the same way that is offered today by many Content retailing web sites. The difference to the End User s over today s web based Content shopping is that they may now select downloadable Content objects to be added to their shopping cart. If the Electronic Digital Content Store s has other merchandise available for sale in addition to the downloadable objects the End User s may have a combination of physical and electronic downloadable merchandise in his shopping cart. The Secure Digital Content Electronic Distribution End User Device s are not involved until after the End User s checks out and submits his final purchase authorization to the Electronic Digital Content Store s . Prior to this point all interaction is between the Web Server for the Electronic Digital Content Store s and the Browser on the End User Device s . This includes preview of sample Digital Content clips. Digital Content clips are not packaged into SC s but instead are integrated into the web service of the Electronic Digital Content Store s as downloadable files or fed from a streaming server. The format of the Content clip is not dictated by the system architecture. In another embodiment the Player Application could interact directly with the Electronic Digital Content Store s or Clearinghouse s or offline using a promotional CD.

In this alternate embodiment instead of downloading Content or even the Player Application itself over telecommunications lines such as telephone lines cable TV direct TV the Internet and other wired and wireless communications infrastructure in this embodiment a computer readable medium is described. Computer readable medium includes floppy diskettes CDS DVDS Portable Flash Memory ZipDrives removable hard disk drives and any other removable medium from which a computer can read information. For simplicity in this embodiment the computer readable medium is a CD and the Content is music. The CD takes the place of the Content Hosting Sites to permit the music to be distributed over physical media rather than through electronic means such as broadband. The CD contains music samples and multiple compressed and encrypted music tracks in a Content SC and the associated metadata about the Content . The sample tracks in the audio session can be played back in a standard CD player. When mounted in an CD drive of the End User Device s automatically starts a Web Browser that allows an end user to listen to the music samples and select one or more of the compressed and encrypted songs for purchase.

The overall buying transaction process is the same as that used described for the download of Content from Content Hosting Site s . The difference lies in that the encrypted Content is not downloaded from the Content Hosting Site s but rather the Content is read in Content SC s stored on CD . Thus the use of the CD eliminates the long download times over narrow band Internet and the need for a broadband Internet channel. As previously described for the telecommunications distribution of Content the end user using the End User Device s access the encryption Key to render the Content by receiving a Transaction SC s from the Electronic Digital Content Store s . In an alternative embodiment the modified Transaction SC s is received from the Content Provider s or the Clearinghouse s or any other third party source for process purchase authorizations.

The number of compressed and encrypted songs that can fit onto CD depends on the number and playing time of the music samples in the audio session and on the compressed music data rate and the length of each song. For example if about twenty 20 second music samples are allowed then about four 4 musical works of 60 minute length compressed at 256 kilobit second or eight 8 of 60 minute length albums compressed at 128 kilobit second will fit onto CD . If the computer readable medium is a DVD instead of a CD the current DVD technology stores around 5 times the number of compressed musical works over the CD media. Accordingly with current DVD technology it is possible to store twenty 20 60 minute musical works compressed at 256 kilobits second and forty 40 60 minute albums compressed at 128 kilobit second.

One embodiment for the information stored on the CD is now described. The information also known as the as the promotional package is broken down into two general areas known i Content Session Area in this example audio content and ii Data Session which ties into the functionality of the Player Application .

Turning now to is a flow diagram of the alternative embodiment of for acquiring rights to digital content according to the present invention. The process begins with the end user loading the CD into the End User Device s step . The end user can listen to the information audio track and the music samples and other multimedia promotional materials step . The end user interacts with the HTML pages read from the CD the end user selects the music he she wants to buy and provides credit card information. The HTML pages presents to the end user the price and Usage Conditions such as those done in the Offer SC s in the telecommunications embodiment.

Once the end user selects the albums for purchase and provides the credit card information a browser script program running on Web Browser transfers a Notify SC s derived from the CD and transferred to a payment site such as the Electronic Digital Content Store s step . A secure connection such as an SSL connection is used between the End User Device s and the payment site is used to protect the transfer of the credit card and selection information against eavesdropping in the Internet.

After achieving payment authorization a modified Transaction SC s is received by the Web Browser . This modified Transaction SC s is similar to the regular modified Transaction SC s but it does not carry the Offer SC s and includes the Notify SC s . That is modified Transaction SC s carries Transaction Data the Notify SC s and the Usage Conditions for the music step .

The Play Application receives the Offer SC s for the selected music from the CD . The application then proceeds with the regular interaction with the Clearinghouse s to acquire a License SC s for the selected Content as describe above in for the telecommunications embodiment step .

After a License SC s for the Content is received the Player Application copies the corresponding Content SC s from the CD and proceeds with the regular processing of those parts as described in the telecommunications embodiment above for .

The content preparation for the CD is the same system and methods as described in Section VIII Content Provider above. But instead of creating Content SC s for distribution over telecommunications networks the Content SC s and Offer SC s are written to the CD . Included on the CD are the Notify SC s for each song Offer SC s for each song and a set of HTML pages . The autorun.exe the autorun.ini and the End User Application Installation Package may be included in the CD .

The changes necessary in the Player Application to support both the telecommunications embodiment of delivering Content as well as this computer readable medium distribution embodiment may include all the components listed in Section X. D The Player Application below. This makes the compatible with both embodiment of delivery. In addition the functions of the Player Application Installation Package includes the software that 

What has been described thus far is content delivery on a CD . It should be noted that the promotional encrypted content on the CD can be part of the regular music or DVD CD. The CD can be created by the process in Sub section 4. Decryption Decompression and Playback Components in Section D The Player Application below. The CD contains the Promotional Package from a Content Provider s or from the Electronic Digital Content Store s . When this CD is played this enables the user or a friend of a user to very quickly purchase rights to the Content on CD . In other words if a user takes a CD to a friends house to listen to it the friend can purchase the rights to make a copy of the CD for their own use without having to download the Content from the Content Hosting Site s . This enables very fast propagation of Promotional Package between friends and associates. Rather than returning to the store or downloading Content over the Internet the friend can create a copy of the Content encrypted on CD using the process flow described in below. Besides the Content the Player Application can also be delivered on the CD to permit fast propagation of the Player Application through a community.

In yet another embodiment the Promotional Package can be E mailed between end users. Although the transmission of compressed files is still slow over telephone lines today. In the further higher speed networks such as Cable Modems will increase the capacity. By giving users the ability to E mail the Promotional Packages to others the Content can be purchased by anyone in the E mail list.

The Player Application and the Helper Application are packaged into a self installing executable program which is available for download from many web sites or via the embodiment above in the section X.A.3 Delivery Over Computer Readable Medium. The Clearinghouse s acts as a central location which hosts the master download page at a public web site. It contains links to the locations from which the installation package can be downloaded. The installation package is available at all Content Hosting Site s to provide geographic dispersal of the download requests. Each participating Electronic Digital Content Store s can also make the package available for download from their site or may just provide a link to the master download page at the public web site of the Clearinghouse s .

Any End User s wishing to purchase downloadable Content downloads and install this package. The installation is self contained in this downloadable package. It unpacks and installs both the Helper Application and the Player Application and also configure the Helper Application to the installed Web Browser s .

As part of the installation a Public Private Key pair is created for the End User Device s for use in processing Order and License SC s . A random Symmetric Key Secret User Key is also generated for use in protecting song encryption keys in the License Database . The Secret User Key not shown is protected by breaking the key into multiple parts and storing pieces of the key in multiple locations throughout the End User s computer. This area of the code is protected with Tamper Resistant Software technology so as not to divulge how the key is segmented and where it is stored. Preventing access to this key by even the End User s helps to prevent piracy or sharing of the Content with other computers. See the SC s Processor section for more details on how these keys are used.

Tamper resistant software technology is a method to deter unauthorized entry into a computer software application by a hacker. Typically a hacker wants to understand and or modify the software to remove the restrictions on the usage. In practicality no computer program exists that cannot be hacked that is why tamper resistant software is not called tamper proof . But the amount of effort required to hack a tamper resistance protect application usually deters most hackers because the effort is not worth the possible gain. Here the effort would be to gain access to a key to one piece of Content perhaps a single song on a CD.

One type of tamper resistant software technology is from IBM. One product this code was introduced is in the IBM ThinkPad laptop computer. Here the tamper resistant software was used to protect the DVD movie player in the computer. Digital Content Provider s such as Hollywood studios concerned about the advent of digital movies and the ease at which perfect copies can be made have insisted that movies on DVD disc s contain copy protection mechanisms. IBM s tamper resistant software made it difficult to circumvent these copy protection mechanisms. This is a very typical application for tamper resistant software the software is used to enforce rules on the usage of some protected type of Content .

IBM s tamper resistant software puts several types of obstacles in the path of the attacker. First it contains techniques to defeat or at least reduce the effectiveness of the standard software tools that the hacker uses debuggers and disassemblers. Second it contains self integrity checking so that single modifications or even small handfuls of modifications will be detected and cause incorrect operation. Finally it contains obfuscations to mislead hackers regarding its true operation. The latter technique is largely ad hoc but the first two build upon well known tools in cryptography encryption and digital signatures.

When the End User s submits the final purchase authorization to the Electronic Digital Content Store s for the merchandise he has collected in his shopping cart his Web Browser remains active waiting for a response from the Web Server. The Web Server at the Electronic Digital Content Store s processes the purchase and performs the financial settlement and then returns a Transaction SC s to the End User Device s . The SC s Processor Helper Application is launched by the Web Browser to process the SC s mime type associated with the Transaction SC s . is an example of user interface screens of the Player Application downloading content to a local library as described in according to the present invention.

The SC s Processor opens the Transaction SC s and extract the Response HTML page and Offer SC s contained within. The Response HTML page is displayed in the Browser window acknowledging the End User s purchase. The Offer SC s are then opened and the Content e.g. song or album names along with the projected download times are extracted from them step . A new window is then displayed with this information and the End User s is presented with options to schedule the download s of the Content e.g. for music songs or entire albums step . The End User s can select immediate download or can schedule the download to occur at a later time. If a later time is selected the download schedule information is saved in a log and the download is initiated at the scheduled time if the End User Device s is powered on at that time. If the computer is not active at the scheduled download time or the communication link is not active the End User s is prompted to reschedule the download when the computer is next powered up.

When the scheduled download time occurs or if immediate download was requested the SC s Processor creates Order SC s from information in the Transaction SC s Offer SC s and the Public Key of the End User s generated at install time. This Order SC s is sent via HTTP request to the Clearinghouse s . When the Clearinghouse s returns the License SC s the Helper Application is re invoked to process the License SC s . The License SC s is then opened and the URL of the Content Hosting Site s is extracted from the referenced Order SC s . The License SC s is then sent to the specified Content Hosting Site via http request through the Browser requesting download of the Content SC s . When the Content SC s comes back to the Browser the Helper Application is re invoked again. The SC s Processor displays the name of the Content being downloaded along with a download progress indicator and an estimated time to completion.

As the Content is being received by the SC s Processor it loads the Content data into memory buffers for decryption. The size of the buffers depends on the requirements of the encryption algorithm and watermarking technology and is the minimum size possible to reduce the amount of unencrypted Content exposed to hacker code. As a buffer is filled it is decrypted using the Key corresponding to the Public Key of the End User s extracted from the License SC s which itself is first decrypted using the Private Key. The decrypted buffer is then passed to the watermarking function.

The watermarking extracts the watermarking instructions from the License SC s and decrypt the instructions using the Private Key of the End User s . The watermarking data is then extracted from the License SC s which includes transaction information such as the purchaser s name as registered with the Electronic Digital Content Store s from which this Content was purchased or derived from the credit card registration information if the Electronic Digital Content Store s does not provide a registration function. Also included in the watermark is the purchase date and the Transaction ID assigned by the Electronic Digital Content Store s to reference the specific records logged for this transaction. The Store Usage Conditions are also included to be used by the Copy Control of the Player Application .

The Watermarking is protected with Tamper Resistant Code technology so as not to divulge the watermarking instructions thus preventing a hacker from discovering the location and technique of the watermark. This prevents removal or modification of the watermark by a hacker.

After inscribing any required watermark to this content buffer the buffer is passed to the scrambling function for Re Encryption . A processor efficient secure encryption algorithm such as IBM s SEAL encryption technology is used to re encrypt the Content using a random Symmetric Key. Once the download and Decryption and Re Encryption process is complete the encryption Key used by the Content Provider s to originally encrypt the Content is now destroyed and the new SEAL key is itself encrypted using the Secret User Key created and hidden at installation time. This new encrypted Seal Key is now stored in the License Database .

Unlike source performed at the Content Provider s and user watermarking performed at the End User Device s may need to become an industry standard to be effective. These standards are still evolving. The technology is available to allow control information to be embedded in the music and updated a number of times. Until such time as the copy control standards are more stable alternative methods of copy control have been provided in the Secure Digital Content Electronic Distribution System so that it does not rely on the copy control watermark in order to provide rights management in the consumer device. Storage and p lay record usage conditions security is implemented utilizing encrypted DC Library Collections that are tied to the End User Device s and protected via the Tamper Resistant Environment. Software hooks are in place to support copy control watermarking when standards have been adopted. Support exists today for watermarking AAC and other encoded audio streams at a variety of compression levels but this technology is still somewhat immature at this time to be put to use as a sole method of copy control.

The Decryption and Re Encryption process is another area of the code that is protected with Tamper Resistant Code technology so as not to divulge the original Content encryption key the new SEAL key the Secret User Key and where the Secret User Key segments are stored and how the key is segmented.

The process of Decryption and Re Encryption serves two purposes. Storing the Content encrypted with an algorithm like SEAL enables faster than real time decryption and requires much less processor utilization to perform the decryption than does a more industry standard type algorithm like DES. This enables the Player Application to perform a real time concurrent decryption decode playback of the Content without the need to first decrypt the entire file for the Content prior to decode and playback. The efficiency of the SEAL algorithm and a highly efficient decode algorithm allows not only concurrent operation streaming playback from the encrypted file but also allows this process to occur on a much lower powered system processor. Thus this application can be supported on a End User Device s as low end as a 60 MHz Pentium system and perhaps lower. Separating the encryption format in which the Content is finally stored from the original encryption format allows for greater flexibility in the selection of the original content encryption algorithm. Thus use of widely accepted and proven industry standard algorithms can be used thus further enhancing Digital Content Industry acceptance of the Secure Digital Content Electronic Distribution System .

The second purpose of this Decryption and Re Encryption process is to remove the requirement that the original master encryption Key used by the Content Provider s to encrypt this Content be stored on every End User Device s which has licensed this Content . The encrypted master Key as part of the License SC s is only cached on the hard disk of the End User Device s for a very short time and is in the clear only in memory and for a very short time. During this execution phase the Key is protected via Tamper Resistant Code technology. Not having to retain this Key in any form on the End User Device s once this Decryption and Re Encryption phase has completed greatly lessens the possibility of piracy from hackers.

Once the song has been re encrypted it is stored in the Digital Content Library . All metadata required for use by the Player Application is extracted from the associated Offer SC s and also stored in the Digital Content Library step . Any parts of the metadata which are encrypted such as the song lyrics are decrypted and re encrypted in the same manner as described above for the other content. The same SEAL key used to encrypt the Content is used for any associated metadata needing to be encrypted.

The Secure Digital Content Electronic Distribution Player Application referred to here as the Player Application is analogous to both a CD DVD or other Digital Content player and to a CD DVD or other digital content storage management system. At its simplest it performs Content such as playing songs or videos. At another level it provides the End User s a tool for managing his her Digital Content Library . And just as importantly it provides for editing and playing of collections of content such as songs referred to here as Play lists .

The Player Application is assembled from a collection of components that may be individually selected and customized to the requirements of the Content Provider s and Electronic Digital Content Store s . A generic version of the player is described but customization is possible.

Referring now to there is shown a block diagram of the major components and processes of the Player Application running on End User Device s of .

The sections below detail the various component sets. The final section details how these components are put together in the generic player and discusses how the components can be customized.

In another embodiment the components of the Player Application and the SC s Processor are available as part of a programmer s software toolkit. This toolkit enables predefined interfaces to the components of the generic player application listed above. These predefined interfaces are in the form of APIs or Application Programming Interfaces. A developer using these APIs can implement any of the functionality of the components from a high level application program. By providing APIs to these components a programmer can quickly develop a customized Player Application without the need to re created these functions and resources of any of these components.

Components from this set combine to provide the on screen manifestation of the Player Application . Note that the design establishes no definitive layout of these components. One such layout is provided in the generic player. Based on requirements from Content Provider s and or Electronic Digital Content Store s and other requirements alternate layouts are possible.

This set is grouped into subgroups starting with the components used to present End User Display and handle controls called End User Controls used for such low level functions as audio playback and presentation of metadata. Next the End User Display Component is further divided by special function groupings Play list Digital Content Library and then object container components used for grouping and placing of those lower level components.

Within the component listings below any reference to creating CDS or copying of Content to a CD or other recordable medium only applies to the case where the Player Application has such functionality enabled. Also note that the term CD in that context is a generic one that can also represent various other external recording devices such as MiniDisc or DVD.

These components handle set up of encryption keys Watermark processing Copy management and more. Interfaces also exist for communication with the Clearinghouse s transmission of purchase requests and more for special services such as pay per listen or cases where each access to the Content is accounted for. Currently the communications to the Clearinghouse s functions are handled by the SC s Processor .

The use of the Content by the Player Applications on End User Device s is logged into a database such as the License Database . The tracking of each use of Content by the Player Application can be transmitted to one or more logging sites such as the Clearing House s or Content Provider s or Electronic Digital Content Store s or any site designated and coupled to Transmission Infrastructures . This transmission can be scheduled at predetermined times to upload the usage information to a logging site. One predetermined time contemplated is early in the morning when Transmission Infrastructures may not be as congested with network traffic. The Player Application using known techniques wakes up at a scheduled time and transmit the information from the local logging database to the logging site. By reviewing the logging site information the Content Provider s can measure the popularity of their Content .

In another embodiment the instead of logging the usage of Content for later uploading to a logging site the use of the Content is uploaded to the logging site during every use of the Content . For example when duplicating or copying the Content stored at the End User Device s on to an external device such as DVD Disc digital tape flash memory mini Disc or equivalent read writeable removable media the use is updates to the logging site. This may be a precondition to copying the Content in the usage conditions that is transmitted when the Content is purchased. This ensures the Content Provider s can accurately track the usage of their Content during their playing duplicating or other actions upon the Content .

In addition other information about the Content can be uploaded to the logging site. For example the last time e.g. hour and day the Content was performed how many times the Content was performed if the Content has been duplicated or copied to an authorized external device such as DVD Disc digital tape or mini Disc. In cases where there are multiple distinct users of a single Player Application on the End User Device s such as different members of a family the identifications of the user of the Content is transmitted along with the usage information to the logging site. By reviewing the usage information uploaded to the logging site the Content Provider s can measure the popularity of the Content base on the actual usage the identification of the user and the number of times the Content has been performed. The actual usage measurement makes this system more factual driven over systems using sampling methods such as a Nielsen Rating scheme for televisions or telephone surveys where only a limited number of users are sampled at any one time and the results extrapolated. In this present embodiment the actual usage can be measures for the users logging back onto a designated web site such as the Electronic Digital Content Store s or Content Provider s .

These components use the keys acquired by the Copy Play Management components to unlock the audio data acquired from the Data Management and Library Access components apply the appropriate decompression to prepare it for playback and use system audio services to play it. In an alternate embodiment the audio data acquired from the Data Management and Library Access components may be copied to removable media such as CDS diskettes tapes or MiniDisks.

These components are used to store and retrieve song data on various storage devices on the End User s system as well as handle requests for information about the stored songs.

These components are used for coordination between the Secure Digital Content Electronic Distribution Player and other applications e.g. Browser helper app and or plug in etc that may invoke the Player Application or that the Player Application needs to use when carrying out its functions. For example when a URL control is activated it invokes the appropriate browser and instruct it to load the appropriate page.

In this section the combining of the components above into a version of the Player Application is discussed. This is just one of many different examples possible since the Player Application is designed for customization by being based on software objects.

The Player Object Manager is a software framework holding all the other components together. As discussed in the sections above the blocks below the Player Object Manager in this diagram are required for any player but may be replaced by specialized versions depending on such things as form of encryption or scrambling being used types of audio compression access methods for the Content library and more.

Above the Player Object Manager are Variable Objects which are mostly derived from the metadata associated with the Content being played or searched. These Variable Objects are made available to the End User Device s by way of the End User Display and received input from the End User Controls . All objects are configurable and the layouts of all containers are customizable. These objects maybe implemented in C C Java or any equivalent programming language.

The following embodiment is for an example where the Player Application running on End User Device s is an audio player where Content is music. It should be understood to those skilled in the art that other types of Content can be supported by the Player Application . A typical audio enthusiast has a library of CDS holding songs. All of these are available within the Secure Digital Content Electronic Distribution System . The set of songs that have been purchased from Electronic Digital Content Store s are stored within a Digital Content Library on his or her system. The groupings of songs that are analogous to physical CDS are stored as Play lists. In some cases a Play list exactly emulates a CD e.g. all tracks of a commercially available CD has been purchased from an Electronic Digital Content Store s as an on line version of the CD and is defined by a Play list equivalent to that of the CD . But most Play lists is put together by End User s to group songs they have stored in the Digital Content Libraries on their systems. However for the purposes of the ensuing discussions an example of a custom made music CD is used when the term a Play list is mentioned.

When the End User s starts the Player Application explicitly rather than having it start up via invocation from the SC s Processor Application it pre loads to the last Play list that was accessed. If no Play lists exist in the Digital Content Library the Play list editor is started automatically unless the user has turned off this feature via a preference setting . See The Play list below for further details.

The Player Application may also be invoked with a specific song as an argument in which case it immediately enters Song play mode. Optionally the song may be prepared for play but await action by the End User s before proceeding. See Song Play below for more on this situation.

Set Play list attributes Display and allow changes to the attributes of this Play list. These attributes may be set 

When a song has been prepared for play either by invoking the Player Application with the song as an argument or by selecting a song for play from a Play list or within the Digital Content Librarian these are the End User s options corresponding screen of an End User Interface 

The Digital Content Librarian can be invoked implicitly when selecting songs or Play lists see above or may be opened in its own window for management of the Song Library on the End User s system. In that case these are the End User s options 

Digital Content is usually compressed for storage and or faster transmission. Digital Content is sent in short stand alone segments. One example is a Wave file format. In order for end users to receive sound in real time for a multimedia effect listening to music or in order to take part in an audio or video conference sound must be delivered as streaming sound. More advanced audio cards support wavetable or precaptured tables of sound. A widely deployed Content format is MPEG Layer 3. The audio feature card is connected to a speaker by a audio cable to the audio out . In order to simplify the drawings only the right side speaker is shown. It should be understood for stereo and surround sound systems two or more speakers are necessary.

The digital Content is read from the storage media decrypted and or uncompressed if necessary and converted to an analog signal by the DAC and played or rendered through the speaker. It is during this time of rendering that the analog signal is in the clear or decrypted. To make an unauthorized perfect copy in the prior art an end user can install a patch cable to connect the audio out to the line in . The use of a patch cable or software such as operating system functions which provides the same function as a patch cable allows the Content to be stored back to the storage media with no encryption. This decrypted Content if captured in the digital format is perfect. No analog noise no background noise no conversion errors the digital Content is a perfect copy of the original. The audio feature card could entail a digital out interface or could provide a direct interface to the digital content prior to the DAC conversion. This type of recording removes the encryption and allows a perfect unauthorized copy to be played or further copied or sent or sold or swapped through an online service such as through Napster.com or Gnutella.com or Audiogallaxy.com and in general it can be used in any way as it is now not limited by the encryption scheme. The present invention prevents this type of unauthorized re recording while playing encrypted Content .

The term predetermined audio quality is a minimum level of quality that is deemed to be usable by the provider of the Content . For example the Content Provider s may deem that any audio quality that is less than CD quality audio for the subsequent unauthorized re recording is not a concern. CD quality is two channels stereo of information which has been converted to a digital file using 44 100 samples per sec.

A multimedia platform is designed to record or render audio that is stored or read from the storage of the End User Device s . This includes the ability to input audio and to convert the analog wave forms from sources such as a microphone musical instrument such as a synthesizer a MIDI Musical Instrument Digital Interface device or a direct connection to the output of a waveout device which is rendering audio content. This ability requires both the hardware such as described in the audio feature card of above and device drivers that interface between the audio feature card and the application program. The ability to render the digital content results in one or more audio streams being delivered to one or more speakers. The term wavein as used in this invention means a multimedia interface including the hardware combined with a device driver that records Content based on specific quality. This is a common term used in the Microsoft Windows Multimedia programming environment.

A full duplex sound card is designed to allow the recording and playback at the same time. It is this type of audio platform that can simultaneously render the multimedia content and record the content. The ability to patch the multimedia content output to the multimedia content input on an end user system is obviated by opening all of the wavein device drivers.

Although the details of an audio feature card is described above for one embodiment of the present invention it is important to note that other types of multimedia cards and devices may be practiced by the present invention as further described below. One type of hardware is a video card.

Turning now to which is a flow for rendering of encrypted files on End User Device s according to the present invention. The flow is entered at steps and when there is a need to render or play Content . All non approved wavein devices and or ports of a certain quality or predetermined audio level are opened at step . This process is further explained in below. After completion of rendering at step the present invention closes and the content is rendered. That is the song or other multimedia Content is played or rendered. If the process of opening non approved wavein devices and or ports of a predetermined quality fails this message is sent to the Player Application and the flow exits at step without rendering the content. At step the Content that has been finished the present invention closes the waveout device at step . Once this is completed the wavein devices and or ports are closed and the flow exits at step .

At step the number of the device being processed is checked to see if it is the last device. If N the number of the device equals MAX at step the flow exist at step . If it does not equal MAX the present number is incremented by one at step and the flow is reentered at step .

This completes the description of the method of the present invention during the playing rendering of encrypted Content . All available recording devices and or ports of a predetermined quality are opened and therefore cannot be used for recording.

Turning now to which is a flow diagram describing the requirement to record Content . The flow is entered at step with the authorization to record the Content at step . Any recording application for a predetermined quality files will search for a not open available wavein device. If encrypted media is being rendered at step no wavein devices and or ports of a predetermined quality are available at step and the flow exits at step . If no encrypted media is being rendered at step the recording application can open a wavein device and record media at step . The present invention does not interfere with record operations while the Player Application does not actively rendering secure Content . Furthermore failure to render due to open wavein devices and or ports being detected in can be rectified by end users closing all applications which have an open wavein port and retrying the rendering process.

Although a specific embodiment of the invention has been disclosed it will be understood by those having skill in the art that changes can be made to this specific embodiment without departing from the spirit and scope of the invention. The scope of the invention is not to be restricted therefore to the specific embodiment and it is intended that the appended claims cover any and all such applications modifications and embodiments within the scope of the present invention.

