---

title: Integrating acoustic echo cancellation as a subsystem into an existing videoconference and telepresence system
abstract: The present invention is embodied in a computer-readable program in a computer-readable medium for upgrading a video conference system, the computer-readable program comprising acoustic echo canceling control software having an application programming interface. The acoustic echo canceling control software is implemented on a computer system that operates the video conference system and macros are configured to couple the acoustic echo canceling control software to hardware components of the video conference system and to interface with the application programming interface. The macros are user configurable for providing real time adjustments of echo canceling runtime parameters of the hardware components during a video conference session.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08150052&OS=08150052&RS=08150052
owner: Hewlett-Packard Development Company, L.P.
number: 08150052
owner_city: Houston
owner_country: US
publication_date: 20081015
---
Acoustic echo cancellation is a critical component in videoconferencing and telepresense applications. It guarantees clear audio delivery between participating studios. Studio is a general term meaning a node involved in the conference. Videoconferencing is a term which describes a conference between two or more parties that are physically separated and are communicating with each other by means of electronic audio and video. Telepresence is a similar concept that attempts to simulate being in a different physical location utilizing electronic audio and video and additionally providing a means to manipulate the remote environment.

Acoustic echo cancellation AEC is a very important component of any modern videoconferencing or telepresence system. AEC guarantees clear audio for all participants of a videoconference or telepresence session. One type of acoustic echo cancellation system is a hardware system which detects an acoustic echo in an audio system and attempts to remove the echo or diminish its affect as much as possible. However current hardware only solutions once deployed cannot be modified without upgrading the equipment.

In the following description reference is made to the accompanying drawings which form a part hereof and in which is shown by way of illustration a specific example in which the invention may be practiced. It is to be understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.

In one embodiment as shown in a session with two participating studios can be performed. In general server at the first location is a computer running the video conferencing software . One embodiment of the AEC subsystem of the present invention is utilized by the video conferencing software to provide echo cancellation during the conference. Server is connected to network which can be a private Intranet the Internet a telephone network or other type of communications network. Video conferencing software utilizes network to communicate with other studios participating in the video conference session. Microphone and speaker are connected to server . Audio signals flowing into microphone are processed by video conferencing software and the AEC subsystem .

In one embodiment server at the second location is also running video conferencing software . AEC subsystem is also utilized by video conferencing software . Server is also connected to network and utilizes the network to communicate with other studios participating in the conference session. Microphone and speaker are connected to server . Audio signals flowing into microphone are processed by video conferencing software and the AEC subsystem .

The video conferencing software systems and running on servers and respectively are easily upgraded by AEC subsystems and to continuously encode analog audio signals entering their respective microphones and into a stream of digital data which they transmit to each other over network . Upon receiving the encoded digital audio data video conferencing software and convert the data back into an analog audio signal and send it to their respective speakers and .

In general during the continuous processing of audio AEC subsystems and analyze the audio signals entering respective microphones and as well as audio coming from the remote studio. A correction signal is generated by the AEC subsystems and which is delivered to video conferencing software and respectively. This correction signal is applied to the audio data stream by the video conferencing software to eliminate echo in the audio.

A MACRO is a command to perform some function and is utilized to control the acoustic echo cancellation system. A MACRO can be defined outside the scope of the software program. A MACRO provides a layer of indirection between the execution of a function and the actual implementation of that function. As such whatever is actually performed by the MACRO can be redefined and the software program can simply execute the MACRO without any knowledge of what the MACRO is actually doing.

Hardware MACROS operate through an indirection layer and a hardware interface . Indirection layer is a layer that defines the hardware MACROS . Interface communicates over communications channel with interface of hardware AEC subsystem . Communications channel can be Universal Serial Bus USB Fire Wire Ethernet or some other means of data communications.

Hardware AEC subsystem interfaces with audio I O . Audio Inputs at interface can be a microphone or some other audio input device. Audio outputs at interface can be speakers headphones or some other audio output device. Hardware AEC subsystem implements digital I O digital audio signals travel over interface to and from audio compression decompression codec . The purpose of the codec is to encode the audio stream into a format that consumes less bandwidth. Codec also prepares the audio signals for transmission over a digital communications network.

Data stream represents the encoded audio data. Encoded audio data is sent and received from network which communicates the data to and from other participants of the videoconferencing or telepresence session. Hardware AEC subsystem continuously analyzes audio data from inputs and inputs and uses an algorithm to detect echoes and generate a correction signal which it applies to its audio outputs and . The correction signal is combined with the audio stream and designed to eliminate echo from the audio.

In one embodiment the AEC control software of one embodiment of the present invention seamlessly integrates and upgrades the existing video conference control software and hardware control software when it is installed on server . The AEC control software allows the existing video conference control software and hardware control software to be easily upgraded with minimal or near zero downtime and zero development time. Implementation and operational details of AEC are described in relation to below which depicts exemplary systems utilizing the AEC software.

Software AEC component communicates through interface with generic audio I O interface device . Audio I O devices connect with audio I O interface and can be input devices such as microphones and output devices such as speakers or headphones. Audio interface device communicates via interface with the audio codec . Interface communicates with the software AEC to seamlessly connect audio interface device with server and can be Universal Serial Bus USB Fire Wire Peripheral Component Interconnect PCI or other data communication interface. Audio data travels to and from AEC software component and is analyzed continuously by AEC software component . AEC Software component generates a correction signal which it mixes with the audio streams. The correction signal eliminates echoes in the audio streams.

The embodiments described in enable the integration of the software based acoustic echo cancellation system as a subsystem into an existing videoconference or telepresence architectures using APIs . The architecture and application programming interface API of one embodiment of the present invention facilitates a near zero downtime and zero development integration with existing videoconference or Telepresence systems.

In one embodiment of the present invention referring to the integration of the software acoustic echo cancellation subsystems or into an existing hardware AEC based videoconferencing or telepresence system is accomplished by using software MACROS that are compatible hardware MACROS with the hardware MACROS that are already in use by the existing system. This allows a near zero downtime upgrade solution with the software acoustic echo cancellation subsystems or with minimal to no actual development time. Also an existing hardware based acoustic echo cancellation system can be easily upgraded to software acoustic echo cancellation subsystems or through the complete replacement of the hardware MACROS in the existing system with the new software MACROS .

For example the macros or are new or replacement macros that have replaced old or initial or pre existing hardware MACROS of configured to control a hardware based acoustic echo canceller. The software MACROS of the present invention can have the same syntax as the hardware MACROS to be replaced but have new definitions for operating the acoustic echoing canceling software or .

With regard to the APIs of the present invention allow the software MACROS with identical names as the existing hardware MACROS to be replaced. Thus upgrading to software acoustic echo cancellation subsystems or system can be accomplished by replacing the definitions of the existing hardware MACROS with the software MACROS . After the hardware MACRO definitions are replaced the videoconferencing or telepresence system can immediately begin utilizing the software acoustic echo cancellation subsystems or instead of existing inflexible hardware acoustic echo cancellation systems.

When using the APIs of the software acoustic echo cancellation subsystems or of the present invention provide the benefits of being a drop in replacement for existing systems and other benefits as well. Being software based it offers virtually unlimited user control flexibility. The APIs have plural command sets associated with the audio topology for adjusting real time runtime parameters to configure any audio topology as required by the videoconference or telepresence system. The command sets increase capabilities beyond that of the existing hardware acoustic echo cancellation systems.

Also the parameters of the software acoustic echo cancellation subsystems or systems can be dynamically changed to reflect changes in the videoconferencing or telepresence requirements. The software acoustic echo cancellation subsystems or systems can also diagnose and troubleshoot unexpected states with minimal or no disruption to the ongoing session. The software acoustic echo cancellation subsystems or systems can also perform calibration adjustments to deliver the highest audio performance and can intelligently recover to known working states.

In one exemplary embodiment the video conferencing system of includes an audio interface device that is configured to transmit and receive audio signals. In another exemplary embodiment the audio interface is two audio interfaces 1 a first audio interface that couples to a plurality of local audio input and output devices and to the acoustic echo cancelling software and 2 a second audio interface that couples to the acoustic echo canceling software and to a codec . In another exemplary embodiment the audio interface of is a single unit that performs the functions of the aforementioned first and second audio interfaces.

In one embodiment under control of the new macros the acoustic echo cancelling software or is configured to generate a correction signal that mixes with the audio signals to reduce eliminate remove or cancel an echo. The acoustic echo canceling software or and or the new macros may be provided on a recordable medium in the form of programming instructions. In one embodiment the programming instructions are configured to be loaded onto the computer system server of or for installing the acoustic echo canceling software and or the new macros.

Referring to along with after the videoconferencing control software is initiated and after device control software is initialized MACROS are retrieved from a database for the devices present in the room step . At some point after system initialization a videoconference telepresence session is initiated and the meeting starts step the meeting topology is determined including the number of rooms studios and number of audio streams that will be involved in the conference step . Commands are then issued to configure devices in local rooms step . Upon reception of the commands device control software that is installed and implemented in an existing hardware acoustic echo cancellation system sends commands to the software echo canceller to configure signal routing.

The MACROS of the software acoustic echo cancellation subsystem send commands to the software echo canceller instead of a hardware echo canceller to configure signal routing step . Upon receiving the commands the software acoustic echo canceller begins a continuous process of feeding input signals specified as references to the echo canceller engine as corrections signal step . Using the correction signals each microphone input has individual reference signals cancelled step . The resulting audio signal is output to the audio codec for encoding and sending to remote rooms studios step .

When the conference is ended the videoconferencing software sends commands to stop streaming step to device control software . Upon reception of these commands device control software executes MACROS which are now defined to control the software acoustic echo canceller to stop processing step . Upon receipt of the stop processing commands the software acoustic echo canceller stop processing all signals step .

Referring back to aspects of the present invention include upgraded video conference equipment a method of upgrading and software for upgrading to enable the replacement of a hardware based acoustic audio cancellation system with a software based acoustic cancellation or system. In one embodiment the upgraded video conference system can include a computer system having control software acoustic echo cancelling software and macros configured to be executed by the control software to control the acoustic echo cancelling software.

The foregoing has described the principles embodiments and modes of operation of the present invention. However the invention should not be construed as being limited to the particular embodiments discussed. The above described embodiments should be regarded as illustrative rather than restrictive and it should be appreciated that variations may be made in those embodiments by workers skilled in the art without departing from the scope of the present invention as defined by the following claims.

