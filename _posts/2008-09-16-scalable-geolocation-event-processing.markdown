---

title: Scalable geo-location event processing
abstract: Traditional, server-oriented architectures have focused on providing location-based services by using publish-subscribe, efficient message buses, and filtering mechanisms. However, given an enterprise's unique requirements, these techniques have offered mixed results when used in an enterprise context. The present invention enables an efficient way to provide location-based services to an enterprise, as well as to integrate those location-based services into the enterprise's communications platform. A platform for supporting converged, location-based communications comprises one or more application servers such as a transactional server, a Session Initiation Protocol server, and so forth. In addition, the platform advantageously comprises an event processor for managing arriving location streams that are generated by targets being monitored. Such targets include the cell phones and WiFi handsets of the enterprise users, but can also include location data from various users arriving from multiple, fixed points such as credit card readers in stores.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08155672&OS=08155672&RS=08155672
owner: Avaya Inc.
number: 08155672
owner_city: Basking Ridge
owner_country: US
publication_date: 20080916
---
The present invention relates to telecommunications in general and more particularly to geo location event processing.

Location based services are information services that are accessible by or are at least enabled by mobile devices. These services are capable of utilizing the geographical position of one or more mobile devices that is the geo location of each device. Location based services include services for identifying a location relevant person asset or resource or other object and include determining the nearest automated teller machine or the whereabouts of a friend.

Initially location based services LBS were offered mainly by cellular telephony service providers to their subscribers. The cell phones themselves had much of the LBS functionality embedded. Over time however more and more of the LBS functionality was off loaded into application servers present in the service providers network infrastructure.

Location based services are not only applicable to cellular networks. Indeed enterprises such as businesses schools hospitals and so forth can use these services to enhance the customer experience and improve workforce operational efficiency. The function of location integration in enterprise communications includes the use of both real time and historical location information of mobile users in telecommunications services. The potential participants include an organization s customers employees vendors and partners.

There are a number of possible benefits to an enterprise s operations if location information can be incorporated into the communications context. Additionally the organization can provide better service to its customers if location can be automatically incorporated into a customer s service context. In general beneficial enterprise applications that can use location based services are both diverse and many.

There are various considerations in providing location based services that are somewhat unique to enterprises. A first consideration is the large number of location targets such as customers and employees. A second consideration is the large number of sources of location information such as cell phones WiFi enabled devices credit card readers and so forth. And a third consideration is the type of processing required for certain enterprise specific applications that require comparing the geo locations of multiple targets such as event correlation. These and other considerations pose significant obstacles to providing location based services within an enterprise context. Traditional server oriented architectures have focused on providing location based services by using publish subscribe efficient message buses and filtering mechanisms. However given the unique requirements of an enterprise these traditional techniques have offered mixed results when used in an enterprise context.

The present invention enables a more efficient scalable way to provide location based services to an enterprise as well as to integrate those location based services into the enterprise s communications platform. In accordance with the illustrative embodiment a platform for supporting converged location based communications comprises one or more application servers such as a transactional server a Session Initiation Protocol server and so forth. In addition the platform advantageously comprises an event processor for managing arriving location streams that are generated by targets being monitored. Such targets include the cell phones and WiFi handsets of the enterprise users but can also include location data from various users arriving from multiple fixed points such as credit card readers in stores.

Event processing is an emerging technology that is helping enterprise organizations build and manage responsive information systems. Event processing enables an enterprise to discover the events flowing through the organization understand the impact of the events on the enterprise and act on events in an appropriate and timely manner. Event processing enhances enterprise process management in many ways that traditional static systems cannot. Traditional enterprise process management tools often rely on simple rules triggered from databases or data warehouses in accordance with a server oriented architecture SOA in which updates take place daily or less frequently. Event processing s real time processing interface in contrast is geared toward an event driven architecture EDA and provides an organization with dynamic tools to better manage its enterprise processes and make decisions more quickly based on the immediate availability of information.

The primary difference between i a database management system based on server oriented architecture in the prior art and ii an event processing system is that while database management systems intermittently execute queries on static data in order to produce result sets an event processing server evaluates persistent event conditions on streaming data in order to detect events as they occur. In other words an event processing system is designed to handle real time continually changing data. Another critical difference between a database management system and an event processing system is the fact that a database management system is limited to the data that it contains at a given moment by contrast an event processing system can correlate data from different sources to create an event.

Where event correlation has been integrated into an enterprise system in the past it has generally been a customized embedded component as in a network management system rather than a generic programmable component. By featuring an event processor to provide location based services in an enterprise context instead of a database management system running on an application server the platform of the illustrative embodiment off loads the low level location stream processing from the application server.

Certain location based services are particularly well suited to the platform of the illustrative embodiment. Those services include real time asset monitoring location based push advertising location based service delivery and location based reminders. Furthermore more efficient dispatching or routing of mobile employees for sales delivery and customer support can be achieved. In addition there are interesting applications in specific vertical markets such as health care travel retail real estate and social networking. As those who are skilled in the art will appreciate after reading this specification additional services can be advantageously based on the event processor equipped platform of the illustrative embodiment.

The illustrative embodiment of the present invention is particularly well suited for an enterprise environment. However it will be clear to those skilled in the art after reading this specification how to make and use alternative embodiments which are well suited for non enterprise applications as well.

The illustrative embodiment of the present invention comprises a method for providing a location based service at a data processing system that comprises at least one event processor the method comprising receiving at the data processing system a request that pertains to an event of interest receiving at the at least one event processor a plurality of location streams each location stream corresponding to a different target in a plurality of targets and each location stream comprising one or more location events that are generated by or on behalf of its corresponding target and deriving at the at least one event processor the event of interest from among at least one location event that exists within at least one of the location streams the derivation being based on the request and generating a derived event stream that comprises the event of interest.

Location target for m 1 through M is an object that is capable of reporting its location or of having its location ascertained and reported on an ongoing basis via a location event stream. For example target can be a mobile telecommunications device such as a cell phone or a WiFi capable device. Location target can be representative of a person such as a worker of an enterprise of a thing such as an asset of an enterprise or of another type of object. Location data for location target can also arrive from a fixed source such as a credit card reader that reports on purchases made by each shopper target at a store.

Location stream collection infrastructure provides for the collection of location data from targets in which each target provides location objects as a function of time in a location event stream or simply location stream. As depicted in raw location streams from targets through M can be collected by while not being limited to one or more of the following nodes 

Infrastructure provides the collected location streams to location service platform as well as the timestamps that correspond to the location data being collected.

Various mechanisms exist within enterprise system to request and receive location streams. A first mechanism is subscription in which a subscriber sends a request to the target or to its location generator such as in a cellular network in order to receive location objects. If the request is accepted by the target then the target will publish location objects at some mutually agreed upon rate and or resolution to the subscriber subject to privacy and other constraints until the subscription is terminated or the subscription lifetime expires. The publisher maintains some state for each active subscription such as the identity of the subscriber network address and type of subscription. An advantage of publish subscribe is that it supports dynamic associations between sources and recipients of information.

A second mechanism is polling. For example a recipient could periodically send a request to the target for the latest location object or objects. An advantage of polling is that the recipient can directly control the rate of location object delivery.

A third mechanism is configuration whereby some control point or points in the system determine which targets deliver their location to which recipients. For example in an enterprise all field service personnel could have their company issued equipment configured to publish location objects to specified recipients.

A fourth mechanism is broadcast whereby a target sends location objects to all other devices attached to the network. Variations of broadcast include multicast and restricted area broadcast. An advantage of broadcast is its simplicity of operation.

Publish subscribe already described above is a common enterprise mechanism that is referred to throughout this specification as part of the illustrative embodiment of the present invention. It will be clear however to those who are skilled in the art how to make and use embodiments of the invention that use other mechanisms to connect targets and recipients including mechanisms already described such as polling configuration and broadcast. In addition as those who are skilled in the art will further appreciate these different embodiments can co exist in a given domain for different targets and or recipients and there can be hybrid combinations where location objects are delivered via intermediary nodes.

Location service platform which comprises one or more data processing systems provides one or more location based telecommunications services to location recipients through N through an interface that receives requests from the location recipients. A web services interface is used in the illustrative embodiment but as those who are skilled in the art will appreciate in some alternative embodiments other types of interfaces can be used to interconnect different applications and information systems. Those other types of interfaces include TCP connection message bus remote procedure call shared database CORBA peer to peer overlay and so forth.

Each location service processed by platform subscribes or otherwise gains access to real time location streams received from collection infrastructure . Each location recipient for n 1 through N is an application that performs a location dependent service such as targeted advertising sales alerting nearest sales call handling customer routing and other use cases that are described below.

Platform is also able to call SIP user agent for p 1 through P. As those who are skilled in the art will appreciate each call or session can be uni modal i.e. one of audio video and so forth or multi modal i.e. two or more media types transported . User agent can represent target or can represent another entity within enterprise system . Each user agent can also publish and subscribe to SIP events and user presence and can exchange instant messages with platform .

The salient components of platform are described below and with respect to . The salient tasks performed by platform are described below and with respect to . It will be clear to those skilled in the art after reading this specification how to make and use platform .

In the illustrative embodiment event processors through Q transaction application server and SIP application server and database server are software modules that execute at platform . However it will be clear to those who are skilled in the art after reading this specification how to make and use alternative embodiments in which some or all of the software modules identified are instead physically distinct data processing systems that execute the functionalities that correspond to the modules identified.

Event processor for q 1 through Q is an event filtering and correlation engine. A function of processor is to detect events on data streams. In accordance with the illustrative embodiment processor operates on the location data streams arriving from various targets as described in more detail below. Geographic and or temporal constraints are provided to event processor for the purpose of deriving events from the location streams being subscribed to.

In some embodiments event processor is programmable and uses an SQL like programming language. Written in Java event processor handles events by pre compiling SQL like scripts into Java byte code and then applying the rules of those scripts to the data streams that flow into its memory. When matches are detected output events are triggered. An example event handler is shown below in Table 1 which handler tests for user proximity to a specific position. As reflected in the example below when the test succeeds a notification event is sent to interested subscribers.

Processor is used as part of platform of the illustrative embodiment in the following manner. Location events in location streams arrive at processor from various targets. Transaction application server responds to incoming application requests by subscribing to specific location events or by performing queries for historical location information stored at database server . When an event of interest is triggered at event processor the event processor forwards a notification event to server .

Server then may use the event to trigger a callback to the subscribing application represented by one of location recipients through N initiate telephone calls to users or update rich presence attributes via SIP application server which users and attributes are represented by user agents through P or update user location history time stamps and so forth that are stored at database server .

SIP application server is able to create connections between two or more of user agents through P. For example with respect to initiating telephone calls sessions server can connect a user agent that represents a particular target to a user agent of a customer service representative a buddy s SIP user agent and so forth. In addition server can create multi party calls and conference calls that involve connecting user agents that might or might not include the target.

In accordance with the illustrative embodiment application server interworks with user agents through P in accordance with the Session Initiation Protocol SIP . As those who are skilled in the art will appreciate in some alternative embodiments server can interwork with the user agents in accordance with a different communication protocol such as H.323 or WSIP which is a SIP like protocol that uses web services.

Platform of the illustrative embodiment further comprises an application programming interface API for supporting a variety of use cases as shown below in Table 2. These location service methods allow applications to specify communication agents according to their positions rather than uniform resource identifiers URI . The particular location service executing at transaction processor in turn invokes services on event processor and on SIP application server in order to subscribe to location events and to signal communications to user agents respectively. The location service may also access historical location information in database .

In performing the tasks of the illustrative embodiment event processor offloads transactional server and SIP application server from the processing of the location streams and provides a powerful programming environment including event windows filters and event persistence. In particular in an enterprise environment the number of targets i.e. customers and employees can be especially high e.g. 100 000 concurrent targets etc. . At the same time each type of location service that is particularly applicable to an enterprise environment often requires multiple location streams to be simultaneously processed in order to generate the subscribed to events. These location based services constitute i monitoring of one or more assets of the enterprise ii pushing advertisements based on location iii delivering services or resources based on location iv transmitting reminders based on location and v tracking the density of one or more targets within a geographic area that is based on location for one or more geographic areas. Given the high number of targets combined with the need to process multiple location data streams the illustrative embodiment is well suited for this combination.

The combined rate of the incoming location event streams may exceed the capacity of a single event processor. In some embodiments of the present invention platform utilizes a scalable multi tiered configuration to divide the raw streams across multiple event processors i.e. processor through Q such that any pair of streams can still be correlated. The multi tiered configuration is depicted in . Each processor on the first tier receives some set of location streams that are within its capacity so that all location streams go to at least one first tier event processor. The assignment of streams can be by target geographic area affinity to a social network whose other members are handled by the same event processor customer priority application subscriptions or other criteria. Assignments can be static or dynamic. For example a target might re locate to a different country so the assigned tier event processor could change to one located in that country.

Subscriptions and application requests that can be handled at a single event processor go directly to the first tier. Such requests include proximity of a target to a fixed object or position proximity of two targets that are handled by the same event processor and sub sampling of a location stream. In contrast a request that cannot be handled by a tier event processor is forwarded within platform to a tier event processor. The selection of the tier event processor can be based on capacity previous assignments geographic proximity to the associated tier event processors or some other criteria. The tier event processor issues a subscription to the tier event processors for the necessary streams to process. It processes these streams and generates the necessary events or calls to subscribers or applications.

As those who are skilled in the art will appreciate the tiering of event processors benefits from various enterprise centric scenarios in that i only a fraction of the total number of raw streams will need to be correlated at any time and ii the streams forwarded to tier will usually be at a reduced resolution from those received at tier . As those who are skilled in the art will further appreciate additional tiers of event processors can be added to the event processor configuration in order to perform further derivations between larger sets of streams. Moreover the set of event processors through Q can be divided up between two or more tiers according to a hierarchy other than that implied by .

In some embodiments scaling of the event processors can be combined with failover and redundancy for fault tolerance. For example two event processors may be operated in a redundant mode such that each receives the same streams and performs the same processing. One of the two would act as the primary and deliver the results to the subscribers and applications. If the primary were to fail or be taken offline then the secondary would be switched into the primary role.

Another capability that exists among multiple event processors through Q is the persisting of location information at each event processor. This enables queries to be conveniently performed without consideration as to which specific event processor was responsible for a given stream at a given time.

The particular configuration of components that constitute platform as depicted in is representative of the illustrative embodiment. However it will be clear to those skilled in the art after reading this specification how to make and use alternative embodiments that feature different configurations of platform from that depicted. For example different event processor configurations are possible such as those with one or more event processors that are embedded standalone distributed directly connected connected via a message bus or connected via a publish subscribe interface. Also different configurations of transaction servers and or SIP application servers from that depicted are possible.

In the illustrative example event processor is embedded within location service platform a data processing system and is one of possibly multiple embedded event processors. However it will be clear to those who are skilled in the art after reading this specification how to make and use embodiments in which some or all of the event processors are instead standalone systems.

Additionally in the illustrative example provided location service platform receives a single request that pertains to a single event of interest. As those who are skilled in the art will appreciate however platform is capable of handling concurrently multiple requests from multiple subscribers for multiple events of interest.

At task platform receives from a requesting node in this case location recipient a request that pertains to an event of interest. In some embodiments application server performs this task. The request which can for example be a subscription request might comprise a geographic and or temporal constraint.

At task event processor of platform receives a plurality of location streams that correspond to the plurality of targets through M. Each location stream corresponds to a different target of the plurality of targets. Additionally each location stream comprises one or more location events that are generated by its corresponding target. As those who are skilled in the art will appreciate in some embodiments the location events in some or all of the location streams might be generated by another network node such as a position determining entity in a cellular network on behalf of the target.

At task event processor of platform derives the event of interest from among at least one location event that exists within one or more of the location streams that are being received. The derivation is based on the request received at task . The derived event of interest can be one of the location events or it can be inferred from a combination of location events. For example if a request is target density in geographic area of interest 10 when the number of targets in the specified area exceeds 10 then event processor generates a new event with the indicated information such as density threshold exceeded in the area of interest. 

In some embodiments platform provides for the integration of real time information other than location events and or historical location information e.g. stored in database server etc. into the logic of one or more event processors that are processing the events as well as persistent or contextual information beyond location information.

At task platform generates a derived event stream that comprises one or more events of interest as derived at task . In some embodiments application server performs this task. Platform provides the derived event stream to the requesting node in some embodiments.

At task in some embodiments platform generates a notification to call a SIP user agent based on the generating of the derived event stream at task . In some embodiments transaction application server notifies SIP application server to call the user agent. The user agent for example can represent one of targets through M or can represent another person or telecommunications device within enterprise system .

In some embodiments the SIP user agent to be called can be selected based on a customer profile that is associated with a target or can be selected based on customer service rep workload locale product line service tier or other information as used in customer care routing.

Platform continues to event process the request for the event of interest while location events continue to arrive in the location streams. As those who are skilled in the art will appreciate at some point the requesting node if a subscribing node might elect to unsubscribe from the event of interest.

It is to be understood that the disclosure teaches just one example of the illustrative embodiment and that many variations of the invention can easily be devised by those skilled in the art after reading this disclosure and that the scope of the present invention is to be determined by the following claims.

