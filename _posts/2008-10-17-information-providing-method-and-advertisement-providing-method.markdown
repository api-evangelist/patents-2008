---

title: Information providing method and advertisement providing method
abstract: This object is aimed to provide an advertisement providing system, etc. that defines a web API that contributes to the creation of an advertisement attached webpage for making it possible to distribute referral fees of the advertisement. A system carries out processing while taking a session ID generated by an advertisement intermediary service () among a website (), a web API () and the advertisement intermediary service (), wherein the website () creates a webpage including a result of processing by the web API (), a link for acquiring a resource of advertisement information, and a link having as a parameter a session ID which is called on selection of an advertisement. And returns the webpage to a web browser (), and the advertisement intermediary service () records an advertisement information request in association with the session ID when the web browser () requests the advertisement intermediary service () for an advertisement information resource and then returns the advertisement information resource to the web browser (), thereby attaining the object.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08862502&OS=08862502&RS=08862502
owner: Hitachi, Ltd.
number: 08862502
owner_city: Tokyo
owner_country: JP
publication_date: 20081017
---
The present invention relates to an information providing method and an advertisement providing method. More particularly the invention relates to a technique for providing an advertisement attached webpage generated by utilizing a web API which provides software capabilities on the Internet and defining web APIs that contributed to creation of the advertisement attached webpage for enabling distribution of referral fees for the advertisement.

Such a system as follows is widely utilized today the operator of a website published on the Internet makes a contract with an advertisement agent that runs an advertisement intermediary service and posts an advertisement for an enterprise distributed by the advertisement intermediary service on the webpage. And a referral fee is paid to the website operator based on the number of times the advertisement is displayed on viewers Web browsers or viewers select a link in the advertisement to move to a corresponding webpage of the enterprise or the number of times viewers select the advertisement to move to a corresponding page that sells the enterprise s products and buy such products and or the amount of purchase.

For instance AdSense Non Patent Document 1 of Google a registered trademark solicits Web operators to post advertisements on their webpages. Google has a Web operator post an advertisement on his webpage and pays a referral fee to the Web operator when a viewer of the webpage clicks a link in the advertisement.

A conventional mechanism for posting an advertisement on a website is conceptually illustrated in . When a webpage request is made to a website from a Web browser the website provides an advertisement attached webpage . Here the website typically transmits HTML containing a URL indicating the location at which advertisement information resources are stored and upon receiving the HTML the Web browser makes an advertisement information request to ask for resources from the URL of the advertisement information resources. When advertisement information is returned the Web browser displays advertisement information. Advertisement information is typically rendered using an image and or animation for catching viewers attention. Such an images or animation is designed as a link so that a page containing more detailed information typically a webpage of the enterprise posting the advertisement can be returned when a viewer selects the advertisement.

In the link introducer identification information is embedded. When a viewer of the webpage selects the advertisement on a web browser a notice of advertisement selection is sent to the advertisement intermediary service . Upon receiving the request the advertisement intermediary service redirects the viewer to the website of the enterprise that corresponds to the advertisement and displays a page corresponding to the advertisement on the web browser . Here the advertisement intermediary service counts the number of times the advertisement is selected for each piece of introducer identification information or the like by utilizing the introducer information embedded in the link of the advertisement. Based on the result of counting the advertisement agent determines an amount to pay as a referral fee.

The invention according to Patent Document 1 describes a method for the purchaser of a product to select a party to which a referral fee is paid such as when one buys a product through an affiliate advertisement.

The invention according to Patent Document 2 describes a method for embedding a web browser in a portion of an application having a GUI and displaying an advertisement on the browser. By doing so the invention realizes such control as to enable utilization of functions of the application only while the advertisement is displayed for example.

Web APIs which are mechanisms for providing software capabilities on the Internet are receiving attention. Web application developers can realize high performance web applications at low costs by combining web APIs provided by other developers.

Various types of web APIs are available such as user authentication syntax analysis of a given sentence retouch of a given image provision of map information and so forth. Information returned by a web API can be modified by a web application developer to be embedded in a webpage and displayed on a web browser. Because they permit modification even when advertisement information is returned together as a returned value from a web API a web application developer could eliminate the information making it difficult for the provider of the web API to gain referral fees for advertisements.

With the technique of Patent Document 1 although the purchaser of a product is allowed to select a party to pay a referral fee fair payment of referral fees is difficult because selection of whom to pay depends on the purchaser s judgment.

Also using the technique of Patent Document 2 web API developers can obtain an opportunity to gain advertisement revenues through an application running on a computer not through a webpage but the application is required to provide a GUI and the technique is not applicable to a web API that does not have a GUI.

In view of such problems an object of the present invention is to provide an advertisement providing system and an advertisement providing method for providing an advertisement attached webpage generated by utilizing a web API which provides software capabilities on the Internet and defining web APIs that contributed to creation of the advertisement attached webpage for enabling distribution of referral fees for the advertisement.

To attain the object an information providing method according to the present invention is an information providing method using a web API program that provides software capabilities on an Internet a web API utilizing program that utilizes the web API program and a web API call control program that controls calls to the web API program wherein web API call control is performed such that when the web API utilizing program is to call the web API program the web API utilizing program acquires key information issued by the web API call control program and uses the key information to call the web API program and the web API program confirms whether the key information received from the web API utilizing program is valid and returns a result of executing the web API program only if the key information is valid.

Furthermore in the information providing method of the invention web API call control is performed such that the web API utilizing program acquires a session ID from the web API call control program every time the web API utilizing program is to call the web API program and calls the web API program using the session ID as key information.

Furthermore in the information providing method of the invention web API call control is performed such that the web API utilizing program acquires from the web API call control program in advance a key that enables the web API utilizing program to call the web API program a plurality of times and uses the key to call the web API program.

Furthermore in the information providing method of the invention web API call control is performed such that the web API program sends key information received from the web API calling program to the web API call control program and the web API call control program verifies whether the key information received is valid information issued by the web API call control program and sends the result of verification to the web API program.

Furthermore in the information providing method of the invention web API call control is performed such that the web API program records the key information sent from the web API utilizing program and information that can identify a calling web API utilizing program and a called web API program in a log and regularly sends the log to the web API call control program and the web API call control program analyzes the log to verify whether the key information is valid.

Furthermore in the information providing method of the invention when a web API program that provides software capabilities on an Internet is utilized by one or more web API utilizing programs a usage amount of the web API program is measured by the web API program or the web API utilizing program sending trends of calling of the web API program to the web API call control program.

Furthermore in the information providing method of the invention the web API utilizing program calls the web API program using key information which is uniquely determined for each web API utilizing program and the web API program sends the key information to the web API call control program so that the web API call control program measures the usage amount of a web API program that has been called.

Furthermore in the information providing method of the invention a called web API program is identified by recording a web API program utilized by the web API utilizing program in a log or recording a web API utilizing program in which the web API program was called regularly sending the log to the web API call control program and analyzing the log by the web API call control program.

Furthermore in the information providing method of the invention both logs for the web API utilizing program and logs for the web API program are sent to the web API call control program to be compared with each other and any mismatch relating to a web API call between the logs is detected to find an invalid log.

Furthermore in the information providing method according to the invention the web API utilizing program acquires a session ID issued by the web API call control program before calling the web API program the web API call control program records the web API utilizing program to which the session ID has been issued and after the web API calling program calls the web API program using the session ID the web API program sends the session ID to the web API call control program so that the web API call control program identifies the calling web API utilizing program and the called web API program.

Also an advertisement providing method according to the invention is an advertisement providing method using a website that provides a webpage on an Internet wherein the website is a webpage that uses one or more web APIs and when an advertisement provided by an advertisement intermediary service is posted on the webpage and the advertisement posted on the webpage is selected a web API that was utilized by the website for creation of the webpage is identified and a consideration is paid to a provider of the web API.

Furthermore the advertisement providing method according to the invention comprises a web browser processing device on which the web browser is run a website processing device on which the website is run web API processing device on which the web API is run and an advertisement intermediary service processing device on which the advertisement intermediary service is run the processing devices being interconnected by a network wherein upon receiving a request for the webpage from the web browser the website processing device sends introducer identification information of an operator of the website to the advertisement intermediary service processing device acquires a session ID and advertisement identification information from the advertisement intermediary service processing device and calls the web API including the session ID in an argument the web API processing devices sends the session ID and the introducer identification information of the web API provider to the advertisement intermediary service processing device the advertisement intermediary service processing device verifies that the session ID is valid and records the session ID and the introducer identification information of the web API provider if the session ID is found valid on the advertisement intermediary service processing device the web API processing device executes the web API and returns a result of processing to the website processing device the website uses the result of processing a URL of advertisement information possessed by the advertisement intermediary service and the session ID to generate a webpage in which the session ID is included as a parameter in the URL for retrieving a resource of the advertisement information and returns the webpage to the web browser and when the web browser requests the resource of the advertisement information from the advertisement intermediary service processing device the advertisement intermediary service processing device records the request for the advertisement information in association with the session ID and returns the resource of the advertisement information to the web browser and the web browser displays the webpage generated by the website.

Furthermore the advertisement providing method according to the invention comprises a web browser processing device on which the web browser is run a website processing device on which the website is run a web API processing device on which the web API is run and an advertisement intermediary service processing device on which the advertisement intermediary service is run the processing devices being interconnected by a network wherein upon receiving a request for the webpage from the web browser the website processing device returns a page that contains a session ID requesting program a web API calling program and a page generating program to the web browser the web browser executes the programs contained in the returned page to thereby send introducer identification information of the web API provider to the advertisement intermediary service processing device upon receiving a request the advertisement intermediary service processing device carries out session ID generation and contributor recording and returns the session ID to the web browser the web browser sends the session ID and the introducer identification information of the web API provider to the advertisement intermediary service processing device the advertisement intermediary service processing device confirms that the session ID is valid and records the session ID and the introducer identification information of the web API provider if the session ID is found valid on the advertisement intermediary service processing device the web API processing device executes the web API and returns a result of processing to the web browser the web browser generates the webpage and when the web browser requests the resource of advertisement information from the advertisement intermediary service processing device the advertisement intermediary service processing device records the request for the advertisement information in association with the session ID and returns the resource of the advertisement information to the web browser and the web browser displays the generated webpage.

Furthermore the advertisement providing method according to the invention comprises a web browser processing device on which the web browser is run a website processing device on which the website is run a web API processing device on which the web API is run and an advertisement intermediary service processing device on which the advertisement intermediary service is run the processing devices being interconnected by a network wherein upon receiving a request for the webpage from the web browser the website processing device sends introducer identification information of the operator of the website to the advertisement intermediary service processing device acquires a session ID and advertisement identification information from the advertisement intermediary service processing device and makes a web API call including the session ID in an argument to the advertisement intermediary service processing device the advertisement intermediary service processing device confirms that the session ID is valid records the session ID and the introducer identification information of the web API provider and carries out the web API call the web API processing device executes the web API and sends the result of processing to the advertisement intermediary service processing device the advertisement intermediary service processing device sends the result of processing to the website processing device the website uses the result of processing the URL of advertisement information possessed by the advertisement intermediary service and the session ID to generate a webpage in which the session ID is included as a parameter in the URL for retrieving a resource of the advertisement information and returns the webpage to the web browser and when the web browser requests the resource of the advertisement information from the advertisement intermediary service processing device the advertisement intermediary service processing device records the request for the advertisement information in association with the session ID and returns the resource of the advertisement information to the web browser and the web browser displays the webpage generated by the website.

Furthermore the advertisement providing method according to the invention comprises a web browser processing device on which the web browser is run a website processing device on which the website is run a web API processing device on which the web API is run and an advertisement intermediary service processing device on which the advertisement intermediary service is run the processing devices being interconnected by a network wherein upon receiving a request for the webpage from the web browser the website processing device carries out a web API call to the advertisement intermediary service processing device the advertisement intermediary service processing device generates a session ID records introducer identification information of the web API provider records the introducer identification information of a called web API as a contributor with the session ID and makes a web API call to the web API processing device including the session ID in an argument in response to the call the web API processing device executes the web API and sends the result of processing to the advertisement intermediary service processing device the advertisement intermediary service processing device sends the result of processing and the session ID to the website processing device the website uses the result of processing the URL of advertisement information possessed by the advertisement intermediary service and the session ID to generate a webpage in which the session ID is included as a parameter in the URL for retrieving a resource of the advertisement information and returns the webpage to the web browser and when the web browser requests the resource of the advertisement information from the advertisement intermediary service processing device the advertisement intermediary service processing device records the request for the advertisement information in association with the session ID and returns the resource of the advertisement information to the web browser and the web browser displays the webpage generated by the website.

Furthermore in the advertisement providing method according to the invention when an advertisement displayed on the web browser generated is selected by a viewer the advertisement identification information and the session ID reach the advertisement intermediary service processing device and the advertisement intermediary service processing device records the selection and the session ID corresponding to the selection and the advertisement intermediary service redirects the web browser to a website of an enterprise related to the advertisement identification information to display a webpage corresponding to the advertisement.

Furthermore in the advertisement providing method according to the invention a website operator and a web API provider that contributed to generation of the webpage on which the advertisement is displayed are identified by utilizing a session ID with which advertisement information recorded in the advertisement intermediary service processing device was requested and extracting introducer identification information associated with the session ID.

Furthermore in the advertisement providing method according to the invention a website operator and a web API provider that contributed to generation of the webpage on which the advertisement has been selected are identified by utilizing a session ID which was used in selection of an advertisement recorded in the advertisement intermediary service processing device and extracting introducer identification information associated with the session ID.

Furthermore in the advertisement providing method according to the invention when a web API utilized by a website is identified by using not a session ID but a key that can uniquely identify a website the website acquires a key in advance that can uniquely identify the website and sends the key together when calling the web API the web API sends the key to the advertisement intermediary service the advertisement intermediary service maintains the key and the web API from which the key was sent in association the website sends a webpage in which a result of processing from the web API and an advertisement are embedded to the web browser the key is inserted as a parameter in a URL which is used on the web browser for retrieving an image or the like of the embedded advertisement information so that the key is passed to the advertisement intermediary service when the image or the like of the advertisement information is retrieved from the advertisement intermediary service the key is also inserted in a URL to which the browser moves when the advertisement is clicked so that the key is sent to the advertisement intermediary service when the advertisement is displayed on the web browser or the advertisement is clicked by a viewer thereby enabling viewing trends of the advertisement to be grasped and degree of contribution to an advertisement for each website is identified based on a number of viewings and a web API utilized on each website and the number of utilizations thereof are identified based on information that maintains the key and web APIs in association.

Furthermore in the advertisement providing method according to the invention one or both of the website and the web API maintains call logs for the web API with the session ID or the key and regularly sends the logs to the advertisement intermediary service and the advertisement intermediary service analyzes the logs to identify a web API utilized by the website.

Furthermore in the advertisement providing method according to the invention the advertisement intermediary service receives a log from the website and a log from the web API compares contents of the logs with each other and determines that a call is an authentic call when the two logs include an indication that the website called the web API or the web API was called.

The invention further provides a consideration distribution method for distributing to web API providers a consideration that accrues when an advertisement is displayed on a web browser or the advertisement is clicked wherein when a web browser requests a webpage on which the advertisement is displayed one or more web APIs that were utilized on a website that has received the request are identified and a consideration that has accrued is distributed to web API providers.

The invention further provides a consideration distribution method for distributing a consideration that accrues when an advertisement is displayed on a web browser or the advertisement is clicked to web API providers for each certain time period wherein a total amount of consideration that has accrued from the website within the certain time period and a number of times one or more web APIs were utilized by the website are determined from collected records on a website that contributed to the advertisement and web APIs that were utilized by the website and the total amount of consideration is distributed to the providers of the web APIs in accordance with the number of utilizations of the respective web APIs.

Furthermore the advertisement providing method of the invention is for selecting an advertisement for display in accordance with a type of a web API being utilized wherein the advertisement intermediary service manages a web API and one or more keywords relating to the web API manages advertisement information and keywords relating to the advertisement upon receiving a request for advertisement information from the web browser uses a session ID to identify a web API utilized or uses a key to identify a web API frequently utilized on the website retrieves keywords relating to the web API and selects advertisement information that contains the keywords so as to provide the web browser with an advertisement appropriate for a web API being utilized.

Furthermore in the advertisement providing method of the invention the usage amount of a web API for requests from the web browser that have occurred within a certain time period is measured instead of the usage amount of the web API for all requests from the web browser and the amount of consideration for contribution to the advertisement to be distributed to the web API is determined based on the result of measurement.

The present invention can provide an advertisement attached webpage which is generated utilizing a web API that provides software capabilities on the Internet define web APIs that contributed to generation of the webpage and enable distribution of a referral fee accruing from the advertisement.

A mechanism for a web API provider to gain advertisement revenues utilizing an advertisement intermediary service is conceptually illustrated in .

A web browser a website a web API an advertisement intermediary service and a website of an enterprise respectively run on a web browser processing device a website processing device a web API processing device an advertisement intermediary service processing device and an enterprise s website processing device. These devices are interconnected by a network. The processing devices are computers.

A website operator who wants to utilize the web API makes a contract with the advertisement agent to get introducer identification information. A web API provider who wants to gain referral fees also makes a contract with the advertisement agent to get introducer identification information.

On the website a session ID request is made to the advertisement intermediary service . At this point the introducer identification information of the website operator is sent. Upon receiving the session ID request the advertisement intermediary service generates and returns a session ID which is an ID for identifying a request from the web browser. The advertisement intermediary service records the combination of the session ID and the introducer identification information in a database or the like.

Next on the website an API call is made to call the web API . Here the session ID received from the advertisement intermediary service is sent to the web API . Also if needed data necessary for execution of the web API is also sent from the website to the web API .

To verify the session ID received the web API performs session ID confirmation to the advertisement intermediary service and sends the introducer identification information of the web API and the session ID.

The advertisement intermediary service checks if the session ID is valid based on such information as whether the ID was issued by the advertisement intermediary service or when it was issued whether it has not expired . If the session ID is found to be valid the combination of the session ID and the introducer identification information of the web API provider is recorded in a database or the like. The result is returned to the web API as the result of session ID confirmation .

If the ID is valid as a result of session ID confirmation the web API executes the functions of the API and returns a calling result to the website .

The website uses the calling result from the web API to compose HTML representing a webpage. Also for display of an advertisement the URL of an advertisement information resource is embedded in the HTML. In the URL the session ID and or an advertisement ID which is used for identification of the advertisement are embedded. The session ID is also embedded in a link which will be used for moving the viewer to a page providing more detailed information when the viewer has selected the advertisement on the web browser .

When the composed HTML for an advertisement attached webpage is sent to the web browser the web browser retrieves the resource to be embedded in the HTML from the location indicated by the URL. Advertisement information is one of resources and is obtained by making an advertisement information request to the URL. Advertisement information resources are managed by the advertisement intermediary service and the session ID is included in the URL of a resource utilized here. By recording the session ID and the fact that the advertisement information was requested the advertisement intermediary service can learn in connection with which session ID the advertisement information was requested.

Next the advertisement intermediary service returns the advertisement information requested to the web browser .

When the advertisement information is received by the web browser the information is displayed on the web browser .

If the advertisement intermediary service charges for display of an advertisement the service calculates a referral fee by identifying the number of times the advertisement has been displayed and a website operator and web API providers involved in display.

If the service charges when the advertisement displayed on the web browser is selected such as by clicking by a viewer the following process is also performed.

A link in the advertisement is a link to the advertisement intermediary service and the session ID and an advertisement ID which is used for identifying the advertisement are included as parameters in the URL so that the session ID and the advertisement ID are sent together when the advertisement is selected.

The advertisement intermediary service records the session ID included in the URL and the fact that the advertisement was selected in a database or the like and redirects the viewer to a corresponding page providing more detailed information about the advertisement the website of the enterprise with reference to the advertisement ID. As a result the enterprise s webpage is returned to and displayed on the web browser.

Selection or non selection of the advertisement and a website operator and web API providers associated with the session ID when the advertisement was selected which are recorded by the advertisement intermediary service are identified and a referral fee resulting from selection of the advertisement can be distributed among those who contributed to the advertisement based on a certain rule.

As a more specific example consider a web API for indicating famous people s birthday. When the web API receives a request it returns the names of famous persons who were born on a date passed as a parameter.

Assume that the operator of a website wants to add a function of displaying the names of famous persons whose birthday is today on his website by utilizing the web API.

A system configuration for realizing this is illustrated in . A web browser processing device on which the web browser runs a website processing device for returning webpages a web API processing device for providing software capabilities and an advertisement intermediary service processing device include communication sections through which they connect to a network .

The web browser processing device is a processing device on which the general web browser runs and detailed descriptions thereof are omitted as it has no particular features unique to the present invention.

The website processing device is a processing device that accepts a request from the web browser and returns information and includes a control section and a storage section . The control section includes a transmission reception section corresponding to a web server a page generating section a web API calling section and a session ID requesting section . Although not directly relevant to the present invention the storage section of a website typically has HTML and or an image .

The web API processing device performs processing appropriate for a request and returns the result requested by the requestor when a function of the web API is requested. In the present embodiment the web API processing device returns names of famous persons whose birthday is a date of interest. The web API processing device includes a control section and a storage section . The control section includes a transmission reception section a web API function section and a session ID confirmation requesting section . The web API function section returns names of famous persons whose birthday is a date of interest based on date. The storage section has a famous people s birthday table . The famous people s birthday table stores dates and the names of famous people who were born on the dates such that the dates and names are associated with each other.

The advertisement intermediary service processing device includes a control section and a storage section . The control section includes a session ID generating section a session ID confirming section a contributor recording section an advertisement requestor IP acquiring section an advertisement retrieving section a selection recording section a referral fee calculating section and a transmission reception section . The storage section has a website management table a web API management table a session management table a contributor recording table and an advertisement information storage table .

The website management table stores introducer identification information website URL account number and the like.

The web API management table stores introducer identification information web API URL account number and the like.

The session management table stores session ID time of generation advertisement requestors IP and selection non selection .

The advertisement information storage table stores advertisement ID classification advertisement images and enterprise URL .

First as preparation a web API provider makes a contract with the advertisement intermediary service registers the URL of a web API an account number for payment of referral fees and the like and receives introducer identification information issued. The introducer identification information and information registered by the web API provider are stored in the web API management table .

A website operator who wants to utilize the web API similarly makes a contract with the advertisement intermediary service registers the URL of his website an account number for payment of referral fees and the like and receives introducer identification information issued. The introducer identification information and information registered by the website operator are stored in the website management table .

A flow of processing performed when a page of a website is requested by the web browser is shown in . In accordance with the flow actions of the individual entities will be described.

When the viewer operates the web browser and makes a webpage request for a website the web browser transmits a webpage request to the website.

The website processing device uses the session ID requesting section to make a session ID request . With the request introducer identification information here shoukaisha site0978 is given as a parameter. A session ID is acquired by making an HTTP access to the advertisement intermediary service processing device as shown below for example 

While various types of processing are requested with an HTTP GET request in the present embodiment parameters may be passed using POST or Cookie.

Upon receiving the session ID request the advertisement intermediary service processing device generates a session ID using the session ID generating section and records the session ID as the session ID as well as the present time as the time of its generation in the session management table .

Next using the contributor recording section the session ID is recorded in a session ID field of the contributor recording table and the introducer identification information passed as a parameter is recorded in an introducer identification information field .

In addition to the session ID an advertisement ID and or a link character string for use as an advertisement may be returned.

As a further alternative advertisement classification may be passed in an argument and the advertisement intermediary service processing device may randomly choose an advertisement ID of an advertisement whose classification matches the classification in the argument from the advertisement information storage table .

Next the web API calling section is used to make a web API call . With this call the present date which is data necessary for execution of the API and the session ID are passed as parameters. Shown below is an example of a call in an HTTP access.

When the request has arrived the web API processing device sends session ID confirmation through the session ID confirmation requesting section and verifies the validity of the session ID to the advertisement intermediary service processing device . Here introducer identification information obtained in advance here shoukaisha api0888 is sent together. This can be realized by making the following HTTP access for example 

Upon receiving the request the advertisement intermediary service processing device checks whether the session ID passed in session id parameter is valid. Specifically the device uses the session ID confirming section to perform session ID confirmation . Validity of the session ID is determined based on whether the ID is present in the session management table whether time exceeding a certain amount of time e.g. five minutes has passed since the time of generation of the ID or the like.

If the session ID is found to be valid contributor recording is carried out. The contributor recording section is used to record the session ID and introducer identification information of the web API provider passed in shoukaisha id parameter in the contributor recording table .

The result of session ID confirmation is returned to the web API processing device . The result may be returned using XML as shown below for example 

In the example above the result of confirmation is contained in result tag and valid as an example is returned when the session ID is valid and invalid an example when the ID is not valid.

If the session ID is found to be valid on the web API processing device the function of the web API is executed by the web API function section . Specifically famous persons whose birthday is the date received in date parameter are retrieved from the famous people s birthday table .

A list of famous persons retrieved is returned as the calling result . It may be returned using XML as shown below for example.

If the session ID is found to be invalid on the web API processing device the caller of the web API is notified of the invalidity. An example is 

Upon receiving the result of executing the web API on the website processing device a page is generated using the result and the advertisement.

An example image of the generated page is shown in . At the top of the page an area for displaying famous people who were born today and an advertisement display area are laid out.

In the famous people s birthday display area the value returned from the web API is written converted to HTML.

The advertisement is embedded in the advertisement display area in the form of a link as shown below 

The value of session id parameter 0123456789abcdefg in the URL in the a tag or img tag is the value of session ID that has been obtained as a result of making the session ID request to the advertisement intermediary service processing device .

An advertisement ID to be embedded as koukoku id parameter may be the advertisement ID of an advertisement selected by the website operator in advance or if an advertisement ID is retuned with the session ID as shown above the advertisement intermediary service processing device may return the advertisement ID. Alternatively the entire link to the advertisement may be returned with the session ID by the advertisement intermediary service processing device . In that case a webpage with an advertisement can be realized by transcribing the character string of the link returned by the advertisement intermediary service processing device into the advertisement display area in the HTML as it is.

The website processing device returns the advertisement attached webpage to the web browser . The web browser analyzes the returned webpage and further requests lacking information if any.

In the present embodiment img tag is present in the advertisement link in the HTML returned as a webpage and the URL where the image is located is described in src attribute. The web browser accesses the URL described in src attribute and makes an advertisement information request .

In response to the advertisement information request the advertisement intermediary service processing device records the IP address of the advertisement information requestor namely the IP address of the web browser processing device in the advertisement requestors IP in the session management table as recording of advertisement information requestor s IP and then retrieves the advertisement image from the advertisement information storage table and returns it to the requesting web browser .

Although an image is returned as advertisement information in the present embodiment Flash JavaApplet or a moving image may also be utilized as a link. Alternatively an advertisement to be embedded could be obtained as HTML and displayed using iframe tag for embedding another piece of HTML in HTML or the like.

The viewer browses the webpage displayed on the web browser . If an interesting advertisement is displayed on the webpage the viewer selects the advertisement such as by clicking the advertisement.

When the advertisement is selected the web browser sends a request for advertisement selection to the URL of the link in the advertisement. The URL in the present embodiment is 

The advertisement intermediary service processing device records the selection of the advertisement by setting selected in the selection non selection field in the row of the session management table corresponding to the session ID. The initial value of the selection non selection field of the session management table is null.

Next the browser is redirected to the website of the enterprise http jigyousha page.com . The advertisement intermediary service processing device instructs the web browser to redirect to the enterprise s website and the web browser sends a request for the enterprise s webpage to the website processing device of the enterprise to retrieve the webpage of the enterprise.

Redirection refers to a process of returning a response to the web browser and sending a request automatically i.e. without involving the viewer to the URL to which the browser will be redirected i.e. the URL of the enterprise s website to retrieve and display the webpage as the destination of redirection as shown above.

This can be realized by returning a status code for redirection or and the URL as the destination of redirection http jigyousha page.com to the web browser as a response so as to automatically send a request to the destination URL using functions of the web browser to retrieve a page from the website processing device of the enterprise or by returning HTML containing such a tag shown below to send a request to http jigyousha page.com using functions of the web browser and retrieve the webpage of the enterprise.

How to calculate a referral fee is determined according to various policies. An example will be shown. The process here is performed by the referral fee calculating section .

The present embodiment assumes that the referral fee paid by the advertisement agent each time an advertisement is selected is fixed at 30 yen and when there is any web API that was involved in creation of a webpage on which the advertisement is displayed an equal referral fee is paid to the provider of the web API and the website operator. For example when two web APIs were utilized for creating a webpage on which an advertisement was selected 10 yen is paid to each the operator of the website and the providers of the two web APIs that is 30 yen in total.

A process flow is shown in . First a referral fee calculation table is created . The table maintains pairs of introducer identification information and referral fees having rows for all pieces of introducer identification information and zero is stored as the initial value of referral fee in each of the rows.

Next one of rows of the session management table that have time of generation falling within a time period for which a referral fee should be calculated is taken hereinafter data in the taken row will be called SC . For example for summation for August 2007 rows that have time of generation from 2007 Aug. 1 00 00 00 to before 2007 Sep. 1 00 00 00 are retrieved one by one.

It is checked whether the selection non selection field in SC is set to selected and if it is not selected the next row is taken.

If it is selected a referral fee is calculated. From the contributor recording table all rows that have the same session ID as the one in SC are extracted .

A referral fee to be paid to each introducer is determined by dividing the referral fee for one selection by the number of extracted rows .

The referral fee to be paid to each introducer is added to the value in the referral fee field of the row in the referral fee calculation table that corresponds to the introducer identification information in CC .

It is checked whether processing for all the rows extracted from the contributor table is completed and if not completed processing is repeated for the next row.

If processing for all the rows is completed it is then checked whether processing is completed for all the rows of the session management table that have time of generation falling within the time period for referral fee calculation . If not completed processing is repeated for the next row. If processing is completed for all of the rows referral fee calculation is terminated.

As referral fees for individual pieces of introducer identification information are stored in the referral fee calculation table the fees are paid to persons corresponding to those pieces of introducer identification information. Specifically the fees may be paid to their accounts by utilizing account numbers stored in the account number field of the website management table or the web API management table .

While the advertisement agent pays a referral fee when an advertisement is selected by a viewer in the present embodiment it may pay a referral fee each time an advertisement is displayed on the web browser of a viewer. In that case the step of checking whether the selection non selection field of SC is set to selected may be replaced with a step of checking that the advertisement requestor s IP in SC has been recorded.

Measures to reduce the risk of the advertisement intermediary service being deceived into paying a referral fee that is included in the concept of the invention will be described.

 1 In the present invention every time a page request is made to a website from a web browser the advertisement intermediary service issues and manages a session ID. As an alternative method contribution of a website operator or a web API provider may be indicated to the advertisement agent by supplying their introducer identification information to the advertisement intermediary service. However because this method permits introducer identification information to be supplied to the advertisement intermediary service even if a web API has not been actually utilized a fraud could be committed. Use of the session ID of the present invention makes fraudulent acts difficult because it enables checking of whether a session ID returned by making session ID confirmation to the advertisement intermediary service from a web API is one issued by the advertisement intermediary service whether too long time has not elapsed since its issuance or the like.

 2 Another possible way of fraud is to increase the degree of contribution by recording the introducer identification information of a web API provider into the contributor recording table more than one time by performing session ID confirmation a number of times when the web API is called with a certain session ID. Such a fraud can be prevented by establishing a rule that charging can be made only once for one session ID and checking whether a row having the same session ID and introducer identification information is already present when writing a contributor to the contributor recording table in the advertisement intermediary service and recording to the contributor recording table only when such a row does not exist. Alternatively such a fraud could be prevented by writing into more than one row of the contributor recording table and even if multiple rows containing the same pair of a session ID and introducer identification information are encountered at the time of calculation of referral fee performing processing counting those rows as one occurrence.

 3 A website operator is required to post an advertisement on his or her webpage for utilizing a web API. For such a reason as impairing the appearance of a webpage however some website operators might want to utilize a web API but not want to post an advertisement. Using the present invention when a link to an advertisement is not described in a webpage an advertisement information request will not be transmitted to the advertisement intermediary service from a web browser. In the invention when the advertisement intermediary service receives an advertisement information request it records the advertisement requestor s IP in the session management table. Thus when a webpage with no advertisement link embedded therein is provided an advertisement requestor s IP address is not recorded. Session IDs in rows of the session management table in which an advertiser requestor s IP is not recorded are found in the contributor recording table and from the introducer identification information contained in the first row found a website operator who is not displaying the advertisement can be identified. Once such a website operator has been identified some measures can be taken such as to warn him or stop him utilizing the web API.

Or if only recording of an advertisement requestor s IP is required an IP address can be recorded in the advertisement requestor s IP field of the session management table by sending an advertisement information request to the advertisement intermediary service not from the web browser but from the website processing device. In this case however as the same IP address is stored every time or only several particular IP addresses are stored in the advertisement requestor s IP field a suspicious website operator can be identified by analyzing the advertisement requestor s IP field of the session management table.

Using JavaScript or CSS an advertisement could be made invisible on a web browser even if advertisement information is obtained by the web browser. In this case advertisement selection rate would be extremely low. If such a website is found by checking the website management table session management table or contributor recording table one can actually view the website to see if the advertisement is displayed.

To be specific for each introducer in the introducer management table all session IDs of introducer identification information corresponding to the introducer are retrieved from the contributor recording table the number of session IDs is regarded as the number of times the webpage has been displayed and all such rows of the session management table that correspond to the session IDs retrieved and that have selected in the selection non selection field are retrieved the number of the retrieved rows is regarded as the number of selections . And if the number of selections divided by the number of times the webpage was displayed is below a threshold e.g. 0.01 it is checked whether the advertisement is being properly displayed such as by viewing the webpage.

The first embodiment has such advantages as follows. It can provide web API providers with an opportunity to gain advertisement revenues. By passing around a session ID at the time of communication among the advertisement intermediary service a web API and a website a mechanism that makes it difficult to commit fraudulent acts can be provided.

While the description of the present embodiment envisages a web API for indicating famous people s birthday various web APIs are available such as ones for user authentication syntax analysis of a given sentence retouch of a given image providing map information and so on. Some web APIs require data for their execution in which case data necessary for execution of a web API is applied instead of date used in the present embodiment. This also applies to the following embodiments.

While the first embodiment implements the session ID request web API call and page generation on the website processing device these processes may be realized on the web browser using a programming language running on the web browser such as JavaScript.

In this case the session ID requesting section the web API calling section and the page generating section which are provided in the website processing device in the first embodiment are provided in the web browser .

Specifically the website processing device sends a webpage in which the session ID requesting section web API calling section and page generating section are included using JavaScript or the like to the web browser . The sections are executed on the web browser .

Modifications to the first embodiment are indicated by bold lines. The following descriptions mainly focus on the modifications. When the webpage request is made by the web browser the website processing device accepts the request by way of the transmission reception section and returns a page including the session ID requesting section the web API calling section and the page generating section to the web browser .

First the web browser uses the session ID requesting section to make a session ID request to the advertisement intermediary service processing device . As a parameter it transmits introducer identification information.

In the second embodiment the domain of the source of the webpage displayed on the web browser i.e. the website processing device is different from that of the entity from which the session ID is requested i.e. advertisement intermediary service processing device . On the current web browser a direct access to a domain other than that of the source of webpages from JavaScript generally cannot be made for security reasons. A session ID requesting process using a method called JSONP which enables access to other domains will be described.

In a webpage a tag for obtaining JavaScript from the advertisement intermediary service processing device is written as shown below 

In callback parameter a method that should be called by the web browser when the session ID has been obtained is written. Also a called method needs to be defined in the webpage as shown below.

When the webpage containing the tag for obtaining JavaScript from the advertisement intermediary service processing device as described above is displayed the web browser sends an HTTP GET request to the advertisement intermediary service processing device .

Upon receiving the request the advertisement intermediary service processing device carries out session ID generation and contributor recording similar to those performed in the first embodiment and returns a response the session ID . The response is 

When the web browser receives the response it calls the receiveSessionID contained in the webpage shown above. By performing such processing access to a domain different from the one in which the webpage was retrieved can be made.

As in the first embodiment the advertisement intermediary service processing device may also return an advertisement ID or a link to an advertisement in addition to the session ID.

Next the web browser uses the web API calling section to make a web API call . As parameters date and the session ID are passed. This call is also made using JSONP as with the session ID request and description thereof is omitted. Processing performed on the web API processing device after the web API call is similar to that in the first embodiment.

When the processing is completed the web API processing device returns the calling result to the web browser .

The web browser uses the page generating section to generate a page including placement of an advertisement display of result of the web API call and the like.

If the generated webpage involves resources that has to be retrieved from outside the web browser performs a process for retrieving the resources. In the present embodiment image information contained in the advertisement link is acquired by making the advertisement information request . As the procedure after this process is similar to the first embodiment description thereof is omitted.

While the present embodiment shows an example where the session ID request web API call and page generation take place on the web browser only a portion of the processes may be performed on the web browser.

For example when the website processing device has received a webpage request it makes a session ID request creates a webpage containing the session ID obtained as well as the web API calling section and the page generating section and returns the page to the web browser. And the web browser may use the session ID to perform web API call and page generation.

The second embodiment has such advantages as follows. It is an effective method for use when it is desirable to dynamically call a web API in accordance with a change in state when a change in state has occurred due to input of a text character string or the like in an entry form on the web browser or when only a portion of a webpage rather than the entire page should be changed. For example it is effective when a form for entering date is provided and a web API is immediately called upon the viewer entering a date into the form to retrieve names of famous persons whose birthday is the date and rewrite only the famous people s birthday field on the webpage screen. These ways of processing are possible because in the present embodiment the web browser composes a screen utilizing the result of a web API call.

An embodiment will be described in which a web API is called via the advertisement intermediary service processing device instead of directly calling the web API processing device when a web API is called from a website.

While in the API call is made directly to a web API the present embodiment effects it via an intermediary service . The advertisement intermediary service in response to the API call calls the specified web API to get the calling result . After obtaining the calling result the advertisement intermediary service returns the result to the website .

A system configuration of the embodiment is shown in . A web API intermediary section is newly provided in an advertisement intermediary service processing device and the session ID confirmation requesting section of the web API processing device is eliminated.

A sequence chart is shown in in which differences from the first embodiment are indicated by bold lines. The following descriptions mainly focus on the different portions. The website processing device makes a web API call to the advertisement intermediary service processing device . It passes a calling scheme a called URL parameters and a session ID as arguments. The calling scheme is HTTP GET POST or the like.

By way of example when arguments are get http webapi yuumeijin birthday.com get names date 0811 and 0123456789abcdef such a request as shown below is sent to the advertisement intermediary service.

In the request xx represents a character string after encoding which is performed at the time of sending parameters in HTTP.

Upon receiving the request the advertisement intermediary service processing device makes session ID confirmation for the session ID received in session id parameter. Specifically validity of 0123456789abcdef as the session ID is checked using the session ID confirming section . If the session ID is invalid the advertisement intermediary service processing device notifies the website processing device of the invalidity of the session ID.

If the session ID is valid introducer identification information for the web API is retrieved . The retrieval can be realized by finding a row of the web API management table that contains a web API URL matching the called URL or that contains a host name matching the one included in the URL webapi yuumeijin birthday.com and taking the introducer identification information in that row.

In contributor recording the pair of the introducer identification information for the web API retrieved and the session ID is recorded in the contributor recording table using the contributor recording section .

Next web API call is performed. When the request according to the present embodiment is received the web API intermediary section sends an HTTP GET request to the URL shown below. Unlike in the first embodiment a session ID needs not be sent here. http webapi yuumeijin birthday.com get names date 0811

Upon receiving the request the web API processing device executes the web API function section to get a list of famous people whose birthday is the date received in date parameter and returns the list to the advertisement intermediary service processing device as the calling result .

The advertisement intermediary service processing device returns the list it received to the website processing device .

The third embodiment has such an advantage as follows. While the first embodiment requires a web API to include processing for accepting or verifying a session ID the third embodiment does not require such processing and thus involves less costs when an existing web API processing device is incorporated into the framework of the concept of the present invention.

In the third embodiment session ID request and web API call are separately performed from the website processing device . The fourth embodiment describes a case where session ID request and web API call are combined.

A processing sequence is shown in . Differences from are indicated by bold lines. The following description mainly focuses on the differences.

The system configuration of this embodiment is similar to the advertisement intermediary service processing device of except that the session ID confirming section eliminated.

Having received the webpage request the website processing device first makes a web API call . As arguments a calling scheme a called URL parameters and introducer identification information are passed. In a session ID is passed as an argument instead of introducer identification information.

Upon receiving the web API call the advertisement intermediary service processing device generates a session ID and performs contributor recording . The contributor recording stores the combination of the introducer identification information passed in the arguments and the session ID in the contributor recording table .

Then web API introducer identification information is retrieved and the web API introducer identification information is recorded by the contributor recording .

Upon a web API call the web API processing device retrieves a list of famous people whose birthday is the date passed in the arguments and returns the list as the calling result .

With the result from the web API the advertisement intermediary service processing device returns the calling result and the session ID to the website. In addition to the calling result and the session ID it may return an advertisement ID and or a character string of a link for displaying the advertisement together.

The fourth embodiment has the following advantages. In the process shown in a session ID and the result of a web API call can be obtained with one access to the advertisement intermediary service from the website processing device. Thus frequency of communications performed across a network can be decreased.

In the first to third embodiments a session ID can be first obtained and multiple web APIs can be called using the same session ID. In this case it is necessary to implement processing for passing around the session ID. In the fourth embodiment this processing for passing the session ID does not have to be performed if results of web API processing and an advertisement link are returned as a result of calling multiple web APIs. A need to call multiple web APIs can be addressed by posting an advertisement on each call. In this case because a web API and an advertisement are in a one to one relationship it is possible to display advertisements on a website limiting the types of advertisement to be output for each web API.

In the first embodiment each time an advertisement revenue accrues from clicking of an advertisement or the like web APIs that were utilized for creating the page on which the advertisement was clicked are identified and the advertisement revenue accrued is distributed.

The fifth embodiment describes a method for identifying the monthly usage of one or more web APIs called by a website and distributing the total referral fee obtained via the website among web API providers according to difference in usage of their web APIs.

For example assume that a revenue for this month from an advertisement posted on website A is 5 000 yen and the website A has utilized web API and web API 6 000 and 4 000 times respectively. As the numbers of times respectively represent 60 and 40 of the total number of calls of 5 000 yen 3 000 yen is paid to web API and 2 000 yen to web API . This is an example and paying a part of 5 000 yen to website A or the like is also possible.

First a referral fee calculation table is created and initialized . The referral fee calculation table stores pairs of introducer identification information for individual web APIs and referral fees and the initial value of referral fee is zero.

A call count storage table introducer identification information and the number of calls is created and initialized . The initial value of the number of calls is zero. Total referral fee is initialized . The initial value of the total referral fee is zero. For the total referral fee the sum of referral fees that have accrued through the website obtained at step is stored. The total number of web API calls is initialized . Its initial value is zero. For the total number of web API calls the number of calls for all the web APIs that have been called from the website obtained at step is stored.

One of rows of the session management table that contain time of generation falling within a time period for which a referral fee is calculated is taken hereinafter data in the row will be called SC . From the contributor recording table all rows that have the session ID in SC are extracted . It is checked whether any of the rows extracted from the contributor recording table has introducer identification information matching that in WC . If there is no such row the flow returns to step . If there is such a row it is determined whether the selection non selection field in is set to selected . If the field is selected a referral fee for one selection is added to the total referral fee . Next the rows extracted from the contributor recording table are taken one by one in order data in the row is called CC . One is added to the value in the row of the call count storage table that corresponds to the introducer identification information in CC . One is added to the total number of web API calls . It is checked whether processing for all the rows extracted from the contributor recording table is completed . If not completed the flow returns to step . If processing for all the rows is completed it is determined whether processing for all the rows of the session management table in which time of generation falls in the time period for referral fee calculation is completed. If not completed the flow returns to step . If completed referral fees to be distributed to web APIs are determined.

The rows of the call count storage table are taken one by one in order the rows are called YC . The total referral fee the number of calls of YC the total number of web API calls is calculated and the resulting value is stored in the row of the referral fee calculation table corresponding to the contributor identification information in YC . It is determined whether processing for all the rows of the call count storage table is completed . If not completed the flow returns to step . If competed it is checked whether processing for all the rows of the website management table is completed . If not completed the flow returns to step to perform similar processing for the next website.

The fifth embodiment showed a method of distributing a referral fee obtained via a certain website among web APIs utilized on the website in accordance with the ratio of their utilization. Although the fifth embodiment showed a referral fee distribution method applicable to the systems described in the first to fourth embodiments distribution according to utilization ratio can be realized without using a session ID. The sixth embodiment shows a method for realization that does not utilize a session ID. conceptually shows the embodiment.

Instead of a session ID a key predefined for each website is used to identify a website that utilized the web API . As the key introducer identification information issued by the advertisement agent may be used.

System configuration is shown in in which differences from are indicated by bold lines. Key is added to the website management table time and key are added to the contributor recording table an advertisement request management table is added to enable management of advertisement request time key and advertisement requestor s IP and an advertisement selection management table is added to enable management of advertisement selection time key and advertisement selector s IP . The session management table is eliminated.

The flow will be described using . When the web browser sends a webpage request to the website the website makes an API call key to the web API . The web API carries out key check sends introducer identification information and a key in order to verify that the key sent from the website is valid. The advertisement intermediary service checks whether the key is valid whether the key is stored in the website management table and if the key is found to be valid it stores the time key and introducer identification information for the web API in the contributor recording table . It then returns the result of key confirmation to the web API .

If the key is valid the web API executes processing of the web API and returns the calling result to the website . The website creates an advertisement attached webpage HTML in which the calling result and HTML and the like for advertisement display are embedded and returns the page to the web browser . The web browser sends an advertisement information request sending a key to the advertisement intermediary service to acquire advertisement information. The advertisement intermediary service adds the advertisement request time key and advertisement requestor s IP to the session management table . And it retrieves appropriate advertisement information from the advertisement information management table and returns the information . The web browser displays the advertisement information received.

When the viewer selects the advertisement advertisement selection sending a key is sent to the advertisement intermediary service . The advertisement intermediary service adds the advertisement selection time key and advertisement selector s IP to the advertisement selection management table . The advertisement intermediary service then redirects the web browser to the website of the enterprise . The website of the enterprise returns the webpage of the enterprise and the web browser displays the webpage .

Thereafter the total referral fee is determined for each website that corresponds to WC retrieved at step . The rows of the advertisement selection management table that have time of advertisement selection falling within a time period for which a referral fee should be calculated are taken one by one in order the rows are called KC . If the key in KC matches the key in WC a referral fee for one selection is added to the total referral fee . It is checked whether processing is completed for all the rows of the advertisement selection management table that have a time of advertisement selection falling within the time period for referral fee calculation. If not completed the flow returns to step . If completed calculation of total referral fee for websites corresponding to WC is finished.

Next the number of calls for one or more web APIs that were utilized by the website corresponding to WC is calculated. The rows of the contributor recording table that have a time falling within a time period for which a referral fee should be calculated are taken one by one in order the rows are called CC . If the key in CC matches the key in WC one is added to the value in the row of the call count storage table that corresponds to the introducer identification information in CC . One is added to the total number of web API calls . It is checked whether processing is completed for all the rows of the contributor recording table that have a time falling within the time period for referral fee calculation. If not completed the flow returns to step . If completed steps through which are the same as in are executed to calculate referral fees.

Because the present embodiment eliminates the necessity of the process to acquire a session ID from the advertisement intermediary service and thus reduces frequency of communications time required for processing requests from a web browser is expected to be shortened.

The method of the present embodiment utilizes a key each website already has while the first to fifth embodiments use a session ID generated for each request. Thus the sixth embodiment has the advantage of making it difficult to commit a fraud to maliciously perform key confirmation even if a web API is not called to pretend that the web API is frequently called.

An embodiment will be shown that sends usage of web APIs periodically such as monthly instead of notifying the advertisement intermediary service about usage every time a request is made.

The embodiment is conceptually illustrated in . In the session ID confirmation is requested and the result of session ID confirmation is obtained from the advertisement intermediary service on each request whereas in the website and the web API periodically send logs and the advertisement intermediary service summarizes the logs to identify web APIs that contributed.

A system configuration is shown in where portions enclosed by a bold line are the additions of the present embodiment.

On the website processing device and the web API processing device a log managing section is provided. The log managing section of the website processing device records calls to web APIs as log . The log managing section of the web API processing device records calls to web API as log

An example of log is shown in . As a log for a website and a log for a web API session IDs time of call calling introducer identification information and called introducer identification information are recorded as logs.

The log is sent periodically e.g. once a month to the advertisement intermediary service processing device.

Logs may be sent by running a program such as a web server for receiving logs on the advertisement intermediary service processing device so that the website processing device and the web API processing device periodically send logs to the server or running a server program such as a web server on the website processing device and the web API processing device so that the advertisement providing service periodically makes a log delivery request to the website processing device and web API processing device and the two devices send logs upon receiving the request.

Upon receiving the log the advertisement intermediary service processing device summarizes the log using a log summarizing section .

The 15 seconds at step is a rough guide of time required for a request to reach the callee from the caller and if this value is exceeded the call is invalidated because a fraudulent may have occurred. Of course a value other than 15 seconds may be used or this check may not be performed.

If the session ID and introducer identification information are valid at step the session ID and called introducer identification information of L are stored in the contributor recording table .

It is checked whether processing for all the rows of web API logs is completed and if not completed the flow returns to step . If completed processing is terminated.

Since logs are collected from both the website processing device and the web API processing device in the present embodiment a website and a web API have to collude to commit a fraudulent such as making a false report that the web API was used even if it was not actually utilized. The embodiment is thus expected to provide the effect of making fraudulent acts difficult. Of course logs may be collected and summarized from only one of the website processing device or the web API processing device.

Also while the present embodiment uses a session ID a key may be used as in the sixth embodiment. In that case a key of a web API is recorded in a log instead of a session ID. The key may be the same as the introducer identification information of the web API.

When a key is used the storage section of the advertisement intermediary service of will be similar to that of and the process of storing the session ID and called introducer identification information of L in the contributor recording table which is performed by the log summarizing section of is replaced with a process of recording the key and introducer identification information of L and the time of calling as the time.

Using the method of summarizing periodically collected logs according to the present embodiment performance is improved as compared to a method that checks session ID for each request. However it also has a shortcoming in that it can find a fraud only at the time of log summarization.

Its system configuration is shown in in which the portions enclosed by a bold line are the new additions. A keyword field is added to the web API management table and a keyword field is also added to the advertisement information storage table . More than one keyword can be registered in each of the keywords fields.

In the keyword field of the web API management table keywords related to each web API are registered. For example for a web API that indicates famous people s birthday famous people and birthday can be registered as keywords.

In the keyword field of the advertisement information storage table keywords related to each advertisement are registered. For example for an advertisement for a flower shop flower gift and birthday can be registered as keywords.

For example when the advertisement intermediary service receives the advertisement information request sending a session ID of it finds rows containing the session ID corresponding with the received one from the contributor recording table identifies introduced identification information contained in the row and extracts multiple keywords from a row the web API management table that contains the introducer identification information. Next the advertisement intermediary service searches for advertisements containing any of the keywords retrieved from the advertisement information storage table and returns rows it found to the web browser as advertisement information . When more than one row are found one that contains the most matching keywords may be adopted or one may be randomly selected.

Although in the description above a process of finding an advertisement is performed on each request based on session ID a field for registering web APIs to be utilized or web API keywords may be provided in the website management table so that web APIs that are utilized by a website or keywords for web APIs to be utilized may be registered in advance. This method is also applicable to an embodiment that uses keys or logs.

The foregoing embodiments summarize continuous usage of web APIs in the advertisement intermediary service. However instead of continuous summarization usage may be summarized only for a certain time period e.g. only the first week of each month every Wednesday 10 00 to 12 00 every day or at irregular intervals so as to reduce burden of the task.

Using the concept of the invention an opportunity to gain advertisement revenues can be given to web API providers who have had difficulty in gaining advertisement revenues. Also a website operator has to deliberately judge whether a fee based web API has an effect worth paying for it when he wants utilize a fee based web API. A web API provided according to the present concept is easy to introduce as it only requires posting of an advertisement for utilizing it. As described above the present concept is considered to have the effect of promoting utilization of web APIs or attracting more web API providers.

As has been described the present invention involves three parties web API provider website operator and advertisement agent. Advantages offered to the three parties by the invention are as follows.

Many of web APIs are currently published as freeware. Using the present invention a referral fee through an advertisement can be obtained from a website that utilizes a web API.

Enabled to easily create a sophisticated website utilizing web APIs. At present some web APIs are utilized based on a contract such as to pay a certain amount of yen per month or request with a website operator who wants to utilize a web API. Using the present invention which is a mechanism that allows a web API provider to gain a referral fee depending on the quantity of viewing for an advertisement posted on a website a website operator can utilize web APIs just by posting an advertisement on his or her website.

A website operator who wants to utilize a web API is required to post an advertisement in a manner specified by the provider of the web API and referral fees from that advertisement are paid only to the web API provider.

A website operator who wants to utilize a web API is required to post an advertisement in a manner specified by the provider of the web API and referral fees from that advertisement are paid to both the web API provider and the website operator.

In the latter case if viewing of the website utilizing the web API increases and viewing of the advertisement concomitantly increases more referral fees can be earned.

An advertisement agent is a party that intervenes between an enterprise that wishes to run advertisement and a website operator who wants to gain advertising revenues by posting an advertisement on his website. The difference referral fees paid to the website operator and or web API providers from the fee paid by the enterprise is the profit of the advertisement agent. As a fee paid by an enterprise wishing to run advertisement a fee per viewing is set in many cases. As more websites carry sophisticated and appealing advertisements with use of web APIs advertisements are more likely to be viewed. As a result enterprises that want to run advertisements are expected to increase and it could in turn increase the profit of advertisement agents.

