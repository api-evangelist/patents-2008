---

title: Inter-carrier management of messaging groups
abstract: A system and method to enable the efficient distribution of group messages sent from a mobile device that receives service from one telecommunications carrier, to groups of mobile devices that receive service from one or more other telecommunications carriers. A mobile device user or system operator generates a group distribution list for messages that are to be sent to two or more other users. The group distribution list is provided to a message distribution system that is comprised of distribution agents that are associated with each telecommunications carrier. Each distribution agent is responsible for routing a group message to those mobile devices that receive service from the associated telecommunications carrier.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08189609&OS=08189609&RS=08189609
owner: T-Mobile USA, Inc.
number: 08189609
owner_city: Bellevue
owner_country: US
publication_date: 20081230
---
As mobile devices have become ubiquitous the use of mobile devices to send text photos video and other messages has grown exponentially. For example some user demographics use instant messaging IM or texting applications on their mobile phones more often than they use their phones for making voice calls. A user may prefer sending messages to another user because it allows the other user to respond to the message when convenient. A user may also prefer sending messages to another user because the content of the message may be of low priority and not require an immediate response.

As messaging has increased the type of messaging has changed. Whereas messaging started as primarily a one to one communication method that allowed one user to exchange information with another user messaging has quickly grown to become a one to many communication method. In one to many communications a single user sends a message to two or more other users. Recipients of the message may respond directly to the sender or may send a response to the entire group for consideration. Such group messaging has become increasingly popular in order to allow social networks of individuals such as friends families or workplace colleagues to stay in touch with one another.

In order to accommodate the rapidly expanding number of messages on telecommunications networks telecommunications carriers have been required to quickly build out their network infrastructure. Maintaining the necessary routers switches billing systems customer service support and other network elements required to transmit messages between senders and recipients has proven to be a difficult task. As network traffic has scaled it has been challenging to build out infrastructure in a timely fashion to handle the increasing number of messages. The popularity of group messaging has only exacerbated this problem. Because a group message may be sent to a large number of individuals and because each individual may easily respond to all members in the group the number of messages sent between users quickly grows exponentially larger. In order to accommodate this growth providers of telecommunications services have been forced to look for strategies that allow the network messaging burden to be reduced while at the same time continuing to provide high quality and readily available messaging services to its users.

A system and method to enable the efficient distribution of group messages sent from a mobile device that receives service from one telecommunications carrier the home carrier to groups of mobile devices that receive service from one or more other telecommunications carriers remote carriers is disclosed. A mobile device user or system operator generates a group distribution list for messages that are to be sent to two or more other users. The group distribution list is provided to a message distribution system that is comprised of distribution agents that are associated with each telecommunications carrier. As will be described in additional detail herein each distribution agent is responsible for routing a group message to those mobile devices that receive service from the associated telecommunications carrier. That is when a group message is sent by a user the group message is routed by the home distribution agent to those mobile devices serviced by the home carrier. The group message is also transmitted by the home distribution agent to the appropriate remote distribution agents. Each remote distribution agent distributes the received message to the intended recipients. By distributing group distribution lists to remote distribution agents and by having the home and remote distribution agents distribute to those recipients that are associated with the corresponding telecommunications carriers the disclosed distribution system minimizes the message traffic between carriers and allows each telecommunications carrier to determine the most efficient manner to deliver messages to its users.

In some embodiments the group distribution list is provided to a home distribution agent that is associated with the telecommunications carrier that provides service to the sender s mobile device. The group distribution list is stored as a master group identification record. The home distribution agent analyzes the master group identification record to identify intended recipients in the record that receive telecommunications service from other carriers. If the group identification record contains intended recipients that receive service from other carriers the home distribution agent generates a partial group identification record for each carrier. Each partial group identification record contains a list that identifies those mobile devices that receive services from the corresponding carrier. Each partial group identification record is therefore a subset of the master group identification record. The home distribution agent transmits each partial group identification record to remote distribution agents that are incorporated in or associated with the other carriers. In this manner the message distribution system is configured to enable group message delivery with each remote distribution agent having only information about users serviced by the associated carrier.

In some embodiments the master group identification record is provided to the home distribution agent and remote distribution agents. Each distribution agent analyzes the record and distributes messages only to those mobile devices that are serviced by a telecommunications carrier associated with the distribution agent.

In some embodiments the home distribution agent enables the user or system operator that created a group distribution list to update the group distribution list by adding modifying or deleting members of the list. If a user adds modifies or deletes a member of a group distribution list the home distribution agent transmits updated distribution information to remote distribution agents. The updated distribution information may be transmitted to all remote distribution agents or only to those distribution agents that are associated with an added modified or deleted member of a group.

In some embodiments the group message is formatted in accordance with a mobile phone messaging standard such as for example the Short Message Service SMS or Multimedia Messaging Service MMS standards. In some embodiments the group message is formatted according to an Instant Messaging IM standard e.g. Session Initiation Protocol for Instant Messaging and Presence Leveraging Extensions SIP SIMPLE or Extensible Messaging and Presence Protocol XMPP to enable near real time communication between three or more users.

Various embodiments of the invention will now be described. The following description provides specific details for a thorough understanding and an enabling description of these embodiments. One skilled in the art will understand however that the invention may be practiced without many of these details. Additionally some well known structures or functions may not be shown or described in detail so as to avoid unnecessarily obscuring the relevant description of the various embodiments. The terminology used in the description presented below is intended to be interpreted in its broadest reasonable manner even though it is being used in conjunction with a detailed description of certain specific embodiments of the invention.

To facilitate the distribution of group messages to recipient mobile devices a distribution system is provided that is comprised of distribution agents . . . that are each associated with a carrier. One distribution agent the home distribution agent is associated with the carrier providing service to the sending mobile device. As depicted in if mobile device acts as the sending device the home distribution agent is distribution agent . The other distribution agents . . . are associated with the carriers providing service to the recipient mobile devices. As will be described in greater detail herein the contents of a group distribution list may be copied in whole or in part to all of the distribution agents . . . . When a mobile device user sends a message to all members of the group distribution list each distribution agent is responsible for ensuring that the message is forwarded to those mobile devices that receive service from the associated carrier. For example if a user of mobile device sends a message to a group that comprises mobile devices and then distribution agent for Carrier A ensures that that the message is forwarded to mobile device and distribution agent for Carrier B ensures that the message is forwarded to mobile device and distribution agent for Carrier N ensures that the message is forwarded to mobile devices and . Each distribution agent ensures that the message is forwarded by duplicating and sending the message itself or interacting with other carrier systems to ensure that the message is forwarded. By having each distribution agent ensure that messages are routed to those recipients that are associated with the corresponding telecommunications carrier the disclosed distribution system minimizes the message traffic between carriers. For example the disclosed distribution system only requires that a message be forwarded once from distribution agent to distribution agents . . . . The disclosed distribution system also allows each telecommunications carrier to determine the most efficient manner to deliver messages to its users. For example a message may be sent between carriers using an IM based e.g. SIP SIMPLE or XMPP standard but may be translated to other standards e.g. SMS or MMS by a distribution agent before distribution to its members.

In some embodiments the distribution agent may be implemented as an XML Document Management Server XDMS and the group identification records stored as shared XML documents. The group management component may create modify or delete members of a group using commands formatted in the XML Configuration Access Protocol XCAP such as GET PUT and Delete. In some embodiments the interface of the distribution agent may be exposed as a Representational State Transfer REST or SOAP formerly known as Simple Object Access Protocol interface in order to allow exchange of data. Those skilled in the art will appreciate that other implementations are of course possible.

Those skilled in the art will appreciate that the distribution agent may be implemented on any computing system or device. Suitable computing systems or devices include server computers multiprocessor systems microprocessor based systems network devices minicomputers mainframe computers distributed computing environments that include any of the foregoing and the like. Such computing systems or devices may include one or more processors that execute software to perform the functions described herein. Processors include programmable general purpose or special purpose microprocessors programmable controllers application specific integrated circuits ASICs programmable logic devices PLDs or the like or a combination of such devices. Implementing software may be stored in memory such as random access memory RAM read only memory ROM flash memory or the like or a combination of such components. Software may also be stored in one or more storage devices such as magnetic or optical based disks flash memory devices or any other type of non volatile storage medium for storing data. Software may include one or more program modules which include routines programs objects components data structures and so on that perform particular tasks or implement particular abstract data types. The functionality of the program modules may be combined or distributed across multiple computing systems or devices as desired in various embodiments.

Returning to at a decision block the home distribution agent determines whether all group members in the master group identification record are receiving service from the home carrier i.e. the carrier that services the sending mobile device . If all group members share the same home carrier then further distribution of group routing information to distribution agents ceases. Since all messages to the group will be routed by the home distribution agent there is no additional need for the home distribution agent to distribute group identification records to other distribution agents.

If however at decision block some of the group members in the master group identification record receive service from carriers other than the home carrier then processing continues at a block . At block the home distribution agent selects a first other carrier from the group distribution list. For example in the example depicted in the home distribution agent may select Carrier B for processing. At a block the home distribution agent identifies all of the members of the group that receive service from the selected carrier. That is the distribution agent parses the list of group members to identify all members that are served by the selected carrier. At a block the home distribution agent creates a partial group identification record that is to be distributed to a remote distribution agent associated with the selected carrier. The partial group identification record contains sufficient information for the remote distribution agent to identify those group members that are serviced by the selected carrier. The partial group identification record is typically a subset of those members that are identified in the master group identification record . depicts a representative table that contains a partial group identification record . In the depicted example the partial group identification record only contains those members that are identified as receiving service from Carrier B. The first row of the table contains the group identifier which is the unique code used to identify the group. The second row of the table contains the group nickname . The third row of the table contains a reference to the home distribution agent where the master group identification record resides. As will be described in greater detail herein the identity of the home distribution agent allows a message recipient to reply to a message and have the reply routed to the rest of the group. Each of the subsequent rows in the table represents a member of the defined distribution group that receives service from the selected carrier. Each member is identified by a name and a phone number email address IP address or other address that allows messages to be sent to the member.

Returning to at a block the home distribution agent sends the partial group identification record to the remote distribution agent associated with the selected carrier. The partial group identification record stores sufficient information to allow the remote distribution agent to route messages that are addressed to the group to each member serviced by the associated carrier. The home distribution agent is responsible for the successful delivery of the partial group identification records to the remote distribution agents. In some cases to ensure reliable service the home distribution agent may implement a store and forward mechanism e.g. for SMS or MMS to ensure that delivery occurs.

At a decision block the home distribution agent determines whether there are additional carriers associated with members of the distribution group. If there are no additional carriers further distribution of group routing information to distribution agents ceases. If there are additional carriers associated with members of the distribution list processing continues at a block . At block the home distribution agent selects the next carrier for processing. For example in the example depicted in the home distribution agent may select Carrier C for processing. The processing in blocks is then repeated to create and send a partial group identification record to the selected carrier. For example depicts a representative table that contains a partial group identification record for Carrier C. The partial group identification record contains a list of those members that receive service from Carrier C that are identified in the master group identification record .

At decision block the home distribution agent again determines whether there are additional carriers associated with members of the distribution group. If there are no additional carriers further distribution of group routing information to distribution agents ceases. One of the advantages of the disclosed distribution system is that the group identification records that are used by the distribution system to route group messages only need to be provided to those distribution agents that will actually route a message. In addition to reducing the size and number of messages transmitted between carriers it also preserves the confidentiality of member information for members that are associated with other carriers.

Once group routing information has been distributed to the distribution agents the distribution system is prepared to route group messages from a sender to multiple recipients. is a signaling diagram that depicts inter carrier and carrier to mobile device messaging when group messages are being routed from a sending mobile device to recipient mobile devices. A sending mobile device initially sends a message that is addressed to a group of recipients. The message is received by a home carrier and the distribution agent associated with the home carrier compares the received message with the stored master group identification records to identify the appropriate master group identification record and determine routing information for the group members. For those members of the group that are serviced by the home carrier the distribution agent causes the message to be replicated and sent to the recipient mobile devices . For those members of the group that are serviced by remote carriers the home distribution agent causes the message and the group identifier to be forwarded to the appropriate remote distribution agent. For example the home distribution agent sends a first message to a distribution agent at a first remote carrier and a second message to a distribution agent at a second remote carrier . The first and second messages contain the group identifier and the message including the identity of the sender that is to be delivered to recipient group members. The distribution agent at the first remote carrier receives the message analyzes the received group identifier to identify the appropriate remote identification record and causes the message to be delivered to recipient mobile devices that are contained in the identified remote identification record. Similarly the distribution agent at the second remote carrier receives the message analyzes the received group identifier to identify the appropriate remote identification record and causes the message to be delivered to recipient mobile devices that are contained in the identified remote identification record. For offline members the messages may be archived for subsequent delivery. In this fashion the group message sent by the sending device is distributed to all recipient mobile devices while minimizing the number of messages that are sent between carriers. Moreover each carrier is provided individual control over the manner in which group messages are distributed in its own network.

When a recipient of a group message responds to the message the group identification records can similarly be used to route the reply message to the group members. is a signaling diagram that depicts inter carrier messaging when a reply message is sent to a group message. A replying mobile device initially sends a reply message in response to a group message. The message is received by the remote carrier and the distribution agent associated with the remote carrier compares the received message with the partial group identification record to determine routing information. For those members of the group that are serviced by the remote carrier the distribution agent causes the message to be replicated and sent to the recipient mobile devices . Since the partial group identification record does not contain a record of users serviced by other carriers the remote distribution agent sends a message to the home distribution agent. The message contains the group identifier and the message including the identity of the replier that is to be delivered to the group members. The message is received by the distribution agent associated with the home carrier . The home distribution agent uses the group identifier to locate the corresponding master group identification record and determine routing information for those group members not serviced by remote carrier . For those members of the group that are serviced by the home carrier the home distribution agent causes the message to be replicated and sent to the recipient mobile devices . The distribution agent also causes a reply message to be replicated and sent to the original sending mobile device . For those members of the group that are serviced by remote carriers the home distribution agent causes the message and the group identifier to be forwarded to the appropriate remote distribution agent. For example the home distribution agent sends a message to the distribution agent at the first remote carrier . The distribution agent at the first remote carrier receives the message analyzes the received group identifier to identify the appropriate remote identification record and causes the message to be delivered to recipient mobile devices that are contained in the identified remote identification record. In this fashion the reply message sent by the replying mobile device is distributed to all members of the group while minimizing the number of messages that are sent between carriers.

As described herein the distribution agents rely on group identification records to route messages to members of a group. It will be appreciated that groups may not be static however and that group members may be added removed or modified. is a flow chart of a process for updating group identification records that are stored at home or remote distribution agents. At a block the home distribution agent receives updated information pertaining to a member of a group. The updated information may be received for example from a user that created the group list or from a system operator. Change requests are forwarded to the home distribution agent since the home distribution agent manages the master group identification record. At a block the home distribution agent updates the master group identification record with the new member information. At a decision block the home distribution agent determines whether the updated information pertains to a member that receives service from a remote carrier. If the updated member doesn t receive service from a remote carrier i.e. the updated member receives service from the home carrier then no further updating of group identification records is necessary and the process terminates. If the updated member receives service from a remote carrier then processing continues to a block . At block the home distribution agent sends a message to the remote distribution agent associated with the remote carrier. The message may contain updated member information that needs to be applied to the partial group identification record or the message may simply contain a new partial group identification record for the remote distribution agent. At a block the remote distribution agent receives the changed member information and updates the partial group identification record to reflect the changed member information. By propagating member changes to the appropriate distribution agent the distribution system ensures that group messages will be accurately routed to the intended recipients. For SMS and MMS short codes may be used as a destinator and mapped to a group identificator in the home carrier s network.

The operation of the distribution system has been described so far in the context of sending SMS or MMS formatted messages between mobile devices. In some embodiments it may be desired to implement instant messaging between members of a group. For example it may be beneficial for instant message IM communication to be enabled to allow near real time communication between three or more users. In such cases the distribution system and method disclosed herein may be appropriately modified to facilitate the real time communication. For example an IM session may be constructed using Push over Cellular PoC where the group ID is contained in the destination URI. In this case SIP sessions are created between the distribution agents and group members and torn down later on . The same mechanism may be used for session based IM relying on SIP SIMPLE that is SIP sessions may be created between the distribution agents and group members and subsequently torn down. In contrast for pager mode IM relying on SIP SIMPLE no SIP sessions are created. A group message is forwarded to each remote distribution agent serving members of the group. The same mechanism can be applied for other instant messaging technologies such as XMPP however TCP sessions need to be open between the distribution agents and members of the groups.

The distribution system described herein relies upon a master group identification record being maintained at the home distribution agent and partial group identification records being maintained at the remote distribution agents. In some embodiments however the master group identification record may be distributed to all remote distribution agents . . . . If the master group identification record is distributed to all remote distribution agents each distribution agent would be responsible for parsing the master group identification record in order to identify and deliver messages to those mobile devices that receive service from the associated carrier. Moreover if any change is made to the group distribution list such as by adding deleting or modifying a member of the group the distribution system would need to update the master group identification record that is maintained at each distribution agent. Further modifications to the processes described herein when a master group distribution record is distributed to all remote distribution agents will be readily apparent to one skilled in the art.

From the foregoing it will be appreciated that specific embodiments of the invention have been described herein for purposes of illustration but that various modifications may be made without deviating from the spirit and scope of the invention. For example while depict tables whose contents and organization are designed to make them more comprehensible by a human reader those skilled in the art will appreciate that the actual data structure s used by the facility to store this information may differ from the tables shown in that they for example may be organized in a different manner may contain more or less information than shown may be compressed and or encrypted and may be optimized in a variety of ways. As another example although the identity of carriers are depicted as being stored in the master identification record with each group member it will be appreciated that the carrier information may be determined at the time of analysis by the home distribution agent or at another time. As still another example although the phrase telecommunications carrier is used throughout the telecommunications carrier may be an internet service provider or other service provider to a mobile device. Accordingly the invention is not limited except as by the appended claims.

